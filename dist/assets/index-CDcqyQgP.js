(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();const v={EN:{flight:"Flight",date:"Date",flightPlaceholder:"e.g. LX2810",saveTitle:"Save",reset:"Reset",client:"Client mode",crew:"Crew mode",lblLang:"Language",exportJSON:"Export JSON",importJSON:"Import",exportPNG:"PNG",rights:"All rights reserved",chips_apero:"Aperitif",chips_meal:"Main",chips_tc:"Tea & Coffee",chips_fiche:"Pax record",filter_all:"All seats",filter_toserve:"To serve",filter_clear:"To clear",filter_sleep:"Sleeping",filter_later:"Serve later",lgServed:"âœ… Served",lgclear:"ðŸ§¹ Cleared",flowTitle:"Order flow",flowNowTitle:"Service path â¬‡ï¸",flowLaterTitle:"Orders to take â¬‡ï¸",flowClearTitle:"To clear â¬‡ï¸",flowAperoTakenTitle:"Orders taken â¬‡ï¸",flowTaken:"Taken",flowEmptyTaken:"No orders taken yet",flowTCTakenTitle:"Orders taken â¬‡ï¸",flowTakeOrder:"Order",flowServeTag:"Serve",flowClearTag:"To clear",flowEmptyLater:"No orders left",flowEmptyClear:"Nothing to clear",seatmapTitle:"Seatmap ({L} | {R})",seat:"Seat",trayShort:"Tray",apLabel:"Aperitif",mealLabel:"Main",hdrConfig:"Curtain & configuration",lblLayout:"Aircraft",lblRows:"Rows",secMenuTitle:"Menu",menuModeAuto:"Auto",menuModeManual:"Manual",menuOutbound:"Outbound",menuInbound:"Inbound",menuDayService:"Day service",menuBreakfast:"Breakfast",menuBreakfastType:"Breakfast type",menuBreakfastStandard:"Normal",menuBreakfastNight:"Out of night stop",menuSelectContext:"Select outbound/inbound and service to load menu.",menuPickDate:"Select a flight date to load the menu.",menuSelection:"Menu selection",menuAutoPlaceholder:"Placeholder menu until DB is provided.",menuAutoMissing:"Menu data pending. You can switch to manual mode.",autoMenu_coldCutsPlatter:"SWISS Saveurs Cold Cuts Platter",autoMenu_granolaMilk:"Granola with milk",autoMenu_nightstopNote:"Out of nightstop menu",autoMenu_gruyereEggRoll:"GruyÃ¨re egg roll with mountain herbs, sautÃ©ed shiitake mushrooms and tomatoes",autoMenu_appenzellerOmelette:"Omelette with Appenzeller cheese, rÃ¶sti, spinach and cherry tomatoes",autoMenu_beefTenderloinPorcini:"Grilled beef tenderloin with porcini mushroom sauce, potato gratin and broccoli",autoMenu_truffleTriangoli:"Truffle triangoli with white wine truffle sauce, spinach and Sbrinz cheese",autoMenu_chickenMascarponePolenta:"Chicken breast with jus de volaille, mascarpone polenta, red cabbage and brussels sprouts",autoMenu_trofieMushroom:"Trofie pasta with mushroom cream sauce, glazed salsify, roasted leek, pumpkin and pumpkin seeds",autoMenu_crepeRicottaSpinach:"Savoury crÃªpe with ricotta and spinach, grilled vegetables, pan-fried potatoes",autoMenu_scrambledEngelberg:"Scrambled eggs with Engelberg Abbey mountain cheese and spinach, potato rÃ¶sti",autoMenu_beefBourguignonPuree:"Beef bourguignon, potato purÃ©e and glazed root vegetables",autoMenu_cheeseSpaetzleOnionApple:"Cheese spaetzle with fried onions and apple slices",autoMenu_eggSouffleMushroom:"Egg soufflÃ© with tomatoes and cheese, mushroom sauce and broccoli",autoMenu_asparagusOmelette:"Omelette with asparagus and sauce hollandaise, parsley potatoes",autoMenu_sauteedChickenPolenta:"Sauteed chicken breast with jus, mascarpone polenta, brussels sprouts, braised red cabbage",autoMenu_gratinatedCheeseSpaetzle:"Gratinated cheese spaetzle with apple and fried onions",autoMenu_pendingNote:"Menu data will be loaded automatically when provided.",autoMenu_outOfRotation:"Selected date is outside defined rotations.",lblViande:"Option 1",lblVege:"Option 2",hdrInventaire:"Inventory",invPlateaux:"Trays",invViande:"Option 1",invVege:"Option 2",invSpecial:"SPML",spml:"SPML",add:"Add",preHeader:"Pre-order",preAdd:"Pre-order",close:"âœ–ï¸",mdPass:"Passenger",mdOcc:"Seat occupied",mdSleepTxt:"ðŸ˜´ Sleeping",mdType:"Pax type",mdAdult:"Adult",mdChild:"Child",mdInfant:"Infant",mdStatus:"Status",mdLang:"Language",mdEatWith:"Eat together with",mdEatWithPh:"e.g. 12B",mdLater:"Serve later",mdLaterCustom:"Time",mdLaterSet:"Set time",mdLaterCancel:"Cancel",mdLaterCustomBtn:"Custom time",mdNotes:"Notes",mdAperoNotes:"Drink / aperitif notes",mdTCNotes:"Tea & coffee notes",serveAperitif:"Order aperitif",mdMeal:"Meal",mdNormal:"Normal choice",optNormalMeat:"Option 1",optNormalVeg:"Option 2",optNormalTray:"Tray (no casserole)",mealDrinkTitle:"Meal drinks",mealDrinkNotes:"Meal drink notes",passengerNotesPlaceholder:"e.g. DE only, no nuts",aperoNotesPlaceholder:"e.g. Sparkling water, white wine, peanuts",mealDrinkNotesPlaceholder:"e.g. Sparkling water, white wine, peanuts",tcNotesPlaceholder:"e.g. Long coffee, sugar",meatPlaceholder:"e.g., Beef in red-wine sauce",vegPlaceholder:"e.g., Vegetarian lasagna",preAddPlaceholder:"e.g., Gluten-free pasta",optStatusOther:"Other",mdSpml:"SPML",mdPre:"Pre-order",serveMeal:"Serve main",cancelService:"Cancel service",clearTray:"Tray cleared",undoClearTray:"Undo tray clearing",modalTabFiche:"Pax record",modalTabApero:"Aperitif",modalTabMeal:"Main",modalTabTC:"Tea & Coffee",ordered:"ordered",eatTogether:"ðŸ½ï¸ Eat together with",eatTogetherPH:"e.g. 4C",clear:"Clear",moveSeat:"ðŸ” Move pax",moved:"Moved",swapped:"Swapped",pickDestSeat:"Pick destination seat",moved:"Moved",swapped:"Swapped",tcCH:"Swiss",tcForeign:"Foreign",serveTC:"Serve Tea & Coffee",serveMealDrink:"Order drink",histTcServed:"Tea & Coffee served at",histMealDrinkServed:"Meal drink ordered by",serveNoFood:"No food",serveNone:"No drink",lgSleep:"ðŸ˜´ Sleeping",lgLater:"â³ Serve later",lgChoice:"ðŸ½ï¸ Choice saved",lgInfant:"ðŸ‘¶ Infant",lgChild:"ðŸ§’ Child",lgTogether:"ðŸ¤ Eat together",legendShow:"Show legend",legendHide:"Hide legend",bulkOccStart:"Mark multiple seats",bulkOccApply:"Mark {n} seat(s) as occupied",bulkOccClear:"Clear selection",bulkOccHint:"Click seats to select them, then apply.",bulkOccSelected:"{n} seat selected",bulkOccSelectedPlural:"{n} seats selected",bulkOccCancel:"Cancel selection",bulkOccConfirm:"Confirm marking {n} seats as occupied?",bulkOccBlocked:"Seat already occupied",alertSeatEmpty:"Seat not occupied.",alertChoose:"Choose a meal first (normal, SPML or pre-order).",alertNoTrays:"No trays available.",alertStock:"Insufficient stock for",alertDepleted:"depleted.",alertPickTime:"Pick a time.",resetConfirm:"Confirm",preAddLabelRequired:"Enter a pre-order name",spmlCodeRequired:"Select a SPML code",secHistoryTitle:"History (newest on top)",histTitleSet:"Title set:",histApServed:"Aperitif served at",histApOrdered:"Aperitif ordered at",histMealDrinkOrdered:"Meal drinks ordered at",histTcOrdered:"Tea & coffee ordered at",histApCanceled:"Aperitif canceled for",histMealServed:"Main served at",histCanceled:"Service canceled for",resetDone:"Flight reset.",remindersTitle:"Upcoming reminders",remindServe:"ðŸ”” Reminder: serve",histViewLabel:"View",histScope_all:"All events",histScope_seat:"By seat",histScope_type:"By type",histLblSeat:"Seat",histLblType:"Type",histAscLbl:"Oldest first",histType_mealDrinkServed:"Meal drink served",histType_apServed:"Aperitif served",histType_tcServed:"Tea & Coffee served",histType_mealServed:"Main served",histType_apOrdered:"Aperitif ordered",histType_tcOrdered:"Tea & Coffee ordered",histType_apCanceled:"Aperitif canceled",histType_serviceCanceled:"Service canceled",histType_trayCleared:"Tray cleared",histType_trayUncleared:"Undo tray clearing",histType_reset:"Flight reset",histType_seatMoveStart:"Move pax",histType_seatMoved:"Seat moved",histType_seatSwapped:"Seats swapped",histType_text:"Notes",histNewest:"(newest on top)",histOldest:"(oldest on top)",histNewestBtn:"Switch to oldest on top",histOldestBtn:"Switch to newest on top",optStatusOther:"Other",tcTitle:"Aperitif",tcDrink:"Drink",tcService:"Service",tcNotes:"Notes",tcGroupSoft:"Softs",tcGroupAlcohol:"Alcohol",tcGroupHot:"Hot",tcLblAlcohol:"Alcohol",tcLblHot:"Hot",tcCatSoft:"Soft",tcLblSoft:"Soft",tcLblWater:"Water",tcLblJuice:"Juice",tcLblCoca:"Coca-Cola",tcSoftWater:"Water",tcSoftJuice:"Juice",tcSoftCoca:"Coca-Cola",tcSoftSprite:"Sprite",tcSoftTonic:"Tonic",tcWaterStill:"Still",tcWaterSpark:"Sparkling",tcJuiceApple:"Apple",tcJuiceOrange:"Orange",tcJuiceTomato:"Tomato",tcCocaClassic:"Classic",tcCocaZero:"Zero",tcLemon:"Lemon",tcSalt:"Salt",tcPepper:"Pepper",tcExtras:"Options",tcCatCafe:"Coffee",tcCatDeca:"Decaf",tcCatThe:"Tea",tcCatInf:"Infusion",tcCatChoco:"Caotina",tcLblChoco:"Caotina",tcChocoBrand:"Caotina",tcMilk:"Milk/Cream",tcMilkCreme:"Cream",tcMilkAvoine:"Oat milk",tcMilkLait:"Milk",tcMilkNone:"None",tcSweet:"Sweetener",tcSweetSugar:"Sugar",tcSweetSub:"Substitute",tcSweetNone:"None",tcTeaType:"Tea type",tcTeaEnglish:"English breakfast",tcTeaCamomille:"Chamomile",tcInfusion:"Infusion",tcInfCam:"Chamomile",tcPur:"Neat",tcRocks:"On the rocks",tcBaileys:"Baileys",tcIce:"Ice",tcCatDig:"Digestif",tcDigestif:"Digestif",tcDigJW:"Johnnie Walker",tcDigJB:"Jim Beam (Bourbon)",tcDigCognac:"Cognac",tcDigBaileys:"Baileys",tcCatBeer:"Beer",tcBeer:"Beer",tcBeerQ:"QuÃ¶llfrisch Lager Blonde",tcBeerC:"Calvinus White",tcBeerL:"Leermond (alcohol-free)",tcCatChamp:"Champagne",tcChampagne:"Champagne",tcChampPH:"Notes (e.g., brand, rosÃ©â€¦)",tcCatVin:"Wines",tcWines:"Wines",tcRed:"Red",tcWhite:"White",tcVinPH:"Notes (e.g., grape, commentâ€¦)",tcCatHot:"Hot drinks",tcMilkTitle:"Milk / Cream",tcSugarTitle:"Sugar",tcTeaTitle:"Tea",tcAlcoholTitle:"Alcoholic drinks",tcSoftTitle:"Soft drinks",tcTeaEnglish:"English Breakfast",tcTeaVert:"Green tea",tcTeaMenthe:"Mint tea",tcTeaCamomille:"Chamomile tea",tcHotWater:"Hot water",tcWater:"Water",tcCola:"Cola",tcJuice:"Juice",tcSprite:"Sprite",tcTonic:"Tonic",tcStill:"Still",tcSpark:"Sparkling",tcClassic:"Classic",tcZero:"Zero",tcOrange:"Orange",tcApple:"Apple",tcTomato:"Tomato",tcCaotina:"Caotina",jsonRestored:"Session restored from JSON",invalidFile:"Invalid file."},FR:{flight:"Vol",date:"Date",flightPlaceholder:"ex : LX2810",saveTitle:"Enregistrer",reset:"RÃ©initialiser",client:"Mode client",crew:"Mode Ã©quipage",lblLang:"Langue",exportJSON:"Export JSON",importJSON:"Importer",exportPNG:"PNG",rights:"Tous droits rÃ©servÃ©s",tcGroupSoft:"Softs",tcGroupAlcohol:"Alcool",tcGroupHot:"Chaud",tcLblAlcohol:"Alcool",tcLblHot:"Chaud",chips_apero:"ApÃ©ritif",chips_meal:"Plat",chips_tc:"ThÃ© & CafÃ©",chips_fiche:"Fiche pax",filter_all:"Tous les siÃ¨ges",filter_toserve:"Ã€ servir",filter_clear:"Ã€ dÃ©barrasser",filter_sleep:"En train de dormir",filter_later:"Servir plus tard",lgServed:"âœ… Servi",lgclear:"ðŸ§¹ DÃ©barrassÃ©",flowTitle:"Ordre de service",flowNowTitle:"Chemin de service â¬‡ï¸",flowLaterTitle:"Commandes Ã  prendre â¬‡ï¸",flowClearTitle:"Ã€ dÃ©barrasser â¬‡ï¸",flowAperoTakenTitle:"Commandes prises â¬‡ï¸",flowTaken:"Pris",flowEmptyTaken:"Aucune commande prise",flowTCTakenTitle:"Commandes prises â¬‡ï¸",flowTakeOrder:"Commande",flowServeTag:"Servir",flowClearTag:"Ã€ dÃ©barrasser",flowEmptyLater:"Aucune commande",flowEmptyClear:"Rien Ã  dÃ©barrasser",seatmapTitle:"Plan cabine ({L} | {R})",seat:"SiÃ¨ge",trayShort:"Plateau",apLabel:"ApÃ©ritif",mealLabel:"Plat",hdrConfig:"Rideau & configuration",lblLayout:"Appareil",lblRows:"RangÃ©es",secMenuTitle:"Menu",menuModeAuto:"Auto",menuModeManual:"Manuel",menuOutbound:"Aller",menuInbound:"Retour",menuDayService:"Service de jour",menuBreakfast:"Petit-dÃ©jeuner",menuBreakfastType:"Type de petit-dÃ©jeuner",menuBreakfastStandard:"Standard",menuBreakfastNight:"Retour de night stop",menuSelectContext:"SÃ©lectionne le sens et le service pour afficher le menu.",menuPickDate:"SÃ©lectionne une date de vol pour charger le menu.",menuSelection:"SÃ©lection du menu",menuAutoPlaceholder:"Menu indicatif en attendant la base.",menuAutoMissing:"DonnÃ©es menu en attente. Passe en manuel si besoin.",autoMenu_coldCutsPlatter:"Plateau de charcuterie SWISS Saveurs",autoMenu_granolaMilk:"Granola au lait",autoMenu_nightstopNote:"Menu retour de night stop",autoMenu_gruyereEggRoll:"Rouleau d'Å“ufs au gruyÃ¨re, herbes des montagnes, shiitakÃ©s sautÃ©s et tomates",autoMenu_appenzellerOmelette:"Omelette Ã  l'Appenzeller, rÃ¶sti, Ã©pinards et tomates cerises",autoMenu_beefTenderloinPorcini:"Filet de bÅ“uf grillÃ©, sauce aux cÃ¨pes, gratin de pommes de terre et brocoli",autoMenu_truffleTriangoli:"Triangoli Ã  la truffe, sauce au vin blanc Ã  la truffe, Ã©pinards et fromage Sbrinz",autoMenu_chickenMascarponePolenta:"SuprÃªme de poulet, jus de volaille, polenta au mascarpone, chou rouge et choux de Bruxelles",autoMenu_trofieMushroom:"PÃ¢tes trofie, sauce crÃ©meuse aux champignons, salsifis glacÃ©s, poireau rÃ´ti, courge et graines de courge",autoMenu_crepeRicottaSpinach:"CrÃªpe salÃ©e Ã  la ricotta et aux Ã©pinards, lÃ©gumes grillÃ©s, pommes de terre sautÃ©es",autoMenu_scrambledEngelberg:"Å’ufs brouillÃ©s au fromage de l'abbaye d'Engelberg et Ã©pinards, rÃ¶sti",autoMenu_beefBourguignonPuree:"BÅ“uf bourguignon, purÃ©e de pommes de terre et lÃ©gumes racines glacÃ©s",autoMenu_cheeseSpaetzleOnionApple:"SpÃ¤tzlis au fromage gratinÃ©s, oignons frits et pommes",autoMenu_eggSouffleMushroom:"SoufflÃ© aux Å“ufs, tomates et fromage, sauce aux champignons et brocoli",autoMenu_asparagusOmelette:"Omelette aux asperges et sauce hollandaise, pommes de terre persillÃ©es",autoMenu_sauteedChickenPolenta:"SuprÃªme de poulet poÃªlÃ©, jus, polenta au mascarpone, choux de Bruxelles, chou rouge braisÃ©",autoMenu_gratinatedCheeseSpaetzle:"SpÃ¤tzlis au fromage gratinÃ©s, pommes et oignons frits",autoMenu_pendingNote:"Les donnÃ©es de menu se chargeront automatiquement dÃ¨s qu'elles seront fournies.",autoMenu_outOfRotation:"La date choisie est hors des rotations dÃ©finies.",lblViande:"Option 1",lblVege:"Option 2",hdrInventaire:"Inventaire",invPlateaux:"Plateaux",invViande:"Option 1",invVege:"Option 2",invSpecial:"SPML",spml:"SPML",add:"Ajouter",preHeader:"PrÃ©commande",preAdd:"PrÃ©commande",close:"âœ–ï¸",mdPass:"Passager",mdOcc:"SiÃ¨ge occupÃ©",mdSleepTxt:"ðŸ˜´ Dort",mdType:"Type de pax",mdAdult:"Adulte",mdChild:"Enfant",mdInfant:"BÃ©bÃ©",mdStatus:"Statut",mdLang:"Langue",mdEatWith:"Manger avec",mdEatWithPh:"ex : 12B",mdLater:"Servir plus tard",mdLaterCustom:"Heure",mdLaterSet:"DÃ©finir l'heure",mdLaterCancel:"Annuler",mdLaterCustomBtn:"Heure personnalisÃ©e",mdNotes:"Notes",mdAperoNotes:"Boisson / notes apÃ©ritif",mdTCNotes:"Notes thÃ© & cafÃ©",serveAperitif:"ApÃ©ritif commandÃ©",mdMeal:"Plat",mdNormal:"Choix normal",optNormalMeat:"Option 1",optNormalVeg:"Option 2",optNormalTray:"Plateau (sans cocotte)",mealDrinkTitle:"Boissons repas",mealDrinkNotes:"Notes boissons repas",passengerNotesPlaceholder:"ex : DE uniquement, sans cacahuÃ¨tes",aperoNotesPlaceholder:"ex : eau gazeuse, vin blanc, cacahuÃ¨tes",mealDrinkNotesPlaceholder:"ex : eau gazeuse, vin blanc, cacahuÃ¨tes",tcNotesPlaceholder:"ex : CafÃ© allongÃ©, sucre",meatPlaceholder:"ex : BÅ“uf sauce vin rouge",vegPlaceholder:"ex : Lasagnes vÃ©gÃ©tariennes",preAddPlaceholder:"ex : PÃ¢tes sans gluten",optStatusOther:"Autre",mdSpml:"SPML",mdPre:"PrÃ©commande",serveMeal:"Plat servi",cancelService:"Annuler service",clearTray:"Plateau dÃ©barrassÃ©",undoClearTray:"Annuler dÃ©barrassage",modalTabFiche:"Fiche pax",modalTabApero:"ApÃ©ritif",modalTabMeal:"Plat",modalTabTC:"ThÃ© CafÃ©",ordered:"commandÃ©",moveSeat:"ðŸ” DÃ©placer pax",moved:"DÃ©placÃ©",swapped:"Ã‰changÃ©",eatTogether:"ðŸ½ï¸ Manger avec",eatTogetherPH:"ex : 4C",clear:"Effacer",pickDestSeat:"Choisis le siÃ¨ge de destination",moved:"DÃ©placÃ©",swapped:"Ã‰changÃ©",tcCH:"Suisse",tcForeign:"Ã‰tranger",serveTC:"ThÃ© & CafÃ© servi",serveMealDrink:"Commander boisson",histTcServed:"ThÃ© & CafÃ© servi Ã ",histMealDrinkServed:"Boisson repas commandÃ©e par",serveNone:"Pas de boisson",serveNoFood:"Pas de plat",lgSleep:"ðŸ˜´ Dort",lgLater:"â³ Plus tard",lgChoice:"ðŸ½ï¸ Choix enregistrÃ©",lgInfant:"ðŸ‘¶ BÃ©bÃ©",lgChild:"ðŸ§’ Enfant",lgTogether:"ðŸ¤ Manger ensemble",legendShow:"Afficher la lÃ©gende",legendHide:"Masquer la lÃ©gende",bulkOccStart:"Marquer plusieurs siÃ¨ges",bulkOccApply:"Marquer {n} siÃ¨ge(s) occupÃ©s",bulkOccClear:"Tout dÃ©sÃ©lectionner",bulkOccHint:"Clique sur les siÃ¨ges puis valide.",bulkOccSelected:"{n} siÃ¨ge sÃ©lectionnÃ©",bulkOccSelectedPlural:"{n} siÃ¨ges sÃ©lectionnÃ©s",bulkOccCancel:"Quitter la multi-sÃ©lection",bulkOccConfirm:"Confirmer le marquage de {n} siÃ¨ges occupÃ©s ?",bulkOccBlocked:"SiÃ¨ge dÃ©jÃ  occupÃ©",alertSeatEmpty:"SiÃ¨ge non occupÃ©.",alertChoose:"Choisissez d'abord un plat (normal, SPML ou prÃ©commande).",alertNoTrays:"Plus de plateaux disponibles.",alertStock:"Stock insuffisant pour",alertDepleted:"Ã©puisÃ©.",alertPickTime:"Choisir une heure.",resetConfirm:"Confirmer",preAddLabelRequired:"Entrez un nom de prÃ©commande",spmlCodeRequired:"SÃ©lectionnez un code SPML",secHistoryTitle:"Historique (dernier en haut)",histTitleSet:"Titre dÃ©fini:",histApServed:"ApÃ©ritif servi Ã ",histApOrdered:"ApÃ©ritif commandÃ© Ã ",histMealDrinkOrdered:"Boissons repas commandÃ©es Ã ",histTcOrdered:"ThÃ© & cafÃ© commandÃ©s Ã ",histApCanceled:"ApÃ©ritif annulÃ© pour",histMealServed:"Plat servi Ã ",histCanceled:"Service annulÃ© pour",resetDone:"Vol rÃ©initialisÃ©.",remindersTitle:"Rappels Ã  venir",remindServe:"ðŸ”” Rappel: servir",histViewLabel:"Affichage",histScope_all:"Tous les Ã©vÃ©nements",histScope_seat:"Par siÃ¨ge",histScope_type:"Par type",histLblSeat:"SiÃ¨ge",histLblType:"Type",histAscLbl:"Du plus ancien au plus rÃ©cent",histType_mealDrinkServed:"Boisson repas servie",histType_apServed:"ApÃ©ritif servi",histType_tcServed:"ThÃ© & CafÃ© servi",histType_mealServed:"Plat servi",histType_apOrdered:"ApÃ©ritif commandÃ©",histType_tcOrdered:"ThÃ© & CafÃ© commandÃ©",histType_apCanceled:"ApÃ©ritif annulÃ©",histType_serviceCanceled:"Service annulÃ©",histType_trayCleared:"Plateau dÃ©barrassÃ©",histType_trayUncleared:"Annuler dÃ©barrassage",histType_reset:"RÃ©initialisation vol",histType_seatMoveStart:"DÃ©placement pax",histType_seatMoved:"SiÃ¨ge dÃ©placÃ©",histType_seatSwapped:"SiÃ¨ges Ã©changÃ©s",histType_text:"Notes",histNewest:"(rÃ©cent en haut)",histOldest:"(ancien en haut)",histNewestBtn:"Basculer vers ancien en haut",histOldestBtn:"Basculer vers rÃ©cent en haut",optStatusOther:"Autre",tcTitle:"ApÃ©ritif",tcDrink:"Boisson",tcService:"Service",tcNotes:"Notes",tcCatSoft:"Soft",tcLblSoft:"Soft",tcLblWater:"Eau",tcLblJuice:"Jus",tcLblCoca:"Coca-Cola",tcSoftWater:"Eau",tcSoftJuice:"Jus",tcSoftCoca:"Coca-Cola",tcSoftSprite:"Sprite",tcSoftTonic:"Tonic",tcWaterStill:"Plate",tcWaterSpark:"Gazeuse",tcJuiceApple:"Pomme",tcJuiceOrange:"Orange",tcJuiceTomato:"Tomate",tcCocaClassic:"Normal",tcCocaZero:"Zero",tcLemon:"Citron",tcSalt:"Sel",tcPepper:"Poivre",tcExtras:"Options",tcCatCafe:"CafÃ©",tcCatDeca:"DÃ©cafÃ©inÃ©",tcCatThe:"ThÃ©",tcCatInf:"Infusion",tcCatChoco:"Caotina",tcLblChoco:"Caotina",tcChocoBrand:"Caotina",tcTeaType:"Type de thÃ©",tcTeaEnglish:"English Breakfast",tcTeaVert:"Vert",tcTeaMenthe:"Menthe",tcHotWater:"Eau chaude",tcInfusion:"Infusion",tcInfCam:"Camomille",tcMilk:"Lait/CrÃ¨me",tcMilkCreme:"CrÃ¨me",tcMilkAvoine:"Lait d'avoine",tcMilkLait:"Lait",tcMilkNone:"Sans",tcSweet:"Sucre",tcSweetSugar:"Sucre",tcSweetSub:"SuccÃ©danÃ©",tcSweetNone:"Sans",tcPur:"Pur",tcRocks:"On the rocks",tcBaileys:"Baileys",tcIce:"GlaÃ§ons",tcCatDig:"Digestif",tcDigestif:"Digestif",tcDigJW:"Johnnie Walker",tcDigJB:"Jim Beam (Bourbon)",tcDigCognac:"Cognac",tcDigBaileys:"Baileys",tcCatBeer:"BiÃ¨re",tcBeer:"BiÃ¨re",tcBeerQ:"QuÃ¶llfrisch Lager Blonde",tcBeerC:"Calvinus Blanche",tcBeerL:"Leermond (sans alcool)",tcCatChamp:"Champagne",tcChampagne:"Champagne",tcChampPH:"Notes (ex : marque, rosÃ©â€¦)",tcCatVin:"Vins",tcWines:"Vins",tcRed:"Rouge",tcWhite:"Blanc",tcVinPH:"Notes (ex : cÃ©page, commentaireâ€¦)",tcCatHot:"Boissons chaudes",tcMilkTitle:"Lait / CrÃ¨me",tcSugarTitle:"Sucre",tcTeaTitle:"ThÃ©",tcAlcoholTitle:"Boissons alcoolisÃ©es",tcSoftTitle:"Boissons soft",tcTeaEnglish:"English Breakfast",tcTeaVert:"ThÃ© vert",tcTeaMenthe:"ThÃ© menthe",tcTeaCamomille:"Camomille",tcWater:"Eau",tcCola:"Cola",tcJuice:"Jus",tcSprite:"Sprite",tcTonic:"Tonic",tcStill:"Plate",tcSpark:"Gazeuse",tcClassic:"Classic",tcZero:"Zero",tcOrange:"Orange",tcApple:"Pomme",tcTomato:"Tomate",tcCaotina:"Caotina",jsonRestored:"Session restaurÃ©e depuis le JSON",invalidFile:"Fichier invalide."},DE:{flight:"Flug",date:"Datum",flightPlaceholder:"z. B. LX2810",saveTitle:"Speichern",reset:"ZurÃ¼cksetzen",client:"Kundensicht",crew:"Crew-Modus",lblLang:"Sprache",exportJSON:"JSON exportieren",importJSON:"Importieren",exportPNG:"PNG",rights:"Alle Rechte vorbehalten",chips_apero:"Aperitif",chips_meal:"Hauptgang",chips_tc:"Tee & Kaffee",chips_fiche:"Paxdaten",filter_all:"Alle Sitze",filter_toserve:"Zu bedienen",filter_clear:"Zum AbrÃ¤umen",filter_sleep:"SchlÃ¤ft",filter_later:"SpÃ¤ter bedienen",lgServed:"âœ… Serviert",lgclear:"ðŸ§¹ AbgerÃ¤umt",flowTitle:"Serviceablauf",flowNowTitle:"Reihenfolge â¬‡ï¸",flowLaterTitle:"Bestellungen aufnehmen â¬‡ï¸",flowClearTitle:"Zum AbrÃ¤umen â¬‡ï¸",flowAperoTakenTitle:"Aufgenommene Bestellungen â¬‡ï¸",flowTaken:"Aufgenommen",flowEmptyTaken:"Noch keine Bestellungen",flowTCTakenTitle:"Aufgenommene Bestellungen â¬‡ï¸",flowTakeOrder:"Bestellung",flowServeTag:"Servieren",flowClearTag:"Zum AbrÃ¤umen",flowEmptyLater:"Keine Bestellungen",flowEmptyClear:"Nichts abzurÃ¤umen",seatmapTitle:"Sitzplan ({L} | {R})",seat:"Sitz",trayShort:"Tray",apLabel:"Aperitif",mealLabel:"Hauptgang",hdrConfig:"Vorhang & Konfiguration",lblLayout:"Flugzeug",lblRows:"Reihen",secMenuTitle:"MenÃ¼",menuModeAuto:"Auto",menuModeManual:"Manuell",menuOutbound:"Hinflug",menuInbound:"RÃ¼ckflug",menuDayService:"Tagesservice",menuBreakfast:"FrÃ¼hstÃ¼ck",menuBreakfastType:"FrÃ¼hstÃ¼ckstyp",menuBreakfastStandard:"Standard",menuBreakfastNight:"Aus Nightstop",menuSelectContext:"WÃ¤hle Richtung und Service, um das MenÃ¼ zu laden.",menuPickDate:"Bitte ein Flugdatum wÃ¤hlen, um das MenÃ¼ zu laden.",menuSelection:"MenÃ¼auswahl",menuAutoPlaceholder:"Platzhalter-MenÃ¼ bis die DB geliefert wird.",menuAutoMissing:"MenÃ¼daten fehlen noch. Du kannst auf manuell wechseln.",autoMenu_coldCutsPlatter:"SWISS Saveurs Aufschnittplatte",autoMenu_granolaMilk:"Granola mit Milch",autoMenu_nightstopNote:"Nightstop-MenÃ¼",autoMenu_gruyereEggRoll:"Eierrolle mit GruyÃ¨re und BergkrÃ¤utern, sautierte Shiitake-Pilze und Tomaten",autoMenu_appenzellerOmelette:"Omelett mit Appenzeller KÃ¤se, RÃ¶sti, Spinat und Kirschtomaten",autoMenu_beefTenderloinPorcini:"Gebratenes Rindsfilet mit Steinpilzsauce, Kartoffelgratin und Brokkoli",autoMenu_truffleTriangoli:"TrÃ¼ffel-Triangoli mit Weisswein-TrÃ¼ffelsauce, Spinat und Sbrinz",autoMenu_chickenMascarponePolenta:"Pouletbrust mit GeflÃ¼geljus, Mascarpone-Polenta, Rotkohl und Rosenkohl",autoMenu_trofieMushroom:"Trofie mit Pilz-Rahmsauce, glasierter Schwarzwurzel, gebratener Lauch, KÃ¼rbis und KÃ¼rbiskerne",autoMenu_crepeRicottaSpinach:"Herzhafte CrÃªpe mit Ricotta und Spinat, GrillgemÃ¼se, Bratkartoffeln",autoMenu_scrambledEngelberg:"RÃ¼hrei mit Engelberger KlosterkÃ¤se und Spinat, RÃ¶sti",autoMenu_beefBourguignonPuree:"Boeuf Bourguignon, KartoffelpÃ¼ree und glasierte WurzelgemÃ¼se",autoMenu_cheeseSpaetzleOnionApple:"KÃ¤sespÃ¤tzli mit RÃ¶stzwiebeln und Apfelscheiben",autoMenu_eggSouffleMushroom:"Eier-SoufflÃ© mit Tomaten und KÃ¤se, Pilzsauce und Brokkoli",autoMenu_asparagusOmelette:"Omelett mit Spargel und Sauce Hollandaise, Petersilienkartoffeln",autoMenu_sauteedChickenPolenta:"Sautierte Pouletbrust mit Jus, Mascarpone-Polenta, Rosenkohl, geschmorter Rotkohl",autoMenu_gratinatedCheeseSpaetzle:"Gratinierte KÃ¤sespÃ¤tzli mit Apfel und RÃ¶stzwiebeln",autoMenu_pendingNote:"MenÃ¼daten werden automatisch geladen, sobald sie verfÃ¼gbar sind.",autoMenu_outOfRotation:"Das gewÃ¤hlte Datum liegt ausserhalb der definierten Rotationen.",lblViande:"Option 1",lblVege:"Option 2",hdrInventaire:"Inventar",invPlateaux:"Trays",invViande:"Option 1",invVege:"Option 2",invSpecial:"SPML",spml:"SPML",add:"HinzufÃ¼gen",preHeader:"Vorbestellung",preAdd:"Vorbestellung",close:"âœ–ï¸",mdPass:"Passagier",mdOcc:"Sitz belegt",mdSleepTxt:"ðŸ˜´ SchlÃ¤ft",mdType:"Paxtyp",mdAdult:"Erwachsener",mdChild:"Kind",mdInfant:"SÃ¤ugling",mdStatus:"Status",mdLang:"Sprache",mdEatWith:"Zusammen essen mit",mdEatWithPh:"z. B. 12B",mdLater:"SpÃ¤ter bedienen",mdLaterCustom:"Uhrzeit",mdLaterSet:"Uhrzeit setzen",mdLaterCancel:"Abbrechen",mdLaterCustomBtn:"Individuelle Uhrzeit",mdNotes:"Notizen",mdAperoNotes:"GetrÃ¤nk / Aperitif-Notizen",mdTCNotes:"Tee & Kaffee â€“ Notizen",serveAperitif:"Aperitif bestellt",mdMeal:"Hauptgang",mdNormal:"Normale Auswahl",optNormalMeat:"Option 1",optNormalVeg:"Option 2",optNormalTray:"Tray (ohne Kasserolle)",mealDrinkTitle:"GetrÃ¤nke zum Essen",mealDrinkNotes:"GetrÃ¤nke-Notizen",passengerNotesPlaceholder:"z. B.: nur DE, keine NÃ¼sse",aperoNotesPlaceholder:"z. B.: Sprudelwasser, WeiÃŸwein, ErdnÃ¼sse",mealDrinkNotesPlaceholder:"z. B.: Sprudelwasser, WeiÃŸwein, ErdnÃ¼sse",tcNotesPlaceholder:"z. B.: VerlÃ¤ngerter, Zucker",meatPlaceholder:"z. B.: Rind in Rotweinsauce",vegPlaceholder:"z. B.: Vegetarische Lasagne",preAddPlaceholder:"z. B.: Glutenfreie Pasta",optStatusOther:"Andere",mdSpml:"SPML",mdPre:"Vorbestellung",serveMeal:"Hauptgang serviert",cancelService:"Service zurÃ¼cknehmen",clearTray:"Tray abgerÃ¤umt",undoClearTray:"AbrÃ¤umen rÃ¼ckgÃ¤ngig",modalTabFiche:"Paxdaten",modalTabApero:"Aperitif",modalTabMeal:"Hauptgang",modalTabTC:"Tee & Kaffee",ordered:"bestellt",eatTogether:"ðŸ½ï¸ Zusammen essen mit",eatTogetherPH:"z.â€¯B. 4C",clear:"LÃ¶schen",moveSeat:"ðŸ” Pax verschieben",moved:"Verschoben",swapped:"Getauscht",pickDestSeat:"Zielsitz wÃ¤hlen",moved:"Verschoben",swapped:"Getauscht",tcCH:"Schweiz",tcForeign:"Ausland",serveTC:"Tee & Kaffee serviert",serveMealDrink:"GetrÃ¤nk bestellen",histTcServed:"Tee & Kaffee serviert um",histMealDrinkServed:"GetrÃ¤nk bestellt bei",serveNone:"Kein GetrÃ¤nk",serveNoFood:"Kein Essen",lgSleep:"ðŸ˜´ SchlÃ¤ft",lgLater:"â³ SpÃ¤ter bedienen",lgChoice:"ðŸ½ï¸ Auswahl gespeichert",lgInfant:"ðŸ‘¶ SÃ¤ugling",lgChild:"ðŸ§’ Kind",lgTogether:"ðŸ¤ Zusammen essen",legendShow:"Legende anzeigen",legendHide:"Legende ausblenden",bulkOccStart:"Mehrere Sitze markieren",bulkOccApply:"{n} Sitz/PlÃ¤tze als besetzt markieren",bulkOccClear:"Auswahl aufheben",bulkOccHint:"Sitze anklicken und anschliessend bestÃ¤tigen.",bulkOccSelected:"{n} Sitz ausgewÃ¤hlt",bulkOccSelectedPlural:"{n} Sitze ausgewÃ¤hlt",bulkOccCancel:"Mehrfachauswahl beenden",bulkOccConfirm:"Markiere {n} Sitze als besetzt?",bulkOccBlocked:"Platz bereits belegt",alertSeatEmpty:"Sitz nicht belegt.",alertChoose:"Bitte zuerst eine Auswahl treffen (normal, SPML oder Vorbestellung).",alertNoTrays:"Keine Trays verfÃ¼gbar.",alertStock:"Zu wenig Bestand fÃ¼r",alertDepleted:"ausverkauft.",alertPickTime:"Uhrzeit wÃ¤hlen.",resetConfirm:"BestÃ¤tigen",preAddLabelRequired:"Geben Sie einen Namen fÃ¼r die Vorbestellung ein",spmlCodeRequired:"WÃ¤hlen Sie einen SPML-Code",histViewLabel:"Ansicht",histScope_all:"Alle Ereignisse",histScope_seat:"Nach Sitz",histScope_type:"Nach Typ",histLblSeat:"Sitz",histLblType:"Typ",histAscLbl:"Ã„lteste zuerst",histType_mealDrinkServed:"GetrÃ¤nk zum Essen serviert",histType_apServed:"Aperitif serviert",histType_tcServed:"Tee & Kaffee serviert",histType_mealServed:"Hauptgang serviert",histType_apOrdered:"Aperitif bestellt",histType_tcOrdered:"Tee & Kaffee bestellt",histType_apCanceled:"Aperitif storniert",histType_serviceCanceled:"Service storniert",histType_trayCleared:"Tray abgerÃ¤umt",histType_trayUncleared:"AbrÃ¤umen rÃ¼ckgÃ¤ngig",histType_reset:"Flug zurÃ¼ckgesetzt",histType_seatMoveStart:"Pax-Verschiebung",histType_seatMoved:"Sitz verschoben",histType_seatSwapped:"Sitze getauscht",histType_text:"Notizen",histNewest:"(neueste oben)",histOldest:"(Ã¤lteste oben)",histNewestBtn:"Auf Ã¤lteste oben umschalten",histOldestBtn:"Auf Neueste oben umschalten",secHistoryTitle:"Verlauf (neueste oben)",histTitleSet:"Titel gesetzt:",histApServed:"Aperitif serviert bei",histApOrdered:"Aperitif bestellt bei",histMealDrinkOrdered:"GetrÃ¤nke (Hauptgang) bestellt bei",histTcOrdered:"Tee & Kaffee bestellt bei",histApCanceled:"Aperitif storniert fÃ¼r",histMealServed:"Hauptgang serviert bei",histCanceled:"Service storniert fÃ¼r",resetDone:"Flug zurÃ¼ckgesetzt.",remindersTitle:"Anstehende Erinnerungen",remindServe:"ðŸ”” Erinnerung: bedienen",optStatusOther:"Andere",tcTitle:"Aperitif",tcDrink:"GetrÃ¤nk",tcService:"Servierart",tcNotes:"Notizen",tcGroupSoft:"Softdrinks",tcGroupAlcohol:"Alkohol",tcGroupHot:"HeiÃŸgetrÃ¤nke",tcLblAlcohol:"Alkohol",tcLblHot:"HeiÃŸgetrÃ¤nke",tcCatSoft:"Softdrinks",tcLblSoft:"Softdrinks",tcLblWater:"Wasser",tcLblJuice:"Saft",tcLblCoca:"Coca-Cola",tcSoftWater:"Wasser",tcSoftJuice:"Saft",tcSoftCoca:"Coca-Cola",tcSoftSprite:"Sprite",tcSoftTonic:"Tonic",tcWaterStill:"Still",tcWaterSpark:"Sprudelnd",tcJuiceApple:"Apfel",tcJuiceOrange:"Orange",tcJuiceTomato:"Tomate",tcCocaClassic:"Classic",tcCocaZero:"Zero",tcLemon:"Zitrone",tcSalt:"Salz",tcPepper:"Pfeffer",tcExtras:"Extras",tcCatCafe:"Kaffee",tcCatDeca:"Koffeinfrei",tcCatThe:"Tee",tcCatInf:"Aufguss",tcCatChoco:"Caotina",tcLblChoco:"Caotina",tcChocoBrand:"Caotina",tcMilk:"Milch/Sahne",tcMilkCreme:"Sahne",tcMilkAvoine:"Hafermilch",tcMilkLait:"Milch",tcMilkNone:"Ohne",tcSweet:"SÃ¼ÃŸe",tcSweetSugar:"Zucker",tcSweetSub:"Ersatz",tcSweetNone:"Ohne",tcTeaType:"Teeart",tcTeaEnglish:"English Breakfast",tcTeaVert:"GrÃ¼n",tcTeaMenthe:"Minze",tcHotWater:"HeiÃŸes Wasser",tcInfusion:"Aufguss",tcInfCam:"Kamille",tcPur:"Pur",tcRocks:"On the rocks",tcBaileys:"Baileys",tcIce:"Eis",tcCatDig:"Digestif",tcDigestif:"Digestif",tcDigJW:"Johnnie Walker",tcDigJB:"Jim Beam (Bourbon)",tcDigCognac:"Cognac",tcDigBaileys:"Baileys",tcCatBeer:"Bier",tcBeer:"Bier",tcBeerQ:"QuÃ¶llfrisch Lager Blonde",tcBeerC:"Calvinus WeiÃŸ",tcBeerL:"Leermond (alkoholfrei)",tcCatChamp:"Champagner",tcChampagne:"Champagner",tcChampPH:"Notizen (z. B. Marke, RosÃ©â€¦)",tcCatVin:"Weine",tcWines:"Weine",tcRed:"Rot",tcWhite:"WeiÃŸ",tcVinPH:"Notizen (z. B. Rebsorte, Kommentarâ€¦)",tcCatHot:"HeiÃŸgetrÃ¤nke",tcMilkTitle:"Milch / Rahm",tcSugarTitle:"Zucker",tcTeaTitle:"Tee",tcAlcoholTitle:"Alkoholische GetrÃ¤nke",tcSoftTitle:"Softdrinks",tcTeaEnglish:"English Breakfast",tcTeaVert:"GrÃ¼ner Tee",tcTeaMenthe:"Minztee",tcTeaCamomille:"Kamillentee",tcWater:"Wasser",tcCola:"Cola",tcJuice:"Saft",tcSprite:"Sprite",tcTonic:"Tonic",tcStill:"Still",tcSpark:"Sprudel",tcClassic:"Classic",tcZero:"Zero",tcOrange:"Orange",tcApple:"Apfel",tcTomato:"Tomate",tcCaotina:"Caotina",jsonRestored:"Sitzung aus JSON wiederhergestellt",invalidFile:"UngÃ¼ltige Datei."}},wo={chaud:{cafe:"â˜•",deca:"ðŸš«â˜•",the:"ðŸ«–",chocolat:"ðŸ«"},soft:{eau:"ðŸ’§",coca:"ðŸ¥¤",jus:"ðŸ§ƒ",sprite:"ðŸŸ¢",tonic:"ðŸ«§"},alcool:{champagne:"ðŸ¾",vin_rouge:"ðŸ·",vin_blanc:"ðŸ¥‚",biere:"ðŸº",cocktail:"ðŸ¹",digestif:"ðŸ¥ƒ"}},qa={"milk:creme":"ðŸ¶","milk:avoine":"ðŸŒ¾","milk:lait":"ðŸ¥›","milk:none":"ðŸš«","sweet:sucre":"ðŸ¬","sweet:succedane":"ðŸ’Š","sweet:none":"ðŸš«","theType:english":"ðŸ‡¬ðŸ‡§","theType:vert":"ðŸƒ","theType:menthe":"ðŸŒ¿","theType:camomille":"ðŸŒ¼","theType:hotwater":"â™¨ï¸","waterType:plate":"ðŸ’§","waterType:gazeuse":"ðŸ’¦","cocaType:normal":"ðŸŸ¥","cocaType:zero":"â¬›","juiceType:orange":"ðŸŠ","juiceType:pomme":"ðŸ","juiceType:tomate":"ðŸ…","beer:quoellfrisch":"ðŸº","beer:calvinus":"âšª","beer:leermond":"ðŸŒš","vinRouge:suisse":"ðŸ‡¨ðŸ‡­","vinRouge:etranger":"ðŸŒ","vinBlanc:suisse":"ðŸ‡¨ðŸ‡­","vinBlanc:etranger":"ðŸŒ","digestif:whisky_jw":"ðŸ¥ƒ","digestif:whisky_jb":"ðŸ¤ ","digestif:cognac":"ðŸ‡","digestif:baileys":"ðŸ®","cocktail:campari":"ðŸŸ¥","cocktail:bloody_mary":"ðŸ©¸","cocktail:screwdriver":"ðŸª›","cocktail:gin_tonic":"ðŸ¸","cocktail:cuba_libre":"ðŸ‡¨ðŸ‡º","campariMix:orange":"ðŸŠ","campariMix:soda":"ðŸ’¦"},Ua={theLemon:"ðŸ‹",softIce:"ðŸ§Š",softLemon:"ðŸ‹",spriteIce:"ðŸ§Š",spriteLemon:"ðŸ‹",tonicIce:"ðŸ§Š",tonicLemon:"ðŸ‹",juiceIce:"ðŸ§Š",juiceLemon:"ðŸ‹",juiceSP:"ðŸ§‚",juiceApfelschorle:"ðŸ’¦",champIce:"ðŸ§Š",champMimosa:"ðŸŠ",digIce:"ðŸ§Š",virginMary:"ðŸ˜‡",cocktailIce:"ðŸ§Š",cocktailLemon:"ðŸ‹",cocktailSP:"ðŸ§‚"};function Io(e){return qa[e]||""}function Mo(e){return Ua[e]||""}function yn(e){const t=e||document;!t||typeof t.querySelectorAll!="function"||(t.querySelectorAll(".pill.big").forEach(n=>{var c;const a=n.dataset.cat,l=n.dataset.sub,i=(c=wo[a])==null?void 0:c[l];i&&(n.textContent=i)}),t.querySelectorAll(".pill[data-opt]").forEach(n=>{const a=qa[n.dataset.opt];a&&(n.textContent=a)}),t.querySelectorAll(".pill.toggle[data-flag]").forEach(n=>{const a=Ua[n.dataset.flag];a&&(n.textContent=a)}))}const Zt=[{value:"creme",labelKey:"tcMilkCreme",fallback:"Cream",emojiKey:"milk:creme"},{value:"avoine",labelKey:"tcMilkAvoine",fallback:"Oat milk",emojiKey:"milk:avoine"},{value:"lait",labelKey:"tcMilkLait",fallback:"Milk",emojiKey:"milk:lait"},{value:"none",labelKey:"tcMilkNone",fallback:"None",emojiKey:"milk:none"}],Yt=[{value:"sucre",labelKey:"tcSweetSugar",fallback:"Sugar",emojiKey:"sweet:sucre"},{value:"succedane",labelKey:"tcSweetSub",fallback:"Substitute",emojiKey:"sweet:succedane"},{value:"none",labelKey:"tcSweetNone",fallback:"None",emojiKey:"sweet:none"}],No=[{value:"english",labelKey:"tcTeaEnglish",fallback:"English Breakfast",emojiKey:"theType:english"},{value:"vert",labelKey:"tcTeaVert",fallback:"Green tea",emojiKey:"theType:vert"},{value:"menthe",labelKey:"tcTeaMenthe",fallback:"Mint tea",emojiKey:"theType:menthe"},{value:"hotwater",labelKey:"tcHotWater",fallback:"Hot water",emojiKey:"theType:hotwater",breakBefore:!0},{value:"camomille",labelKey:"tcTeaCamomille",fallback:"Chamomile",emojiKey:"theType:camomille"}],Ao=[{value:"plate",labelKey:"tcWaterStill",fallback:"Still",emojiKey:"waterType:plate"},{value:"gazeuse",labelKey:"tcWaterSpark",fallback:"Sparkling",emojiKey:"waterType:gazeuse"}],Do=[{value:"normal",labelKey:"tcCocaClassic",fallback:"Classic",emojiKey:"cocaType:normal"},{value:"zero",labelKey:"tcCocaZero",fallback:"Zero",emojiKey:"cocaType:zero"}],Oo=[{value:"orange",labelKey:"tcJuiceOrange",fallback:"Orange",emojiKey:"juiceType:orange"},{value:"pomme",labelKey:"tcJuiceApple",fallback:"Apple",emojiKey:"juiceType:pomme"},{value:"tomate",labelKey:"tcJuiceTomato",fallback:"Tomato",emojiKey:"juiceType:tomate"}],xo=[{value:"quoellfrisch",labelKey:"tcBeerQ",fallback:"QuÃ¶llfrisch Lager",emojiKey:"beer:quoellfrisch"},{value:"calvinus",labelKey:"tcBeerC",fallback:"Calvinus Blanche",emojiKey:"beer:calvinus"},{value:"leermond",labelKey:"tcBeerL",fallback:"Leermond (0%)",emojiKey:"beer:leermond"}],Po=[{value:"suisse",labelKey:"tcCH",fallback:"Swiss",emojiKey:"vinRouge:suisse"},{value:"etranger",labelKey:"tcForeign",fallback:"Foreign",emojiKey:"vinRouge:etranger"}],Ko=[{value:"suisse",labelKey:"tcCH",fallback:"Swiss",emojiKey:"vinBlanc:suisse"},{value:"etranger",labelKey:"tcForeign",fallback:"Foreign",emojiKey:"vinBlanc:etranger"}],Ro=[{value:"whisky_jw",labelKey:"tcDigJW",fallback:"Johnnie Walker",emojiKey:"digestif:whisky_jw"},{value:"whisky_jb",labelKey:"tcDigJB",fallback:"Jim Beam",emojiKey:"digestif:whisky_jb"},{value:"cognac",labelKey:"tcDigCognac",fallback:"Cognac",emojiKey:"digestif:cognac"},{value:"baileys",labelKey:"tcDigBaileys",fallback:"Baileys",emojiKey:"digestif:baileys"}],Fo=[{value:"campari",labelKey:"tcCampari",fallback:"Campari",emojiKey:"cocktail:campari"},{value:"bloody_mary",labelKey:"tcBloody",fallback:"Bloody Mary",emojiKey:"cocktail:bloody_mary"},{value:"screwdriver",labelKey:"tcScrew",fallback:"Screw Driver",emojiKey:"cocktail:screwdriver"},{value:"gin_tonic",labelKey:"tcGinTonic",fallback:"Gin Tonic",emojiKey:"cocktail:gin_tonic"},{value:"cuba_libre",labelKey:"tcCuba",fallback:"Cuba Libre",emojiKey:"cocktail:cuba_libre"}],jo=[{value:"orange",labelKey:"tcJuiceOrange",fallback:"Orange",emojiKey:"campariMix:orange"},{value:"soda",labelKey:"tcSoda",fallback:"Soda",emojiKey:"campariMix:soda"}],hn=[{id:"chaud",cardId:"grpHot",headerId:"hdrHot",containerId:"hotOpts",subsections:{cafe:{id:"cafe",labelKey:"drink_coffee",fallback:"Coffee",defaultOpen:0,resetKeys:["milk","sweet","theType","theLemon"],sections:[{id:"milk",kind:"exclusive",key:"milk",titleKey:"tcMilk",fallback:"Milk/Cream",options:Zt},{id:"sweet",kind:"exclusive",key:"sweet",titleKey:"tcSweet",fallback:"Sweetener",options:Yt}]},deca:{id:"deca",labelKey:"drink_decaf",fallback:"Decaf",defaultOpen:0,resetKeys:["milk","sweet","theType","theLemon"],sections:[{id:"milk",kind:"exclusive",key:"milk",titleKey:"tcMilk",fallback:"Milk/Cream",options:Zt},{id:"sweet",kind:"exclusive",key:"sweet",titleKey:"tcSweet",fallback:"Sweetener",options:Yt}]},the:{id:"the",labelKey:"drink_tea",fallback:"Tea",defaultOpen:0,resetKeys:["milk","sweet","theType","theLemon"],sections:[{id:"teaType",kind:"exclusive",key:"theType",titleKey:"tcTeaTitle",fallback:"Tea",options:No},{id:"milk",kind:"exclusive",key:"milk",titleKey:"tcMilk",fallback:"Milk/Cream",options:Zt},{id:"sweet",kind:"exclusive",key:"sweet",titleKey:"tcSweet",fallback:"Sugar",options:Yt},{id:"teaExtras",kind:"toggles",titleKey:"tcLemon",fallback:"Lemon",toggles:[{flag:"theLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"theLemon"}]}]},chocolat:{id:"chocolat",labelKey:"drink_caotina",fallback:"Caotina",resetKeys:[],sections:[]}}},{id:"soft",cardId:"grpSoft",headerId:"hdrSoft",containerId:"softOpts",subsections:{eau:{id:"eau",labelKey:"drink_water",fallback:"Water",defaultOpen:0,resetKeys:["waterType","softIce","softLemon"],sections:[{id:"waterType",kind:"exclusive",key:"waterType",titleKey:"tcWater",fallback:"Water",options:Ao},{id:"waterExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"softIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"softIce"},{flag:"softLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"softLemon"}]}]},coca:{id:"coca",labelKey:"drink_cola",fallback:"Cola",defaultOpen:0,resetKeys:["cocaType","softIce","softLemon"],sections:[{id:"cocaType",kind:"exclusive",key:"cocaType",titleKey:"tcCola",fallback:"Cola",options:Do},{id:"cocaExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"softIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"softIce"},{flag:"softLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"softLemon"}]}]},jus:{id:"jus",labelKey:"drink_juice",fallback:"Juice",defaultOpen:0,resetKeys:["juiceType","juiceIce","juiceLemon","juiceSalt","juicePepper","juiceSP","juiceApfelschorle"],sections:[{id:"juiceType",kind:"exclusive",key:"juiceType",titleKey:"tcJuice",fallback:"Juice",options:Oo},{id:"juiceExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"juiceIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"juiceIce"},{flag:"juiceLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"juiceLemon"},{flag:"juiceSP",labelKey:"tcSaltPepper",fallback:"Salt + Pepper",emojiKey:"juiceSP",linkedFlags:["juiceSalt","juicePepper"],showWhen:{key:"juiceType",equals:"tomate"}},{flag:"juiceApfelschorle",labelKey:"tcApfelschorle",fallback:"Apfelschorle",emojiKey:"juiceApfelschorle",showWhen:{key:"juiceType",equals:"pomme"}}]}]},sprite:{id:"sprite",labelKey:"drink_sprite",fallback:"Sprite",defaultOpen:0,resetKeys:["spriteIce","spriteLemon"],sections:[{id:"spriteExtras",kind:"toggles",titleKey:"tcSprite",fallback:"Sprite",toggles:[{flag:"spriteIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"spriteIce"},{flag:"spriteLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"spriteLemon"}]}]},tonic:{id:"tonic",labelKey:"drink_tonic",fallback:"Tonic",defaultOpen:0,resetKeys:["tonicIce","tonicLemon"],sections:[{id:"tonicExtras",kind:"toggles",titleKey:"tcTonic",fallback:"Tonic",toggles:[{flag:"tonicIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"tonicIce"},{flag:"tonicLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"tonicLemon"}]}]}}},{id:"alcool",cardId:"grpAlco",headerId:"hdrAlco",containerId:"alcoOpts",subsections:{biere:{id:"biere",labelKey:"drink_beer",fallback:"Beer",defaultOpen:0,resetKeys:["beer"],sections:[{id:"beer",kind:"exclusive",key:"beer",titleKey:"tcBeer",fallback:"Beer",options:xo}]},vin_rouge:{id:"vin_rouge",labelKey:"drink_red",fallback:"Red wine",defaultOpen:0,resetKeys:["vinRouge","vinIce"],sections:[{id:"vinRouge",kind:"exclusive",key:"vinRouge",titleKey:"tcRed",fallback:"Red",options:Po},{id:"vinRougeExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"vinIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"champIce"}]}]},vin_blanc:{id:"vin_blanc",labelKey:"drink_white",fallback:"White wine",defaultOpen:0,resetKeys:["vinBlanc","vinIce"],sections:[{id:"vinBlanc",kind:"exclusive",key:"vinBlanc",titleKey:"tcWhite",fallback:"White",options:Ko},{id:"vinBlancExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"vinIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"champIce"}]}]},champagne:{id:"champagne",labelKey:"drink_champagne",fallback:"Champagne",defaultOpen:0,resetKeys:["champIce","champMimosa"],sections:[{id:"champagneExtras",kind:"toggles",titleKey:"tcChampagne",fallback:"Champagne",toggles:[{flag:"champIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"champIce"},{flag:"champMimosa",labelKey:"tcMimosa",fallback:"Mimosa",emojiKey:"champMimosa"}]}]},digestif:{id:"digestif",labelKey:"drink_digestif",fallback:"Digestif",defaultOpen:0,resetKeys:["digestif","digIce"],sections:[{id:"digestifChoice",kind:"exclusive",key:"digestif",titleKey:"tcDigestif",fallback:"Digestif",options:Ro},{id:"digestifExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"digIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"digIce"}]}]},cocktail:{id:"cocktail",labelKey:"drink_cocktail",fallback:"Cocktail",defaultOpen:0,resetKeys:["cocktail","campariMix","virginMary","cocktailIce","cocktailLemon","cocktailSalt","cocktailPepper","cocktailSP"],sections:[{id:"cocktailChoice",kind:"exclusive",key:"cocktail",titleKey:"tcCocktail",fallback:"Cocktail",options:Fo},{id:"campariMix",kind:"exclusive",key:"campariMix",titleKey:"tcCampari",fallback:"Campari",options:jo,showWhen:{key:"cocktail",equals:"campari"}},{id:"bloodyMary",kind:"toggles",titleKey:"tcBloody",fallback:"Bloody Mary",showWhen:{key:"cocktail",equals:"bloody_mary"},toggles:[{flag:"virginMary",labelKey:"tcVirgin",fallback:"Virgin Mary",emojiKey:"virginMary"}]},{id:"cocktailExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"cocktailIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"cocktailIce"},{flag:"cocktailLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"cocktailLemon"},{flag:"cocktailSP",labelKey:"tcSaltPepper",fallback:"Salt + Pepper",emojiKey:"cocktailSP",linkedFlags:["cocktailSalt","cocktailPepper"],showWhen:{key:"cocktail",equals:"bloody_mary"}}]}]}}}],Za=new Map,bn=new Map;hn.forEach(e=>{Za.set(e.id,e),Object.values(e.subsections).forEach(t=>{bn.set(`${e.id}::${t.id}`,t)})});const Ya={cat:"",sub:"",waterType:"",juiceType:"",cocaType:"",milk:"",sweet:"",theType:"",campariMix:"",beer:"",vinRouge:"",vinBlanc:"",digestif:"",cocktail:"",softIce:!1,softLemon:!1,spriteIce:!1,spriteLemon:!1,tonicIce:!1,tonicLemon:!1,juiceIce:!1,juiceLemon:!1,juiceSalt:!1,juicePepper:!1,juiceSP:!1,juiceApfelschorle:!1,champIce:!1,champMimosa:!1,vinIce:!1,digIce:!1,cocktailIce:!1,cocktailLemon:!1,cocktailSalt:!1,cocktailPepper:!1,cocktailSP:!1,theLemon:!1,virginMary:!1};function cn(){return JSON.parse(JSON.stringify(Ya))}const L=cn();let We=()=>({phase:"fiche",config:{lang:"EN"}});function Vo(e){e&&typeof e.getStore=="function"&&(We=e.getStore)}function _t(e,t){var i;const n=We==null?void 0:We(),a=((i=n==null?void 0:n.config)==null?void 0:i.lang)||"EN",l=v[a]||v.EN;return(l==null?void 0:l[e])||t}function Dn(e){if(!e)return!0;const t=String(L[e.key]??"");return!(e.equals!==void 0&&t!==e.equals||e.notEquals!==void 0&&t===e.notEquals||e.in&&!e.in.includes(t))}const Ho=new Map([["the","theType"],["eau","waterType"],["coca","cocaType"],["jus","juiceType"],["biere","beer"],["vin_rouge","vinRouge"],["vin_blanc","vinBlanc"],["digestif","digestif"],["cocktail","cocktail"]]),Wo=new Set(["cafe","deca","chocolat","sprite","tonic","champagne"]);function Qa(e,t={}){if(!e)return null;const n=t.sectionSelector||".accordion__section",a=t.headerSelector||".accordion__header",l=t.singleOpen!==!1,i=Array.from(e.querySelectorAll(n));if(!i.length)return null;const c=i.map((g,h)=>{const m=g.querySelector(a);let k=g.querySelector(".accordion__body");if(!k){const b=Array.from(g.children).filter(S=>S!==m);b.length&&(k=document.createElement("div"),k.className="accordion__body",b.forEach(S=>k.appendChild(S)),m?m.after(k):g.appendChild(k))}const I=g.dataset.accordionId||g.dataset.id||String(h);return g.dataset.accordionId=I,g.dataset.open="false",m&&(m.setAttribute("role","button"),m.setAttribute("tabindex","0"),m.setAttribute("aria-expanded","false"),m.addEventListener("click",()=>r(I)),m.addEventListener("keydown",b=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),r(I))})),k&&(k.hidden=!0),{id:I,section:g,header:m,body:k}});function s(g,h){const m=c.find(S=>S.id===String(g));if(!m)return;const{section:k,header:I,body:b}=m;k.dataset.open=h?"true":"false",I&&I.setAttribute("aria-expanded",h?"true":"false"),b&&(b.hidden=!h)}function r(g){const h=c.find(k=>k.id===String(g));if(!h)return;const m=h.section.dataset.open==="true";l&&!m&&p(),s(g,!m)}function d(g){s(g,!1)}function u(g){l&&p(),s(g,!0)}function p(){c.forEach(g=>{s(g.id,!1)})}const y=t.defaultOpen;return y!=null&&u(y),{open:u,close:d,closeAll:p}}let Fe=null,Mt=null;function Wt(){if(Fe)return;const e=document.getElementById("drinkGrid");e&&(hn.forEach(t=>{const n=document.getElementById(t.cardId);n&&(n.dataset.accordionId=t.id)}),Fe=Qa(e,{sectionSelector:".group-card",headerSelector:".group-title",singleOpen:!0,defaultOpen:null}),Fe&&Fe.closeAll())}function vn(e,t){var p;const n=Za.get(e);if(!n)return;const a=document.getElementById(n.containerId);if(!a)return;const l=`${e}::${t}`,i=Mt===l?Array.from(a.querySelectorAll(".accordion__section")).filter(y=>y.dataset.open==="true").map(y=>y.dataset.accordionId||"").filter(Boolean):[],c=bn.get(l);if(!c){a.innerHTML="";return}if(!c.sections.length){a.innerHTML="",Mt=l;return}a.innerHTML="";const s=document.createElement("div");s.className="accordion",c.sections.forEach((y,g)=>{if(!Dn(y.showWhen||null))return;const h=document.createElement("div");h.className="accordion__section",h.dataset.accordionId=y.id||String(g);const m=document.createElement("div");if(m.className="accordion__header",m.textContent=_t(y.titleKey,y.fallback),h.appendChild(m),y.kind==="info"){const b=document.createElement("div");b.className="accordion__body",y.bodyKey&&(b.textContent=_t(y.bodyKey,y.bodyFallback||"")),h.appendChild(b),s.appendChild(h);return}const k=document.createElement("div");k.className="accordion__body";const I=document.createElement("div");I.className="pill-row",y.kind==="exclusive"?y.options.forEach(b=>{if(b.breakBefore){const H=document.createElement("span");H.className="pill-break",I.appendChild(H)}const S=document.createElement("div");S.className="pill-wrap";const E=document.createElement("button");E.type="button",E.className="pill",E.dataset.action="exclusive",E.dataset.key=y.key,E.dataset.value=b.value,E.dataset.cat=e,E.dataset.sub=t;const T=_t(b.labelKey,b.fallback);E.title=T,E.setAttribute("aria-label",T);const M=Io(b.emojiKey);E.textContent=M||T;const N=(L[y.key]||"")===b.value;E.classList.toggle("active",N),E.setAttribute("aria-pressed",String(N));const K=document.createElement("div");K.className="pill-cap",K.textContent=T,S.appendChild(E),S.appendChild(K),I.appendChild(S)}):y.kind==="toggles"&&y.toggles.forEach(b=>{if(!Dn(b.showWhen||null))return;const S=document.createElement("div");S.className="pill-wrap";const E=document.createElement("button");E.type="button",E.className="pill toggle",E.dataset.action="toggle",E.dataset.flag=b.flag,E.dataset.cat=e,E.dataset.sub=t,b.linkedFlags&&b.linkedFlags.length&&(E.dataset.linkedFlags=b.linkedFlags.join(","));const T=_t(b.labelKey,b.fallback);E.title=T,E.setAttribute("aria-label",T);const M=Mo(b.emojiKey);E.textContent=M||T;const N=b.linkedFlags&&b.linkedFlags.length?b.linkedFlags.every(H=>!!L[H]):!!L[b.flag];E.classList.toggle("active",N),E.setAttribute("aria-pressed",String(N));const K=document.createElement("div");K.className="pill-cap",K.textContent=T,S.appendChild(E),S.appendChild(K),I.appendChild(S)}),k.appendChild(I),h.appendChild(k),s.appendChild(h)}),a.appendChild(s);const r=Qa(s,{singleOpen:!0,defaultOpen:null});let d=null;if(c.defaultOpen!==void 0&&c.defaultOpen!==null)if(typeof c.defaultOpen=="number"){const y=(p=c.sections)==null?void 0:p[c.defaultOpen];d=(y==null?void 0:y.id)||String(c.defaultOpen)}else d=String(c.defaultOpen);const u=i.length>0?i:d!==null?[d]:[];r&&u.forEach(y=>r.open(y)),yn(a),Mt=l}function sn(e){if(Array.isArray(e)){if(!e.length)return;e.forEach(t=>{L[t]=cn()[t]});return}Object.keys(Ya).forEach(t=>{L[t]=cn()[t]})}function Xa(){L.cat="",L.sub="",Mt=null}function eo(){hn.forEach(e=>{const t=document.getElementById(e.containerId);t&&(t.innerHTML="")})}function rn(e,t){const n=document.getElementById("drinkGrid");n&&n.querySelectorAll(".pill.big").forEach(a=>{const l=a.dataset.cat===e&&a.dataset.sub===t;a.classList.toggle("active",l),a.setAttribute("aria-pressed",String(l))})}function zo(e){const t=e.dataset.cat||"",n=e.dataset.sub||"";if(!t||!n)return;const a=e.classList.contains("active");if(sn(),a){Xa(),rn("",""),eo(),zt(),D();return}L.cat=t,L.sub=n,rn(t,n),Wt(),$o(t);const l=bn.get(`${t}::${n}`);l&&sn(l.resetKeys),vn(t,n),D()}function Jo(e){const t=e.dataset.key,n=e.dataset.value||"";if(!t)return;const a=L[t]||"";L[t]=a===n?"":n;const l=L.cat,i=L.sub;l&&i&&vn(l,i),D()}function Go(e){const t=e.dataset.flag;if(!t)return;const n=!L[t];L[t]=n;const a=(e.dataset.linkedFlags||"").split(",").map(c=>c.trim()).filter(Boolean);a.length&&a.forEach(c=>{L[c]=n});const l=L.cat,i=L.sub;l&&i&&vn(l,i),D()}let On=!1;function kt(){if(On)return;On=!0,Wt();const e=document.getElementById("drinkGrid");e&&e.addEventListener("click",t=>{const n=t.target;if(!n)return;const a=n.closest("[data-action]");if(a&&e.contains(a)){const i=a.dataset.action;i==="exclusive"?Jo(a):i==="toggle"&&Go(a);return}const l=n.closest(".pill.big");l&&e.contains(l)&&zo(l)})}function $o(e){Wt(),Fe&&Fe.open(e)}function zt(){Wt(),Fe&&Fe.closeAll()}function se(e=!1){kt(),sn(),Xa(),rn("",""),eo(),zt(),D();const t=document.getElementById("drinkGrid");t&&yn(t)}function Q(){kt(),se(!0)}function X(){const e=document.getElementById("drinkGrid");e&&e.querySelectorAll(".pill").forEach(t=>{t.disabled=!1,t.style.pointerEvents="",t.classList.remove("disabled")})}function D(){const e=document.getElementById("serveAperitif"),t=document.getElementById("serveTC"),n=document.getElementById("serveMealDrink"),a=We==null?void 0:We(),l=a==null?void 0:a.phase;let i=L.cat,c=L.sub;const s=document.getElementById("tc_chaud_type");(!i||!c)&&(s!=null&&s.value)&&(i="chaud",c=s.value);const r=document.getElementById("tc_cat");r!=null&&r.value&&(i||(i=r.value),c||(c=r.value));let d=!1;if(i&&c)if(Wo.has(c)||c==="chocolat"||i==="chocolat")d=!0;else{const u=Ho.get(c);u&&(d=!!L[u])}[e,t,n].forEach(u=>{u&&(u.disabled=!0)}),l==="aperitif"&&e&&(e.disabled=!d),l==="tc"&&t&&(t.disabled=!d),l==="repas"&&n&&(n.disabled=!d)}const xn="EN";function qo(e){return v[e||xn]||v[xn]||{}}function Ee(e,t,n=""){return t&&e&&typeof e[t]=="string"?e[t]:n||""}const Uo=[{rotation:1,direction:"both",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:2,direction:"inbound",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",note:"Out of nightstop menu",noteKey:"autoMenu_nightstopNote",dataStatus:"ok"},{rotation:3,direction:"inbound",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",note:"Out of nightstop menu",noteKey:"autoMenu_nightstopNote",dataStatus:"ok"},{rotation:4,direction:"inbound",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",note:"Out of nightstop menu",noteKey:"autoMenu_nightstopNote",dataStatus:"ok"},{rotation:5,direction:"inbound",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",note:"Out of nightstop menu",noteKey:"autoMenu_nightstopNote",dataStatus:"ok"},{rotation:6,direction:"inbound",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",note:"Out of nightstop menu",noteKey:"autoMenu_nightstopNote",dataStatus:"ok"},{rotation:1,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"GruyÃ¨re egg roll with mountain herbs, sautÃ©ed shiitake mushrooms and tomatoes",label1Key:"autoMenu_gruyereEggRoll",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:1,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Omelette with Appenzeller cheese, rÃ¶sti, spinach and cherry tomatoes",label1Key:"autoMenu_appenzellerOmelette",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:1,direction:"outbound",serviceType:"day",label1:"Grilled beef tenderloin with porcini mushroom sauce, potato gratin and broccoli",label1Key:"autoMenu_beefTenderloinPorcini",label2:"Truffle triangoli with white wine truffle sauce, spinach and Sbrinz cheese",label2Key:"autoMenu_truffleTriangoli",dataStatus:"ok"},{rotation:1,direction:"inbound",serviceType:"day",label1:"Chicken breast with jus de volaille, mascarpone polenta, red cabbage and brussels sprouts",label1Key:"autoMenu_chickenMascarponePolenta",label2:"Trofie pasta with mushroom cream sauce, glazed salsify, roasted leek, pumpkin and pumpkin seeds",label2Key:"autoMenu_trofieMushroom",dataStatus:"ok"},{rotation:2,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"Savoury crÃªpe with ricotta and spinach, grilled vegetables, pan-fried potatoes",label1Key:"autoMenu_crepeRicottaSpinach",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:2,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Scrambled eggs with Engelberg Abbey mountain cheese and spinach, potato rÃ¶sti",label1Key:"autoMenu_scrambledEngelberg",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:2,direction:"outbound",serviceType:"day",label1:"Chicken breast with jus de volaille, mascarpone polenta, red cabbage and brussels sprouts",label1Key:"autoMenu_chickenMascarponePolenta",label2:"Trofie pasta with mushroom cream sauce, glazed salsify, roasted leek, pumpkin and pumpkin seeds",label2Key:"autoMenu_trofieMushroom",dataStatus:"ok"},{rotation:2,direction:"inbound",serviceType:"day",label1:"Beef bourguignon, potato purÃ©e and glazed root vegetables",label1Key:"autoMenu_beefBourguignonPuree",label2:"Cheese spaetzle with fried onions and apple slices",label2Key:"autoMenu_cheeseSpaetzleOnionApple",dataStatus:"ok"},{rotation:3,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"Egg soufflÃ© with tomatoes and cheese, mushroom sauce and broccoli",label1Key:"autoMenu_eggSouffleMushroom",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:3,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Omelette with asparagus and sauce hollandaise, parsley potatoes",label1Key:"autoMenu_asparagusOmelette",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:3,direction:"outbound",serviceType:"day",label1:"Beef bourguignon, potato purÃ©e and glazed root vegetables",label1Key:"autoMenu_beefBourguignonPuree",label2:"Cheese spaetzle with fried onions and apple slices",label2Key:"autoMenu_cheeseSpaetzleOnionApple",dataStatus:"ok"},{rotation:3,direction:"inbound",serviceType:"day",label1:"Grilled beef tenderloin with porcini mushroom sauce, potato gratin and broccoli",label1Key:"autoMenu_beefTenderloinPorcini",label2:"Truffle triangoli with white wine truffle sauce, spinach and Sbrinz cheese",label2Key:"autoMenu_truffleTriangoli",dataStatus:"ok"},{rotation:4,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"GruyÃ¨re egg roll with mountain herbs, sautÃ©ed shiitake mushrooms and tomatoes",label1Key:"autoMenu_gruyereEggRoll",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:4,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Omelette with Appenzeller cheese, rÃ¶sti, spinach and cherry tomatoes",label1Key:"autoMenu_appenzellerOmelette",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:4,direction:"outbound",serviceType:"day",label1:"Grilled beef tenderloin with porcini mushroom sauce, potato gratin and broccoli",label1Key:"autoMenu_beefTenderloinPorcini",label2:"Truffle triangoli with white wine truffle sauce, spinach and Sbrinz cheese",label2Key:"autoMenu_truffleTriangoli",dataStatus:"ok"},{rotation:4,direction:"inbound",serviceType:"day",label1:"Sauteed chicken breast with jus, mascarpone polenta, brussels sprouts, braised red cabbage",label1Key:"autoMenu_sauteedChickenPolenta",label2:"Trofie pasta with mushroom cream sauce, glazed salsify, roasted leek, pumpkin and pumpkin seeds",label2Key:"autoMenu_trofieMushroom",dataStatus:"ok"},{rotation:5,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"Savoury crÃªpe with ricotta and spinach, grilled vegetables, pan-fried potatoes",label1Key:"autoMenu_crepeRicottaSpinach",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:5,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Scrambled eggs with Engelberg Abbey mountain cheese and spinach, potato rÃ¶sti",label1Key:"autoMenu_scrambledEngelberg",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:5,direction:"outbound",serviceType:"day",label1:"Sauteed chicken breast with jus, mascarpone polenta, brussels sprouts, braised red cabbage",label1Key:"autoMenu_sauteedChickenPolenta",label2:"Trofie pasta with mushroom cream sauce, glazed salsify, roasted leek, pumpkin and pumpkin seeds",label2Key:"autoMenu_trofieMushroom",dataStatus:"ok"},{rotation:5,direction:"inbound",serviceType:"day",label1:"Beef bourguignon, potato purÃ©e and glazed root vegetables",label1Key:"autoMenu_beefBourguignonPuree",label2:"Cheese spaetzle with fried onions and apple slices",label2Key:"autoMenu_cheeseSpaetzleOnionApple",dataStatus:"ok"},{rotation:6,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"Egg soufflÃ© with tomatoes and cheese, mushroom sauce and broccoli",label1Key:"autoMenu_eggSouffleMushroom",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:6,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Omelette with asparagus and sauce hollandaise, parsley potatoes",label1Key:"autoMenu_asparagusOmelette",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:6,direction:"outbound",serviceType:"day",label1:"Beef bourguignon, potato purÃ©e and glazed root vegetables",label1Key:"autoMenu_beefBourguignonPuree",label2:"Gratinated cheese spaetzle with apple and fried onions",label2Key:"autoMenu_gratinatedCheeseSpaetzle",dataStatus:"ok"},{rotation:6,direction:"inbound",serviceType:"day",label1:"Grilled beef tenderloin with porcini mushroom sauce, potato gratin and broccoli",label1Key:"autoMenu_beefTenderloinPorcini",label2:"Truffle triangoli with white wine truffle sauce, spinach and Sbrinz cheese",label2Key:"autoMenu_truffleTriangoli",dataStatus:"ok"}],Zo=[{rotation:1,dates:new Set(["2025-06-04","2025-06-05","2025-06-06","2025-06-07","2025-06-08","2025-06-09","2025-06-10","2025-07-16","2025-07-17","2025-07-18","2025-07-19","2025-07-20","2025-07-21","2025-07-22","2025-08-27","2025-08-28","2025-08-29","2025-08-30","2025-08-31","2025-09-01","2025-09-02","2025-10-08","2025-10-09","2025-10-10","2025-10-11","2025-10-12","2025-10-13","2025-10-14","2025-11-19","2025-11-20","2025-11-21","2025-11-22","2025-11-23","2025-11-24","2025-11-25","2025-12-31","2026-01-01","2026-01-02","2026-01-03","2026-01-04","2026-01-05","2026-01-06","2026-02-11","2026-02-12","2026-02-13","2026-02-14","2026-02-15","2026-02-16","2026-02-17"])},{rotation:2,dates:new Set(["2025-06-11","2025-06-12","2025-06-13","2025-06-14","2025-06-15","2025-06-16","2025-06-17","2025-07-23","2025-07-24","2025-07-25","2025-07-26","2025-07-27","2025-07-28","2025-07-29","2025-09-03","2025-09-04","2025-09-05","2025-09-06","2025-09-07","2025-09-08","2025-09-09","2025-09-15","2025-09-16","2025-09-17","2025-09-18","2025-09-19","2025-09-20","2025-09-21","2025-11-26","2025-11-27","2025-11-28","2025-11-29","2025-11-30","2025-12-01","2025-12-02","2026-01-07","2026-01-08","2026-01-09","2026-01-10","2026-01-11","2026-01-12","2026-01-13","2026-02-18","2026-02-19","2026-02-20","2026-02-21","2026-02-22","2026-02-23","2026-02-24"])},{rotation:3,dates:new Set(["2025-06-18","2025-06-19","2025-06-20","2025-06-21","2025-06-22","2025-06-23","2025-06-24","2025-07-30","2025-07-31","2025-08-01","2025-08-02","2025-08-03","2025-08-04","2025-08-05","2025-09-10","2025-09-11","2025-09-12","2025-09-13","2025-09-14","2025-09-15","2025-09-16","2025-10-22","2025-10-23","2025-10-24","2025-10-25","2025-10-26","2025-10-27","2025-10-28","2025-12-03","2025-12-04","2025-12-05","2025-12-06","2025-12-07","2025-12-08","2025-12-09","2026-01-14","2026-01-15","2026-01-16","2026-01-17","2026-01-18","2026-01-19","2026-01-20","2026-02-25","2026-02-26","2026-02-27","2026-02-28"])},{rotation:4,dates:new Set(["2025-06-25","2025-06-26","2025-06-27","2025-06-28","2025-06-29","2025-06-30","2025-07-01","2025-08-06","2025-08-07","2025-08-08","2025-08-09","2025-08-10","2025-08-11","2025-08-12","2025-09-17","2025-09-18","2025-09-19","2025-09-20","2025-09-21","2025-09-22","2025-09-23","2025-10-29","2025-10-30","2025-10-31","2025-11-01","2025-11-02","2025-11-03","2025-11-04","2025-12-10","2025-12-11","2025-12-12","2025-12-13","2025-12-14","2025-12-15","2025-12-16","2026-01-21","2026-01-22","2026-01-23","2026-01-24","2026-01-25","2026-01-26","2026-01-27"])},{rotation:5,dates:new Set(["2025-07-02","2025-07-03","2025-07-04","2025-07-05","2025-07-06","2025-07-07","2025-07-08","2025-08-13","2025-08-14","2025-08-15","2025-08-16","2025-08-17","2025-08-18","2025-08-19","2025-09-24","2025-09-25","2025-09-26","2025-09-27","2025-09-28","2025-09-29","2025-09-30","2025-11-05","2025-11-06","2025-11-07","2025-11-08","2025-11-09","2025-11-10","2025-11-11","2025-12-17","2025-12-18","2025-12-19","2025-12-20","2025-12-21","2025-12-22","2025-12-23","2026-01-28","2026-01-29","2026-01-30","2026-01-31","2026-02-01","2026-02-02","2026-02-03"])},{rotation:6,dates:new Set(["2025-06-01","2025-06-02","2025-06-03","2025-07-09","2025-07-10","2025-07-11","2025-07-12","2025-07-13","2025-07-14","2025-07-15","2025-08-20","2025-08-21","2025-08-22","2025-08-23","2025-08-24","2025-08-25","2025-08-26","2025-10-01","2025-10-02","2025-10-03","2025-10-04","2025-10-05","2025-10-06","2025-10-07","2025-11-12","2025-11-13","2025-11-14","2025-11-15","2025-11-16","2025-11-17","2025-11-18","2025-12-24","2025-12-25","2025-12-26","2025-12-27","2025-12-28","2025-12-29","2025-12-30","2026-02-04","2026-02-05","2026-02-06","2026-02-07","2026-02-08","2026-02-09","2026-02-10"])}];function to(e){if(!e)return null;const t=Qo(e);if(!t)return null;for(const n of Zo)if(n.dates.has(t))return n.rotation;return null}function Pn(e,t,n,a,l,i){const c=t?`R${t}`:"R?",s=a==="breakfast"?l==="nightstop"?Ee(i,"menuBreakfastNight","Breakfast - out of night stop"):Ee(i,"menuBreakfast","Breakfast"):Ee(i,"menuDayService","Day service"),r=n==="outbound"?Ee(i,"menuOutbound","Outbound"):Ee(i,"menuInbound","Inbound");return`${s} - ${r} (${c})`}function Yo(e){const t=qo(e.lang),n=e.direction||"outbound",a=e.serviceType||"day",l=e.breakfastType||"standard",i=e.rotation??to(e.dateISO),c=Uo.filter(r=>!(i&&r.rotation!==i||r.serviceType!==a||r.direction!=="both"&&r.direction!==n||r.serviceType==="breakfast"&&(r.breakfastType||"standard")!==l)),s=c.find(r=>r.dataStatus==="ok")||c.find(r=>r.dataStatus==="placeholder")||c[0];return s?{rotation:i??s.rotation??null,option1:Ee(t,s.label1Key,s.label1),option2:Ee(t,s.label2Key,s.label2),status:s.dataStatus||"placeholder",note:Ee(t,s.noteKey,s.note)}:{rotation:i??null,option1:Pn("option1",i??null,n,a,l,t),option2:Pn("option2",i??null,n,a,l,t),status:"missing",note:i?Ee(t,"autoMenu_pendingNote","Menu data will be loaded automatically when provided."):Ee(t,"autoMenu_outOfRotation","Selected date is outside defined rotations.")}}function Qo(e){if(!e)return null;const t=String(e).trim(),n=/^(\d{4})-(\d{2})-(\d{2})/.exec(t);if(n)return`${n[1]}-${n[2]}-${n[3]}`;const a=/^(\d{2})[\/\.](\d{2})[\/\.](\d{4})$/.exec(t);if(a){const[i,c,s,r]=a;return`${r}-${s}-${c}`}const l=new Date(t);return Number.isNaN(l.getTime())?null:l.toISOString().slice(0,10)}const Xo="swiss-serviceflow",el=1,it="flights",Kt="meta",no="lastKey",ht="ssf::flight::",ao="ssf::lastKey";let ie=typeof window<"u"&&window.localStorage?window.localStorage:null;function tl(e){ie=e}let Qt=null;function nl(){return typeof indexedDB<"u"}function St(){return nl()?(Qt||(Qt=new Promise((e,t)=>{const n=indexedDB.open(Xo,el);n.onupgradeneeded=()=>{const a=n.result;a.objectStoreNames.contains(it)||a.createObjectStore(it,{keyPath:"id"}),a.objectStoreNames.contains(Kt)||a.createObjectStore(Kt,{keyPath:"key"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error??new Error("IndexedDB open failed"))})),Qt):Promise.reject(new Error("IndexedDB is not available"))}function kn(e,t,n,a){return new Promise((l,i)=>{const c=e.transaction(t,n),s=c.objectStore(t);try{a(s)}catch(r){i(r instanceof Error?r:new Error("IndexedDB transaction error"));return}c.oncomplete=()=>l(),c.onerror=()=>i(c.error??new Error("IndexedDB transaction failed")),c.onabort=()=>i(c.error??new Error("IndexedDB transaction aborted"))})}function oo(e,t){return St().then(n=>new Promise((a,l)=>{const s=n.transaction(e,"readonly").objectStore(e).get(t);s.onsuccess=()=>a(s.result),s.onerror=()=>l(s.error??new Error("IndexedDB get failed"))}))}function al(e){return St().then(t=>new Promise((n,a)=>{const c=t.transaction(e,"readonly").objectStore(e).getAllKeys();c.onsuccess=()=>{const s=c.result.map(r=>String(r));n(s)},c.onerror=()=>a(c.error??new Error("IndexedDB getAllKeys failed"))}))}function ol(e,t){if(ie)try{const n=JSON.stringify(t);ie.setItem(`${ht}${e}`,n)}catch(n){console.warn("Fallback save failed:",n)}}function Kn(e){if(!ie)return null;try{const t=ie.getItem(`${ht}${e}`);return t?JSON.parse(t):null}catch(t){return console.warn("Fallback load failed:",t),null}}function ll(e){if(ie)try{ie.setItem(ao,e)}catch(t){console.warn("Fallback setLastKey failed:",t)}}function Rn(){if(!ie)return null;try{return ie.getItem(ao)??null}catch(e){return console.warn("Fallback getLastKey failed:",e),null}}function Fn(){if(!ie)return[];try{const e=[];for(let t=0;t<ie.length;t+=1){const n=ie.key(t);n&&n.startsWith(ht)&&e.push(n.replace(ht,""))}return e}catch(e){return console.warn("Fallback listKeys failed:",e),[]}}function il(e){if(ie)try{ie.removeItem(`${ht}${e}`)}catch(t){console.warn("Fallback deleteFlight failed:",t)}}async function jn(e,t){const n={id:e,payload:t,updatedAt:Date.now()};try{const a=await St();await kn(a,it,"readwrite",l=>{l.put(n)})}catch(a){console.warn("[db] saveFlight falling back:",a),ol(e,t)}}async function lo(e){try{const t=await St();await kn(t,it,"readwrite",n=>{n.delete(e)})}catch(t){console.warn("[db] deleteFlight falling back:",t),il(e)}}async function io(e){try{const t=await oo(it,e);return t?t.payload??null:Kn(e)}catch(t){return console.warn("[db] loadFlight falling back:",t),Kn(e)}}async function Nt(e){const t={key:no,value:e,updatedAt:Date.now()};try{const n=await St();await kn(n,Kt,"readwrite",a=>{a.put(t)})}catch(n){console.warn("[db] setLastFlightKey falling back:",n),ll(e)}}async function co(){try{const e=await oo(Kt,no);return e?typeof e.value=="string"?e.value:null:Rn()}catch(e){return console.warn("[db] getLastFlightKey falling back:",e),Rn()}}async function cl(){try{const e=await al(it);return e.length?e:Fn()}catch(e){return console.warn("[db] listFlightKeys falling back:",e),Fn()}}const so="serviceflow::",Ve=`${so}lastKey`;async function sl(){if(typeof window>"u")return;const e=Storage.prototype.setItem,t=Storage.prototype.removeItem,n=Storage.prototype.getItem,a=window.localStorage;tl(a);try{for(let l=0;l<a.length;l+=1){const i=a.key(l);if(!i)continue;const c=n.call(a,i);if(c){if(i===Ve){Nt(c).catch(s=>console.warn("[persistence] setLastFlightKey failed during migration:",s));continue}if(Lt(i))try{const s=JSON.parse(c);jn(i,s).catch(r=>console.warn("[persistence] saveFlight failed during migration:",r))}catch(s){console.warn("[persistence] migration parse error:",s)}}}}catch(l){console.warn("[persistence] migration failed:",l)}try{const l=await cl();for(const c of l)if(Lt(c)&&!n.call(a,c)){const s=await io(c);s&&e.call(a,c,JSON.stringify(s))}const i=await co();i&&e.call(a,Ve,i)}catch(l){console.warn("[persistence] preload failed:",l)}Storage.prototype.setItem=function(i,c){if(e.call(this,i,c),i===Ve){Nt(c).catch(s=>console.warn("[persistence] setLastFlightKey failed:",s));return}if(Lt(i))try{const s=JSON.parse(c);jn(i,s).catch(r=>console.warn("[persistence] saveFlight failed:",r))}catch(s){console.warn("[persistence] saveFlight parse error:",s)}},Storage.prototype.removeItem=function(i){if(t.call(this,i),i===Ve){Nt("").catch(()=>{});return}Lt(i)&&lo(i).catch(c=>console.warn("[persistence] deleteFlight failed:",c))}}async function rl(){const e=await co()??ul();if(!e)return null;const t=await io(e)??fl(e);return t?{key:e,snapshot:t}:null}async function dl(e){try{localStorage.removeItem(e),localStorage.removeItem(Ve)}catch(t){console.warn("[persistence] localStorage clear failed:",t)}try{await lo(e),await Nt("")}catch(t){console.warn("[persistence] clearPersistedState fallback:",t)}}function ul(){try{return typeof localStorage<"u"?localStorage.getItem(Ve):null}catch{return null}}function fl(e){try{if(typeof localStorage>"u")return null;const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("[persistence] legacy snapshot parse failed:",t),null}}function Lt(e){return e.startsWith(so)&&e!==Ve}function Jt(e,t){e.addEventListener("click",t),e.addEventListener("touchstart",function(n){n.preventDefault(),t(n)},{passive:!1})}const Et=["AVML","BBML","CHML","GFML","HNML","KSML","LFML","LSML","MOML","NLML","VGML","VJML","VLML"],ml=["OBHA","OBHB","OBHC","OBHD","OBHE","OBHF","OBHG","OBHH","OBHJ"],w=e=>document.querySelector(e),o={title:{flightNo:"",date:""},config:{rowsBiz:4,layout:"A220",lang:"EN",theme:"dark",histAsc:!1},inventory:{plateaux:0,hot_viande:0,hot_vege:0,hot_special:0,spml:{},pre:{}},menu:{mode:"auto",direction:null,serviceType:null,breakfastType:"standard",rotation:null,viandeLabel:"",vegeLabel:"",manualViandeLabel:"",manualVegeLabel:"",autoViandeLabel:"",autoVegeLabel:"",autoStatus:"",autoNote:""},seats:{},phase:"fiche",reminders:[],history:[],clientView:!1};Vo({getStore:()=>o});const Bt={mode:"auto",direction:null,serviceType:null,breakfastType:"standard"};function Ie(){o.menu||(o.menu={});const e=o.menu;e.mode!=="manual"&&e.mode!=="auto"&&(e.mode=Bt.mode),e.direction!=="outbound"&&e.direction!=="inbound"&&(e.direction=Bt.direction),e.serviceType!=="day"&&e.serviceType!=="breakfast"&&(e.serviceType=Bt.serviceType),e.breakfastType!=="nightstop"&&e.breakfastType!=="standard"&&(e.breakfastType=Bt.breakfastType),e.rotation===void 0&&(e.rotation=null),typeof e.viandeLabel!="string"&&(e.viandeLabel=""),typeof e.vegeLabel!="string"&&(e.vegeLabel=""),typeof e.manualViandeLabel!="string"&&(e.manualViandeLabel=e.viandeLabel||""),typeof e.manualVegeLabel!="string"&&(e.manualVegeLabel=e.vegeLabel||""),typeof e.autoViandeLabel!="string"&&(e.autoViandeLabel=""),typeof e.autoVegeLabel!="string"&&(e.autoVegeLabel=""),typeof e.autoStatus!="string"&&(e.autoStatus=""),typeof e.autoNote!="string"&&(e.autoNote="")}const At={sleep:"ðŸ˜´"},pl=["sleepMealBtn","sleepAperoBtn","sleepTCBtn","sleepModalBtn"],gl=[{id:"aperoNotesBlock",labelId:"mdAperoNotes",fallback:"Drink / aperitif notes"},{id:"tcNotesBlock",labelId:"mdTCNotes",fallback:"Tea & coffee notes"},{id:"mealDrinkNotesBlock",labelId:"mdMealDrinkNotes",fallback:"Meal drink notes"}],Dt=new Map,yl=20;let z=!1;const Be=new Set;function hl(){gl.forEach(e=>{const t=document.getElementById(e.id);if(!t)return;if(Dt.has(e.id)){const d=Dt.get(e.id);Vn(d),dn(d),Wn(d);return}const n=Array.from(t.childNodes),a=document.createElement("div");a.className="notes-accordion__content",n.forEach(d=>{a.appendChild(d)});const l=document.createElement("div");l.className="accordion__header notes-accordion__header",l.setAttribute("role","button"),l.setAttribute("tabindex","0");const i=document.createElement("span");i.className="notes-accordion__title",l.appendChild(i);const c=document.createElement("div");c.className="accordion__body notes-accordion__body",c.appendChild(a);const s=document.createElement("div");for(s.className="accordion__section",s.appendChild(l),s.appendChild(c);t.firstChild;)t.removeChild(t.firstChild);t.classList.add("accordion","notes-accordion"),t.dataset.notesAccordion="1",t.appendChild(s);const r={id:e.id,block:t,section:s,header:l,headerText:i,body:c,labelId:e.labelId,fallback:e.fallback,defaultOpen:e.defaultOpen===!0};Dt.set(e.id,r),l.addEventListener("click",()=>Hn(r)),l.addEventListener("keydown",d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),Hn(r))}),Sn(r,r.defaultOpen),Vn(r),Wn(r)})}function Vn(e){if(!e||e.labelObserver||!e.labelId)return;const t=document.getElementById(e.labelId);if(!t){dn(e);return}const n=()=>dn(e);if(n(),typeof MutationObserver>"u")return;const a=new MutationObserver(n);a.observe(t,{characterData:!0,childList:!0,subtree:!0}),e.labelObserver=a}function dn(e){if(!e)return;const t=e.labelId?document.getElementById(e.labelId):null,n=((t==null?void 0:t.textContent)||(t==null?void 0:t.innerText)||"").trim()||e.fallback||"";e.headerText.textContent=n}function Sn(e,t){e&&(e.section.dataset.open=t?"true":"false",e.header.setAttribute("aria-expanded",t?"true":"false"),e.body.hidden=!t)}function Hn(e){if(!e)return;const t=e.section.dataset.open==="true";Sn(e,!t)}function Wn(e){if(!e)return;const t=e.block.querySelector("label");t&&(t.classList.add("sr-only"),t.setAttribute("aria-hidden","true"))}function bl(e){const t=(n,a)=>{const l=Dt.get(n);l&&Sn(l,a)};e==="aperitif"?(t("aperoNotesBlock",!0),t("tcNotesBlock",!1),t("mealDrinkNotesBlock",!1)):e==="tc"?(t("aperoNotesBlock",!1),t("tcNotesBlock",!0),t("mealDrinkNotesBlock",!1)):e==="repas"&&(t("aperoNotesBlock",!1),t("tcNotesBlock",!1),t("mealDrinkNotesBlock",!1))}function Xt(e,t,n,a){if(!e)return;const l=document.createElement("div");l.className=`tag seat-flag ${t}`.trim(),a&&(l.textContent=a),n&&(l.title=n,l.setAttribute("aria-label",n)),e.appendChild(l)}(async()=>{try{navigator.storage&&navigator.storage.persist&&(await navigator.storage.persisted()||await navigator.storage.persist())}catch(e){console.warn("Persistent storage request failed:",e)}})();for(const e of Et)o.inventory.spml[e]=o.inventory.spml[e]||0;(function(){var h;const e=document.getElementById("flightDate");if(!e)return;function t(){var k;const m=(((k=o==null?void 0:o.config)==null?void 0:k.lang)||"EN").toUpperCase();return m==="FR"?{months:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wk:["L","M","M","J","V","S","D"],weekStart:1}:m==="DE"?{months:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wk:["M","D","M","D","F","S","S"],weekStart:1}:{months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wk:["S","M","T","W","T","F","S"],weekStart:0}}function n(m){return String(m).padStart(2,"0")}function a(m,k,I){return`${m}-${n(k+1)}-${n(I)}`}function l(){const m=new Date;return{y:m.getFullYear(),m:m.getMonth(),d:m.getDate()}}function i(m){const k=/^(\d{4})-(\d{2})-(\d{2})$/.exec(m||"");return k?{y:+k[1],m:+k[2]-1,d:+k[3]}:null}const c=((h=document.getElementById("flightDateISO"))==null?void 0:h.value)||e.value;let s=i(c)||l(),r;function d(){u(),r=document.createElement("div"),r.className="dp",document.body.appendChild(r),g();const m=e.getBoundingClientRect();r.style.left=window.scrollX+m.left+"px",r.style.top=window.scrollY+m.bottom+6+"px",setTimeout(()=>{document.addEventListener("mousedown",p),document.addEventListener("keydown",y)},0)}function u(){document.removeEventListener("mousedown",p),document.removeEventListener("keydown",y),r&&r.parentNode&&r.parentNode.removeChild(r),r=null}function p(m){r&&(m.target===r||r.contains(m.target)||m.target===e||u())}function y(m){m.key==="Escape"&&u()}function g(){var _;if(!r)return;const m=t();r.innerHTML="";const k=document.createElement("header"),I=document.createElement("button");I.textContent="";const b=document.createElement("button");b.textContent="";const S=document.createElement("div");S.className="m",S.textContent=`${m.months[s.m]} ${s.y}`,I.addEventListener("click",()=>{s.m--,s.m<0&&(s.m=11,s.y--),g()}),b.addEventListener("click",()=>{s.m++,s.m>11&&(s.m=0,s.y++),g()}),k.appendChild(I),k.appendChild(S),k.appendChild(b),r.appendChild(k);const E=document.createElement("div");E.className="grid";const T=m.wk.slice();if(m.weekStart===1){const C=T.shift();T.push(C)}T.forEach(C=>{const A=document.createElement("div");A.className="w",A.textContent=C,E.appendChild(A)});const N=(new Date(s.y,s.m,1).getDay()-(m.weekStart||0)+7)%7,K=new Date(s.y,s.m+1,0).getDate(),H=new Date(s.y,s.m,0).getDate();for(let C=0;C<N;C++){const A=document.createElement("div");A.className="d out",A.textContent=String(H-N+1+C),E.appendChild(A)}const ae=l(),re=((_=document.getElementById("flightDateISO"))==null?void 0:_.value)||e.value,ee=i(re);for(let C=1;C<=K;C++){const A=document.createElement("div");A.className="d",A.textContent=String(C),ae.y===s.y&&ae.m===s.m&&ae.d===C&&A.classList.add("today"),ee&&ee.y===s.y&&ee.m===s.m&&ee.d===C&&A.classList.add("sel"),A.addEventListener("click",()=>{const J=a(s.y,s.m,C);document.getElementById("flightDateISO").value=J,e.value=bt(J),vt(),e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),u()}),E.appendChild(A)}const ue=(7-(N+K)%7)%7;for(let C=1;C<=ue;C++){const A=document.createElement("div");A.className="d out",A.textContent=String(C),E.appendChild(A)}r.appendChild(E)}e.addEventListener("focus",d),e.addEventListener("click",d),window._rerenderDatepickerLang=function(){var I,b;r&&g();const m=(((I=o==null?void 0:o.config)==null?void 0:I.lang)||"EN").toUpperCase();e.placeholder=m==="FR"?"AAAA-MM-JJ":m==="DE"?"JJJJ-MM-TT":"YYYY-MM-DD";const k=(b=document.getElementById("flightDateISO"))==null?void 0:b.value;k&&(document.getElementById("flightDate").value=bt(k),vt())}})();function En(e=!1){const t=document.getElementById("tc_vin_rouge"),n=document.getElementById("tc_vin_blanc");if(!t||!n)return;const a=t.value,l=n.value;e&&a&&l&&(n.value=""),n.disabled=!!t.value,t.disabled=!!n.value}function ro(){["tc_cat","tc_milk","tc_sweet","tc_the_type","tc_digestif_type","tc_beer","tc_vin_rouge","tc_vin_blanc","tc_cocktail_type","tc_soft_eau","tc_soft_jus","tc_soft_coca"].forEach(n=>{const a=document.getElementById(n);a&&(a.value="")}),["tc_digestif_ice","tc_champ_ice","tc_vin_ice","tc_cocktail_ice","tc_cocktail_lemon","tc_cocktail_salt","tc_cocktail_pepper","tc_soft_ice","tc_soft_lemon","tc_soft_ice2","tc_soft_lemon2","tc_soft_salt","tc_soft_pepper","tc_soft_ice3","tc_soft_lemon3","tc_soft_ice4","tc_soft_lemon4","tc_soft_ice5","tc_soft_lemon5"].forEach(n=>{const a=document.getElementById(n);a&&(a.checked=!1)}),["tc_group","tc_alcool_type","tc_chaud_type","tc_soft_type"].forEach(n=>{const a=document.getElementById(n);a&&(a.value="")}),document.getElementById("tc_alcool")&&(document.getElementById("tc_alcool").style.display="none"),document.getElementById("tc_chaud")&&(document.getElementById("tc_chaud").style.display="none"),Ue(""),En(!0);const e=document.getElementById("tc_tipBtn"),t=document.getElementById("tc_tip");e&&(e.style.display="none"),t&&(t.style.display="none")}function et(){const e=document.getElementById("modalBack");if(!(!(e&&(e.style.display==="flex"||e.style.display===""))||!document.getElementById("drinkGrid")))try{kt(),Q(),X(),zt(),D()}catch(a){console.warn("ensureDrinkGridActive:",a)}}function pt(){const e=document.getElementById("serveTC");if(!e)return;const t=v[o.config.lang||"EN"],n=t.serveMealDrink||t.serveTC||"Order drink";e.textContent=n}function Cn(e,t){return e+t}function Te(e){return(!e||typeof e!="object")&&(e={}),typeof e.occupied!="boolean"&&(e.occupied=!1),e.type||(e.type="normal"),e.status||(e.status="none"),e.lang===void 0&&(e.lang=""),e.notes===void 0&&(e.notes=""),e.sleep===void 0&&(e.sleep=!1),e.spml===void 0&&(e.spml=""),e.preLabel===void 0&&(e.preLabel=""),e.normalMeal===void 0&&(e.normalMeal=""),e.aperoNotes===void 0&&(e.aperoNotes=""),e.tcNotes===void 0&&(e.tcNotes=""),(!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null}),e.served||(e.served={aperitif:null,meal:null}),typeof e.served.trayUsed!="boolean"&&(e.served.trayUsed=!1),e.serveLaterAt===void 0&&(e.serveLaterAt=null),typeof e.served.tc>"u"&&(e.served.tc=null),typeof e.served.trayCleared>"u"&&(e.served.trayCleared=!1),e.apDrink||(e.apDrink={cat:"",milk:"",sweet:"",theType:"",digestif:"",whiskyStyle:"",baileysIce:!1,beer:"",vinRouge:"",vinBlanc:"",vinNotes:"",cognacIce:!1,champIce:!1,vinIce:!1,softType:"",waterType:"",juiceType:"",cocaType:"",softIce:!1,softLemon:!1,juiceIce:!1,juiceLemon:!1,juiceSalt:!1,juicePepper:!1,spriteIce:!1,spriteLemon:!1,cocktail:"",cocktailIce:!1,cocktailLemon:!1,cocktailSalt:!1,cocktailPepper:!1,campariMix:"",virginMary:!1,choco:!1}),e.eatWith===void 0&&(e.eatWith=""),e}function he(e,t){const n=Cn(e,t),a=Te(o.seats[n]);return o.seats[n]=a,a}function B(){try{localStorage.setItem(Ge(),JSON.stringify(o)),localStorage.setItem("serviceflow::lastKey",Ge())}catch(e){console.warn("localStorage indisponible:",e)}ne()}document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="hidden")try{B()}catch{}});window.addEventListener("pagehide",()=>{try{B()}catch{}},{capture:!0});window.addEventListener("beforeunload",e=>{(o.history||[]).length>0&&(e.preventDefault(),e.returnValue="")});function Ge(){const e=o.title||{flightNo:"",date:""};return`serviceflow::${e.flightNo||"no-flight"}::${e.date||"no-date"}`}function uo(e){e&&e!==Ge()&&localStorage.setItem(Ge(),JSON.stringify(o))}function vl(){var n;const e=Ge();o.title.flightNo=w("#flightNo").value.trim();const t=((n=document.getElementById("flightDateISO"))==null?void 0:n.value)||w("#flightDate").value;o.title.date=t,uo(e),B(),q({type:"titleSet",flightNo:o.title.flightNo||"",dateISO:o.title.date||""})}(function(){var t,n,a,l;(t=document.getElementById("saveSnapshot"))==null||t.addEventListener("click",vl),(n=document.getElementById("importJSON"))==null||n.addEventListener("click",()=>{const i=document.getElementById("importFile");i&&(i.value="",i.click())}),(a=document.getElementById("importFile"))==null||a.addEventListener("change",i=>{var d;if(window.__importingJSON)return;window.__importingJSON=!0;const c=()=>setTimeout(()=>{window.__importingJSON=!1},0),s=(d=i.target.files)==null?void 0:d[0];if(!s){c();return}const r=new FileReader;r.onload=()=>{var u,p,y,g,h,m,k,I;try{const b=JSON.parse(String(r.result||"{}")),S=Ge();for(const H of Object.keys(o))delete o[H];Object.assign(o,b),typeof normalizeImportedStore=="function"&&normalizeImportedStore(o),document.getElementById("flightNo").value=((u=o==null?void 0:o.title)==null?void 0:u.flightNo)||"";const E=((p=o==null?void 0:o.title)==null?void 0:p.date)||"";document.getElementById("flightDateISO").value=E,document.getElementById("flightDate").value=E;const T=document.getElementById("labelViande"),M=document.getElementById("labelVege");Ie(),T&&(T.value=((y=o==null?void 0:o.menu)==null?void 0:y.manualViandeLabel)||((g=o==null?void 0:o.menu)==null?void 0:g.viandeLabel)||"",o.menu.manualViandeLabel=T.value||""),M&&(M.value=((h=o==null?void 0:o.menu)==null?void 0:h.manualVegeLabel)||((m=o==null?void 0:o.menu)==null?void 0:m.vegeLabel)||"",o.menu.manualVegeLabel=M.value||""),He(),Ce(!1),uo(S),B(),at==null||at(),O==null||O(),x==null||x(),ce==null||ce();const N=(((k=o==null?void 0:o.config)==null?void 0:k.lang)||"EN").toUpperCase(),K=v[o.config.lang||"EN"]||v.EN;alert(K.jsonRestored||"Session restaure depuis le JSON.")}catch(b){console.error(b);const S=(((I=o==null?void 0:o.config)==null?void 0:I.lang)||"EN").toUpperCase(),E=v[S]||v.EN;alert(E.invalidFile||"Invalid file.")}finally{i.target.value="",c()}},r.readAsText(s)}),(l=document.getElementById("exportPNG"))==null||l.addEventListener("click",()=>{try{typeof exportSeatmapPNG=="function"?exportSeatmapPNG():console.warn("exportSeatmapPNG() non dfinie")}catch{}})})();function kl(e){o.history.unshift({ts:Date.now(),type:"text",text:e}),ce()}function q(e){const t=Object.assign({ts:Date.now()},e);o.history.unshift(t),ce()}function Rt(e){const t=Array.isArray(o.history)?o.history[0]:null;t&&t.type===e.type&&t.seat===e.seat&&(!e.ctx||t.ctx===e.ctx)&&(!e.label||t.label===e.label)&&(!e.notes||t.notes===e.notes)||q(e)}function ve(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),n=e.createGain();t.type="sine",t.frequency.value=880,t.connect(n),n.connect(e.destination),t.start(),n.gain.setValueAtTime(.08,e.currentTime),n.gain.exponentialRampToValueAtTime(1e-5,e.currentTime+.15),t.stop(e.currentTime+.16)}catch{}}function Sl(){return Object.values(o.inventory.spml||{}).reduce((e,t)=>e+(t||0),0)}function El(){return Object.values(o.inventory.pre||{}).reduce((e,t)=>e+(t||0),0)}function fo(){return o.config.layout==="A320"?["C","B","A"]:["C","A"]}function ge(){const e=document.getElementById("seatmapTitle");if(!e)return;const t=v[o.config.lang||"EN"]||v.EN,n="F E D",a=o.config.layout==="A320"?"C B A":"C A",l=t.seatmapTitle||"Seatmap ({L} | {R})";e.textContent=l.replace("{L}",n).replace("{R}",a)}function mo(){const e=document.querySelector("#filterTabs .subtab.active");return(e==null?void 0:e.dataset.filter)||"all"}function po(e){document.querySelectorAll("#filterTabs .subtab").forEach(t=>{const n=t.dataset.filter===e;t.classList.toggle("active",n),t.setAttribute("aria-selected",n?"true":"false")})}function Gt(e){document.querySelectorAll("#phaseChips .tab").forEach(t=>{const n=t.dataset.phase===e;t.classList.toggle("active",n),t.setAttribute("aria-selected",n?"true":"false")})}const zn={FTL:"status-pill status-pill--ftl",SEN:"status-pill status-pill--sen",HON:"status-pill status-pill--hon",FCL:"status-pill status-pill--fcl",VIP:"status-pill status-pill--vip",PAD:"status-pill status-pill--pad",OTHER:"status-pill status-pill--other"};function Tn(){var c;const e=document.getElementById("modalSeatMeta");if(!e)return;e.innerHTML="";const t=document.getElementById("m_status"),n=t==null?void 0:t.value,a=(c=f==null?void 0:f.data)==null?void 0:c.type;if(a==="infant"||a==="child"){const s=document.createElement("span");s.className="status-pill status-pill--minor",s.textContent=a==="infant"?"INF":"CHD",e.appendChild(s)}if(!n||n==="none")return;const l=n.toUpperCase(),i=document.createElement("span");i.className=zn[l]||zn.OTHER,i.textContent=n,e.appendChild(i)}function _n(){const e=document.getElementById("m_lang"),t=(e==null?void 0:e.value)||"";document.querySelectorAll(".language-btn").forEach(n=>{const l=(n.dataset.lang||"")===t&&t!=="";n.classList.toggle("active",l),n.setAttribute("aria-pressed",l?"true":"false")})}function $t(){const e=document.getElementById("layoutSelect"),t=(e==null?void 0:e.value)||o.config.layout||"A220";document.querySelectorAll(".layout-btn").forEach(n=>{const l=(n.dataset.layout||"")===t;n.classList.toggle("active",l),n.setAttribute("aria-pressed",l?"true":"false")})}function $e(){const e=document.getElementById("m_later"),t=(e==null?void 0:e.value)||"",n=qt();document.querySelectorAll(".later-btn").forEach(c=>{const r=(c.dataset.value||"")===t&&t!=="";c.classList.toggle("active",r),c.setAttribute("aria-pressed",r?"true":"false"),c.disabled=!n}),e&&(e.disabled=!n);const a=document.getElementById("laterCustomContainer"),l=document.getElementById("m_later_time"),i=t==="custom"&&n;a&&a.classList.toggle("active",i),l&&(l.disabled=!i,!i&&document.activeElement===l&&l.blur())}function qt(){const e=document.getElementById("m_occ_chk");return!!(e!=null&&e.checked)}function go(){const e=qt();document.querySelectorAll(".language-btn").forEach(i=>{i.disabled=!e});const t=document.getElementById("m_lang");t&&(t.disabled=!e),document.querySelectorAll('input[name="m_type"]').forEach(i=>{i.disabled=!e});const n=document.getElementById("m_status");n&&(n.disabled=!e);const a=document.getElementById("m_eatWith");a&&(a.disabled=!e);const l=document.getElementById("movePaxBtn");if(l&&(l.disabled=!e,l.setAttribute("aria-disabled",(!e).toString())),!e){const i=document.getElementById("m_later");if(i&&i.value)i.value="",i.dispatchEvent(new Event("change",{bubbles:!0}));else{f&&(f.data.serveLaterAt=null);const c=document.getElementById("m_later_view");c&&(c.textContent="",c.style.display="none")}}pe(),$e()}const le=document.getElementById("legendToggle"),te=document.getElementById("legendPopover"),un=document.querySelector(".seatmap");function yo(){if(!le||!te||!un)return;const e=le.getBoundingClientRect(),t=un.getBoundingClientRect(),n=te.offsetWidth||0,a=12,l=Math.max(a,e.bottom-t.top+a);let i=e.right-t.left-n;const c=t.width-n-a;Number.isFinite(i)||(i=a),i=Math.max(a,Math.min(i,c)),te.style.top=`${l}px`,te.style.left=`${i}px`}function mt(e){if(!le||!te)return;te.dataset.open=e?"true":"false",te.setAttribute("aria-hidden",e?"false":"true"),le.setAttribute("aria-expanded",e?"true":"false"),le.classList.toggle("active",e);const t=le.dataset.labelShow||"Show legend",n=le.dataset.labelHide||"Hide legend",a=e?n:t;le.textContent=a,le.title=a,le.setAttribute("aria-label",a),e?requestAnimationFrame(yo):(te.style.top="",te.style.left="")}function tt(){return(te==null?void 0:te.dataset.open)==="true"}function Cl(){document.querySelectorAll("#seatgrid .seat").forEach(e=>{const t=e.dataset.seatKey||"";e.classList.toggle("bulk-picked",!!t&&Be.has(t))})}function qe(){const e=v[o.config.lang||"EN"]||v.EN,t=document.getElementById("bulkOccupyToggle"),n=document.getElementById("bulkOccupyApply"),a=document.getElementById("bulkOccupyClear"),l=document.getElementById("bulkOccupyStatus"),i=document.getElementById("seatgrid"),c=Be.size;if(i&&i.classList.toggle("bulk-occupy-mode",!!z),t){const s=z?e.bulkOccCancel||"Cancel selection":e.bulkOccStart||"Mark multiple seats";t.textContent=s,t.title=s,t.setAttribute("aria-pressed",z?"true":"false")}if(n){const s=e.bulkOccApply||"Mark {n} seat(s) as occupied";n.textContent=s.replace("{n}",String(Math.max(1,c||1))),n.disabled=!z||c===0,n.style.display=z?"":"none"}if(a){const s=e.bulkOccClear||"Clear selection";a.textContent=s,a.title=s,a.disabled=!z||c===0,a.style.display=z?"":"none"}if(l)if(!z)l.textContent="";else if(c===0)l.textContent=e.bulkOccHint||"Click seats to select them, then apply.";else{const s=c===1?e.bulkOccSelected||"{n} seat selected":e.bulkOccSelectedPlural||e.bulkOccSelected||"{n} seats selected";l.textContent=s.replace("{n}",String(c))}Cl()}function Ft(e){if(e===z){qe();return}z=!!e,z?we&&(we=null,Ut(!1)):Be.clear(),qe(),ge()}function ho(e){if(!z)return;const[t,n]=Oe(e);if(!t||!n)return;const a=he(t,n),l=document.getElementById("bulkOccupyStatus"),i=v[o.config.lang||"EN"]||v.EN;if(a.occupied){l&&(l.textContent=i.bulkOccBlocked||"Seat already occupied");return}Be.has(e)?Be.delete(e):Be.add(e),qe()}function Tl(){z&&(Be.clear(),qe())}function _l(){if(!z)return;const e=Be.size;if(e===0){Ft(!1),ge();return}if(e>=yl){const a=((v[o.config.lang||"EN"]||v.EN).bulkOccConfirm||"Confirm marking {n} seats as occupied?").replace("{n}",String(e));if(!window.confirm(a))return}const t=Array.from(Be);for(const n of t){const[a,l]=Oe(n);if(!a||!l)continue;const i=he(a,l);i.occupied=!0,o.seats[n]=i;const c=document.querySelector(`#seatgrid .seat[data-seat-key="${n}"]`);c&&c.classList.add("occupied")}B(),x();try{ot==null||ot()}catch{}Ft(!1),ge()}function Jn(e){return z?(ho(e),!0):!1}function bt(e){var s;const t=(((s=o==null?void 0:o.config)==null?void 0:s.lang)||"EN").toUpperCase();if(!e)return"";const n=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!n)return e;const a=n[1],l=n[2],i=n[3];return t==="FR"?`${i}/${l}/${a}`:t==="DE"?`${i}.${l}.${a}`:`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(l,10)-1]} ${parseInt(i,10)}, ${a}`}function vt(){const e=document.getElementById("flightDatePretty"),t=document.getElementById("flightDate");e&&t&&(e.textContent=bt(t.value))}function Ln(){var n;const e=document.getElementById("flightDateISO");if(e&&e.value)return String(e.value).trim();const t=document.getElementById("flightDate");return t&&t.value?String(t.value).trim():String(((n=o==null?void 0:o.title)==null?void 0:n.date)||"").trim()}function gt(e){Ie();const t=v[o.config.lang||"EN"]||v.EN,n=o.menu.direction==="outbound"||o.menu.direction==="inbound",a=o.menu.serviceType==="day"||o.menu.serviceType==="breakfast",l=!!Ln(),i=document.getElementById("menuPreview");i&&(i.style.display=n&&a?"flex":"none");const c=document.getElementById("menuAutoOption1"),s=document.getElementById("menuAutoOption2"),r=document.getElementById("lblAutoOpt1"),d=document.getElementById("lblAutoOpt2"),u=document.getElementById("menuAutoStatus");if(r&&(r.textContent=t.lblViande||"Option 1"),d&&(d.textContent=t.lblVege||"Option 2"),!n||!a){c&&(c.textContent="--"),s&&(s.textContent="--"),u&&(u.textContent=t.menuSelectContext||"Select outbound/inbound and service to load menu.",u.dataset.state="missing");return}if(!l){c&&(c.textContent="--"),s&&(s.textContent="--"),u&&(u.textContent=t.menuPickDate||"Select a flight date to load the menu.",u.dataset.state="missing");return}if(c&&(c.textContent=(e==null?void 0:e.option1)||o.menu.autoViandeLabel||o.menu.viandeLabel||t.lblViande||"Option 1"),s&&(s.textContent=(e==null?void 0:e.option2)||o.menu.autoVegeLabel||o.menu.vegeLabel||t.lblVege||"Option 2"),u){const p=(e==null?void 0:e.status)||o.menu.autoStatus||"missing";let y="";p==="ok"?y=(e==null?void 0:e.note)||o.menu.autoNote||"":p==="placeholder"?y=(e==null?void 0:e.note)||o.menu.autoNote||t.menuAutoPlaceholder||"":y=(e==null?void 0:e.note)||o.menu.autoNote||t.menuAutoMissing||"",u.textContent=y,u.dataset.state=p}}function Ce(e=!1){Ie();const t=Ln();o.title.date=t||"";const n=o.menu.direction==="outbound"||o.menu.direction==="inbound",a=o.menu.serviceType==="day"||o.menu.serviceType==="breakfast",l=!!t;if(!n||!a){o.menu.autoViandeLabel="",o.menu.autoVegeLabel="",o.menu.autoStatus="missing",o.menu.autoNote="",o.menu.mode==="auto"&&(o.menu.viandeLabel="",o.menu.vegeLabel=""),gt(),ze(),e&&B();return}if(!l){o.menu.autoViandeLabel="",o.menu.autoVegeLabel="",o.menu.autoStatus="missing",o.menu.autoNote="",o.menu.mode==="auto"&&(o.menu.viandeLabel="",o.menu.vegeLabel=""),gt(),ze(),e&&B();return}const i=to(t);o.menu.rotation=i;const c=Yo({dateISO:t,rotation:i,direction:o.menu.direction,serviceType:o.menu.serviceType,breakfastType:o.menu.breakfastType,lang:o.config.lang});o.menu.autoViandeLabel=c.option1||"",o.menu.autoVegeLabel=c.option2||"",o.menu.autoStatus=c.status,o.menu.autoNote=c.note||"",o.menu.mode==="auto"&&(o.menu.viandeLabel=c.option1||o.menu.manualViandeLabel||o.menu.viandeLabel||"",o.menu.vegeLabel=c.option2||o.menu.manualVegeLabel||o.menu.vegeLabel||""),gt(c),ze(),e&&B()}function He(){Ie();const e=o.menu.mode==="manual"?"manual":"auto",t=o.menu.direction==="outbound"||o.menu.direction==="inbound";document.querySelectorAll(".menu-mode-btn").forEach(p=>{const g=(p.getAttribute("data-menu-mode")||"auto")===e;p.classList.toggle("active",g),p.setAttribute("aria-pressed",g?"true":"false")});const n=document.getElementById("menuAutoPanel"),a=document.getElementById("menuManualPanel");n&&(n.hidden=e!=="auto",n.style.display=e==="auto"?"flex":"none"),a&&(a.hidden=e!=="manual",a.style.display=e==="manual"?"flex":"none"),document.querySelectorAll("[data-menu-direction]").forEach(p=>{const y=p.dataset.menuDirection===o.menu.direction;p.classList.toggle("active",y),p.setAttribute("aria-pressed",y?"true":"false")}),document.querySelectorAll("[data-menu-service]").forEach(p=>{const y=p.dataset.menuService===o.menu.serviceType;p.classList.toggle("active",y),p.setAttribute("aria-pressed",y?"true":"false")});const l=document.getElementById("menuServiceRow");l&&(l.style.display=t?"flex":"none"),document.querySelectorAll("[data-menu-service]").forEach(p=>{p.disabled=!t});const i=document.getElementById("menuBreakfastRow");i&&(i.style.display=o.menu.serviceType==="breakfast"&&t?"":"none");const c=document.getElementById("menuBreakfastNight"),s=document.getElementById("lblMenuBreakfastType");if(c){c.checked=o.menu.breakfastType==="nightstop";const p=o.menu.serviceType==="breakfast"&&o.menu.direction==="inbound";c.disabled=!p,c.style.display=p?"inline-block":"none",c.style.visibility=p?"visible":"hidden",s&&(s.style.display=p?"inline-block":"none",s.style.visibility=p?"visible":"hidden"),p||(c.checked=!1,o.menu.breakfastType="standard")}const r=document.getElementById("labelViande"),d=document.getElementById("labelVege");r&&(r.value=o.menu.manualViandeLabel||"",r.disabled=e==="auto"),d&&(d.value=o.menu.manualVegeLabel||"",d.disabled=e==="auto");const u=document.getElementById("menuManualHint");if(u){const p=v[o.config.lang||"EN"]||v.EN;u.textContent=p.menuManualHint!==void 0?p.menuManualHint:""}gt(),ze()}function ze(){const e=document.getElementById("normalInfoOpt1"),t=document.getElementById("normalInfoOpt2"),n=document.getElementById("normalInfoOpt1Label"),a=document.getElementById("normalInfoOpt2Label"),l=document.getElementById("normalInfoBtn"),i=document.getElementById("normalInfoPopup");if(!e||!t)return;const c=v[o.config.lang||"EN"]||v.EN;n&&(n.textContent=c.optNormalMeat||"Option 1"),a&&(a.textContent=c.optNormalVeg||"Option 2");const s=o.menu.mode==="manual"?"manual":"auto",r=(o.menu.manualViandeLabel||"").trim(),d=(o.menu.manualVegeLabel||"").trim(),u=(o.menu.viandeLabel||o.menu.autoViandeLabel||"").trim(),p=(o.menu.vegeLabel||o.menu.autoVegeLabel||"").trim(),y=s==="manual"?!!(r||d):!!(u||p);l&&(l.disabled=!y),i&&!y&&(i.hidden=!0,i.style.display="none",l==null||l.setAttribute("aria-expanded","false"));const g=c.optNormalMissing||"Option not set",h=s==="manual"?r||g:o.menu.viandeLabel||o.menu.autoViandeLabel||o.menu.manualViandeLabel||c.optNormalMeat||"Option 1",m=s==="manual"?d||g:o.menu.vegeLabel||o.menu.autoVegeLabel||o.menu.manualVegeLabel||c.optNormalVeg||"Option 2";e.textContent=h,t.textContent=m}function Ll(){const e=document.getElementById("normalInfoBtn"),t=document.getElementById("normalInfoPopup");if(!e||!t)return;t.hidden=!0,t.style.display="none",e.setAttribute("aria-expanded","false"),ze();const n=()=>{t.hidden=!0,t.style.display="none",e.setAttribute("aria-expanded","false")},a=()=>{ze(),t.hidden=!1,t.style.display="block",e.setAttribute("aria-expanded","true")};e.addEventListener("click",l=>{l.stopPropagation(),e.getAttribute("aria-expanded")==="true"?n():a()}),document.addEventListener("click",l=>{t.hidden||t.contains(l.target)||e.contains(l.target)||n()})}function Bl(){const e=document.getElementById("menuSelectionAccordion"),t=e==null?void 0:e.querySelector(".accordion__section"),n=document.getElementById("menuSelectionHeader"),a=document.getElementById("menuSelectionBody");if(!e||!t||!n||!a)return;const l=i=>{t.dataset.open=i?"true":"false",n.setAttribute("aria-expanded",i?"true":"false"),a.style.display=i?"flex":"none"};l(!0),n.addEventListener("click",()=>{const i=t.dataset.open==="true";l(!i)}),n.addEventListener("keydown",i=>{if(i.key==="Enter"||i.key===" "){i.preventDefault();const c=t.dataset.open==="true";l(!c)}})}function wl(e){Ie(),o.menu.mode=e==="manual"?"manual":"auto",o.menu.mode==="manual"?(o.menu.viandeLabel=o.menu.manualViandeLabel||"",o.menu.vegeLabel=o.menu.manualVegeLabel||""):Ce(!1),He(),B()}function Il(){var r,d;Ie();const e=(u,p)=>{u&&(u.addEventListener("click",p),u.addEventListener("touchstart",y=>{y.preventDefault(),p()},{passive:!1}))};document.querySelectorAll("[data-menu-mode]").forEach(u=>{e(u,()=>{const p=u.dataset.menuMode||"auto";wl(p)})}),document.querySelectorAll("[data-menu-direction]").forEach(u=>{e(u,()=>{const p=u.dataset.menuDirection==="inbound"?"inbound":"outbound";o.menu.direction===p?(o.menu.direction=null,o.menu.serviceType=null,o.menu.breakfastType="standard"):(o.menu.direction=p,o.menu.serviceType=null,o.menu.breakfastType="standard"),Ce(!0),He()})}),document.querySelectorAll("[data-menu-service]").forEach(u=>{u.addEventListener("click",()=>{const p=u.dataset.menuService==="breakfast"?"breakfast":"day";o.menu.serviceType===p?o.menu.serviceType=null:o.menu.serviceType=p,o.menu.serviceType!=="breakfast"&&(o.menu.breakfastType="standard"),Ce(!0),He()})});const t=document.getElementById("menuBreakfastNight"),n=()=>{!t||t.disabled||(o.menu.breakfastType=t.checked?"nightstop":"standard",Ce(!0),He())};t==null||t.addEventListener("change",n);const a=document.getElementById("lblMenuBreakfastType");t&&a&&Jt(a,()=>{t.disabled||(t.checked=!t.checked,n())});const l=document.getElementById("labelViande"),i=document.getElementById("labelVege"),c=()=>{Ie(),l&&(o.menu.manualViandeLabel=(l.value||"").trim()),i&&(o.menu.manualVegeLabel=(i.value||"").trim()),o.menu.mode==="manual"&&(o.menu.viandeLabel=o.menu.manualViandeLabel||"",o.menu.vegeLabel=o.menu.manualVegeLabel||""),B(),ze()};l==null||l.addEventListener("input",c),i==null||i.addEventListener("input",c),l==null||l.addEventListener("change",c),i==null||i.addEventListener("change",c);const s=()=>{const u=Ln();o.title.date=u||"",Ce(!0)};(r=document.getElementById("flightDate"))==null||r.addEventListener("change",s),(d=document.getElementById("flightDateISO"))==null||d.addEventListener("change",s),Ce(!1),He()}const wt=[["lblFlight","flight"],["lblDate","date"],["saveTitle","saveTitle"],["resetFlight","reset"],["lblLang","lblLang"],['#phaseChips .tab[data-phase="fiche"]',"chips_fiche"],['#phaseChips .tab[data-phase="aperitif"]',"chips_apero"],['#phaseChips .tab[data-phase="repas"]',"chips_meal"],['#phaseChips .tab[data-phase="tc"]',"chips_tc"],["#filterTabs .subtab[data-filter='all']","filter_all"],["#filterTabs .subtab[data-filter='toServe']","filter_toserve"],["#filterTabs .subtab[data-filter='later']","filter_later"],["#filterTabs .subtab[data-filter='clear']","filter_clear"],["flowTitle","flowTitle"],["flowNowTitle","flowNowTitle"],["flowLaterTitle","flowLaterTitle"],["flowClearTitle","flowClearTitle"],["hdrConfig","hdrConfig"],["lblLayout","lblLayout"],["lblRows","lblRows"],["secMenuTitle","secMenuTitle"],["menuModeAuto","menuModeAuto"],["menuModeManual","menuModeManual"],["menuDirOutbound","menuOutbound"],["menuDirInbound","menuInbound"],["menuServiceDay","menuDayService"],["menuServiceBreakfast","menuBreakfast"],["lblMenuBreakfastType","menuBreakfastNight"],["menuBreakfastStandard","menuBreakfastStandard"],["menuBreakfastNight","menuBreakfastNight"],["menuSelectionHeader","menuSelection"],["lblAutoOpt1","lblViande"],["lblAutoOpt2","lblVege"],["lblViande","lblViande"],["lblVege","lblVege"],["hdrInventaire","hdrInventaire"],["lblInvPlateaux","invPlateaux"],["lblInvViande","invViande"],["lblInvVege","invVege"],["lblInvSpecial","invSpecial"],["lblSpml","spml"],["spmlAddBtn","add"],["lblPreAdd","preAdd"],["preAddBtn","add"],["preHeader","preHeader"],["tcTitle","tcTitle"],["tcLblCat","tcDrink"],["tcCatCafe","tcCatCafe"],["tcCatDeca","tcCatDeca"],["tcCatThe","tcCatThe"],["tcCatInf","tcCatInf"],["tcCatDig","tcCatDig"],["tcCatBeer","tcCatBeer"],["tcCatChamp","tcCatChamp"],["tcCatVin","tcCatVin"],["tcCatSoft","tcCatSoft"],["tcCatChoco","tcCatChoco"],["tcGroupSoft","tcGroupSoft"],["tcGroupAlcohol","tcGroupAlcohol"],["tcGroupHot","tcGroupHot"],["tcLblAlcohol","tcLblAlcohol"],["tcLblHot","tcLblHot"],["tcLblSoft","tcLblSoft"],["tcLblWater","tcLblWater"],["tcLblJuice","tcLblJuice"],["tcLblCoca","tcLblCoca"],["tcLblMilk","tcMilk"],["tcLblSweet","tcSweet"],["tcLblTeaType","tcTeaType"],["tcLblInfusion","tcInfusion"],["tcLblDigestif","tcDigestif"],["tcLblService","tcService"],["tcLblBaileys","tcBaileys"],["tcLblBeer","tcBeer"],["tcLblChamp","tcChampagne"],["tcLblVin","tcWines"],["tcLblRed","tcRed"],["tcLblWhite","tcWhite"],["tcLblChoco","tcLblChoco"],["tcRedCH","tcCH"],["tcRedForeign","tcForeign"],["tcWhiteCH","tcCH"],["tcSoftWater","tcSoftWater"],["tcSoftJuice","tcSoftJuice"],["tcSoftCoca","tcSoftCoca"],["tcSoftSprite","tcSoftSprite"],["tcSoftTonic","tcSoftTonic"],["tcWaterStill","tcWaterStill"],["tcWaterSpark","tcWaterSpark"],["tcJuiceApple","tcJuiceApple"],["tcJuiceOrange","tcJuiceOrange"],["tcJuiceTomato","tcJuiceTomato"],["tcCocaClassic","tcCocaClassic"],["tcCocaZero","tcCocaZero"],["hdrHot","tcGroupHot"],["hdrSoft","tcGroupSoft"],["hdrAlco","tcGroupAlcohol"],["tcChocoBrand","tcChocoBrand"],["tcIceSoft","tcIce"],["tcIceSoft2","tcIce"],["tcIceSoft3","tcIce"],["tcIceSoft4","tcIce"],["tcLemonSoft","tcLemon"],["tcLemonSoft2","tcLemon"],["tcLemonSoft3","tcLemon"],["tcLemonSoft4","tcLemon"],["tcSalt","tcSalt"],["tcPepper","tcPepper"],["tcMilkCreme","tcMilkCreme"],["tcMilkAvoine","tcMilkAvoine"],["tcMilkLait","tcMilkLait"],["tcMilkNone","tcMilkNone"],["tcSweetSugar","tcSweetSugar"],["tcSweetSub","tcSweetSub"],["tcSweetNone","tcSweetNone"],["tcTeaEnglish","tcTeaEnglish"],["tcTeaVert","tcTeaVert"],["tcTeaMenthe","tcTeaMenthe"],["tcInfCam","tcInfCam"],["tcDigJW","tcDigJW"],["tcDigJB","tcDigJB"],["tcDigCognac","tcDigCognac"],["tcDigBaileys","tcDigBaileys"],["tcPur","tcPur"],["tcRocks","tcRocks"],["tcIce","tcIce"],["tcBeerQ","tcBeerQ"],["tcBeerC","tcBeerC"],["tcBeerL","tcBeerL"],["tcChampagne","tcChampagne"],["tcWines","tcWines"],["tcRed","tcRed"],["tcWhite","tcWhite"],["tcNotes","tcNotes"],["tcLblIceGen","tcIce"],["tcIceGen","tcIce"],["tcIceChamp","tcIce"],["tcIceVin","tcIce"],["mdTCNotes","mdTCNotes"],["mdMealDrinkNotes","mealDrinkNotes"],["serveTC","serveTC"],["serveMealDrink","serveMealDrink"],["lgSleep","lgSleep"],["lgLater","lgLater"],["lgServed","lgServed"],["lgInfant","lgInfant"],["lgChild","lgChild"],["lgTogether","lgTogether"],["lgclear","lgclear"],["secHistoryTitle","secHistoryTitle"],["remindersTitle","remindersTitle"],["histLbl","histViewLabel"],["histLblSeat","histLblSeat"],["histLblType","histLblType"],["histAscLbl","histAscLbl"],["#histType option[value='mealDrinkServed']","histType_mealDrinkServed"],["histModeAll","histScope_all"],["histModeSeat","histScope_seat"],["histModeType","histScope_type"],["#histType option[value='apServed']","histType_apServed"],["#histType option[value='tcServed']","histType_tcServed"],["#histType option[value='mealServed']","histType_mealServed"],["#histType option[value='apCanceled']","histType_apCanceled"],["#histType option[value='serviceCanceled']","histType_serviceCanceled"],["#histType option[value='trayCleared']","histType_trayCleared"],["#histType option[value='trayUncleared']","histType_trayUncleared"],["#histType option[value='reset']","histType_reset"],["#histType option[value='text']","histType_text"],["#histType option[value='seatMoveStart']","histType_seatMoveStart"],["#histType option[value='seatMoved']","histType_seatMoved"],["#histType option[value='seatSwapped']","histType_seatSwapped"],["closeModal","close"],["mdPass","mdPass"],["mdOcc","mdOcc"],["mdSleepTxt","mdSleepTxt"],["mdType","mdType"],["mdAdult","mdAdult"],["mdChild","mdChild"],["mdInfant","mdInfant"],["mdStatus","mdStatus"],["mdLang","mdLang"],["mdLater","mdLater"],["mdLaterSet","mdLaterSet"],["mdLaterCancel","mdLaterCancel"],["mdLaterCustom","mdLaterCustom"],["mdNotes","mdNotes"],["mdAperoNotes","mdAperoNotes"],["serveAperitif","serveAperitif"],["mdMeal","mdMeal"],["mdNormal","mdNormal"],["optNormalMeat","optNormalMeat"],["optNormalVeg","optNormalVeg"],["optNormalTray","optNormalTray"],["mdSpml","mdSpml"],["mdPre","mdPre"],["serveMeal","serveMeal"],["optStatusOther","optStatusOther"],["movePaxBtn","moveSeat"],["mdEatTogether","eatTogether"],["mdEatWith","mdEatWith"],["btnClearEat","clear"]];function bo(){if(!document.getElementById("appLegal")){const e=document.createElement("div");e.id="appLegal",e.style.position="fixed",e.style.bottom="6px",e.style.right="10px",e.style.fontSize="12px",e.style.color="var(--muted)",e.style.background="var(--panel)",e.style.padding="4px 8px",e.style.border="1px solid var(--grid)",e.style.borderRadius="8px",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML=' 2025 Â© Nicolas Debesse | DEBN | 47762  <span id="legalRights"></span>',document.body.appendChild(e)}}function at(){var H,ae,re,ee,U,ue;const e=o.config.lang||"EN";bo();const t=document.getElementById("legalRights");t&&(t.textContent=(v[e]||v.EN).rights||"All rights reserved");const n=v[e]||v.EN,a=document.getElementById("clientView");a&&(a.textContent=o.clientView?" "+n.crew:" "+n.client);const l=document.getElementById("flightNo");if(l&&(l.placeholder=n.flightPlaceholder||"e.g. LX2810"),Array.isArray(typeof wt<"u"?wt:[])){for(let _=0;_<wt.length;_++){const C=wt[_];if(!C||C.length<2)continue;const A=C[0],J=C[1],$=document.getElementById("m_eatWith");$&&!$.title&&($.title=n.mdEatWithPh||"e.g. 12B");const oe=A&&(A.startsWith("#")||A.startsWith("."))?document.querySelector(A):document.getElementById(A);oe&&n[J]!==void 0&&(oe.textContent=n[J])}yt==null||yt()}(function(){const C=v[o.config.lang||"EN"]||v.EN;["sleepMealBtn","sleepAperoBtn","sleepTCBtn","sleepModalBtn"].forEach($=>{const oe=document.getElementById($);oe&&(oe.title=C.mdSleepTxt||"Sleep")});const A=[["saveSnapshot","saveTitle"],["exportJSON","exportJSON"],["importJSON","importJSON"],["exportPNG","exportPNG"],["resetFlight","reset"]],J={saveSnapshot:String.fromCodePoint(128190),importJSON:String.fromCodePoint(128193)};for(const[$,oe]of A){const je=document.getElementById($);if(je&&C[oe]){const P=J[$]||"",Z=C[oe];je.textContent=P?`${P} ${Z}`:Z,je.setAttribute("aria-label",Z),je.title=Z}}})(),document.querySelectorAll("[data-i18n]").forEach(_=>{const C=_.getAttribute("data-i18n");C&&n[C]!==void 0&&(_.textContent=n[C])});const i=document.getElementById("menuManualHint");i&&(i.textContent=n.menuManualHint!==void 0?n.menuManualHint:""),gt(),function(){const C=v[o.config.lang||"EN"]||v.EN,A={drink_coffee:()=>C.tcCatCafe||"Coffee",drink_decaf:()=>C.tcCatDeca||"Decaf",drink_tea:()=>C.tcCatThe||"Tea",drink_caotina:()=>C.tcChocoBrand||C.tcCatChoco||"Caotina",drink_water:()=>C.tcSoftWater||C.tcWater||"Water",drink_cola:()=>C.tcSoftCoca||C.tcCola||"Cola",drink_juice:()=>C.tcSoftJuice||C.tcJuice||"Juice",drink_sprite:()=>C.tcSoftSprite||"Sprite",drink_tonic:()=>C.tcSoftTonic||"Tonic",drink_champagne:()=>C.tcChampagne||"Champagne",drink_red:()=>C.tcWines&&C.tcRed?`${C.tcWines}  ${C.tcRed}`:"Red wine",drink_white:()=>C.tcWines&&C.tcWhite?`${C.tcWines}  ${C.tcWhite}`:"White wine",drink_beer:()=>C.tcBeer||"Beer",drink_cocktail:()=>C.tcCocktail||"Cocktail",drink_digestif:()=>C.tcDigestif||"Digestif"};document.querySelectorAll("#drinkGrid .pill-cap[data-i18n-cap]").forEach(J=>{const $=J.getAttribute("data-i18n-cap"),oe=(A[$]?A[$]():J.textContent||"").trim();oe&&(J.textContent=oe)})}();{const _=v[o.config.lang||"EN"]||v.EN,C=(A,J)=>{const $=document.querySelector(A);$&&($.title=J,$.setAttribute("aria-label",J))};C('#hotRow .pill.big[data-sub="cafe"]',_.tcCatCafe||"Coffee"),C('#hotRow .pill.big[data-sub="deca"]',_.tcCatDeca||"Decaf"),C('#hotRow .pill.big[data-sub="the"]',_.tcCatThe||"Tea"),C('#hotRow .pill.big[data-sub="chocolat"]',_.tcCatChoco||"Caotina"),C('#softRow .pill.big[data-sub="eau"]',_.tcSoftWater||_.tcWater||"Water"),C('#softRow .pill.big[data-sub="coca"]',_.tcCola||"Cola"),C('#softRow .pill.big[data-sub="jus"]',_.tcSoftJuice||_.tcJuice||"Juice"),C('#softRow .pill.big[data-sub="sprite"]',_.tcSoftSprite||"Sprite"),C('#softRow .pill.big[data-sub="tonic"]',_.tcSoftTonic||"Tonic"),C('#alcoRow .pill.big[data-sub="champagne"]',_.tcChampagne||"Champagne"),C('#alcoRow .pill.big[data-sub="biere"]',_.tcBeer||"Beer"),C('#alcoRow .pill.big[data-sub="vin_rouge"]',_.tcWines&&_.tcRed?`${_.tcWines}  ${_.tcRed}`:"Red wine"),C('#alcoRow .pill.big[data-sub="vin_blanc"]',_.tcWines&&_.tcWhite?`${_.tcWines}  ${_.tcWhite}`:"White wine"),C('#alcoRow .pill.big[data-sub="digestif"]',_.tcDigestif||"Digestif")}const c=document.getElementById("m_tcNotes");c&&(c.placeholder=n.tcNotesPlaceholder||"e.g. Long coffee, sugar");const s=document.getElementById("m_notes");s&&(s.placeholder=n.passengerNotesPlaceholder||"e.g., DE only, no nuts");const r=document.getElementById("m_mealDrinkNotes");r&&(r.placeholder=n.mealDrinkNotesPlaceholder||"e.g. sparkling water, white wine, peanuts");const d=document.getElementById("m_eatWith");d&&(d.placeholder=n.mdEatWithPh||"e.g. 12B");const u=document.getElementById("labelViande"),p=document.getElementById("labelVege");u&&(u.placeholder=n.meatPlaceholder||"e.g., Beef in red-wine sauce"),p&&(p.placeholder=n.vegPlaceholder||"e.g., Vegetarian lasagna");const y=document.getElementById("filterTabs");if(y){const _=e==="FR"?"Filtrer":e==="DE"?"Filtern":"Filter";y.setAttribute("aria-label",_),y.setAttribute("title",_)}const g=document.getElementById("layoutButtons");if(g){const _=e==="FR"?"Type d'appareil":e==="DE"?"Flugzeugtyp":"Aircraft type";g.setAttribute("title",_),g.setAttribute("aria-label",_)}$t();const h=document.getElementById("legendToggle");if(h){const _=n.legendShow||"Show legend",C=n.legendHide||"Hide legend";h.dataset.labelShow=_,h.dataset.labelHide=C;const A=tt()?C:_;h.textContent=A,h.title=A,h.setAttribute("aria-label",A)}typeof qe=="function"&&qe();const m=document.getElementById("spmlAddCode");m&&(m.title=e==="FR"?"Ajouter code SPML":e==="DE"?"SPML-Code hinzufï¿½gen":"Add SPML code");const k=document.getElementById("preAddCode");if(k){const _=n.preAddSelectPlaceholder||(e==="FR"?"Choisir un code":e==="DE"?"Code auswaehlen":"Choose a code");k.title=_,k.setAttribute("aria-label",_)}const I=document.getElementById("preAddLabel");I&&(I.placeholder=n.preAddPlaceholder||"e.g., Gluten-free pasta");const b=document.querySelector(".later-btn[data-value='custom']");if(b){const _=(n.mdLaterCustomBtn||"Custom").trim()||"Custom";b.textContent=_}const S=document.getElementById("resetFlight");if(S){const _=(n.reset??S.textContent??"").trim();S.dataset.defaultLabel=_,S.dataset.resetArmed!=="true"&&(S.textContent=_)}document.documentElement.lang=e.toLowerCase();const E=document.getElementById("legalRights");E&&(E.textContent=n.rights||"All rights reserved");const T=document.getElementById("m_notes");T&&(T.placeholder=n.passengerNotesPlaceholder||"e.g., DE only, no nuts");const M=document.getElementById("m_aperoNotes");M&&(M.placeholder=n.aperoNotesPlaceholder||"e.g. Sparkling water, white wine, peanuts");const N=document.getElementById("histSeat");N&&(N.placeholder=n.histSeatPlaceholder||"e.g., 3A"),typeof ge=="function"&&ge(),typeof window._rerenderDatepickerLang=="function"&&window._rerenderDatepickerLang();const K=document.getElementById("flightDate");K&&(o.config.lang==="FR"?K.placeholder="JJ/MM/AAAA":o.config.lang==="DE"?K.placeholder="TT.MM.JJJJ":K.placeholder="MM, DD, YYYY"),vt(),vo(),pt();try{(H=document.getElementById("tc_soft_type"))==null||H.dispatchEvent(new Event("change")),(ae=document.getElementById("tc_cocktail_type"))==null||ae.dispatchEvent(new Event("change")),(re=document.getElementById("tc_beer"))==null||re.dispatchEvent(new Event("change")),(ee=document.getElementById("tc_vin_rouge"))==null||ee.dispatchEvent(new Event("change")),(U=document.getElementById("tc_vin_blanc"))==null||U.dispatchEvent(new Event("change")),Je==null||Je(),D();try{((ue=document.getElementById("modalBack"))==null?void 0:ue.style.display)==="flex"&&typeof Ze=="function"&&Ze()}catch{}}catch(_){console.warn("Post-i18n drinks refresh:",_)}try{const _=document.getElementById("modalBack");!!_&&(_.style.display==="flex"||_.style.display==="")&&document.getElementById("drinkGrid")&&(kt(),Q(),X(),zt(),D(),typeof f<"u"&&f&&(o.phase==="tc"?Le==null||Le(f.key):o.phase==="repas"&&(_e==null||_e(f.key))))}catch(_){console.warn("Drink grid rebind after i18n failed:",_)}(()=>{const _=document.getElementById("langActive");if(_){const C={EN:String.fromCodePoint(127468,127463),DE:String.fromCodePoint(127465,127466),FR:String.fromCodePoint(127467,127479)},A=(o.config.lang||"EN").toUpperCase(),J=C[A]||String.fromCodePoint(127987);_.textContent=J,_.setAttribute("aria-label",A),_.title=A}})()}function O(){const e=w("#seatgrid");e.classList.toggle("bulk-occupy-mode",!!z),e.innerHTML="";const t=o.config.rowsBiz||0,n=fo();e.style.gridTemplateColumns="40px minmax(60px,1fr) minmax(60px,1fr) minmax(60px,1fr) 28px "+n.map(()=>"minmax(60px,1fr)").join(" "),["","F","E","D",""].concat(n).forEach(l=>{const i=document.createElement("div");i.style.textAlign="center",i.style.color="var(--muted)",i.style.fontSize="12px",i.textContent=l,e.appendChild(i)});for(let l=t;l>=1;l--){const i=document.createElement("div");i.className="row-label",i.textContent=l,e.appendChild(i),["F","E","D"].forEach(s=>e.appendChild(Gn(l,s)));const c=document.createElement("div");c.className="aisle",e.appendChild(c),n.forEach(s=>e.appendChild(Gn(l,s)))}ge()}function Gn(e,t){var p,y,g,h,m;const n=he(e,t),a=document.createElement("div"),l=Cn(e,t);a.className="seat bus",a.dataset.seatKey=l,n.occupied&&a.classList.add("occupied"),n.sleep&&a.classList.add("sleeping"),z&&Be.has(l)&&a.classList.add("bulk-picked");const i=v[o.config.lang||"EN"]||v.EN,c=document.createElement("div");c.className="mini";const s=document.createElement("div");s.className="dot",n.status==="FTL"?s.classList.add("ftl"):n.status==="SEN"?s.classList.add("sen"):n.status==="HON"?s.classList.add("hon"):n.status==="VIP"?s.classList.add("vip"):n.status==="FCL"?s.classList.add("fcl"):n.status==="PAD"&&s.classList.add("pad"),c.appendChild(s),a.appendChild(c);const r=document.createElement("div");if(r.className="seat-label",r.textContent=e+t,a.appendChild(r),!((p=n==null?void 0:n.served)!=null&&p.trayCleared)){const k=document.createElement("div");k.className="meal-tag";const I=n.spml||n.preLabel?null:n.normalMeal==="viande"?"1":n.normalMeal==="vege"?"2":n.normalMeal==="plateau"?"":null;let b=null,S=!1;n.spml?(b=n.spml,S=!0):n.preLabel?(b="PRE",S=!0):I?b=I:(y=n==null?void 0:n.served)!=null&&y.mealNone&&(b="Ã˜"),b&&(k.textContent=b,S&&k.classList.add("vertical"),a.appendChild(k))}const d=document.createElement("div");d.className="iconbar",n.type==="infant"&&Xt(d,"flag-infant",i.lgInfant||i.mdInfant||"Infant","INF"),n.type==="child"&&Xt(d,"flag-child",i.lgChild||i.mdChild||"Child","CHD"),n!=null&&n.served&&n.served.trayCleared,n.serveLaterAt&&Xt(d,"flag-later",i.lgLater||i.mdLater||"Serve later","ðŸ›Žï¸"),a.appendChild(d),Jt(a,k=>{o.clientView||(k.preventDefault(),k.stopPropagation(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),!Jn(l)&&pn(l))}),a.addEventListener("pointerup",k=>{o.clientView||k.pointerType==="mouse"&&(Jn(l)||pn(l))},{passive:!0});const u=mo();if(u==="toServe"){const k=o.phase==="aperitif"?"aperitif":o.phase==="tc"?"tc":"meal",I=!!((g=n==null?void 0:n.served)!=null&&g[k]);a.style.opacity=!n.occupied||I?.25:1}else if(u==="sleeping")a.style.opacity=n.sleep?1:.2;else if(u==="later")a.style.opacity=n.serveLaterAt?1:.2;else if(u==="clear"){const k=!!((h=n==null?void 0:n.served)!=null&&h.meal)&&!((m=n==null?void 0:n.served)!=null&&m.trayCleared);a.style.opacity=k?1:.2}else a.style.opacity=1;return a}function ce(){var s,r;const e=w("#history");if(!e)return;e.innerHTML="";const t=v[o.config.lang||"EN"],n=Bn(),a=(((s=document.getElementById("histSeat"))==null?void 0:s.value)||"").trim().toUpperCase().replace(/\s+/g,""),l=((r=document.getElementById("histType"))==null?void 0:r.value)||"",i=!!o.config.histAsc;let c=Array.isArray(o.history)?o.history.slice():[];n==="seat"&&a?c=c.filter(d=>d&&typeof d=="object"&&(d.seat||"").toUpperCase()===a):n==="type"&&l&&(c=c.filter(d=>d&&typeof d=="object"&&(d.type===l||l==="mealDrinkServed"&&d.type==="tcServed"&&d.ctx==="repas")&&!(l==="tcServed"&&d.ctx==="repas"))),i&&(c=c.slice().reverse());for(const d of c){const u=document.createElement("div");if(typeof d=="string"){u.textContent=d,e.appendChild(u);continue}const p=new Date(d.ts||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});let y="";switch(d.type){case"trayCleared":y=`${v[o.config.lang||"EN"].clearTray} - ${d.seat}`;break;case"trayUncleared":y=`${v[o.config.lang||"EN"].undoClearTray} - ${d.seat}`;break;case"apServed":{const g=d.seat,h=de(d.ap,t,o.config.lang)||"",m=d.notes?`  ${d.notes}`:"";y=`${t.histApServed} ${g}${h?" - "+h:""}${m}`;break}case"apOrdered":{const g=d.seat,h=de(d.ap,t,o.config.lang)||"",m=d.notes?`  ${d.notes}`:"";y=`${t.histApOrdered||"Aperitif ordered at"} ${g}${h?" - "+h:""}${m}`;break}case"tcServed":{const g=d.seat,h=de(d.ap,t,o.config.lang)||"",m=d.notes?`  ${d.notes}`:"";y=`${d.ctx==="repas"?t.histMealDrinkServed||"Meal drinks served at":t.histTcServed||"Tea & coffee served at"} ${g}${h?" - "+h:""}${m}`;break}case"tcOrdered":{const g=d.seat,h=de(d.ap,t,o.config.lang)||"",m=d.notes?`  ${d.notes}`:"";y=`${d.ctx==="repas"?t.histMealDrinkOrdered||"Meal drinks ordered at":t.histTcOrdered||"Tea & coffee ordered at"} ${g}${h?" - "+h:""}${m}`;break}case"apCanceled":y=`${t.histApCanceled} ${d.seat}`;break;case"mealServed":{const g=d.label==="__TRAY__"?t.trayShort||"Tray":d.label||"";y=`${t.histMealServed} ${d.seat}${g?" - "+g:""}`;break}case"serviceCanceled":y=`${t.histCanceled} ${d.seat}`;break;case"reset":y=t.resetDone;break;case"titleSet":{const g=d.flightNo||"",h=bt(d.dateISO||"")||d.dateISO||"";y=`${t.histTitleSet} ${g}${h?"  "+h:""}`;break}case"seatMoveStart":y=`${t.moveSeat} - ${d.from}`;break;case"seatMoved":y=`${d.from} -> ${d.to} - ${t.moved}`;break;case"seatSwapped":y=`${d.a} <-> ${d.b} - ${t.swapped}`;break;case"text":default:y=d.text||""}u.textContent=`[${p}] ${y}`,e.appendChild(u)}}function vo(){const e=v[o.config.lang||"EN"]||v.EN,t=document.getElementById("secHistoryTitle");if(t){const a=(e.secHistoryTitle||"History").replace(/\s*\(.*\)\s*$/,"").trim(),l=o.config.histAsc?e.histOldest||" (oldest on top)":e.histNewest||" (newest on top)";t.textContent=a+" "+l}const n=document.getElementById("histOrderBtn");if(n){const a=!!o.config.histAsc,l=a?e.histOldestBtn:e.histNewestBtn,c=`${a?"â¬‡ï¸":"â¬†ï¸"} ${l}`;n.textContent=c,n.title=c,n.setAttribute("aria-label",c)}}function ot(){const e=document.getElementById("histSeat");if(!e)return;const t=(e.value||"").trim().toUpperCase();e.innerHTML='<option value=""></option>';const n=Object.keys(o.seats||{}).sort();for(const a of n){const l=o.seats[a];if(l&&l.occupied){const i=document.createElement("option");i.value=a,i.textContent=a,e.appendChild(i)}}[...e.options].some(a=>a.value===t)&&(e.value=t)}function Bn(){return So||"all"}function ko(e){So=e,Array.from(document.querySelectorAll(".hist-mode-switch .btn")).forEach(n=>{const a=(n.dataset.mode||"all")===e;n.classList.toggle("active",a),n.setAttribute("aria-pressed",a?"true":"false")}),Ml()}function Ml(){const e=Bn(),t=document.getElementById("histSeatWrap"),n=document.getElementById("histTypeWrap");t&&(t.style.display=e==="seat"?"inline-flex":"none"),n&&(n.style.display=e==="type"?"inline-flex":"none"),e==="seat"&&ot(),ce()}document.querySelectorAll(".hist-mode-switch .btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.mode||"all";ko(t)})});var na;(na=document.getElementById("histSeat"))==null||na.addEventListener("change",ce);var aa;(aa=document.getElementById("histType"))==null||aa.addEventListener("change",ce);var oa;(oa=document.getElementById("histOrderBtn"))==null||oa.addEventListener("click",()=>{o.config.histAsc=!o.config.histAsc,B(),ce(),vo()});ko("all");function ne(){var u,p,y;const e=o.config.lang||"EN";o.inventory.hot_special=Sl();const t=e==="FR"?"Diminuer":e==="DE"?"Reduzieren":"Decrease",n=e==="FR"?"Augmenter":e==="DE"?"Erhï¿½hen":"Increase",a=(g,h)=>{const m=document.querySelector(`[data-badge="${g}"]`);m&&(m.textContent=h,m.className="badge",m.classList.add(h<=0?"zero":h<=2?"low":"ok"))},l=(g,h)=>{g.forEach(m=>{m&&(m.style.display=h?"":"none")})};a("plateaux",o.inventory.plateaux),a("hot_viande",o.inventory.hot_viande),a("hot_vege",o.inventory.hot_vege),a("hot_special",o.inventory.hot_special);const i=El();a("hot_pre",i),l([document.getElementById("lblInvSpecial"),((u=document.querySelector('[data-badge="hot_special"]'))==null?void 0:u.parentElement)||null,document.getElementById("spmlInv")],(o.inventory.hot_special||0)>0),l([document.getElementById("preHeader"),((p=document.querySelector('[data-badge="hot_pre"]'))==null?void 0:p.parentElement)||null,document.getElementById("preInv")],i>0);const c=document.querySelector('[data-badge="hot_pre"]');c&&(c.title=e==="FR"?"Somme des prÃ©commandes":e==="DE"?"Summe Vorbestellungen":"Pre-order sum");const s=document.querySelector('[data-badge="hot_special"]');s&&(s.title=e==="FR"?"Somme des SPML":e==="DE"?"Summe SPML":"SPML sum");const r=w("#spmlAddCode");if(r){const g=(r==null?void 0:r.value)||"",h=e==="FR"?"Choisir":e==="DE"?"Waehlen":"Choose";r.innerHTML=`<option value="">${h}</option>`;for(const m of Et){const k=document.createElement("option");k.value=m,k.textContent=m,r.appendChild(k)}[...r.options].some(m=>m.value===g)&&(r.value=g)}const d=w("#preAddCode");if(d){const g=(d==null?void 0:d.value)||"",h=(((y=v[e])==null?void 0:y.preAddSelectPlaceholder)||"").trim()||(e==="FR"?"Choisir un code":e==="DE"?"Code auswaehlen":"Choose a code");d.innerHTML=`<option value="">${h}</option>`;for(const m of ml){const k=document.createElement("option");k.value=m,k.textContent=m,d.appendChild(k)}[...d.options].some(m=>m.value===g)&&(d.value=g)}Nl(t,n),Al(t,n)}function Nl(e,t){const n=w("#spmlInv");if(!n)return;n.innerHTML="";const a=Object.entries(o.inventory.spml||{}).filter(([,l])=>(l||0)>0).sort((l,i)=>l[0].localeCompare(i[0]));for(const[l,i]of a){const c=i||0,s=document.createElement("div");s.textContent=l,n.appendChild(s);const r=document.createElement("div");r.className="row";const d=document.createElement("button");d.type="button",d.className="btn inv-minus",d.setAttribute("aria-label",e),d.addEventListener("click",()=>jt("spml",l,-1));const u=document.createElement("div");u.className="badge",u.dataset.badge="spml_"+l,u.textContent=c;const p=document.createElement("button");p.type="button",p.className="btn inv-plus",p.setAttribute("aria-label",t),p.addEventListener("click",()=>jt("spml",l,1)),r.append(d,u,p),n.appendChild(r)}}function Al(e,t){const n=w("#preInv");if(!n)return;n.innerHTML="";const a=Object.entries(o.inventory.pre||{}).filter(([l])=>l&&l.trim().length>0).sort((l,i)=>l[0].localeCompare(i[0]));for(const[l,i]of a){const c=i||0,s=document.createElement("div");s.textContent=l,n.appendChild(s);const r=document.createElement("div");r.className="row";const d=document.createElement("button");d.type="button",d.className="btn inv-minus",d.setAttribute("aria-label",e),d.disabled=c<=0,d.addEventListener("click",()=>jt("pre",l,-1));const u=document.createElement("div");u.className="badge",u.dataset.badge="pre_"+l,u.textContent=c;const p=document.createElement("button");p.type="button",p.className="btn inv-plus",p.setAttribute("aria-label",t),p.addEventListener("click",()=>jt("pre",l,1)),r.append(d,u,p),n.appendChild(r)}}function jt(e,t,n){e==="spml"?o.inventory.spml[t]=Math.max(0,(o.inventory.spml[t]||0)+n):e==="pre"?o.inventory.pre[t]=Math.max(0,(o.inventory.pre[t]||0)+n):o.inventory[t]=Math.max(0,(o.inventory[t]||0)+n),B()}const Dl={viande:"hot_viande",vege:"hot_vege"};function Ol(e,t){const n=v[o.config.lang||"EN"];(!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null,trayReserved:!1});const a=e.normalMeal||"",l=t&&t!=="plateau"?Dl[t]:null;if(t===a)return a!=="plateau"&&e.alloc.normalKey&&(Vt(e,e.alloc.normalKey),e.alloc.normalKey=null),a==="plateau"&&e.alloc.trayReserved&&(o.inventory.plateaux=(o.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),e.normalMeal="",B(),ne(),!0;if(e.alloc.spmlCode&&(wn(e,e.alloc.spmlCode),e.spml="",e.alloc.spmlCode=null),e.alloc.preLabel&&(In(e,e.alloc.preLabel),e.preLabel="",e.alloc.preLabel=null),e.alloc.normalKey&&(Vt(e,e.alloc.normalKey),e.alloc.normalKey=null),a==="plateau"&&e.alloc.trayReserved&&(o.inventory.plateaux=(o.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),t==="plateau")return(o.inventory.plateaux||0)<=0?(alert(n.alertNoTrays||"No more trays."),!1):(o.inventory.plateaux--,e.alloc.trayReserved=!0,e.normalMeal="plateau",B(),ne(),!0);if(l){if((o.inventory[l]||0)<=0){const i=t==="viande"?n.lblViande:t==="vege"?n.lblVege:t==="plateau"?n.trayShort||"Tray":t;return alert(n.alertStock+" "+i+"."),!1}return o.inventory[l]--,e.alloc.normalKey=l,e.normalMeal=t,B(),ne(),!0}return e.normalMeal="",B(),ne(),!0}function $n(e,t){const n=v[o.config.lang||"EN"];if((!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null}),t&&(t=t.trim()),e.alloc.trayReserved&&(o.inventory.plateaux=(o.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),e.normalMeal==="plateau"&&(e.normalMeal=""),e.alloc.normalKey&&(Vt(e,e.alloc.normalKey),e.normalMeal="",e.alloc.normalKey=null),e.alloc.preLabel&&(In(e,e.alloc.preLabel),e.preLabel="",e.alloc.preLabel=null),e.alloc.spmlCode&&(wn(e,e.alloc.spmlCode),e.spml="",e.alloc.spmlCode=null),t){if((o.inventory.spml[t]||0)<=0)return alert(t+" "+n.alertDepleted),!1;o.inventory.spml[t]--,e.alloc.spmlCode=t,e.spml=t,B(),ne()}return!0}function xl(e,t){const n=v[o.config.lang||"EN"];if((!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null}),t&&(t=t.trim()),e.alloc.trayReserved&&(o.inventory.plateaux=(o.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),e.normalMeal==="plateau"&&(e.normalMeal=""),e.alloc.normalKey&&(Vt(e,e.alloc.normalKey),e.normalMeal="",e.alloc.normalKey=null),e.alloc.spmlCode&&(wn(e,e.alloc.spmlCode),e.spml="",e.alloc.spmlCode=null),e.alloc.preLabel&&(In(e,e.alloc.preLabel),e.preLabel="",e.alloc.preLabel=null),t){if((o.inventory.pre[t]||0)<=0)return alert(t+" "+n.alertDepleted),!1;o.inventory.pre[t]--,e.alloc.preLabel=t,e.preLabel=t,B(),ne()}return!0}function Vt(e,t){o.inventory[t]=(o.inventory[t]||0)+1,B()}function wn(e,t){o.inventory.spml[t]=(o.inventory.spml[t]||0)+1,B()}function In(e,t){o.inventory.pre[t]=(o.inventory.pre[t]||0)+1,B()}function xe(){if(!f)return;const e=f.data,t=!!(e.served&&e.served.mealNone),n=!!(e.served&&e.served.meal),a=document.getElementById("m_normalMealValue"),l=((a==null?void 0:a.value)||e.normalMeal||"").trim();a&&(a.value=l);const i=document.getElementById("m_spmlValue");i&&(i.value=e.spml||"");const c=w("#m_pre");c&&(c.value=e.preLabel||"");const s=!!e.spml||!!e.preLabel||["viande","vege","plateau"].includes(l),r=w("#serveMeal");r&&(r.disabled=!(n||s),r.title=r.disabled?"Choisissez un plat (normal, SPML ou prcommande) pour servir":"");const d=v[o.config.lang||"EN"];r&&(r.disabled=!(n||s),r.title=r.disabled?"Choisissez un plat (normal, SPML ou prcommande) pour servir":"",r.textContent=n&&!t?d.cancelService||"Cancel service":d.serveMeal||"Serve main",r.classList.toggle("is-hot",n||s),r.setAttribute("aria-pressed",n&&!t?"true":"false"));const u=w("#serveMealNone");u&&(u.disabled=s,u.setAttribute("aria-disabled",s?"true":"false"),u.classList.toggle("disabled",s),u.style.pointerEvents=s?"none":"",u.classList.toggle("is-hot",t),u.setAttribute("aria-pressed",t?"true":"false"),u.setAttribute("data-variant","ghost"),u.title=u.disabled?"":u.title);const p=w("#clearTrayBtn");if(p){const y=!!(e.served&&e.served.trayCleared);p.classList.toggle("is-hot",y),p.setAttribute("aria-pressed",y?"true":"false"),p.setAttribute("data-variant","ghost")}yn(document.getElementById("drinkGrid"))}let f=null,nt=[],Se=null;const en=48;var So="all";function Eo(e){const t=/^(\d+)([A-Z]+)$/i.exec(e||"");return t?{row:parseInt(t[1],10),col:t[2].toUpperCase()}:null}function Pl(e){const t=Eo(e);t&&be(t.row,t.col)}function fn(e){if(!f)return;const t=nt.indexOf(f.key);if(t===-1)return;const n=nt[t+e];n&&Pl(n)}function ct(){const e=o.seats||{},t=["A","B","C","D","E","F"],n=[];for(const p of Object.keys(e)){const y=Eo(p);!y||!(e[p]||{}).occupied||n.push({key:p,parts:y})}n.sort((p,y)=>{if(p.parts.row===y.parts.row){const g=t.indexOf(p.parts.col),h=t.indexOf(y.parts.col);return g!==-1&&h!==-1?g-h:g!==-1?-1:h!==-1?1:p.parts.col.localeCompare(y.parts.col)}return p.parts.row-y.parts.row}),nt=n.map(p=>p.key);const a=(f==null?void 0:f.key)||"",l=document.getElementById("seatNav"),i=document.getElementById("seatNavPrev"),c=document.getElementById("seatNavNext"),s=document.getElementById("seatNavCurrent");s&&(s.textContent=a||"--");const r=nt.indexOf(a),d=r>0,u=r!==-1&&r<nt.length-1;l&&l.setAttribute("data-empty",nt.length?"false":"true"),i&&(i.disabled=!d,i.setAttribute("aria-disabled",(!d).toString()),i.onclick=()=>fn(-1)),c&&(c.disabled=!u,c.setAttribute("aria-disabled",(!u).toString()),c.onclick=()=>fn(1))}function Kl(e,t){return e==="viande"?t.optNormalMeat||"Option 1":e==="vege"?t.optNormalVeg||"Option 2":e==="plateau"?t.optNormalTray||"Tray (no casserole)":e||""}function st(e){const t=document.getElementById("m_normalMeal"),n=document.getElementById("m_normalMealValue");if(!t)return;const a=v[o.config.lang||"EN"],l=((e==null?void 0:e.normalMeal)||"").trim();n&&(n.value=l),t.innerHTML="";const i=[{value:"viande",inventoryKey:"hot_viande"},{value:"vege",inventoryKey:"hot_vege"},{value:"plateau",inventoryKey:"plateaux"}];for(const c of i){const s=document.createElement("button");s.type="button",s.className="meal-card",s.setAttribute("role","radio"),s.dataset.value=c.value;const r=document.createElement("div");r.className="meal-card__row";const d=document.createElement("div");d.className="meal-card__name",d.textContent=Kl(c.value,a);const u=c.value!=="plateau";let p=0;if(c.inventoryKey&&(p=Math.max(0,o.inventory[c.inventoryKey]||0)),r.appendChild(d),u){const h=document.createElement("div");h.className="meal-card__meta";const m=document.createElement("span");m.className="badge",m.textContent=String(p),h.appendChild(m),r.appendChild(h)}s.appendChild(r);const y=l===c.value;y?(s.classList.add("is-selected"),s.setAttribute("aria-pressed","true")):s.setAttribute("aria-pressed","false"),!(p>0)&&!y&&s.setAttribute("aria-disabled","true"),Jt(s,()=>{if(!f)return;const h=f.data,m=h.normalMeal===c.value?"":c.value;Ol(h,m)&&(B(),O(),x(),st(h),rt(h),xe(),ct())}),t.appendChild(s)}}function rt(e){const t=document.getElementById("spmlRow"),n=document.getElementById("m_spml"),a=document.getElementById("m_spmlValue");if(!t||!n)return;const l=(e==null?void 0:e.spml)||"";a&&(a.value=l),n.innerHTML="";const i=Et.map(s=>{const r=o.inventory.spml[s]||0;return{code:s,qty:r,isChosen:l===s}}).filter(s=>s.qty>0||s.isChosen);if(!i.length){t.style.display="none";return}if(i.length>3){const s=document.createElement("select");s.id="m_spml_select";const r=document.createElement("option");r.value="",r.textContent="",s.appendChild(r),i.forEach(({code:d,qty:u,isChosen:p})=>{const y=document.createElement("option");y.value=d,y.textContent=`${d} (${Math.max(0,u)})`,u<=0&&!p&&(y.disabled=!0),s.appendChild(y)}),s.value=l||"",s.addEventListener("change",()=>{if(!f)return;const d=f.data,u=s.value||"";if(!$n(d,u)){s.value=l||"";return}B(),O(),x(),st(d),rt(d),xe(),ct()}),n.appendChild(s)}else i.forEach(({code:s,qty:r,isChosen:d})=>{const u=document.createElement("button");u.type="button",u.className="meal-card",u.dataset.value=s,u.setAttribute("role","radio");const p=document.createElement("div");p.className="meal-card__row";const y=document.createElement("div");y.className="meal-card__name",y.textContent=s;const g=document.createElement("div");g.className="meal-card__meta";const h=document.createElement("span");h.className="badge",h.textContent=String(Math.max(0,r)),g.appendChild(h),p.appendChild(y),p.appendChild(g),u.appendChild(p),d?(u.classList.add("is-selected"),u.setAttribute("aria-pressed","true")):u.setAttribute("aria-pressed","false"),r<=0&&!d&&u.setAttribute("aria-disabled","true"),Jt(u,()=>{if(!f)return;const m=f.data,k=m.spml===s?"":s;$n(m,k)&&(B(),O(),x(),st(m),rt(m),xe(),ct())}),n.appendChild(u)});t.style.display=""}function Rl(e){if(!f||!e.touches||e.touches.length!==1)return;const t=e.touches[0],n=e.target,a=!!(n!=null&&n.closest(".meal-header"));Se={startX:t.clientX,startY:t.clientY,time:Date.now(),mode:a?"nav":"actions"}}function Fl(e){if(!Se||!f)return;if(!e.changedTouches||e.changedTouches.length!==1){Se=null;return}const t=e.changedTouches[0],n=t.clientX-Se.startX,a=t.clientY-Se.startY,l=Math.abs(n),i=Math.abs(a);if(Se.mode==="nav"&&l>i&&l>en){fn(n>0?-1:1),Se=null;return}if(Se.mode==="actions"){if(l>i&&l>en){const c=n>0?document.getElementById("serveMeal"):document.getElementById("serveMealNone");c&&!c.disabled&&c.click()}else if(a>en){const c=document.getElementById("clearTrayBtn");c&&!c.disabled&&c.click()}}Se=null}function jl(){const e=f&&f.data?f.data:{};st(e),rt(e);const t=w("#m_pre");t.innerHTML='<option value=""></option>';for(const[n,a]of Object.entries(o.inventory.pre)){const l=(a||0)>0,i=e.preLabel===n;if(l||i){const c=document.createElement("option");c.value=n,c.textContent=`${n} (${Math.max(0,a)})`,t.appendChild(c)}}t.value=e.preLabel||""}function be(e,t){var re,ee,U,ue,_,C,A,J,$,oe,je;const n=Cn(e,t);f={row:e,col:t,key:n,data:he(e,t)};const a=document.getElementById("movePaxBtn");a&&(a.onclick=()=>{Jl(f.key),Ot==null||Ot()}),a&&(a.disabled=!f.data.occupied,a.setAttribute("aria-disabled",(!f.data.occupied).toString())),mn(),w("#modalTitle").textContent=v[o.config.lang||"EN"].seat,jl(),ct(),w("#m_status").value=f.data.status,Tn(),w("#m_lang").value=f.data.lang||"",_n(),w("#m_notes").value=f.data.notes||"";const l=document.getElementById("m_eatWith");if(l){l.innerHTML='<option value=""></option>';const P=f&&f.key||"",Z=Object.keys(o.seats||{}).sort();for(const ye of Z){if(ye===P)continue;const W=o.seats[ye];if(W&&W.occupied){const G=document.createElement("option");G.value=ye,G.textContent=ye,l.appendChild(G)}}l.value=f.data.eatWith||"";const ke=v[o.config.lang||"EN"]||v.EN;l.title=ke.mdEatWithPh||"e.g. 12B"}const i=v[o.config.lang||"EN"],c=document.getElementById("mdNotes");c&&(c.textContent=i.mdNotes||"Notes");const s=document.getElementById("m_notes");s&&!s.placeholder&&(s.placeholder="ex: DE only, no nuts"),w("#m_aperoNotes").value=f.data.aperoNotes||"",w("#m_later").value="";const r=document.getElementById("laterCustomContainer");r&&r.classList.remove("active");const d=document.getElementById("m_later_time");d&&(d.value="",d.disabled=!0);const u=document.getElementById("clearTrayBtn");if(u){u.disabled=!((ee=(re=f.data)==null?void 0:re.served)!=null&&ee.meal);const P=v[o.config.lang||"EN"];u.textContent=(ue=(U=f.data)==null?void 0:U.served)!=null&&ue.trayCleared?P.undoClearTray:P.clearTray}const p=w("#m_occ_chk");p&&(p.checked=!!f.data.occupied),go(),xe();const y=f.data.type||"normal",g=document.getElementById("m_type_adult"),h=document.getElementById("m_type_child"),m=document.getElementById("m_type_infant");g&&h&&m&&(g.checked=y==="normal",h.checked=y==="child",m.checked=y==="infant");const k=w("#m_sleep_chk");k&&(k.checked=!!f.data.sleep),mn();let I=f.data.served.aperitif?i.apLabel+": "+new Date(f.data.served.aperitif).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):i.apLabel+": ",b=f.data.served.meal?i.mealLabel+": "+new Date(f.data.served.meal).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):i.mealLabel+": ",S=f.data.served.tc?(i.chips_tc||"Tea & Coffee")+": "+new Date(f.data.served.tc).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):(i.chips_tc||"Tea & Coffee")+": ";if(f.data.served.aperitif){const P=de(f.data.apDrink,i,o.config.lang||"EN");P&&(I+="  "+P+(i.ordered?" "+i.ordered:""))}if(f.data.served.tc){const P=de(f.data.apDrink,i,o.config.lang||"EN");P&&(S+="  "+P+(i.ordered?" "+i.ordered:""))}const E=w("#m_history"),T=w("#m_history_apero"),M=w("#m_history_tc");o.phase==="aperitif"?(E&&(E.textContent=""),M&&(M.textContent=""),T&&(T.textContent=I)):o.phase==="tc"?(E&&(E.textContent=""),T&&(T.textContent=""),Le(f.key)):(T&&(T.textContent=""),M&&(M.textContent=""),E&&(E.textContent=b),_e(f.key));const N=o.phase;if((_=document.getElementById("mealBlock"))!=null&&_.style&&(document.getElementById("mealBlock").style.display=N==="repas"?"block":"none"),(C=document.getElementById("aperoBlock"))!=null&&C.style&&(document.getElementById("aperoBlock").style.display=N==="aperitif"?"block":"none"),(A=document.getElementById("tcServeBlock"))!=null&&A.style&&(document.getElementById("tcServeBlock").style.display=N==="tc"?"block":"none"),(J=document.getElementById("mealDrinkServeRow"))!=null&&J.style&&(document.getElementById("mealDrinkServeRow").style.display=N==="repas"?"flex":"none"),($=document.getElementById("aperoNotesBlock"))!=null&&$.style&&(document.getElementById("aperoNotesBlock").style.display=N==="aperitif"?"block":"none"),(oe=document.getElementById("tcNotesBlock"))!=null&&oe.style&&(document.getElementById("tcNotesBlock").style.display=N==="tc"?"block":"none"),(je=document.getElementById("tcBlock"))!=null&&je.style&&(document.getElementById("tcBlock").style.display=N==="aperitif"||N==="tc"?"block":"none"),o.phase==="tc"&&f)Le(f.key);else{const P=document.getElementById("mhTCInline");P&&(P.textContent="")}if(o.phase==="repas"&&f)_e(f.key);else{const P=document.getElementById("mhMealDrinkInline");if(P){const Z=v[o.config.lang||"EN"]||v.EN;P.textContent=(Z.mealDrinkTitle||"Meal drinks")+": "}}function K(P,Z){var Mn;yt();const ke=document.querySelector(".modal"),ye=document.querySelector(".two > div:first-child"),W=document.getElementById("rightCol"),G=document.getElementById("mealBlock"),Ne=G==null?void 0:G.querySelector(".modal-card__content"),F=document.getElementById("tcBlock"),Pe=document.getElementById("aperoBlock"),Ke=document.getElementById("tcServeBlock");let j=document.getElementById("rightNotes");if(hl(),bl(P),j||(j=document.createElement("div"),j.id="rightNotes",W==null||W.insertAdjacentElement("afterbegin",j)),F){const V=document.getElementById("aperoNotesBlock"),Y=document.getElementById("tcNotesBlock");V&&V.parentElement!==F&&F.appendChild(V),Y&&Y.parentElement!==F&&F.appendChild(Y)}Pe&&Pe.parentElement!==F&&(F==null||F.appendChild(Pe)),Ke&&Ke.parentElement!==F&&(F==null||F.appendChild(Ke));const ut=document.getElementById("mealDrinkNotesBlock"),ft=document.getElementById("mealDrinkServeRow");Ne&&(ut&&ut.parentElement!==Ne&&Ne.appendChild(ut),ft&&ft.parentElement!==Ne&&Ne.appendChild(ft)),ut&&(ut.style.display="none"),ft&&(ft.style.display="none"),Pe&&(Pe.style.display="none"),Ke&&(Ke.style.display="none"),G&&G.parentElement!==W&&(W==null||W.appendChild(G)),F&&F.parentElement!==W&&(W==null||W.appendChild(F)),j&&(j.innerHTML="",j.style.display="none");const Ct=V=>{const Y=document.querySelector(".two > div:first-child");Y&&Array.from(Y.children).forEach(fe=>{fe.style.display=fe.id===V||V==="__ALL__"?"":"none"})},Tt=(Mn=document.getElementById("m_later"))==null?void 0:Mn.closest(".row");if(W&&(W.style.display=""),Tt&&(Tt.style.display=""),P==="fiche"){ke&&ke.classList.add("mono"),W&&(W.style.display="none"),Tt&&(Tt.style.display="none"),Ct("__ALL__"),et();return}if(P==="aperitif"){if(ke&&ke.classList.remove("mono"),F&&ye&&ye.appendChild(F),G&&(G.style.display="none"),F){const V=document.getElementById("aperoNotesBlock"),Y=document.getElementById("tcNotesBlock");if(Y&&(Y.style.display="none"),V){V.style.display="block",j==null||j.appendChild(V),j&&(j.style.display="block");const Qe=document.getElementById("mdAperoNotes");Qe&&(Qe.textContent=Z.mdAperoNotes||"Drink / aperitif notes")}Pe&&(Pe.style.display="flex",j==null||j.appendChild(Pe),j&&(j.style.display="block"));const fe=document.getElementById("tcTitle");fe&&(fe.textContent=Z.tcTitle||"Aperitif")}Ct("tcBlock"),et(),X(),D();return}if(P==="tc"){if(ke&&ke.classList.remove("mono"),F&&ye&&ye.appendChild(F),G&&(G.style.display="none"),F){const V=document.getElementById("aperoNotesBlock"),Y=document.getElementById("tcNotesBlock");V&&(V.style.display="none"),Y&&(Y.style.display="block",j==null||j.appendChild(Y),j&&(j.style.display="block")),Ke&&(Ke.style.display="flex",j==null||j.appendChild(Ke),j&&(j.style.display="block"));const fe=document.getElementById("tcTitle");fe&&(fe.textContent=Z.chips_tc||"Tea & Coffee")}Ct("tcBlock"),et(),X(),D();return}if(P==="repas"){if(ke&&ke.classList.remove("mono"),F&&ye){ye.appendChild(F),F.style.display="block";const V=document.getElementById("aperoNotesBlock"),Y=document.getElementById("tcNotesBlock");V&&(V.style.display="none"),Y&&(Y.style.display="none");const fe=document.getElementById("mealDrinkNotesBlock");if(fe){fe.style.display="block",Ne&&Ne.appendChild(fe);const An=document.getElementById("mdMealDrinkNotes");An&&(An.textContent=Z.mealDrinkNotes||"Meal drink notes")}const Qe=document.getElementById("mealDrinkServeRow");Qe&&(Qe.style.display="flex",Ne&&Ne.appendChild(Qe));const Nn=document.getElementById("tcTitle");Nn&&(Nn.textContent=Z.mealDrinkTitle||"Meal drinks")}G&&W&&(G.style.display="block",W.appendChild(G)),document.getElementById("drinkGrid")&&(se(),Q(),document.querySelectorAll("#drinkGrid .pill").forEach(V=>{V.disabled=!1,V.style.pointerEvents="auto"})),X(),D(),Q(),et(),Ct("tcBlock");return}F&&(F.style.display="block"),se(),Q(),document.querySelectorAll("#drinkGrid .pill").forEach(V=>{V.disabled=!1,V.style.pointerEvents="auto"}),G&&(G.style.display="block")}const H=document.getElementById("tcTitle");H&&(H.textContent=N==="tc"?i.chips_tc||"Tea & Coffee":i.tcTitle||"Aperitif");const ae=document.getElementById("mealDrinkNotesBlock");if(ae&&(ae.style.display="none"),K(N,i),o.phase==="tc"&&f?Le(f.key):o.phase==="repas"&&f&&_e(f.key),ro(),w("#m_aperoNotes").value="",w("#m_tcNotes").value="",o.phase==="tc"&&f)Le(f.key);else{const P=document.getElementById("mhTCInline");P&&(P.textContent="")}if(o.phase==="repas"&&f)_e(f.key);else{const P=document.getElementById("mhMealDrinkInline");if(P){const Z=v[o.config.lang||"EN"]||v.EN;P.textContent=(Z.mealDrinkTitle||"Meal drinks")+": "}}xe(),D(),w("#modalBack").style.display="flex"}function Ue(e){["tc_cafe","tc_deca","tc_the","tc_digestif","tc_cocktail","tc_biere","tc_champagne","tc_vin","tc_soft","tc_chocolat"].forEach(i=>{const c=document.getElementById(i);c&&(c.style.display="none")});const n=document.getElementById("tc_milk_sweet");n&&(n.style.display=["cafe","deca","the"].includes(e)?"block":"none");const l={cafe:"tc_cafe",deca:"tc_deca",the:"tc_the",digestif:"tc_digestif",cocktail:"tc_cocktail",biere:"tc_biere",champagne:"tc_champagne",vin:"tc_vin",soft:"tc_soft",chocolat:"tc_chocolat"}[e];if(l){const i=document.getElementById(l);i&&(i.style.display="block")}}function Je(){var c,s;const e=((c=document.getElementById("tc_soft_type"))==null?void 0:c.value)||"",t={eau:"tc_soft_eau_row",jus:"tc_soft_jus_row",coca:"tc_soft_coca_row",sprite:"tc_soft_sprite_row",tonic:"tc_soft_tonic_row"};["tc_soft_eau_row","tc_soft_jus_row","tc_soft_coca_row","tc_soft_sprite_row","tc_soft_tonic_row"].forEach(r=>{const d=document.getElementById(r);d&&(d.style.display="none")});const n=t[e];if(n){const r=document.getElementById(n);r&&(r.style.display="flex")}const a=((s=document.getElementById("tc_soft_jus"))==null?void 0:s.value)||"",l=document.getElementById("tc_soft_salt_row"),i=document.getElementById("tc_soft_pepper_row");l&&(l.style.display=e==="jus"&&a==="tomate"?"inline-flex":"none"),i&&(i.style.display=e==="jus"&&a==="tomate"?"inline-flex":"none")}function Vl(){var n,a,l,i,c;const e=((n=document.getElementById("tc_group"))==null?void 0:n.value)||"";(a=document.getElementById("tc_alcool"))!=null&&a.style&&(document.getElementById("tc_alcool").style.display="none"),(l=document.getElementById("tc_chaud"))!=null&&l.style&&(document.getElementById("tc_chaud").style.display="none"),Ue("");const t=document.getElementById("tc_cat");t&&(t.value=""),e==="soft"?(Ue("soft"),document.getElementById("tc_soft_type")&&(document.getElementById("tc_soft_type").value=""),t&&(t.value="soft"),Je()):e==="alcool"?(i=document.getElementById("tc_alcool"))!=null&&i.style&&(document.getElementById("tc_alcool").style.display="block"):e==="chaud"&&(c=document.getElementById("tc_chaud"))!=null&&c.style&&(document.getElementById("tc_chaud").style.display="block"),D()}function Hl(){var n;const e=((n=document.getElementById("tc_alcool_type"))==null?void 0:n.value)||"",t=document.getElementById("tc_cat");Ue(""),e?(t&&(t.value=e),Ue(e)):t&&(t.value=""),D()}function Wl(){var n;const e=((n=document.getElementById("tc_chaud_type"))==null?void 0:n.value)||"",t=document.getElementById("tc_cat");if(Ue(""),e){t&&(t.value=e),Ue(e);const a=document.getElementById("tc_milk_sweet");a&&(a.style.display=e==="cafe"||e==="deca"||e==="the"?"block":"none")}else t&&(t.value="");D()}function Ht(e){e.apDrink||(e.apDrink={});const t=e.apDrink;L.cat==="soft"?t.cat="soft":L.cat==="chaud"||L.cat==="alcool"?t.cat=L.sub:t.cat="",t.softType=L.cat==="soft"&&L.sub||"",t.waterType=L.waterType||"",t.cocaType=L.cocaType||"",t.juiceType=L.juiceType||"",t.softIce=!!L.softIce,t.softLemon=!!L.softLemon,t.spriteIce=!!L.spriteIce,t.spriteLemon=!!L.spriteLemon,t.tonicIce=!!L.tonicIce,t.tonicLemon=!!L.tonicLemon,t.juiceIce=!!L.juiceIce,t.juiceLemon=!!L.juiceLemon,t.juiceSalt=!!L.juiceSalt,t.juicePepper=!!L.juicePepper,t.juiceApfelschorle=!!L.juiceApfelschorle,t.cat==="cafe"||t.cat==="deca"||t.cat==="the"||t.cat==="chocolat"?(t.milk=L.milk||"",t.sweet=L.sweet||"",t.theType=t.cat==="the"&&L.theType||"",t.theLemon=!!L.theLemon,t.choco=t.cat==="chocolat"):(t.milk="",t.sweet="",t.theType="",t.theLemon=!1,t.choco=!1),t.champIce=t.cat==="champagne"?!!L.champIce:!1,t.champMimosa=t.cat==="champagne"?!!L.champMimosa:!1,t.beer=t.cat==="biere"&&L.beer||"",t.vinRouge=t.cat==="vin_rouge"&&L.vinRouge||"",t.vinBlanc=t.cat==="vin_blanc"&&L.vinBlanc||"",t.vinIce=t.cat==="vin_rouge"||t.cat==="vin_blanc"?!!L.vinIce:!1,t.digestif=t.cat==="digestif"&&L.digestif||"",t.digIce=t.cat==="digestif"?!!L.digIce:!1,t.cocktail=t.cat==="cocktail"&&L.cocktail||"",t.campariMix=t.cat==="cocktail"&&L.cocktail==="campari"&&L.campariMix||"",t.cocktailSP=t.cat==="cocktail"&&L.cocktail==="bloody_mary"?!!L.cocktailSP:!1,t.virginMary=t.cat==="cocktail"&&L.cocktail==="bloody_mary"?!!L.virginMary:!1,t.cocktailIce=t.cat==="cocktail"?!!L.cocktailIce:!1,t.cocktailLemon=t.cat==="cocktail"?!!L.cocktailLemon:!1,t.cocktailSalt=t.cat==="cocktail"?!!L.cocktailSalt:!1,t.cocktailPepper=t.cat==="cocktail"?!!L.cocktailPepper:!1}function Ot(){ro();const e=document.getElementById("m_aperoNotes");e&&(e.value="");const t=document.getElementById("m_tcNotes");t&&(t.value="");const n=document.getElementById("m_mealDrinkNotes");n&&(n.value=""),w("#modalBack").style.display="none",f=null}function dt(){var l;if(!f)return;const e=f.data;e.occupied=!!((l=document.getElementById("m_occ_chk"))!=null&&l.checked);const t=document.querySelector('input[name="m_type"]:checked');t&&(e.type=t.value);const n=document.getElementById("m_sleep_chk");n&&(e.sleep=!!n.checked),e.status=w("#m_status").value,e.lang=w("#m_lang").value,e.notes=w("#m_notes").value.trim(),e.aperoNotes="",e.tcNotes="";const a=document.getElementById("m_eatWith");if(a){const i=(e.eatWith||"").trim().toUpperCase(),c=(a.value||"").trim().toUpperCase();f.data.eatWith=c;const s=(r,d)=>{if(!r)return;const u=o.seats[r];if(!u)return;Te(u);const p=(d||"").toUpperCase();p&&(u.eatWith||"").toUpperCase()===p&&(u.eatWith="")};if(i&&i!==c&&s(i,f.key),c&&o.seats[c]){const r=o.seats[c];Te(r),r.eatWith&&r.eatWith!==f.key&&s(r.eatWith,c),r.eatWith=f.key}else!c&&i&&s(i,f.key)}B(),O();try{Bn()==="seat"&&typeof ot=="function"&&ot()}catch{}x(),et(),st(f.data),rt(f.data),xe(),ct()}w("#m_pre").addEventListener("change",()=>{if(!f)return;const e=w("#m_pre").value;xl(f.data,e),B(),O(),x(),xe(),st(f.data),rt(f.data),ct()});let we=null;function Oe(e){const t=/^(\d+)([A-Z])$/i.exec((e||"").trim());return t?[parseInt(t[1],10),t[2].toUpperCase()]:[null,null]}function zl(){if(!f)return;f.data.sleep=!f.data.sleep;const e=document.getElementById("m_sleep_chk");e&&(e.checked=f.data.sleep),B(),O(),x(),mn()}function mn(){const e=document.getElementById("m_sleep_chk"),t=e?e.checked:!!(f&&f.data&&f.data.sleep),a=(v[o.config.lang||"EN"]||v.EN).mdSleepTxt||"Sleep";pl.forEach(i=>{const c=document.getElementById(i);c&&(c.textContent=At.sleep,c.title=a,c.setAttribute("aria-label",a))});const l=document.getElementById("sleepModalBtn");l&&l.classList.toggle("active",!!t)}function Ut(e){const t=document.getElementById("seatgrid");t&&t.classList.toggle("moving",!!e);const n=v[o.config.lang||"EN"],a=document.getElementById("seatmapTitle");a&&(e?a.textContent=(n.pickDestSeat||"Select destination seat")+(we?"  "+we:""):typeof ge=="function"&&ge())}function Jl(e){we=e,Ut(!0),v[o.config.lang||"EN"],typeof q=="function"&&q({type:"seatMoveStart",from:e})}document.addEventListener("keydown",e=>{if(e.key==="Escape"&&z){Ft(!1),ge();return}e.key==="Escape"&&we&&(we=null,Ut(!1),typeof ge=="function"&&ge())});function qn(e){return!e||!e.occupied}function Gl(e,t){if(!e||!t||e===t)return;const n=Te(o.seats[e]||{}),a=Te(o.seats[t]||{});v[o.config.lang||"EN"];const l=(i,c)=>{Object.keys(o.seats||{}).forEach(s=>{const r=o.seats[s];r&&(Te(r),r.eatWith===i&&(r.eatWith=c))})};if(qn(a))o.seats[t]=JSON.parse(JSON.stringify(n)),o.seats[e]=Te({}),typeof q=="function"&&q({type:"seatMoved",from:e,to:t});else{const i=JSON.parse(JSON.stringify(a));o.seats[t]=JSON.parse(JSON.stringify(n)),o.seats[e]=i,typeof q=="function"&&q({type:"seatSwapped",a:e,b:t})}if(qn(a))l(e,t);else{const i="__SWAP_TMP__";l(e,i),l(t,e),l(i,t)}typeof B=="function"&&B(),typeof O=="function"&&O(),typeof x=="function"&&x()}function pn(e){if(e=(e||"").toUpperCase(),z){ho(e);return}if(we){const a=we;if(we=null,Ut(!1),e&&e!==a){Gl(a,e);return}const[l,i]=Oe(a);l&&i&&(be(l,i),document.getElementById("modalBack").style.display="flex");return}const[t,n]=Oe(e);t&&n&&(be(t,n),document.getElementById("modalBack").style.display="flex")}function de(e,t,n){if(e&&(e.beer==="calvinus_blanche"&&(e.beer="calvinus"),e.beer&&e.beer.startsWith("leermond")&&(e.beer="leermond"),e.vin==="rouge"&&!e.vinRouge&&(e.vinRouge=e.vinOrigine||"suisse"),e.vin==="blanc"&&!e.vinBlanc&&(e.vinBlanc=e.vinOrigine||"suisse")),!e||!e.cat)return"";const a=[],l=r=>{r&&a.push(t.tcIce||"Ice")},i=r=>{r&&a.push(t.tcLemon||"Lemon")},c=r=>r==="creme"?t.tcMilkCreme:r==="avoine"?t.tcMilkAvoine:r==="lait"?t.tcMilkLait:r==="none"?t.tcMilkNone:"",s=r=>r==="sucre"?t.tcSweetSugar:r==="succedane"?t.tcSweetSub:r==="none"?t.tcSweetNone:"";switch(e.cat){case"cafe":if(a.push(t.tcCatCafe),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}break;case"deca":if(a.push(t.tcCatDeca),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}break;case"the":if(e.theType==="hotwater"){a.push(t.tcHotWater||"Eau chaude"),e.theLemon&&a.push(t.tcLemon||"Citron");break}if(a.push(t.tcCatThe),e.theType==="english"?a.push(t.tcTeaEnglish):e.theType==="vert"?a.push(t.tcTeaVert):e.theType==="menthe"?a.push(t.tcTeaMenthe):e.theType==="camomille"&&a.push(t.tcTeaCamomille||t.tcInfCam),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}e.theLemon&&a.push(t.tcLemon||"Lemon");break;case"infusion":if(a.push(t.tcCatInf),a.push(t.tcInfCam),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}break;case"chocolat":a.push(t.tcChocoBrand||"Caotina");break;case"digestif":a.push(t.tcCatDig),e.digestif==="whisky_jw"?a.push(t.tcDigJW):e.digestif==="whisky_jb"?a.push(t.tcDigJB):e.digestif==="cognac"?a.push(t.tcDigCognac):e.digestif==="baileys"&&a.push(t.tcDigBaileys),e.whiskyStyle==="pur"?a.push(t.tcPur):e.whiskyStyle==="rocks"?a.push(t.tcRocks):l(!!e.digIce);break;case"biere":{a.push(t.tcCatBeer||"Beer");const r={quoellfrisch:t.tcBeerQ||"Qullfrisch Lager",calvinus:t.tcBeerC||"Calvinus Blanche",leermond:t.tcBeerL||"Leermond (alcohol-free)"};e.beer&&r[e.beer]?a.push(r[e.beer]):e.beer&&a.push(e.beer);break}case"champagne":a.push(t.tcCatChamp),l(!!e.champIce),e.champMimosa&&a.push(" Mimosa");break;case"vin_rouge":{a.push(t.tcCatVin||"Wines");let r=t.tcRed||"Red";const d=e.vinRouge==="suisse"?t.tcCH||"Swiss":e.vinRouge==="etranger"?t.tcForeign||"Foreign":"";d&&(r+="  "+d),e.vinNotes&&(r+=` (${e.vinNotes})`),a.push(r),e.vinIce&&a.push(t.tcIce||"Ice");break}case"vin_blanc":{a.push(t.tcCatVin||"Wines");let r=t.tcWhite||"White";const d=e.vinBlanc==="suisse"?t.tcCH||"Swiss":e.vinBlanc==="etranger"?t.tcForeign||"Foreign":"";d&&(r+="  "+d),e.vinNotes&&(r+=` (${e.vinNotes})`),e.vinIce&&a.push(t.tcIce||"Ice"),a.push(r);break}case"cocktail":{a.push(t.tcCocktail||"Cocktail");const r=e.cocktail||"";r==="gin_tonic"?a.push(t.tcGinTonic||"Gin Tonic"):r==="cuba_libre"?a.push(t.tcCubaLibre||"Cuba Libre"):r==="screwdriver"?a.push(t.tcScrewDriver||"Screw Driver"):r==="bloody_mary"?(a.push(t.tcBloodyMary||"Bloody Mary"),e.virginMary&&a.push(t.tcVirginMary||"Virgin Mary"),e.cocktailSP&&a.push([t.tcSalt||"Salt",t.tcPepper||"Pepper"].join(" + "))):r==="campari"&&(a.push("Campari"),e.campariMix==="orange"?a.push(t.tcJuiceOrange||"Orange"):e.campariMix==="soda"&&a.push(t.tcSoda||"Soda")),e.cocktailIce&&a.push(t.tcIce||"Ice"),e.cocktailLemon&&a.push(t.tcLemon||"Lemon");break}case"soft":e.softType==="eau"?(a.push(t.tcLblWater),e.waterType==="plate"?a.push(t.tcWaterStill):e.waterType==="gazeuse"&&a.push(t.tcWaterSpark),l(!!e.softIce),i(!!e.softLemon)):e.softType==="jus"?(a.push(t.tcLblJuice),e.juiceType==="pomme"?e.juiceApfelschorle?a.push("Apfelschorle"):a.push(t.tcJuiceApple||"Apple"):e.juiceType==="orange"?a.push(t.tcJuiceOrange):e.juiceType==="tomate"&&a.push(t.tcJuiceTomato),l(!!e.juiceIce),i(!!e.juiceLemon),e.juiceType==="tomate"&&(e.juiceSalt||e.juicePepper)&&a.push([t.tcSalt||"Salt",t.tcPepper||"Pepper"].join(" + "))):e.softType==="coca"?(a.push("Coca-Cola",e.cocaType==="zero"?"Zero":e.cocaType==="normal"?"Classic":""),l(!!e.softIce),i(!!e.softLemon)):e.softType==="sprite"?(a.push("Sprite"),l(!!e.spriteIce),i(!!e.spriteLemon)):e.softType==="tonic"&&(e.tonicIce&&a.push(t.tcIce),e.tonicLemon&&a.push(t.tcLemon||"Citron"),a.unshift("Tonic"));break}return a.join(", ")}var la;(la=document.getElementById("serveAperitif"))==null||la.addEventListener("click",()=>{if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}Ht(t),t.served.aperitif||(t.served.aperitif=Date.now());const n=JSON.parse(JSON.stringify(t.apDrink||{}));console.log("DEBUG SERVE AP:",t.apDrink,de(t.apDrink,v[o.config.lang||"EN"],o.config.lang)),Rt({type:"apOrdered",seat:f.key,ap:n,notes:w("#m_aperoNotes").value||t.aperoNotes||""});const a=document.getElementById("m_aperoNotes");a&&(a.value="");const l=document.getElementById("m_tcNotes");l&&(l.value=""),t.aperoNotes="",t.tcNotes="",ve(),B(),se(!0),X(),Q(),D(),be(f.row,f.col),O(),x()});var ia;(ia=document.getElementById("serveTC"))==null||ia.addEventListener("click",()=>{var s,r;if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}Ht(t),o.phase==="tc"&&!t.served.tc&&(t.served.tc=Date.now());const n=JSON.parse(JSON.stringify(t.apDrink||{}));console.log("DEBUG SERVE AP:",t.apDrink,de(t.apDrink,v[o.config.lang||"EN"],o.config.lang));const a=o.phase==="repas"?((s=document.getElementById("m_mealDrinkNotes"))==null?void 0:s.value)||"":((r=document.getElementById("m_tcNotes"))==null?void 0:r.value)||t.tcNotes||"";Rt({type:"tcOrdered",seat:f.key,ts:Date.now(),ap:n,notes:a,ctx:o.phase});const l=document.getElementById("m_aperoNotes");l&&(l.value="");const i=document.getElementById("m_tcNotes");i&&(i.value="");const c=document.getElementById("m_mealDrinkNotes");c&&(c.value=""),t.aperoNotes="",t.tcNotes="",ve(),B(),o.phase==="tc"?Le(f.key):o.phase==="repas"&&_e(f.key),se(!0),X(),Q(),D(),be(f.row,f.col),O(),x()});var ca;(ca=document.getElementById("serveAperitifNone"))==null||ca.addEventListener("click",()=>{if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}t.served.aperitif||(t.served.aperitif=Date.now()),ve(),B(),se(!0),X(),Q(),be(f.row,f.col),O(),x()});var sa;(sa=document.getElementById("serveTCNone"))==null||sa.addEventListener("click",()=>{if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}t.served.tc||(t.served.tc=Date.now()),ve(),B(),se(!0),X(),Q(),D(),be(f.row,f.col),O(),x()});var ra;(ra=document.getElementById("serveMealDrink"))==null||ra.addEventListener("click",()=>{var l;if(!f)return;const e=f.key,t=f.data,n=v[o.config.lang||"EN"];if(!t.occupied){alert(n.alertSeatEmpty);return}typeof Ht=="function"&&Ht(t);const a=(((l=document.getElementById("m_mealDrinkNotes"))==null?void 0:l.value)||"").trim();q==null||q({type:"tcServed",seat:e,ts:Date.now(),ctx:"repas",ap:t.apDrink?JSON.parse(JSON.stringify(t.apDrink)):null,notes:a}),ve(),B==null||B(),o.phase==="tc"?Le(e):o.phase==="repas"&&_e(e),typeof se=="function"&&se(!0),typeof D=="function"&&D(),typeof Ze=="function"&&Ze()});var da;(da=document.getElementById("serveMealDrinkNone"))==null||da.addEventListener("click",()=>{var e;(e=document.getElementById("serveTCNone"))==null||e.click()});var ua;(ua=document.getElementById("sleepModalBtn"))==null||ua.addEventListener("click",zl);function Me(){}function Ze(){f&&(Gt(o.phase),se(!0),D(),X(),Q(),be(f.row,f.col),O(),x())}[["navFicheBtn","fiche"],["navAperoBtn","aperitif"],["navMealBtn","repas"],["navTCBtn","tc"]].forEach(([e,t])=>{const n=document.getElementById(e);n&&(n.addEventListener("click",a=>{a.preventDefault(),o.phase!==t&&(o.phase=t,B(),yt(),pt==null||pt(),se(!0),Ze(),et(),X(),Q(),f&&(o.phase==="tc"?Le(f.key):o.phase==="repas"&&_e(f.key)))}),X(),Q(),document.querySelectorAll("#drinkGrid .pill").forEach(a=>{a.disabled=!1,a.style.pointerEvents="auto"}))});function yt(){const e=v[o.config.lang||"EN"]||v.EN,t=document.getElementById("navFicheBtn"),n=document.getElementById("navAperoBtn"),a=document.getElementById("navMealBtn"),l=document.getElementById("navTCBtn"),i=(s,r)=>{if(!s)return;const d=s.querySelector("span");if(!d)return;const p=(e[r]||"").replace(/\s+/g," ").trim();p&&(d.textContent=p)};i(t,"modalTabFiche"),i(n,"modalTabApero"),i(a,"modalTabMeal"),i(l,"modalTabTC"),t&&(t.title=e.chips_fiche||"Pax record"),n&&(n.title=e.chips_apero||"Aperitif"),a&&(a.title=e.chips_meal||"Main"),l&&(l.title=e.chips_tc||"Tea & Coffee"),[t,n,a,l].forEach(s=>{s&&(s.style.display="",s.classList.remove("active"),s.setAttribute("aria-pressed","false"),s.setAttribute("aria-selected","false"))});const c=o.phase;c==="fiche"&&t&&(t.classList.add("active"),t.setAttribute("aria-pressed","true"),t.setAttribute("aria-selected","true")),c==="aperitif"&&n&&(n.classList.add("active"),n.setAttribute("aria-pressed","true"),n.setAttribute("aria-selected","true")),c==="repas"&&a&&(a.classList.add("active"),a.setAttribute("aria-pressed","true"),a.setAttribute("aria-selected","true")),c==="tc"&&l&&(l.classList.add("active"),l.setAttribute("aria-pressed","true"),l.setAttribute("aria-selected","true"))}var fa;(fa=document.getElementById("tc_milk"))==null||fa.addEventListener("change",Me);var ma;(ma=document.getElementById("tc_sweet"))==null||ma.addEventListener("change",Me);var pa;(pa=document.getElementById("tc_the_type"))==null||pa.addEventListener("change",Me);var ga;(ga=document.getElementById("tc_beer"))==null||ga.addEventListener("change",Me);var ya;(ya=document.getElementById("tc_soft_type"))==null||ya.addEventListener("change",()=>{Je(),D()});var ha;(ha=document.getElementById("tc_soft_jus"))==null||ha.addEventListener("change",()=>{Je(),D()});["tc_soft_eau","tc_soft_coca","tc_soft_ice","tc_soft_lemon","tc_soft_ice2","tc_soft_lemon2","tc_soft_salt","tc_soft_pepper","tc_soft_ice4","tc_soft_lemon4","tc_cocktail_type","tc_cocktail_ice","tc_cocktail_lemon"].forEach(e=>{var t;return(t=document.getElementById(e))==null?void 0:t.addEventListener("change",Me)});const Ae=document.getElementById("tc_vin_rouge"),De=document.getElementById("tc_vin_blanc");Ae==null||Ae.addEventListener("change",()=>{Ae.value?De&&(De.value="",De.disabled=!0):De&&(De.disabled=!1),En()});De==null||De.addEventListener("change",()=>{De.value?Ae&&(Ae.value="",Ae.disabled=!0):Ae&&(Ae.disabled=!1),En()});var ba;(ba=document.getElementById("tc_vin_notes"))==null||ba.addEventListener("input",Me);var va;(va=document.getElementById("tc_champ_ice"))==null||va.addEventListener("change",Me);var ka;(ka=document.getElementById("tc_vin_ice"))==null||ka.addEventListener("change",Me);var Sa;(Sa=document.getElementById("tc_digestif_type"))==null||Sa.addEventListener("change",Me);var Ea;(Ea=document.getElementById("tc_digestif_ice"))==null||Ea.addEventListener("change",Me);var Ca;(Ca=document.getElementById("clearTrayBtn"))==null||Ca.addEventListener("click",()=>{var n;if(!f)return;const e=f.data,t=v[o.config.lang||"EN"];if(!e.occupied||!((n=e.served)!=null&&n.meal)){alert(t.alertSeatEmpty);return}e.served.trayCleared?(e.served.trayCleared=!1,q({type:"trayUncleared",seat:f.key})):(e.served.trayCleared=!0,q({type:"trayCleared",seat:f.key})),ve(),B(),ne(),se(!0),X(),Q(),be(f.row,f.col),O(),x()});var Ta;(Ta=document.getElementById("serveMealNone"))==null||Ta.addEventListener("click",()=>{if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}t.served||(t.served={}),t.served.meal=Date.now(),t.served.mealNone=!0,t.served.trayUsed=!1,t.served.trayFromReservation=!1,ve(),B(),se(!0),X(),Q(),be(f.row,f.col),O(),x(),xe()});w("#serveMeal").addEventListener("click",()=>{if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}let n=!!t.served.meal;!!(t.served&&t.served.mealNone)&&(n=!1);const l=document.getElementById("m_normalMealValue"),i=((l==null?void 0:l.value)||t.normalMeal||"").trim();if(!(!!t.spml||!!t.preLabel||["viande","vege","plateau"].includes(i))&&!n){alert(e.alertChoose);return}const s=(r,d)=>r==="plateau"||r==="viande"||r==="vege"||!!d.spml||!!d.preLabel;if(n)t.served.trayUsed&&(t.served.trayFromReservation||(o.inventory.plateaux=(o.inventory.plateaux||0)+1,ne()),t.served.trayUsed=!1,t.served.trayFromReservation=!1),t.served.meal=null,q({type:"serviceCanceled",seat:f.key});else{if(s(i,t))if(i==="plateau"&&!!(t.alloc&&t.alloc.trayReserved))t.served.trayUsed=!0,t.served.trayFromReservation=!0,t.alloc.trayReserved=!1;else{if((o.inventory.plateaux||0)<=0){alert(e.alertNoTrays);return}o.inventory.plateaux--,t.served.trayUsed=!0,t.served.trayFromReservation=!1,ne()}else t.served.trayUsed=!1,t.served.trayFromReservation=!1;t.served.meal=Date.now(),t.served.mealNone=!1;const d=To(t,e);q({type:"mealServed",seat:f.key,label:d})}ve(),B(),se(!0),X(),Q(),be(f.row,f.col),O(),x(),xe()});w("#m_later").addEventListener("change",()=>{typeof $e=="function"&&$e()});function Co(e,t,n=null){if(!f)return;const a=new Date;let l=null;if(n){const[c,s]=n.split(":").map(r=>parseInt(r,10));l=new Date,l.setHours(c,s,0,0),l.getTime()<a.getTime()&&(l=new Date(l.getTime()+24*3600*1e3))}else l=new Date(a.getTime()+t*60*1e3);const i=l.getTime();e.serveLaterAt=i,o.reminders=(o.reminders||[]).filter(c=>c.key!==f.key),o.reminders.push({key:f.key,at:e.serveLaterAt}),B(),Ye(),x()}function pe(){const e=document.getElementById("m_later_apply"),t=document.getElementById("m_later_cancel"),n=document.getElementById("m_later_view"),a=document.getElementById("m_later"),l=document.getElementById("m_later_time"),i=a==null?void 0:a.value,c=l==null?void 0:l.value;if(!e||!f)return;const s=f.data||{},r=Date.now(),d=!!(s.serveLaterAt&&s.serveLaterAt>r),u=qt();if(e.disabled=!u||i!=="custom"||!c,t&&(t.style.display=d?"":"none",t.disabled=!u||!d),l){const p=u&&i==="custom";l.disabled=!p}if(n)if(d){const p=new Date(s.serveLaterAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});n.textContent=" "+p,n.style.display=""}else n.textContent="",n.style.display="none";$e()}w("#m_later_time").addEventListener("change",()=>{typeof pe=="function"&&pe()});w("#m_later_apply").addEventListener("click",()=>{if(!f||!qt())return;const e=v[o.config.lang||"EN"],t=w("#m_later_time").value;if(!t){alert(e.alertPickTime);return}Co(f.data,0,t),typeof pe=="function"&&pe()});var _a;(_a=document.getElementById("m_later_cancel"))==null||_a.addEventListener("click",()=>{if(!f)return;const e=f.key;o.reminders=(o.reminders||[]).filter(l=>l.key!==e),f.data.serveLaterAt=null;const t=document.getElementById("m_later");t&&(t.value="");const n=document.getElementById("laterCustomContainer");n&&n.classList.remove("active");const a=document.getElementById("m_later_time");a&&(a.value=""),B(),Ye(),O(),x(),pe(),$e()});var La;(La=document.getElementById("m_status"))==null||La.addEventListener("change",()=>{Tn()});var Ba;(Ba=document.getElementById("m_lang"))==null||Ba.addEventListener("change",()=>{_n()});document.querySelectorAll(".language-btn").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("m_lang");if(!t||e.disabled)return;const n=e.dataset.lang||"";t.value=t.value===n?"":n;const a=new Event("change",{bubbles:!0});t.dispatchEvent(a)})});_n();Tn();$e();document.querySelectorAll(".later-btn").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("m_later");if(!t||e.disabled)return;const n=e.dataset.value||"",a=t.value===n?"":n;t.value=a;const l=new Event("change",{bubbles:!0});t.dispatchEvent(l)})});document.addEventListener("click",e=>{var c;const t=document.getElementById("laterCustomContainer");if(!(t!=null&&t.classList.contains("active")))return;const n=e.target;if(!n||t.contains(n)||(c=n.classList)!=null&&c.contains("later-btn")&&n.dataset.value==="custom"||n.closest(".form-field--actions")||n.id==="m_later_apply"||n.id==="m_later_cancel")return;const a=document.getElementById("m_later");if(!a||a.value!=="custom")return;const l=document.getElementById("m_later_time");if(l!=null&&l.value)return;const i=f==null?void 0:f.data;i!=null&&i.serveLaterAt&&i.serveLaterAt>Date.now()||(a.value="",a.dispatchEvent(new Event("change",{bubbles:!0})))});w("#closeModal").addEventListener("click",()=>{dt(),Ot()});["m_status","m_lang","m_notes","m_aperoNotes","m_eatWith"].forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("change",dt);const n=document.getElementById("m_tcNotes");n&&n.addEventListener("change",dt)});var wa;(wa=document.getElementById("m_occ_chk"))==null||wa.addEventListener("change",()=>{dt(),go()});var Ia;(Ia=document.getElementById("m_sleep_chk"))==null||Ia.addEventListener("change",dt);document.querySelectorAll('input[name="m_type"]').forEach(e=>{e.addEventListener("change",dt)});w("#m_later").addEventListener("change",()=>{if(!f)return;$e();const e=w("#m_later").value;if(e===""){f.data.serveLaterAt=null,o.reminders=(o.reminders||[]).filter(t=>t.key!==f.key),B(),Ye(),O(),x(),typeof pe=="function"&&pe();return}if(e==="custom"){typeof pe=="function"&&pe();return}Co(f.data,parseInt(e,10)),typeof pe=="function"&&pe()});function Ye(){const e=o.config.lang||"EN",t=e==="FR"?"Annuler":e==="DE"?"Lschen":"Cancel",n=w("#remindersList");n.innerHTML="";const a=Date.now();o.reminders=o.reminders.filter(i=>i.at&&i.at>a);const l=[...o.reminders].sort((i,c)=>i.at-c.at);for(const i of l){const c=document.createElement("div");c.className="row";const s=o.seats[i.key],r=new Date(i.at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),d=document.createElement("div");d.textContent=i.key+"  "+r+(s!=null&&s.sleep?" ()":"");const u=document.createElement("button");u.className="btn",u.textContent=t,u.addEventListener("click",()=>{const p=o.reminders.findIndex(y=>y.key===i.key&&y.at===i.at);p>=0&&o.reminders.splice(p,1),o.seats[i.key]&&(o.seats[i.key].serveLaterAt=null),B(),Ye(),O(),x()}),c.appendChild(d),c.appendChild(u),n.appendChild(c)}B()}setInterval(()=>{const e=Date.now();for(const t of o.reminders)if(t.at&&e>=t.at){const n=v[o.config.lang||"EN"];kl(n.remindServe+" "+t.key),ve(),t.at=null,o.seats[t.key]&&(o.seats[t.key].serveLaterAt=null),O(),x()}o.reminders=o.reminders.filter(t=>t.at),Ye(),x()},1e3);const Re=["A","B","C","D","E","F"];function Un(e){return e==="B"?o.config.layout==="A320":!0}function Zn(e){return e.spml==="CHML"?0:e.status==="HON"?1:e.status==="SEN"?2:e.status==="PAD"?4:3}function $l(){return o.phase==="aperitif"?"aperitif":o.phase==="tc"?"tc":"meal"}function ql(){var u,p,y;const e=Date.now(),t=o.config.rowsBiz||0,n=$l(),a=o.phase==="repas",l=[];for(let g=1;g<=t;g++)for(const h of Re){if(!Un(h))continue;const m=he(g,h);m.occupied&&(m.served[n]||m.serveLaterAt&&m.serveLaterAt>e||l.push({key:g+h,r:g,c:h,seat:m}))}let i=[...l].sort((g,h)=>{const m=g.seat.sleep?1:0,k=h.seat.sleep?1:0;if(m!==k)return m-k;if(a){const I=g.seat.spml==="CHML"?0:1,b=h.seat.spml==="CHML"?0:1;if(I!==b)return I-b}return g.r!==h.r?g.r-h.r:Re.indexOf(g.c)-Re.indexOf(h.c)});i=d(i);let s=l.filter(g=>{const h=g.seat;return!(h.spml||h.preLabel||h.normalMeal)}).sort((g,h)=>{const m=g.seat.sleep?1:0,k=h.seat.sleep?1:0;if(m!==k)return m-k;if(a){const I=Zn(g.seat),b=Zn(h.seat);if(I!==b)return I-b}return g.r!==h.r?g.r-h.r:Re.indexOf(g.c)-Re.indexOf(h.c)});s=d(s);const r=[];for(let g=1;g<=t;g++)for(const h of Re){if(!Un(h))continue;const m=he(g,h);m.occupied&&(u=m.served)!=null&&u.meal&&(p=m.served)!=null&&p.trayUsed&&!((y=m.served)!=null&&y.trayCleared)&&r.push({key:g+h,r:g,c:h,seat:m})}r.sort((g,h)=>g.r!==h.r?g.r-h.r:Re.indexOf(g.c)-Re.indexOf(h.c));function d(g){var I;const h=new Map(g.map((b,S)=>[b.key,S])),m=new Set,k=[];for(const b of g){if(m.has(b.key))continue;k.push(b),m.add(b.key);const S=(I=b.seat)==null?void 0:I.eatWith;S&&h.has(S)&&!m.has(S)&&(k.push(g[h.get(S)]),m.add(S))}return k}return{serveList:i,orderList:s,clearList:r}}function xt(e){return String(e||"").replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])}function It(e){if(e.spml)return`<span class="${e.spml==="CHML"?"tag chml":"tag"}">${xt(e.spml)}</span>`;if(e.preLabel){const a=typeof e.preLabel=="string"&&e.preLabel.length>10?`${e.preLabel.slice(0,10)}...`:e.preLabel;return`<span class="tag">${xt(a)}</span>`}const t=(e.normalMeal||"").trim();if(!t)return"";if(t==="plateau"){const a=v[o.config.lang||"EN"]||v.EN;return`<span class="tag">${xt(a.trayShort||"Tray")}</span>`}return`<span class="tag">${t==="viande"?"1":t==="vege"?"2":""}</span>`}function To(e,t){if(!e)return"";if(e.spml)return e.spml;if(e.preLabel){const a=String(e.preLabel||"").trim();return a.length>10?`${a.slice(0,10)}...`:a}const n=(e.normalMeal||"").trim();return n==="viande"?(t==null?void 0:t.optNormalMeat)||"Option 1":n==="vege"?(t==null?void 0:t.optNormalVeg)||"Option 2":n==="plateau"?(t==null?void 0:t.trayShort)||"Tray":""}const tn=new Set;function nn(e,t,n,a){let l=!1,i=null;const c=e.querySelector(".flow-serve-confirm")||(()=>{const u=document.createElement("div");return u.className="flow-confirm flow-serve-confirm",u.textContent=(v[o.config.lang||"EN"]||v.EN).flowServeTag||"Serve",e.appendChild(u),u})(),s=t||e.dataset.key||"";s&&tn.has(s)&&(l=!0,c.classList.add("is-visible"));const r=()=>{l=!1,c.classList.remove("is-visible"),s&&tn.delete(s),i&&(clearTimeout(i),i=null)},d=()=>{t&&(a?a(t):Ul(t,n),r())};e.addEventListener("click",u=>{if(u.stopPropagation(),!l){l=!0,c.classList.add("is-visible"),s&&tn.add(s),i&&clearTimeout(i),i=window.setTimeout(r,3e3);return}d()})}function Ul(e,t){const[n,a]=typeof Oe=="function"?Oe(e):[null,null];if(!n||!a)return;const l=he(n,a);if(l.served||(l.served={}),t==="aperitif"){l.served.aperitifDelivered=Date.now();const c=JSON.parse(JSON.stringify(l.apDrink||{}));Rt({type:"apServed",seat:e,ap:c,notes:l.aperoNotes||""}),B(),O(),x();return}if(t==="tc"){l.served.tcDelivered=Date.now();const c=JSON.parse(JSON.stringify(l.apDrink||{}));Rt({type:"tcServed",seat:e,ts:Date.now(),ap:c,notes:l.tcNotes||"",ctx:o.phase}),B(),O(),x();return}t==="repas"&&Zl(e,l),t==="clear"&&_o(e,l)}function Zl(e,t){const n=v[o.config.lang||"EN"];if(!t||!t.occupied||(t.served||(t.served={}),t.served.meal))return;const a=(t.normalMeal||"").trim();if(!(!!t.spml||!!t.preLabel||["viande","vege","plateau"].includes(a)))return;const i=t.spml||t.preLabel||["viande","vege","plateau"].includes(a);if((!t.alloc||typeof t.alloc!="object")&&(t.alloc={normalKey:null,spmlCode:null,preLabel:null,trayReserved:!1}),i)if(t.alloc.trayReserved===!0&&a==="plateau")t.served.trayUsed=!0,t.served.trayFromReservation=!0,t.alloc.trayReserved=!1;else{if((o.inventory.plateaux||0)<=0){alert(n.alertNoTrays||"No trays available.");return}o.inventory.plateaux=(o.inventory.plateaux||0)-1,t.served.trayUsed=!0,t.served.trayFromReservation=!1,ne()}else t.served.trayUsed=!1,t.served.trayFromReservation=!1;t.served.meal=Date.now(),t.served.mealNone=!1;const c=To(t,n);q({type:"mealServed",seat:e,label:c}),ve(),B(),O(),x()}function _o(e,t){v[o.config.lang||"EN"],!(!t||!t.occupied)&&(!t.served||!t.served.meal||!t.served.trayUsed||t.served.trayCleared||(t.served.trayCleared=!0,q({type:"trayCleared",seat:e}),ve(),B(),ne(),O(),x()))}function x(){var g,h,m,k,I;const e=v[o.config.lang||"EN"],t=document.getElementById("flowNow"),n=document.getElementById("flowLater"),a=document.getElementById("flowClear");if(!t||!n)return;const l=(g=document.getElementById("flowLaterTitle"))==null?void 0:g.parentElement,i=(h=document.getElementById("flowNowTitle"))==null?void 0:h.parentElement,c=(m=document.getElementById("flowClearTitle"))==null?void 0:m.parentElement,s=o.phase==="aperitif",r=o.phase==="tc",d=o.phase==="fiche";i&&(i.style.display=s||r||d?"none":""),c&&(c.style.display=s||r||d?"none":""),l&&(l.style.display=d?"none":""),t.innerHTML="",n.innerHTML="",a&&(a.innerHTML="");const{serveList:u,orderList:p,clearList:y}=ql();{const b=document.getElementById("flowLaterTitle");if(b&&(b.textContent=o.phase==="aperitif"?e.flowAperoTakenTitle||"Orders taken ":o.phase==="tc"?e.flowTCTakenTitle||"Tea & coffee taken ":e.flowLaterTitle||"Orders to take "),o.phase==="aperitif"||o.phase==="tc"){const S=o.phase==="aperitif"?"apOrdered":"tcOrdered",E=(Array.isArray(o.history)?o.history:[]).filter(T=>T&&T.type===S&&(S!=="tcOrdered"||T.ctx!=="repas"));if(E.length===0){const T=document.createElement("div");T.style.color="var(--muted)",T.textContent=e.flowEmptyTaken||"No orders taken yet",n.appendChild(T)}else for(const T of E){let M=null;if(typeof Oe=="function"){const[ue,_]=Oe(T.seat||"");ue&&_&&typeof he=="function"&&(M=he(ue,_))}const N=[];M&&(M.status==="HON"?N.push('<span class="tag hon">HON</span>'):M.status==="SEN"?N.push('<span class="tag sen">SEN</span>'):M.status==="VIP"?N.push('<span class="tag vip">VIP</span>'):M.status==="FCL"?N.push('<span class="tag fcl">FCL</span>'):M.status==="PAD"?N.push('<span class="tag pad">PAD</span>'):M.status==="FTL"&&N.push('<span class="tag ftl">FTL</span>'),M.sleep&&N.push(`<span class="tag sleep">${At.sleep}</span>`));const K=typeof gn=="function"&&gn(T.ap)||"",H=typeof de=="function"&&de(T.ap,e,o.config.lang)||"",ae=(T.notes||"").trim(),re=[H,ae].filter(Boolean).join("  "),ee=re?`<div class="flow-sub">${K?K+" ":""}${xt(re)}</div>`:"";if(M&&(s&&((k=M.served)!=null&&k.aperitifDelivered)||r&&((I=M.served)!=null&&I.tcDelivered)))continue;const U=document.createElement("div");U.className="flow-item",U.dataset.key=T.seat||"",U.innerHTML=`
          <div class="flow-seat">${T.seat||""}</div>
          <div class="flow-desc">${N.join(" ")}${ee}</div>
          <div class="flow-confirm flow-serve-confirm">${e.flowServeTag||"Serve"}</div>
        `,nn(U,T.seat||"",o.phase),n.appendChild(U)}}else if(p.length===0){const S=document.createElement("div");S.style.color="var(--muted)",S.textContent=e.flowEmptyLater||"Aucune commande  prendre",n.appendChild(S)}else for(const S of p){const E=S.seat,T=[];E.status==="HON"?T.push('<span class="tag hon">HON</span>'):E.status==="SEN"?T.push('<span class="tag sen">SEN</span>'):E.status==="VIP"?T.push('<span class="tag vip">VIP</span>'):E.status==="FCL"?T.push('<span class="tag fcl">FCL</span>'):E.status==="PAD"?T.push('<span class="tag pad">PAD</span>'):E.status==="FTL"&&T.push('<span class="tag ftl">FTL</span>'),E.type==="infant"?T.push('<span class="tag inf">INF</span>'):E.type==="child"&&T.push('<span class="tag chd">CHD</span>'),E.sleep&&T.push(`<span class="tag sleep">${At.sleep}</span>`);const M=document.createElement("div");M.className="flow-item",M.dataset.key=S.key;const N=It==null?void 0:It(E);N&&T.unshift(N),M.innerHTML=`
          <div class="flow-seat">${S.key}</div>
          <div class="flow-desc">${T.join(" ")}</div>
          <div class="tag">${e.flowTakeOrder||"Order"}</div>
        `,M.addEventListener("click",()=>pn(S.key)),n.appendChild(M)}}if(u.length===0){const b=document.createElement("div");b.style.color="var(--muted)",b.textContent=e.flowEmptyLater||"No passenger to serve",t.appendChild(b)}else for(const b of u){const S=b.seat,E=[];S.status==="HON"?E.push('<span class="tag hon">HON</span>'):S.status==="SEN"?E.push('<span class="tag sen">SEN</span>'):S.status==="VIP"?E.push('<span class="tag vip">VIP</span>'):S.status==="FCL"?E.push('<span class="tag fcl">FCL</span>'):S.status==="PAD"?E.push('<span class="tag pad">PAD</span>'):S.status==="FTL"&&E.push('<span class="tag ftl">FTL</span>'),S.type==="infant"?E.push('<span class="tag inf">INF</span>'):S.type==="child"&&E.push('<span class="tag chd">CHD</span>'),S.sleep&&E.push(`<span class="tag sleep">${At.sleep}</span>`);const T=document.createElement("div");if(T.className="flow-item"+(S.eatWith?" eat-with":""),S.eatWith){const K=[b.key,S.eatWith].sort().join("-");T.dataset.pair=K}T.dataset.key=b.key;const M=It(S);M&&E.unshift(M);const N=oi(b.key);T.innerHTML=`
  <div class="flow-seat">${b.key}</div>
  <div class="flow-desc">${E.join(" ")}</div>
  <div class="flow-confirm flow-serve-confirm">${e.flowServeTag||"Serve"}</div>
  ${N}
`,nn(T,b.key,o.phase),t.appendChild(T)}if(a)if(!y||y.length===0){const b=document.createElement("div");b.style.color="var(--muted)",b.textContent=e.flowEmptyClear||"Rien  dbarrasser",a.appendChild(b)}else for(const b of y){const S=b.seat,E=[];S.status==="HON"?E.push('<span class="tag hon">HON</span>'):S.status==="SEN"?E.push('<span class="tag sen">SEN</span>'):S.status==="VIP"?E.push('<span class="tag vip">VIP</span>'):S.status==="FCL"?E.push('<span class="tag fcl">FCL</span>'):S.status==="PAD"?E.push('<span class="tag pad">PAD</span>'):S.status==="FTL"&&E.push('<span class="tag ftl">FTL</span>'),S.type==="infant"?E.push('<span class="tag inf">INF</span>'):S.type==="child"&&E.push('<span class="tag chd">CHD</span>'),S.sleep&&E.push('<span class="tag sleep"></span>');const T=document.createElement("div");if(T.className="flow-item"+(S.eatWith?" eat-with":""),S.eatWith){const M=[b.key,S.eatWith].sort().join("-");T.dataset.pair=M}T.dataset.key=b.key,T.innerHTML=`
          <div class="flow-seat">${b.key}</div>
          <div class="flow-desc">${E.join(" ")}</div>
          <div class="flow-confirm flow-serve-confirm">${e.flowClearTag||"DÃ©barrasser"}</div>
        `,nn(T,b.key,"clear",M=>{const[N,K]=Oe(M),H=N&&K?he(N,K):null;_o(M,H)}),a.appendChild(T)}}function Pt(){const e=document.getElementById("langDropdown"),t=document.getElementById("langActive"),n=document.getElementById("langMenu");if(!e||!t||!n)return;e.style.pointerEvents="auto",e.style.position="relative",e.style.zIndex="600";const a={EN:String.fromCodePoint(127468,127463),DE:String.fromCodePoint(127465,127466),FR:String.fromCodePoint(127467,127479)},l=String.fromCodePoint(127987),i=()=>{const d=(o.config.lang||"EN").toUpperCase(),u=a[d]||l;t.textContent=u,t.setAttribute("aria-label",d),t.title=d},c=()=>{n.querySelectorAll("[data-lang]").forEach(d=>{const u=(d.dataset.lang||"").toUpperCase(),p=a[u]||l;d.textContent=p,d.setAttribute("aria-label",u),d.title=u})};c(),i();const s=d=>{e.classList.toggle("open",d),t.setAttribute("aria-expanded",String(d)),n.style.display=d?"flex":"none",d&&n.querySelectorAll("[data-lang]").forEach(u=>{u.classList.toggle("primary",u.dataset.lang===(o.config.lang||"EN"))})};t.addEventListener("click",d=>{d.stopPropagation(),s(!e.classList.contains("open"))}),n.addEventListener("click",d=>d.stopPropagation());const r=d=>{e.classList.contains("open")&&(e.contains(d.target)||s(!1))};document.addEventListener("click",r),document.addEventListener("pointerdown",r),document.addEventListener("keydown",d=>{d.key==="Escape"&&s(!1)}),n.querySelectorAll("[data-lang]").forEach(d=>{d.addEventListener("click",()=>{var p;const u=d.dataset.lang;u&&(o.config.lang=u,B(),Ce(),at(),ce(),O(),x(),((p=document.getElementById("modalBack"))==null?void 0:p.style.display)==="flex"&&typeof Ze=="function"&&Ze(),i(),c(),s(!1))})})}function lt(){const e=o.config.theme==="dark";document.body.classList.toggle("theme-dark",e),document.body.classList.toggle("theme-light",!e);const t=document.getElementById("themeToggle");if(t){const n=e?"Light mode":"Dark mode";t.textContent=e?"â˜€ï¸":"ðŸŒ™",t.setAttribute("aria-label",n),t.title=n}}const Yn=document.getElementById("themeToggle");Yn&&Yn.addEventListener("click",()=>{o.config.theme=o.config.theme==="dark"?"light":"dark",B(),lt()});const an=document.getElementById("layoutSelect");an&&an.addEventListener("change",()=>{const e=an.value||"A220";o.config.layout=e,B(),$t(),O(),x()});document.querySelectorAll(".layout-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.layout||"";if(!t)return;const n=document.getElementById("layoutSelect");if(n){if(n.value===t){$t();return}n.value=t,n.dispatchEvent(new Event("change",{bubbles:!0}))}})});document.querySelectorAll("[data-inv]").forEach(e=>e.addEventListener("click",()=>{const t=e.dataset.key,n=e.dataset.inv==="+1"?1:-1;t&&(t.startsWith("hot_")||t==="plateaux")&&(o.inventory[t]=Math.max(0,(o.inventory[t]||0)+n)),B(),ne()}));const Lo=document.getElementById("rowsBizDisplay");document.getElementById("rowsBizMinus").addEventListener("click",()=>{o.config.rowsBiz=Math.max(0,(o.config.rowsBiz||0)-1),Lo.textContent=o.config.rowsBiz,B(),O(),x()});document.getElementById("rowsBizPlus").addEventListener("click",()=>{o.config.rowsBiz=Math.min(15,(o.config.rowsBiz||0)+1),Lo.textContent=o.config.rowsBiz,B(),O()});w("#spmlAddBtn").addEventListener("click",()=>{const e=v[o.config.lang||"EN"]||v.EN,t=(w("#spmlAddCode").value||"").trim().toUpperCase(),n=Math.max(1,parseInt(w("#spmlAddQty").value||"1",10));if(!t){alert(e.spmlCodeRequired);return}o.inventory.spml[t]=(o.inventory.spml[t]||0)+n,w("#spmlAddCode").value="",B()});var Ma;(Ma=document.getElementById("spmlAddCode"))==null||Ma.addEventListener("change",e=>e.target.blur());w("#preAddBtn").addEventListener("click",()=>{var c;const e=v[o.config.lang||"EN"]||v.EN,t=(((c=w("#preAddCode"))==null?void 0:c.value)||"").trim(),n=(w("#preAddLabel").value||"").trim(),a=(t||n).trim(),l=Math.max(1,parseInt(w("#preAddQty").value||"1",10));if(!a){alert(e.preAddLabelRequired);return}o.inventory.pre[a]=(o.inventory.pre[a]||0)+l,w("#preAddLabel").value="";const i=w("#preAddCode");i&&(i.value=""),B()});var Na;(Na=document.getElementById("preAddCode"))==null||Na.addEventListener("change",e=>e.target.blur());document.querySelectorAll("#filterTabs .subtab[data-filter]").forEach(e=>e.addEventListener("click",()=>{if(e.classList.contains("active"))return;const t=e.dataset.filter||"all";po(t),tt()&&mt(!1),O(),x()}));po(mo());const Qn=document.getElementById("bulkOccupyToggle"),Xn=document.getElementById("bulkOccupyApply"),ea=document.getElementById("bulkOccupyClear");Qn&&Qn.addEventListener("click",()=>{Ft(!z)});Xn&&Xn.addEventListener("click",()=>_l());ea&&ea.addEventListener("click",()=>Tl());qe();te&&le&&un&&(mt(!1),te.addEventListener("click",e=>{e.stopPropagation()}),le.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=!tt();mt(t)}),document.addEventListener("click",e=>{if(!tt())return;const t=e.target;t&&(te.contains(t)||le.contains(t)||mt(!1))}),window.addEventListener("resize",()=>{tt()&&yo()}),document.addEventListener("keydown",e=>{e.key!=="Escape"||!tt()||(mt(!1),le.focus({preventScroll:!0}))}));document.querySelectorAll("#phaseChips .tab").forEach(e=>e.addEventListener("click",()=>{if(e.classList.contains("active"))return;const t=e.dataset.phase||"fiche";o.phase=t,Gt(t),O(),x(),pt()}));w("#exportPNG").addEventListener("click",()=>{const e=o.config.rowsBiz||0,t=72,n=48,a=40,l=["F","E","D"],i=fo(),c=l.length+i.length,s=a+c*t+28+20,r=a+e*n+20,d=document.createElement("canvas");d.width=s,d.height=r;const u=d.getContext("2d");u.fillStyle="#ffffff",u.fillRect(0,0,s,r),u.fillStyle="#000000",u.font="12px system-ui";let p=a;const y=l.concat([""]).concat(i);for(const m of y){if(m===""){p+=28;continue}u.fillText(m,p+t/2-4,a-12),p+=t}for(let m=e;m>=1;m--){const k=a+(e-m)*n;u.fillText(String(m),10,k+28);for(let b=0;b<l.length;b++){const S=a+b*t;ta(u,m,l[b],S,k,t,n)}const I=a+l.length*t+28;for(let b=0;b<i.length;b++){const S=I+b*t;ta(u,m,i[b],S,k,t,n)}}const g=document.createElement("a");g.href=d.toDataURL("image/png");const h=(o.title.flightNo||"vol")+"_"+(o.title.date||"date")+"_seatmap.png";g.download=h,g.click()});function ta(e,t,n,a,l,i,c){var d;e.strokeStyle="#888",e.strokeRect(a,l,i-6,c-6);const s=he(t,n);s.occupied&&(e.fillStyle="#dce6ff",e.fillRect(a+1,l+1,i-8,c-8)),e.fillStyle="#000",e.font="12px system-ui",e.textBaseline="alphabetic",e.fillText(t+n,a+8,l+18);let r="";if(!((d=s==null?void 0:s.served)!=null&&d.trayCleared)){const u=s.spml||s.preLabel?null:s.normalMeal==="viande"?"1":s.normalMeal==="vege"?"2":s.normalMeal==="plateau"?"":null;r=s.spml?s.spml:s.preLabel?"PRE":u||""}r&&(e.font="12px system-ui",e.fillStyle="#000",e.textBaseline="bottom",e.fillText(r,a+i-32,l+c-6),e.textBaseline="alphabetic"),s.status!=="none"&&(s.status==="FTL"?e.fillStyle="#9aa4b2":s.status==="SEN"?e.fillStyle="#ffd24d":s.status==="HON"?e.fillStyle="#000000":s.status==="VIP"?e.fillStyle="#9b5cff":s.status==="FCL"?e.fillStyle="#ff5757":s.status==="PAD"?e.fillStyle="#39d98a":e.fillStyle="#666",e.beginPath(),e.arc(a+i-20,l+16,6,0,2*Math.PI),e.fill(),e.fillStyle="#000")}w("#clientView").addEventListener("click",()=>{o.clientView=!o.clientView,B(),document.body.classList.toggle("client",o.clientView),lt(),at(),O(),x()});let on=!1,Xe=null;const Yl=4e3;function Ql(){o.inventory.plateaux=0,o.inventory.hot_viande=0,o.inventory.hot_vege=0;for(const e of Et)o.inventory.spml[e]=0;o.inventory.hot_special=0,o.inventory.pre={},Ie(),o.menu.mode="auto",o.menu.direction=null,o.menu.serviceType=null,o.menu.breakfastType="standard",o.menu.rotation=null,o.menu.viandeLabel="",o.menu.vegeLabel="",o.menu.manualViandeLabel="",o.menu.manualVegeLabel="",o.menu.autoViandeLabel="",o.menu.autoVegeLabel="",o.menu.autoStatus="",o.menu.autoNote="",o.reminders=[],o.history=[];for(const e of Object.keys(o.seats))o.seats[e]=Te({});o.phase="fiche",document.querySelectorAll("input[type='text'], textarea").forEach(e=>e.value=""),He(),Ce(!1),Gt("fiche"),dl(Ge()).catch(e=>console.warn("[reset] clear persisted state failed:",e)),B(),O(),ne(),ce(),Ye(),q({type:"reset"})}const me=document.getElementById("resetFlight");if(me){const e=()=>{var s;const n=(me.dataset.defaultLabel??"").trim();if(n)return n;const a=o.config.lang||"EN",i=((v[a]||v.EN).reset??"").trim();if(i)return i;const c=(me.textContent??"").trim();return c||(((s=v.EN)==null?void 0:s.reset)??"Reset").trim()},t=n=>{var i;Xe!==null&&(clearTimeout(Xe),Xe=null),on=!1,me.dataset.resetArmed="false";const l=(n??e()).trim()||(((i=v.EN)==null?void 0:i.reset)??"Reset");me.dataset.defaultLabel=l,me.textContent=l};me.dataset.resetArmed=me.dataset.resetArmed??"false",me.addEventListener("click",()=>{const n=o.config.lang||"EN",a=v[n]||v.EN,l=(a.resetConfirm??a.reset??"Confirm").trim()||"Confirm",i=e();on?(t(i),Ql()):(on=!0,me.dataset.resetArmed="true",me.dataset.defaultLabel=i,me.textContent=l,Xe!==null&&clearTimeout(Xe),Xe=window.setTimeout(()=>{t()},Yl))})}function Xl(){if(!Array.isArray(o.history))return;const e=[];for(const t of o.history){if(t&&typeof t=="object"&&t.type){e.push(t);continue}if(typeof t!="string"){e.push(t);continue}const n=t.replace(/^\s*\[\d{2}:\d{2}\]\s*/,"");let a;if(a=n.match(/^(Apritif servi |Aperitif served at|Aperitif serviert bei)\s+([0-9]+[A-F])/)){e.push({ts:Date.now(),type:"apServed",seat:a[2]});continue}if(a=n.match(/^(Apritif annul pour|Aperitif canceled for|Aperitif storniert fr)\s+([0-9]+[A-F])/)){e.push({ts:Date.now(),type:"apCanceled",seat:a[2]});continue}if(a=n.match(/^(Plat servi |Main served at|Hauptgang serviert bei)\s+([0-9]+[A-F])(?:\s+\s+(.+))?/)){e.push({ts:Date.now(),type:"mealServed",seat:a[2],label:a[3]||""});continue}if(a=n.match(/^(Service annul pour|Service canceled for|Service storniert fr)\s+([0-9]+[A-F])/)){e.push({ts:Date.now(),type:"serviceCanceled",seat:a[2]});continue}if(/(Vol rinitialis\.|Flight reset\.|Flug zurckgesetzt\.)/.test(n)){e.push({ts:Date.now(),type:"reset"});continue}e.push({ts:Date.now(),type:"text",text:n})}o.history=e}(function(){var l;if(o.seats&&typeof o.seats=="object")for(const i of Object.keys(o.seats))o.seats[i]=Te(o.seats[i]);for(const i of Et)typeof o.inventory.spml[i]!="number"&&(o.inventory.spml[i]=0);w("#flightNo").value=o.title.flightNo||"",document.getElementById("flightDateISO").value=o.title.date||"",w("#flightDate").value=bt(o.title.date||""),(l=document.getElementById("flightDate"))==null||l.addEventListener("input",vt),vt();const t=document.getElementById("rowsBizDisplay"),n=document.getElementById("layoutSelect");n&&(n.value=o.config.layout||"A220"),$t();const a=document.getElementById("langSelect");a&&(a.value=o.config.lang||"EN"),at(),ce(),Xl(),ce(),Pt(),o.config.theme="dark",lt(),ge(),O(),t&&(t.textContent=o.config.rowsBiz||0),Ie(),!o.menu.manualViandeLabel&&o.menu.viandeLabel&&(o.menu.manualViandeLabel=o.menu.viandeLabel),!o.menu.manualVegeLabel&&o.menu.vegeLabel&&(o.menu.manualVegeLabel=o.menu.vegeLabel),o.menu.direction!=="inbound"&&o.menu.direction!=="outbound"&&(o.menu.direction=null),o.menu.serviceType=o.menu.serviceType==="day"||o.menu.serviceType==="breakfast"?o.menu.serviceType:null,Bl(),Il(),Ll(),document.body.classList.toggle("client",o.clientView),Gt(o.phase),O(),ne(),ce(),Ye()})();var Aa;(Aa=document.getElementById("tc_group"))==null||Aa.addEventListener("change",Vl);var Da;(Da=document.getElementById("tc_alcool_type"))==null||Da.addEventListener("change",Hl);var Oa;(Oa=document.getElementById("tc_chaud_type"))==null||Oa.addEventListener("change",Wl);["tc_soft_type","tc_soft_eau","tc_soft_jus","tc_soft_coca","tc_soft_sprite","tc_beer","tc_vin_rouge","tc_vin_blanc","tc_digestif_type","tc_the_type","tc_group","tc_alcool_type","tc_chaud_type"].forEach(e=>{var t;return(t=document.getElementById(e))==null?void 0:t.addEventListener("change",D)});var xa;(xa=document.getElementById("tc_group"))==null||xa.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value=""),D()});var Pa;(Pa=document.getElementById("tc_alcool_type"))==null||Pa.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value=this.value||""),D()});var Ka;(Ka=document.getElementById("tc_chaud_type"))==null||Ka.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value=this.value||""),D()});var Ra;(Ra=document.getElementById("tc_soft_type"))==null||Ra.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value="soft"),D()});var Fa;(Fa=document.getElementById("tc_soft_eau"))==null||Fa.addEventListener("change",D);var ja;(ja=document.getElementById("tc_soft_coca"))==null||ja.addEventListener("change",D);var Va;(Va=document.getElementById("tc_soft_sprite"))==null||Va.addEventListener("change",D);var Ha;(Ha=document.getElementById("tc_beer"))==null||Ha.addEventListener("change",D);var Wa;(Wa=document.getElementById("tc_vin_rouge"))==null||Wa.addEventListener("change",D);var za;(za=document.getElementById("tc_vin_blanc"))==null||za.addEventListener("change",D);var Ja;(Ja=document.getElementById("tc_cocktail_type"))==null||Ja.addEventListener("change",D);const ei={FR:{campari:["<b>Campari Orange</b> : Glaons, Campari, Jus d'orange","<b>Campari Soda</b> : Glaons, Campari, Eau gazeuse"],bloody_mary:["Glaons, Vodka, Jus de tomate, sel, poivre, citron"],screwdriver:["Glaons, Vodka, Jus d'orange"],gin_tonic:["Glaons, Gin, Citron, Tonic"],cuba_libre:["Glaons, Rhum, Citron, Coca-Cola"]},EN:{campari:["<b>Campari Orange</b>: Ice, Campari, Orange juice","<b>Campari Soda</b>: Ice, Campari, Sparkling water"],bloody_mary:["Ice, Vodka, Tomato juice, salt, pepper, lemon"],screwdriver:["Ice, Vodka, Orange juice"],gin_tonic:["Ice, Gin, Lemon, Tonic"],cuba_libre:["Ice, Rum, Lemon, Coca-Cola"]},DE:{campari:["<b>Campari Orange</b>: Eis, Campari, Orangensaft","<b>Campari Soda</b>: Eis, Campari, Sodawasser"],bloody_mary:["Eis, Wodka, Tomatensaft, Salz, Pfeffer, Zitrone"],screwdriver:["Eis, Wodka, Orangensaft"],gin_tonic:["Eis, Gin, Zitrone, Tonic"],cuba_libre:["Eis, Rum, Zitrone, Coca-Cola"]}};function ti(){var e;return(((e=o==null?void 0:o.config)==null?void 0:e.lang)||"EN").toUpperCase()}function ni(e){var i;const t=document.getElementById("tc_tip"),n=ti(),a=((i=ei[n])==null?void 0:i[e])||null,l=Array.isArray(a)&&a.length>1;t.innerHTML=a?a.map(c=>`<div>${l?" ":""}${c}</div>`).join(""):""}function ai(e){const t=document.getElementById("tc_tipBtn"),n=document.getElementById("tc_tip");!t||!n||(e?(t.style.display="inline-flex",n.style.display="none"):(t.style.display="none",n.style.display="none"))}(function(){var l;const t=document.getElementById("tc_cocktail_type");if(!t)return;const n=t.cloneNode(!0);t.parentNode.replaceChild(n,t);const a=document.getElementById("tc_cocktail_type");a.addEventListener("change",i=>{const c=i.target.value,s=c==="bloody_mary";document.querySelectorAll("#tc_cocktail .bm-only").forEach(r=>{r.style.display=s?"inline-flex":"none",s||(r.querySelector("input").checked=!1)}),ai(c),ni(c),D()}),(l=document.getElementById("tc_tipBtn"))==null||l.addEventListener("click",()=>{const i=document.getElementById("tc_tip");i&&(i.style.display=i.style.display==="none"||!i.style.display?"block":"none")}),document.addEventListener("click",i=>{const c=document.getElementById("tc_cocktail_tipwrap"),s=document.getElementById("tc_tip");c&&s&&!c.contains(i.target)&&(s.style.display="none")}),a.dispatchEvent(new Event("change"))})();var Ga;(Ga=document.getElementById("tc_soft_type"))==null||Ga.addEventListener("change",function(){Je(),D()});document.addEventListener("DOMContentLoaded",()=>{bo()});var $a;($a=document.getElementById("saveSnapshot"))==null||$a.addEventListener("click",()=>{var s;const e=(((s=o==null?void 0:o.title)==null?void 0:s.flightNo)||"no-flight").replace(/\W+/g,"_"),t=new Date,n=`${t.getFullYear()}${String(t.getMonth()+1).padStart(2,"0")}${String(t.getDate()).padStart(2,"0")}-${String(t.getHours()).padStart(2,"0")}${String(t.getMinutes()).padStart(2,"0")}`,a=`${e||"flight"}-${n}.json`,l=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),i=URL.createObjectURL(l),c=document.createElement("a");c.href=i,c.download=a,document.body.appendChild(c),c.click(),setTimeout(()=>{URL.revokeObjectURL(i),c.remove()},500)});function Bo(e){for(let t=0;t<o.history.length;t++){const n=o.history[t];if(n&&n.type==="tcServed"&&n.seat===e&&n.ctx==="repas")return n}return null}function gn(e){return!e||e.cat==="cafe"||e.cat==="deca"||e.cat==="the"||e.cat==="chocolat"||e.cat==="soft"&&(e.softType==="eau"||e.softType==="coca"||e.softType==="jus"||e.softType==="sprite"||e.softType==="tonic")||e.cat==="champagne"||e.cat==="vin_rouge"||e.cat==="vin_blanc"||e.cat==="biere"||e.cat==="cocktail"||e.cat==="digestif",""}function oi(e){const t=Bo(e);if(!t)return"";const n=v[o.config.lang||"EN"];let a="";t.ap&&(a=de(t.ap,n,o.config.lang||"EN")||"");const l=(t.notes||"").trim(),i=[a,l].filter(Boolean).join("  "),c=gn(t.ap),s=(c?c+" ":"")+i;return i?`<div class="flow-sub">${s}</div>`:""}function _e(e){const t=document.getElementById("mhMealDrinkInline");if(!t)return;const n=v[o.config.lang||"EN"],a=Bo(e),l=(n.mealDrinkTitle||"Meal drinks")+": ";if(!a){t.textContent=l+"";return}const i=a.ts||a.t||null,c=i?new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";let s="";a.ap&&(s=de(a.ap,n,o.config.lang||"EN")||""),t.textContent=l+(s?`${c}  ${s}`:`${c}`)}function li(e){for(let t=0;t<o.history.length;t++){const n=o.history[t];if(n&&n.type==="tcServed"&&n.seat===e&&n.ctx!=="repas")return n}return null}function Le(e){const t=document.getElementById("mhTCInline");if(!t)return;const n=v[o.config.lang||"EN"],a=li(e),l=(n.chips_tc||"Tea & Coffee")+": ";if(!a){t.textContent=l+"";return}const i=a.ts||a.t||null,c=i?new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";let s="";a.ap&&(s=de(a.ap,n,o.config.lang||"EN")||""),t.textContent=l+(s?`${c}  ${s}`:`${c}`)}function ii(){const e=document.getElementById("flightNo"),t=document.getElementById("flightDateISO"),n=document.getElementById("flightDate");o.title||(o.title={flightNo:"",date:""}),e&&(o.title.flightNo=(e.value||"").trim()),t&&t.value?o.title.date=t.value:n&&(o.title.date=n.value);const a=document.getElementById("labelViande"),l=document.getElementById("labelVege");Ie(),a&&(o.menu.manualViandeLabel=(a.value||"").trim()),l&&(o.menu.manualVegeLabel=(l.value||"").trim()),o.menu.mode==="manual"?(o.menu.viandeLabel=o.menu.manualViandeLabel||"",o.menu.vegeLabel=o.menu.manualVegeLabel||""):Ce(!1)}function ci(){typeof initFlightDatePicker=="function"&&initFlightDatePicker(),attachHeaderButtons==null||attachHeaderButtons(),Pt==null||Pt(),lt==null||lt()}function si(){kt(),Q(),X(),D();const e=document.getElementById("mealBlock");e&&!e.dataset.touchReady&&(e.addEventListener("touchstart",Rl,{passive:!0}),e.addEventListener("touchend",Fl,{passive:!0}),e.addEventListener("touchcancel",()=>{Se=null},{passive:!0}),e.dataset.touchReady="1")}function ri(){setTooltips==null||setTooltips()}function di(){init==null||init()}function ui(){ii(),B()}function fi(){ci()}function mi(){ri()}function pi(){si()}const R=o,gi=Te;function yi(e){var a,l,i,c,s,r,d,u,p,y,g,h,m,k,I,b,S,E,T,M,N,K,H,ae,re,ee;const t=typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e));R.title.flightNo=((a=t.title)==null?void 0:a.flightNo)??"",R.title.date=((l=t.title)==null?void 0:l.date)??"",Object.assign(R.config,t.config??{}),R.inventory.plateaux=((i=t.inventory)==null?void 0:i.plateaux)??0,R.inventory.hot_viande=((c=t.inventory)==null?void 0:c.hot_viande)??0,R.inventory.hot_vege=((s=t.inventory)==null?void 0:s.hot_vege)??0,R.inventory.hot_special=((r=t.inventory)==null?void 0:r.hot_special)??0,R.inventory.spml={...((d=t.inventory)==null?void 0:d.spml)??{}},R.inventory.pre={...((u=t.inventory)==null?void 0:u.pre)??{}},R.menu.mode=((p=t.menu)==null?void 0:p.mode)??"auto",R.menu.direction=((y=t.menu)==null?void 0:y.direction)==="inbound"||((g=t.menu)==null?void 0:g.direction)==="outbound"?t.menu.direction:null,R.menu.serviceType=((h=t.menu)==null?void 0:h.serviceType)==="day"||((m=t.menu)==null?void 0:m.serviceType)==="breakfast"?t.menu.serviceType:null,R.menu.breakfastType=((k=t.menu)==null?void 0:k.breakfastType)==="nightstop"||((I=t.menu)==null?void 0:I.breakfastType)==="standard"?t.menu.breakfastType:"standard",R.menu.rotation=typeof((b=t.menu)==null?void 0:b.rotation)=="number"?t.menu.rotation:null,R.menu.viandeLabel=((S=t.menu)==null?void 0:S.viandeLabel)??"",R.menu.vegeLabel=((E=t.menu)==null?void 0:E.vegeLabel)??"",R.menu.manualViandeLabel=((T=t.menu)==null?void 0:T.manualViandeLabel)??((M=t.menu)==null?void 0:M.viandeLabel)??"",R.menu.manualVegeLabel=((N=t.menu)==null?void 0:N.manualVegeLabel)??((K=t.menu)==null?void 0:K.vegeLabel)??"",R.menu.autoViandeLabel=((H=t.menu)==null?void 0:H.autoViandeLabel)??"",R.menu.autoVegeLabel=((ae=t.menu)==null?void 0:ae.autoVegeLabel)??"",R.menu.autoStatus=((re=t.menu)==null?void 0:re.autoStatus)??"",R.menu.autoNote=((ee=t.menu)==null?void 0:ee.autoNote)??"",R.phase=t.phase??"fiche",R.clientView=!!t.clientView,R.reminders=Array.isArray(t.reminders)?[...t.reminders]:[],R.history=Array.isArray(t.history)?[...t.history]:[],Object.keys(R.seats).forEach(U=>{delete R.seats[U]});const n=t.seats??{};for(const[U,ue]of Object.entries(n))R.seats[U]=gi(ue)}async function hi(){try{navigator.storage&&navigator.storage.persist&&(await navigator.storage.persisted()||await navigator.storage.persist())}catch(e){console.warn("Persistent storage request failed:",e)}}const bi=1200;let ln;function vi(){ln!==void 0&&window.clearTimeout(ln),ln=window.setTimeout(()=>{try{ui()}catch(e){console.warn("[autosave] persist failed:",e)}},bi)}function ki(e){const t=()=>vi();e.addEventListener("input",t,{capture:!0}),e.addEventListener("change",t,{capture:!0})}document.addEventListener("DOMContentLoaded",async()=>{await hi(),await sl();const e=await rl();e&&yi(e.snapshot),fi(),mi(),pi(),di(),ki(document)});
