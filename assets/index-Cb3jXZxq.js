(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();const v={EN:{flight:"Flight",date:"Date",flightPlaceholder:"e.g. LX2810",saveTitle:"Save",reset:"Reset",client:"Client mode",crew:"Crew mode",lblLang:"Language",exportJSON:"Export JSON",importJSON:"Import",exportPNG:"PNG",rights:"All rights reserved",chips_apero:"Aperitif",chips_meal:"Main",chips_tc:"Tea & Coffee",chips_fiche:"Pax record",filter_all:"All seats",filter_toserve:"To serve",filter_clear:"To clear",filter_sleep:"Sleeping",filter_later:"Serve later",lgServed:"âœ… Served",lgclear:"ðŸ§¹ Cleared",flowTitle:"Order flow",flowNowTitle:"Service path â¬‡ï¸",flowLaterTitle:"Orders to take â¬‡ï¸",flowClearTitle:"To clear â¬‡ï¸",flowAperoTakenTitle:"Orders taken â¬‡ï¸",flowTaken:"Taken",flowEmptyTaken:"No orders taken yet",flowTCTakenTitle:"Orders taken â¬‡ï¸",flowTakeOrder:"Order",flowServeTag:"Serve",flowClearTag:"To clear",flowEmptyLater:"No orders left",flowEmptyClear:"Nothing to clear",seatmapTitle:"Seatmap ({L} | {R})",seat:"Seat",trayShort:"Tray",apLabel:"Aperitif",mealLabel:"Main",hdrConfig:"Curtain & configuration",lblLayout:"Aircraft",lblRows:"Rows",secMenuTitle:"Menu",menuModeAuto:"Auto",menuModeManual:"Manual",menuOutbound:"Outbound",menuInbound:"Inbound",menuDayService:"Day service",menuBreakfast:"Breakfast",menuBreakfastType:"Breakfast type",menuBreakfastStandard:"Normal",menuBreakfastNight:"Out of night stop",menuSelectContext:"Select outbound/inbound and service to load menu.",menuPickDate:"Select a flight date to load the menu.",menuSelection:"Menu selection",menuAutoPlaceholder:"Placeholder menu until DB is provided.",menuAutoMissing:"Menu data pending. You can switch to manual mode.",autoMenu_coldCutsPlatter:"SWISS Saveurs Cold Cuts Platter",autoMenu_granolaMilk:"Granola with milk",autoMenu_nightstopNote:"Out of nightstop menu",autoMenu_gruyereEggRoll:"GruyÃ¨re egg roll with mountain herbs, sautÃ©ed shiitake mushrooms and tomatoes",autoMenu_appenzellerOmelette:"Omelette with Appenzeller cheese, rÃ¶sti, spinach and cherry tomatoes",autoMenu_beefTenderloinPorcini:"Grilled beef tenderloin with porcini mushroom sauce, potato gratin and broccoli",autoMenu_truffleTriangoli:"Truffle triangoli with white wine truffle sauce, spinach and Sbrinz cheese",autoMenu_chickenMascarponePolenta:"Chicken breast with jus de volaille, mascarpone polenta, red cabbage and brussels sprouts",autoMenu_trofieMushroom:"Trofie pasta with mushroom cream sauce, glazed salsify, roasted leek, pumpkin and pumpkin seeds",autoMenu_crepeRicottaSpinach:"Savoury crÃªpe with ricotta and spinach, grilled vegetables, pan-fried potatoes",autoMenu_scrambledEngelberg:"Scrambled eggs with Engelberg Abbey mountain cheese and spinach, potato rÃ¶sti",autoMenu_beefBourguignonPuree:"Beef bourguignon, potato purÃ©e and glazed root vegetables",autoMenu_cheeseSpaetzleOnionApple:"Cheese spaetzle with fried onions and apple slices",autoMenu_eggSouffleMushroom:"Egg soufflÃ© with tomatoes and cheese, mushroom sauce and broccoli",autoMenu_asparagusOmelette:"Omelette with asparagus and sauce hollandaise, parsley potatoes",autoMenu_sauteedChickenPolenta:"Sauteed chicken breast with jus, mascarpone polenta, brussels sprouts, braised red cabbage",autoMenu_gratinatedCheeseSpaetzle:"Gratinated cheese spaetzle with apple and fried onions",autoMenu_pendingNote:"Menu data will be loaded automatically when provided.",autoMenu_outOfRotation:"Selected date is outside defined rotations.",lblViande:"Option 1",lblVege:"Option 2",hdrInventaire:"Inventory",invPlateaux:"Trays",invViande:"Option 1",invVege:"Option 2",invSpecial:"SPML",spml:"SPML",add:"Add",preHeader:"Pre-order",preAdd:"Pre-order",close:"âœ–ï¸",mdPass:"Passenger",mdOcc:"Seat occupied",mdSleepTxt:"ðŸ˜´ Sleeping",mdType:"Pax type",mdAdult:"Adult",mdChild:"Child",mdInfant:"Infant",mdStatus:"Status",mdLang:"Language",mdEatWith:"Eat together with",mdEatWithPh:"e.g. 12B",mdLater:"Serve later",mdLaterCustom:"Time",mdLaterSet:"Set time",mdLaterCancel:"Cancel",mdLaterCustomBtn:"Custom time",mdNotes:"Notes",mdAperoNotes:"Drink / aperitif notes",mdTCNotes:"Tea & coffee notes",serveAperitif:"Order aperitif",mdMeal:"Meal",mdNormal:"Normal choice",optNormalMeat:"Option 1",optNormalVeg:"Option 2",optNormalTray:"Tray (no casserole)",mealDrinkTitle:"Meal drinks",mealDrinkNotes:"Meal drink notes",passengerNotesPlaceholder:"e.g. DE only, no nuts",aperoNotesPlaceholder:"e.g. Sparkling water, white wine, peanuts",mealDrinkNotesPlaceholder:"e.g. Sparkling water, white wine, peanuts",tcNotesPlaceholder:"e.g. Long coffee, sugar",meatPlaceholder:"e.g., Beef in red-wine sauce",vegPlaceholder:"e.g., Vegetarian lasagna",preAddPlaceholder:"e.g., Gluten-free pasta",optStatusOther:"Other",mdSpml:"SPML",mdPre:"Pre-order",serveMeal:"Serve main",cancelService:"Cancel service",clearTray:"Tray cleared",undoClearTray:"Undo tray clearing",modalTabFiche:"Pax record",modalTabApero:"Aperitif",modalTabMeal:"Main",modalTabTC:"Tea & Coffee",ordered:"ordered",eatTogether:"ðŸ½ï¸ Eat together with",eatTogetherPH:"e.g. 4C",clear:"Clear",moveSeat:"ðŸ” Move pax",moved:"Moved",swapped:"Swapped",pickDestSeat:"Pick destination seat",moved:"Moved",swapped:"Swapped",tcCH:"Swiss",tcForeign:"Foreign",serveTC:"Serve Tea & Coffee",serveMealDrink:"Order drink",histTcServed:"Tea & Coffee served at",histMealDrinkServed:"Meal drink ordered by",serveNoFood:"No food",serveNone:"No drink",lgSleep:"ðŸ˜´ Sleeping",lgLater:"â³ Serve later",lgChoice:"ðŸ½ï¸ Choice saved",lgInfant:"ðŸ‘¶ Infant",lgChild:"ðŸ§’ Child",lgTogether:"ðŸ¤ Eat together",legendShow:"Show legend",legendHide:"Hide legend",bulkOccStart:"Mark multiple seats",bulkOccApply:"Mark {n} seat(s) as occupied",bulkOccClear:"Clear selection",bulkOccHint:"Click seats to select them, then apply.",bulkOccSelected:"{n} seat selected",bulkOccSelectedPlural:"{n} seats selected",bulkOccCancel:"Cancel selection",bulkOccConfirm:"Confirm marking {n} seats as occupied?",bulkOccBlocked:"Seat already occupied",alertSeatEmpty:"Seat not occupied.",alertChoose:"Choose a meal first (normal, SPML or pre-order).",alertNoTrays:"No trays available.",alertStock:"Insufficient stock for",alertDepleted:"depleted.",alertPickTime:"Pick a time.",resetConfirm:"Confirm",preAddLabelRequired:"Enter a pre-order name",spmlCodeRequired:"Select a SPML code",secHistoryTitle:"History (newest on top)",histTitleSet:"Title set:",histApServed:"Aperitif served at",histApOrdered:"Aperitif ordered at",histMealDrinkOrdered:"Meal drinks ordered at",histTcOrdered:"Tea & coffee ordered at",histApCanceled:"Aperitif canceled for",histMealServed:"Main served at",histCanceled:"Service canceled for",resetDone:"Flight reset.",remindersTitle:"Upcoming reminders",remindServe:"ðŸ”” Reminder: serve",histViewLabel:"View",histScope_all:"All events",histScope_seat:"By seat",histScope_type:"By type",histLblSeat:"Seat",histLblType:"Type",histAscLbl:"Oldest first",histType_mealDrinkServed:"Meal drink served",histType_apServed:"Aperitif served",histType_tcServed:"Tea & Coffee served",histType_mealServed:"Main served",histType_apOrdered:"Aperitif ordered",histType_tcOrdered:"Tea & Coffee ordered",histType_apCanceled:"Aperitif canceled",histType_serviceCanceled:"Service canceled",histType_trayCleared:"Tray cleared",histType_trayUncleared:"Undo tray clearing",histType_reset:"Flight reset",histType_seatMoveStart:"Move pax",histType_seatMoved:"Seat moved",histType_seatSwapped:"Seats swapped",histType_text:"Notes",histNewest:"(newest on top)",histOldest:"(oldest on top)",histNewestBtn:"Switch to oldest on top",histOldestBtn:"Switch to newest on top",optStatusOther:"Other",tcTitle:"Aperitif",tcDrink:"Drink",tcService:"Service",tcNotes:"Notes",tcGroupSoft:"Softs",tcGroupAlcohol:"Alcohol",tcGroupHot:"Hot",tcLblAlcohol:"Alcohol",tcLblHot:"Hot",tcCatSoft:"Soft",tcLblSoft:"Soft",tcLblWater:"Water",tcLblJuice:"Juice",tcLblCoca:"Coca-Cola",tcSoftWater:"Water",tcSoftJuice:"Juice",tcSoftCoca:"Coca-Cola",tcSoftSprite:"Sprite",tcSoftTonic:"Tonic",tcWaterStill:"Still",tcWaterSpark:"Sparkling",tcJuiceApple:"Apple",tcJuiceOrange:"Orange",tcJuiceTomato:"Tomato",tcCocaClassic:"Classic",tcCocaZero:"Zero",tcLemon:"Lemon",tcSalt:"Salt",tcPepper:"Pepper",tcExtras:"Options",tcCatCafe:"Coffee",tcCatDeca:"Decaf",tcCatThe:"Tea",tcCatInf:"Infusion",tcCatChoco:"Caotina",tcLblChoco:"Caotina",tcChocoBrand:"Caotina",tcMilk:"Milk/Cream",tcMilkCreme:"Cream",tcMilkAvoine:"Oat milk",tcMilkLait:"Milk",tcMilkNone:"None",tcSweet:"Sweetener",tcSweetSugar:"Sugar",tcSweetSub:"Substitute",tcSweetNone:"None",tcTeaType:"Tea type",tcTeaEnglish:"English breakfast",tcTeaCamomille:"Chamomile",tcInfusion:"Infusion",tcInfCam:"Chamomile",tcPur:"Neat",tcRocks:"On the rocks",tcBaileys:"Baileys",tcIce:"Ice",tcCatDig:"Digestif",tcDigestif:"Digestif",tcDigJW:"Johnnie Walker",tcDigJB:"Jim Beam (Bourbon)",tcDigCognac:"Cognac",tcDigBaileys:"Baileys",tcCatBeer:"Beer",tcBeer:"Beer",tcBeerQ:"QuÃ¶llfrisch Lager Blonde",tcBeerC:"Calvinus White",tcBeerL:"Leermond (alcohol-free)",tcCatChamp:"Champagne",tcChampagne:"Champagne",tcChampPH:"Notes (e.g., brand, rosÃ©â€¦)",tcCatVin:"Wines",tcWines:"Wines",tcRed:"Red",tcWhite:"White",tcVinPH:"Notes (e.g., grape, commentâ€¦)",tcCatHot:"Hot drinks",tcMilkTitle:"Milk / Cream",tcSugarTitle:"Sugar",tcTeaTitle:"Tea",tcAlcoholTitle:"Alcoholic drinks",tcSoftTitle:"Soft drinks",tcTeaEnglish:"English Breakfast",tcTeaVert:"Green tea",tcTeaMenthe:"Mint tea",tcTeaCamomille:"Chamomile tea",tcHotWater:"Hot water",tcWater:"Water",tcCola:"Cola",tcJuice:"Juice",tcSprite:"Sprite",tcTonic:"Tonic",tcStill:"Still",tcSpark:"Sparkling",tcClassic:"Classic",tcZero:"Zero",tcOrange:"Orange",tcApple:"Apple",tcTomato:"Tomato",tcCaotina:"Caotina",jsonRestored:"Session restored from JSON",invalidFile:"Invalid file."},FR:{flight:"Vol",date:"Date",flightPlaceholder:"ex : LX2810",saveTitle:"Enregistrer",reset:"RÃ©initialiser",client:"Mode client",crew:"Mode Ã©quipage",lblLang:"Langue",exportJSON:"Export JSON",importJSON:"Importer",exportPNG:"PNG",rights:"Tous droits rÃ©servÃ©s",tcGroupSoft:"Softs",tcGroupAlcohol:"Alcool",tcGroupHot:"Chaud",tcLblAlcohol:"Alcool",tcLblHot:"Chaud",chips_apero:"ApÃ©ritif",chips_meal:"Plat",chips_tc:"ThÃ© & CafÃ©",chips_fiche:"Fiche pax",filter_all:"Tous les siÃ¨ges",filter_toserve:"Ã€ servir",filter_clear:"Ã€ dÃ©barrasser",filter_sleep:"En train de dormir",filter_later:"Servir plus tard",lgServed:"âœ… Servi",lgclear:"ðŸ§¹ DÃ©barrassÃ©",flowTitle:"Ordre de service",flowNowTitle:"Chemin de service â¬‡ï¸",flowLaterTitle:"Commandes Ã  prendre â¬‡ï¸",flowClearTitle:"Ã€ dÃ©barrasser â¬‡ï¸",flowAperoTakenTitle:"Commandes prises â¬‡ï¸",flowTaken:"Pris",flowEmptyTaken:"Aucune commande prise",flowTCTakenTitle:"Commandes prises â¬‡ï¸",flowTakeOrder:"Commande",flowServeTag:"Servir",flowClearTag:"Ã€ dÃ©barrasser",flowEmptyLater:"Aucune commande",flowEmptyClear:"Rien Ã  dÃ©barrasser",seatmapTitle:"Plan cabine ({L} | {R})",seat:"SiÃ¨ge",trayShort:"Plateau",apLabel:"ApÃ©ritif",mealLabel:"Plat",hdrConfig:"Rideau & configuration",lblLayout:"Appareil",lblRows:"RangÃ©es",secMenuTitle:"Menu",menuModeAuto:"Auto",menuModeManual:"Manuel",menuOutbound:"Aller",menuInbound:"Retour",menuDayService:"Service de jour",menuBreakfast:"Petit-dÃ©jeuner",menuBreakfastType:"Type de petit-dÃ©jeuner",menuBreakfastStandard:"Standard",menuBreakfastNight:"Retour de night stop",menuSelectContext:"SÃ©lectionne le sens et le service pour afficher le menu.",menuPickDate:"SÃ©lectionne une date de vol pour charger le menu.",menuSelection:"SÃ©lection du menu",menuAutoPlaceholder:"Menu indicatif en attendant la base.",menuAutoMissing:"DonnÃ©es menu en attente. Passe en manuel si besoin.",autoMenu_coldCutsPlatter:"Plateau de charcuterie SWISS Saveurs",autoMenu_granolaMilk:"Granola au lait",autoMenu_nightstopNote:"Menu retour de night stop",autoMenu_gruyereEggRoll:"Rouleau d'Å“ufs au gruyÃ¨re, herbes des montagnes, shiitakÃ©s sautÃ©s et tomates",autoMenu_appenzellerOmelette:"Omelette Ã  l'Appenzeller, rÃ¶sti, Ã©pinards et tomates cerises",autoMenu_beefTenderloinPorcini:"Filet de bÅ“uf grillÃ©, sauce aux cÃ¨pes, gratin de pommes de terre et brocoli",autoMenu_truffleTriangoli:"Triangoli Ã  la truffe, sauce au vin blanc Ã  la truffe, Ã©pinards et fromage Sbrinz",autoMenu_chickenMascarponePolenta:"SuprÃªme de poulet, jus de volaille, polenta au mascarpone, chou rouge et choux de Bruxelles",autoMenu_trofieMushroom:"PÃ¢tes trofie, sauce crÃ©meuse aux champignons, salsifis glacÃ©s, poireau rÃ´ti, courge et graines de courge",autoMenu_crepeRicottaSpinach:"CrÃªpe salÃ©e Ã  la ricotta et aux Ã©pinards, lÃ©gumes grillÃ©s, pommes de terre sautÃ©es",autoMenu_scrambledEngelberg:"Å’ufs brouillÃ©s au fromage de l'abbaye d'Engelberg et Ã©pinards, rÃ¶sti",autoMenu_beefBourguignonPuree:"BÅ“uf bourguignon, purÃ©e de pommes de terre et lÃ©gumes racines glacÃ©s",autoMenu_cheeseSpaetzleOnionApple:"SpÃ¤tzlis au fromage gratinÃ©s, oignons frits et pommes",autoMenu_eggSouffleMushroom:"SoufflÃ© aux Å“ufs, tomates et fromage, sauce aux champignons et brocoli",autoMenu_asparagusOmelette:"Omelette aux asperges et sauce hollandaise, pommes de terre persillÃ©es",autoMenu_sauteedChickenPolenta:"SuprÃªme de poulet poÃªlÃ©, jus, polenta au mascarpone, choux de Bruxelles, chou rouge braisÃ©",autoMenu_gratinatedCheeseSpaetzle:"SpÃ¤tzlis au fromage gratinÃ©s, pommes et oignons frits",autoMenu_pendingNote:"Les donnÃ©es de menu se chargeront automatiquement dÃ¨s qu'elles seront fournies.",autoMenu_outOfRotation:"La date choisie est hors des rotations dÃ©finies.",lblViande:"Option 1",lblVege:"Option 2",hdrInventaire:"Inventaire",invPlateaux:"Plateaux",invViande:"Option 1",invVege:"Option 2",invSpecial:"SPML",spml:"SPML",add:"Ajouter",preHeader:"PrÃ©commande",preAdd:"PrÃ©commande",close:"âœ–ï¸",mdPass:"Passager",mdOcc:"SiÃ¨ge occupÃ©",mdSleepTxt:"ðŸ˜´ Dort",mdType:"Type de pax",mdAdult:"Adulte",mdChild:"Enfant",mdInfant:"BÃ©bÃ©",mdStatus:"Statut",mdLang:"Langue",mdEatWith:"Manger avec",mdEatWithPh:"ex : 12B",mdLater:"Servir plus tard",mdLaterCustom:"Heure",mdLaterSet:"DÃ©finir l'heure",mdLaterCancel:"Annuler",mdLaterCustomBtn:"Heure personnalisÃ©e",mdNotes:"Notes",mdAperoNotes:"Boisson / notes apÃ©ritif",mdTCNotes:"Notes thÃ© & cafÃ©",serveAperitif:"ApÃ©ritif commandÃ©",mdMeal:"Plat",mdNormal:"Choix normal",optNormalMeat:"Option 1",optNormalVeg:"Option 2",optNormalTray:"Plateau (sans cocotte)",mealDrinkTitle:"Boissons repas",mealDrinkNotes:"Notes boissons repas",passengerNotesPlaceholder:"ex : DE uniquement, sans cacahuÃ¨tes",aperoNotesPlaceholder:"ex : eau gazeuse, vin blanc, cacahuÃ¨tes",mealDrinkNotesPlaceholder:"ex : eau gazeuse, vin blanc, cacahuÃ¨tes",tcNotesPlaceholder:"ex : CafÃ© allongÃ©, sucre",meatPlaceholder:"ex : BÅ“uf sauce vin rouge",vegPlaceholder:"ex : Lasagnes vÃ©gÃ©tariennes",preAddPlaceholder:"ex : PÃ¢tes sans gluten",optStatusOther:"Autre",mdSpml:"SPML",mdPre:"PrÃ©commande",serveMeal:"Plat servi",cancelService:"Annuler service",clearTray:"Plateau dÃ©barrassÃ©",undoClearTray:"Annuler dÃ©barrassage",modalTabFiche:"Fiche pax",modalTabApero:"ApÃ©ritif",modalTabMeal:"Plat",modalTabTC:"ThÃ© CafÃ©",ordered:"commandÃ©",moveSeat:"ðŸ” DÃ©placer pax",moved:"DÃ©placÃ©",swapped:"Ã‰changÃ©",eatTogether:"ðŸ½ï¸ Manger avec",eatTogetherPH:"ex : 4C",clear:"Effacer",pickDestSeat:"Choisis le siÃ¨ge de destination",moved:"DÃ©placÃ©",swapped:"Ã‰changÃ©",tcCH:"Suisse",tcForeign:"Ã‰tranger",serveTC:"ThÃ© & CafÃ© servi",serveMealDrink:"Commander boisson",histTcServed:"ThÃ© & CafÃ© servi Ã ",histMealDrinkServed:"Boisson repas commandÃ©e par",serveNone:"Pas de boisson",serveNoFood:"Pas de plat",lgSleep:"ðŸ˜´ Dort",lgLater:"â³ Plus tard",lgChoice:"ðŸ½ï¸ Choix enregistrÃ©",lgInfant:"ðŸ‘¶ BÃ©bÃ©",lgChild:"ðŸ§’ Enfant",lgTogether:"ðŸ¤ Manger ensemble",legendShow:"Afficher la lÃ©gende",legendHide:"Masquer la lÃ©gende",bulkOccStart:"Marquer plusieurs siÃ¨ges",bulkOccApply:"Marquer {n} siÃ¨ge(s) occupÃ©s",bulkOccClear:"Tout dÃ©sÃ©lectionner",bulkOccHint:"Clique sur les siÃ¨ges puis valide.",bulkOccSelected:"{n} siÃ¨ge sÃ©lectionnÃ©",bulkOccSelectedPlural:"{n} siÃ¨ges sÃ©lectionnÃ©s",bulkOccCancel:"Quitter la multi-sÃ©lection",bulkOccConfirm:"Confirmer le marquage de {n} siÃ¨ges occupÃ©s ?",bulkOccBlocked:"SiÃ¨ge dÃ©jÃ  occupÃ©",alertSeatEmpty:"SiÃ¨ge non occupÃ©.",alertChoose:"Choisissez d'abord un plat (normal, SPML ou prÃ©commande).",alertNoTrays:"Plus de plateaux disponibles.",alertStock:"Stock insuffisant pour",alertDepleted:"Ã©puisÃ©.",alertPickTime:"Choisir une heure.",resetConfirm:"Confirmer",preAddLabelRequired:"Entrez un nom de prÃ©commande",spmlCodeRequired:"SÃ©lectionnez un code SPML",secHistoryTitle:"Historique (dernier en haut)",histTitleSet:"Titre dÃ©fini:",histApServed:"ApÃ©ritif servi Ã ",histApOrdered:"ApÃ©ritif commandÃ© Ã ",histMealDrinkOrdered:"Boissons repas commandÃ©es Ã ",histTcOrdered:"ThÃ© & cafÃ© commandÃ©s Ã ",histApCanceled:"ApÃ©ritif annulÃ© pour",histMealServed:"Plat servi Ã ",histCanceled:"Service annulÃ© pour",resetDone:"Vol rÃ©initialisÃ©.",remindersTitle:"Rappels Ã  venir",remindServe:"ðŸ”” Rappel: servir",histViewLabel:"Affichage",histScope_all:"Tous les Ã©vÃ©nements",histScope_seat:"Par siÃ¨ge",histScope_type:"Par type",histLblSeat:"SiÃ¨ge",histLblType:"Type",histAscLbl:"Du plus ancien au plus rÃ©cent",histType_mealDrinkServed:"Boisson repas servie",histType_apServed:"ApÃ©ritif servi",histType_tcServed:"ThÃ© & CafÃ© servi",histType_mealServed:"Plat servi",histType_apOrdered:"ApÃ©ritif commandÃ©",histType_tcOrdered:"ThÃ© & CafÃ© commandÃ©",histType_apCanceled:"ApÃ©ritif annulÃ©",histType_serviceCanceled:"Service annulÃ©",histType_trayCleared:"Plateau dÃ©barrassÃ©",histType_trayUncleared:"Annuler dÃ©barrassage",histType_reset:"RÃ©initialisation vol",histType_seatMoveStart:"DÃ©placement pax",histType_seatMoved:"SiÃ¨ge dÃ©placÃ©",histType_seatSwapped:"SiÃ¨ges Ã©changÃ©s",histType_text:"Notes",histNewest:"(rÃ©cent en haut)",histOldest:"(ancien en haut)",histNewestBtn:"Basculer vers ancien en haut",histOldestBtn:"Basculer vers rÃ©cent en haut",optStatusOther:"Autre",tcTitle:"ApÃ©ritif",tcDrink:"Boisson",tcService:"Service",tcNotes:"Notes",tcCatSoft:"Soft",tcLblSoft:"Soft",tcLblWater:"Eau",tcLblJuice:"Jus",tcLblCoca:"Coca-Cola",tcSoftWater:"Eau",tcSoftJuice:"Jus",tcSoftCoca:"Coca-Cola",tcSoftSprite:"Sprite",tcSoftTonic:"Tonic",tcWaterStill:"Plate",tcWaterSpark:"Gazeuse",tcJuiceApple:"Pomme",tcJuiceOrange:"Orange",tcJuiceTomato:"Tomate",tcCocaClassic:"Normal",tcCocaZero:"Zero",tcLemon:"Citron",tcSalt:"Sel",tcPepper:"Poivre",tcExtras:"Options",tcCatCafe:"CafÃ©",tcCatDeca:"DÃ©cafÃ©inÃ©",tcCatThe:"ThÃ©",tcCatInf:"Infusion",tcCatChoco:"Caotina",tcLblChoco:"Caotina",tcChocoBrand:"Caotina",tcTeaType:"Type de thÃ©",tcTeaEnglish:"English Breakfast",tcTeaVert:"Vert",tcTeaMenthe:"Menthe",tcHotWater:"Eau chaude",tcInfusion:"Infusion",tcInfCam:"Camomille",tcMilk:"Lait/CrÃ¨me",tcMilkCreme:"CrÃ¨me",tcMilkAvoine:"Lait d'avoine",tcMilkLait:"Lait",tcMilkNone:"Sans",tcSweet:"Sucre",tcSweetSugar:"Sucre",tcSweetSub:"SuccÃ©danÃ©",tcSweetNone:"Sans",tcPur:"Pur",tcRocks:"On the rocks",tcBaileys:"Baileys",tcIce:"GlaÃ§ons",tcCatDig:"Digestif",tcDigestif:"Digestif",tcDigJW:"Johnnie Walker",tcDigJB:"Jim Beam (Bourbon)",tcDigCognac:"Cognac",tcDigBaileys:"Baileys",tcCatBeer:"BiÃ¨re",tcBeer:"BiÃ¨re",tcBeerQ:"QuÃ¶llfrisch Lager Blonde",tcBeerC:"Calvinus Blanche",tcBeerL:"Leermond (sans alcool)",tcCatChamp:"Champagne",tcChampagne:"Champagne",tcChampPH:"Notes (ex : marque, rosÃ©â€¦)",tcCatVin:"Vins",tcWines:"Vins",tcRed:"Rouge",tcWhite:"Blanc",tcVinPH:"Notes (ex : cÃ©page, commentaireâ€¦)",tcCatHot:"Boissons chaudes",tcMilkTitle:"Lait / CrÃ¨me",tcSugarTitle:"Sucre",tcTeaTitle:"ThÃ©",tcAlcoholTitle:"Boissons alcoolisÃ©es",tcSoftTitle:"Boissons soft",tcTeaEnglish:"English Breakfast",tcTeaVert:"ThÃ© vert",tcTeaMenthe:"ThÃ© menthe",tcTeaCamomille:"Camomille",tcWater:"Eau",tcCola:"Cola",tcJuice:"Jus",tcSprite:"Sprite",tcTonic:"Tonic",tcStill:"Plate",tcSpark:"Gazeuse",tcClassic:"Classic",tcZero:"Zero",tcOrange:"Orange",tcApple:"Pomme",tcTomato:"Tomate",tcCaotina:"Caotina",jsonRestored:"Session restaurÃ©e depuis le JSON",invalidFile:"Fichier invalide."},DE:{flight:"Flug",date:"Datum",flightPlaceholder:"z. B. LX2810",saveTitle:"Speichern",reset:"ZurÃ¼cksetzen",client:"Kundensicht",crew:"Crew-Modus",lblLang:"Sprache",exportJSON:"JSON exportieren",importJSON:"Importieren",exportPNG:"PNG",rights:"Alle Rechte vorbehalten",chips_apero:"Aperitif",chips_meal:"Hauptgang",chips_tc:"Tee & Kaffee",chips_fiche:"Paxdaten",filter_all:"Alle Sitze",filter_toserve:"Zu bedienen",filter_clear:"Zum AbrÃ¤umen",filter_sleep:"SchlÃ¤ft",filter_later:"SpÃ¤ter bedienen",lgServed:"âœ… Serviert",lgclear:"ðŸ§¹ AbgerÃ¤umt",flowTitle:"Serviceablauf",flowNowTitle:"Reihenfolge â¬‡ï¸",flowLaterTitle:"Bestellungen aufnehmen â¬‡ï¸",flowClearTitle:"Zum AbrÃ¤umen â¬‡ï¸",flowAperoTakenTitle:"Aufgenommene Bestellungen â¬‡ï¸",flowTaken:"Aufgenommen",flowEmptyTaken:"Noch keine Bestellungen",flowTCTakenTitle:"Aufgenommene Bestellungen â¬‡ï¸",flowTakeOrder:"Bestellung",flowServeTag:"Servieren",flowClearTag:"Zum AbrÃ¤umen",flowEmptyLater:"Keine Bestellungen",flowEmptyClear:"Nichts abzurÃ¤umen",seatmapTitle:"Sitzplan ({L} | {R})",seat:"Sitz",trayShort:"Tray",apLabel:"Aperitif",mealLabel:"Hauptgang",hdrConfig:"Vorhang & Konfiguration",lblLayout:"Flugzeug",lblRows:"Reihen",secMenuTitle:"MenÃ¼",menuModeAuto:"Auto",menuModeManual:"Manuell",menuOutbound:"Hinflug",menuInbound:"RÃ¼ckflug",menuDayService:"Tagesservice",menuBreakfast:"FrÃ¼hstÃ¼ck",menuBreakfastType:"FrÃ¼hstÃ¼ckstyp",menuBreakfastStandard:"Standard",menuBreakfastNight:"Aus Nightstop",menuSelectContext:"WÃ¤hle Richtung und Service, um das MenÃ¼ zu laden.",menuPickDate:"Bitte ein Flugdatum wÃ¤hlen, um das MenÃ¼ zu laden.",menuSelection:"MenÃ¼auswahl",menuAutoPlaceholder:"Platzhalter-MenÃ¼ bis die DB geliefert wird.",menuAutoMissing:"MenÃ¼daten fehlen noch. Du kannst auf manuell wechseln.",autoMenu_coldCutsPlatter:"SWISS Saveurs Aufschnittplatte",autoMenu_granolaMilk:"Granola mit Milch",autoMenu_nightstopNote:"Nightstop-MenÃ¼",autoMenu_gruyereEggRoll:"Eierrolle mit GruyÃ¨re und BergkrÃ¤utern, sautierte Shiitake-Pilze und Tomaten",autoMenu_appenzellerOmelette:"Omelett mit Appenzeller KÃ¤se, RÃ¶sti, Spinat und Kirschtomaten",autoMenu_beefTenderloinPorcini:"Gebratenes Rindsfilet mit Steinpilzsauce, Kartoffelgratin und Brokkoli",autoMenu_truffleTriangoli:"TrÃ¼ffel-Triangoli mit Weisswein-TrÃ¼ffelsauce, Spinat und Sbrinz",autoMenu_chickenMascarponePolenta:"Pouletbrust mit GeflÃ¼geljus, Mascarpone-Polenta, Rotkohl und Rosenkohl",autoMenu_trofieMushroom:"Trofie mit Pilz-Rahmsauce, glasierter Schwarzwurzel, gebratener Lauch, KÃ¼rbis und KÃ¼rbiskerne",autoMenu_crepeRicottaSpinach:"Herzhafte CrÃªpe mit Ricotta und Spinat, GrillgemÃ¼se, Bratkartoffeln",autoMenu_scrambledEngelberg:"RÃ¼hrei mit Engelberger KlosterkÃ¤se und Spinat, RÃ¶sti",autoMenu_beefBourguignonPuree:"Boeuf Bourguignon, KartoffelpÃ¼ree und glasierte WurzelgemÃ¼se",autoMenu_cheeseSpaetzleOnionApple:"KÃ¤sespÃ¤tzli mit RÃ¶stzwiebeln und Apfelscheiben",autoMenu_eggSouffleMushroom:"Eier-SoufflÃ© mit Tomaten und KÃ¤se, Pilzsauce und Brokkoli",autoMenu_asparagusOmelette:"Omelett mit Spargel und Sauce Hollandaise, Petersilienkartoffeln",autoMenu_sauteedChickenPolenta:"Sautierte Pouletbrust mit Jus, Mascarpone-Polenta, Rosenkohl, geschmorter Rotkohl",autoMenu_gratinatedCheeseSpaetzle:"Gratinierte KÃ¤sespÃ¤tzli mit Apfel und RÃ¶stzwiebeln",autoMenu_pendingNote:"MenÃ¼daten werden automatisch geladen, sobald sie verfÃ¼gbar sind.",autoMenu_outOfRotation:"Das gewÃ¤hlte Datum liegt ausserhalb der definierten Rotationen.",lblViande:"Option 1",lblVege:"Option 2",hdrInventaire:"Inventar",invPlateaux:"Trays",invViande:"Option 1",invVege:"Option 2",invSpecial:"SPML",spml:"SPML",add:"HinzufÃ¼gen",preHeader:"Vorbestellung",preAdd:"Vorbestellung",close:"âœ–ï¸",mdPass:"Passagier",mdOcc:"Sitz belegt",mdSleepTxt:"ðŸ˜´ SchlÃ¤ft",mdType:"Paxtyp",mdAdult:"Erwachsener",mdChild:"Kind",mdInfant:"SÃ¤ugling",mdStatus:"Status",mdLang:"Sprache",mdEatWith:"Zusammen essen mit",mdEatWithPh:"z. B. 12B",mdLater:"SpÃ¤ter bedienen",mdLaterCustom:"Uhrzeit",mdLaterSet:"Uhrzeit setzen",mdLaterCancel:"Abbrechen",mdLaterCustomBtn:"Individuelle Uhrzeit",mdNotes:"Notizen",mdAperoNotes:"GetrÃ¤nk / Aperitif-Notizen",mdTCNotes:"Tee & Kaffee â€“ Notizen",serveAperitif:"Aperitif bestellt",mdMeal:"Hauptgang",mdNormal:"Normale Auswahl",optNormalMeat:"Option 1",optNormalVeg:"Option 2",optNormalTray:"Tray (ohne Kasserolle)",mealDrinkTitle:"GetrÃ¤nke zum Essen",mealDrinkNotes:"GetrÃ¤nke-Notizen",passengerNotesPlaceholder:"z. B.: nur DE, keine NÃ¼sse",aperoNotesPlaceholder:"z. B.: Sprudelwasser, WeiÃŸwein, ErdnÃ¼sse",mealDrinkNotesPlaceholder:"z. B.: Sprudelwasser, WeiÃŸwein, ErdnÃ¼sse",tcNotesPlaceholder:"z. B.: VerlÃ¤ngerter, Zucker",meatPlaceholder:"z. B.: Rind in Rotweinsauce",vegPlaceholder:"z. B.: Vegetarische Lasagne",preAddPlaceholder:"z. B.: Glutenfreie Pasta",optStatusOther:"Andere",mdSpml:"SPML",mdPre:"Vorbestellung",serveMeal:"Hauptgang serviert",cancelService:"Service zurÃ¼cknehmen",clearTray:"Tray abgerÃ¤umt",undoClearTray:"AbrÃ¤umen rÃ¼ckgÃ¤ngig",modalTabFiche:"Paxdaten",modalTabApero:"Aperitif",modalTabMeal:"Hauptgang",modalTabTC:"Tee & Kaffee",ordered:"bestellt",eatTogether:"ðŸ½ï¸ Zusammen essen mit",eatTogetherPH:"z.â€¯B. 4C",clear:"LÃ¶schen",moveSeat:"ðŸ” Pax verschieben",moved:"Verschoben",swapped:"Getauscht",pickDestSeat:"Zielsitz wÃ¤hlen",moved:"Verschoben",swapped:"Getauscht",tcCH:"Schweiz",tcForeign:"Ausland",serveTC:"Tee & Kaffee serviert",serveMealDrink:"GetrÃ¤nk bestellen",histTcServed:"Tee & Kaffee serviert um",histMealDrinkServed:"GetrÃ¤nk bestellt bei",serveNone:"Kein GetrÃ¤nk",serveNoFood:"Kein Essen",lgSleep:"ðŸ˜´ SchlÃ¤ft",lgLater:"â³ SpÃ¤ter bedienen",lgChoice:"ðŸ½ï¸ Auswahl gespeichert",lgInfant:"ðŸ‘¶ SÃ¤ugling",lgChild:"ðŸ§’ Kind",lgTogether:"ðŸ¤ Zusammen essen",legendShow:"Legende anzeigen",legendHide:"Legende ausblenden",bulkOccStart:"Mehrere Sitze markieren",bulkOccApply:"{n} Sitz/PlÃ¤tze als besetzt markieren",bulkOccClear:"Auswahl aufheben",bulkOccHint:"Sitze anklicken und anschliessend bestÃ¤tigen.",bulkOccSelected:"{n} Sitz ausgewÃ¤hlt",bulkOccSelectedPlural:"{n} Sitze ausgewÃ¤hlt",bulkOccCancel:"Mehrfachauswahl beenden",bulkOccConfirm:"Markiere {n} Sitze als besetzt?",bulkOccBlocked:"Platz bereits belegt",alertSeatEmpty:"Sitz nicht belegt.",alertChoose:"Bitte zuerst eine Auswahl treffen (normal, SPML oder Vorbestellung).",alertNoTrays:"Keine Trays verfÃ¼gbar.",alertStock:"Zu wenig Bestand fÃ¼r",alertDepleted:"ausverkauft.",alertPickTime:"Uhrzeit wÃ¤hlen.",resetConfirm:"BestÃ¤tigen",preAddLabelRequired:"Geben Sie einen Namen fÃ¼r die Vorbestellung ein",spmlCodeRequired:"WÃ¤hlen Sie einen SPML-Code",histViewLabel:"Ansicht",histScope_all:"Alle Ereignisse",histScope_seat:"Nach Sitz",histScope_type:"Nach Typ",histLblSeat:"Sitz",histLblType:"Typ",histAscLbl:"Ã„lteste zuerst",histType_mealDrinkServed:"GetrÃ¤nk zum Essen serviert",histType_apServed:"Aperitif serviert",histType_tcServed:"Tee & Kaffee serviert",histType_mealServed:"Hauptgang serviert",histType_apOrdered:"Aperitif bestellt",histType_tcOrdered:"Tee & Kaffee bestellt",histType_apCanceled:"Aperitif storniert",histType_serviceCanceled:"Service storniert",histType_trayCleared:"Tray abgerÃ¤umt",histType_trayUncleared:"AbrÃ¤umen rÃ¼ckgÃ¤ngig",histType_reset:"Flug zurÃ¼ckgesetzt",histType_seatMoveStart:"Pax-Verschiebung",histType_seatMoved:"Sitz verschoben",histType_seatSwapped:"Sitze getauscht",histType_text:"Notizen",histNewest:"(neueste oben)",histOldest:"(Ã¤lteste oben)",histNewestBtn:"Auf Ã¤lteste oben umschalten",histOldestBtn:"Auf Neueste oben umschalten",secHistoryTitle:"Verlauf (neueste oben)",histTitleSet:"Titel gesetzt:",histApServed:"Aperitif serviert bei",histApOrdered:"Aperitif bestellt bei",histMealDrinkOrdered:"GetrÃ¤nke (Hauptgang) bestellt bei",histTcOrdered:"Tee & Kaffee bestellt bei",histApCanceled:"Aperitif storniert fÃ¼r",histMealServed:"Hauptgang serviert bei",histCanceled:"Service storniert fÃ¼r",resetDone:"Flug zurÃ¼ckgesetzt.",remindersTitle:"Anstehende Erinnerungen",remindServe:"ðŸ”” Erinnerung: bedienen",optStatusOther:"Andere",tcTitle:"Aperitif",tcDrink:"GetrÃ¤nk",tcService:"Servierart",tcNotes:"Notizen",tcGroupSoft:"Softdrinks",tcGroupAlcohol:"Alkohol",tcGroupHot:"HeiÃŸgetrÃ¤nke",tcLblAlcohol:"Alkohol",tcLblHot:"HeiÃŸgetrÃ¤nke",tcCatSoft:"Softdrinks",tcLblSoft:"Softdrinks",tcLblWater:"Wasser",tcLblJuice:"Saft",tcLblCoca:"Coca-Cola",tcSoftWater:"Wasser",tcSoftJuice:"Saft",tcSoftCoca:"Coca-Cola",tcSoftSprite:"Sprite",tcSoftTonic:"Tonic",tcWaterStill:"Still",tcWaterSpark:"Sprudelnd",tcJuiceApple:"Apfel",tcJuiceOrange:"Orange",tcJuiceTomato:"Tomate",tcCocaClassic:"Classic",tcCocaZero:"Zero",tcLemon:"Zitrone",tcSalt:"Salz",tcPepper:"Pfeffer",tcExtras:"Extras",tcCatCafe:"Kaffee",tcCatDeca:"Koffeinfrei",tcCatThe:"Tee",tcCatInf:"Aufguss",tcCatChoco:"Caotina",tcLblChoco:"Caotina",tcChocoBrand:"Caotina",tcMilk:"Milch/Sahne",tcMilkCreme:"Sahne",tcMilkAvoine:"Hafermilch",tcMilkLait:"Milch",tcMilkNone:"Ohne",tcSweet:"SÃ¼ÃŸe",tcSweetSugar:"Zucker",tcSweetSub:"Ersatz",tcSweetNone:"Ohne",tcTeaType:"Teeart",tcTeaEnglish:"English Breakfast",tcTeaVert:"GrÃ¼n",tcTeaMenthe:"Minze",tcHotWater:"HeiÃŸes Wasser",tcInfusion:"Aufguss",tcInfCam:"Kamille",tcPur:"Pur",tcRocks:"On the rocks",tcBaileys:"Baileys",tcIce:"Eis",tcCatDig:"Digestif",tcDigestif:"Digestif",tcDigJW:"Johnnie Walker",tcDigJB:"Jim Beam (Bourbon)",tcDigCognac:"Cognac",tcDigBaileys:"Baileys",tcCatBeer:"Bier",tcBeer:"Bier",tcBeerQ:"QuÃ¶llfrisch Lager Blonde",tcBeerC:"Calvinus WeiÃŸ",tcBeerL:"Leermond (alkoholfrei)",tcCatChamp:"Champagner",tcChampagne:"Champagner",tcChampPH:"Notizen (z. B. Marke, RosÃ©â€¦)",tcCatVin:"Weine",tcWines:"Weine",tcRed:"Rot",tcWhite:"WeiÃŸ",tcVinPH:"Notizen (z. B. Rebsorte, Kommentarâ€¦)",tcCatHot:"HeiÃŸgetrÃ¤nke",tcMilkTitle:"Milch / Rahm",tcSugarTitle:"Zucker",tcTeaTitle:"Tee",tcAlcoholTitle:"Alkoholische GetrÃ¤nke",tcSoftTitle:"Softdrinks",tcTeaEnglish:"English Breakfast",tcTeaVert:"GrÃ¼ner Tee",tcTeaMenthe:"Minztee",tcTeaCamomille:"Kamillentee",tcWater:"Wasser",tcCola:"Cola",tcJuice:"Saft",tcSprite:"Sprite",tcTonic:"Tonic",tcStill:"Still",tcSpark:"Sprudel",tcClassic:"Classic",tcZero:"Zero",tcOrange:"Orange",tcApple:"Apfel",tcTomato:"Tomate",tcCaotina:"Caotina",jsonRestored:"Sitzung aus JSON wiederhergestellt",invalidFile:"UngÃ¼ltige Datei."}},To={chaud:{cafe:"â˜•",deca:"ðŸš«â˜•",the:"ðŸ«–",chocolat:"ðŸ«"},soft:{eau:"ðŸ’§",coca:"ðŸ¥¤",jus:"ðŸ§ƒ",sprite:"ðŸŸ¢",tonic:"ðŸ«§"},alcool:{champagne:"ðŸ¾",vin_rouge:"ðŸ·",vin_blanc:"ðŸ¥‚",biere:"ðŸº",cocktail:"ðŸ¹",digestif:"ðŸ¥ƒ"}},Ga={"milk:creme":"ðŸ¶","milk:avoine":"ðŸŒ¾","milk:lait":"ðŸ¥›","milk:none":"ðŸš«","sweet:sucre":"ðŸ¬","sweet:succedane":"ðŸ’Š","sweet:none":"ðŸš«","theType:english":"ðŸ‡¬ðŸ‡§","theType:vert":"ðŸƒ","theType:menthe":"ðŸŒ¿","theType:camomille":"ðŸŒ¼","theType:hotwater":"â™¨ï¸","waterType:plate":"ðŸ’§","waterType:gazeuse":"ðŸ’¦","cocaType:normal":"ðŸŸ¥","cocaType:zero":"â¬›","juiceType:orange":"ðŸŠ","juiceType:pomme":"ðŸ","juiceType:tomate":"ðŸ…","beer:quoellfrisch":"ðŸº","beer:calvinus":"âšª","beer:leermond":"ðŸŒš","vinRouge:suisse":"ðŸ‡¨ðŸ‡­","vinRouge:etranger":"ðŸŒ","vinBlanc:suisse":"ðŸ‡¨ðŸ‡­","vinBlanc:etranger":"ðŸŒ","digestif:whisky_jw":"ðŸ¥ƒ","digestif:whisky_jb":"ðŸ¤ ","digestif:cognac":"ðŸ‡","digestif:baileys":"ðŸ®","cocktail:campari":"ðŸŸ¥","cocktail:bloody_mary":"ðŸ©¸","cocktail:screwdriver":"ðŸª›","cocktail:gin_tonic":"ðŸ¸","cocktail:cuba_libre":"ðŸ‡¨ðŸ‡º","campariMix:orange":"ðŸŠ","campariMix:soda":"ðŸ’¦"},qa={theLemon:"ðŸ‹",softIce:"ðŸ§Š",softLemon:"ðŸ‹",spriteIce:"ðŸ§Š",spriteLemon:"ðŸ‹",tonicIce:"ðŸ§Š",tonicLemon:"ðŸ‹",juiceIce:"ðŸ§Š",juiceLemon:"ðŸ‹",juiceSP:"ðŸ§‚",juiceApfelschorle:"ðŸ’¦",champIce:"ðŸ§Š",champMimosa:"ðŸŠ",digIce:"ðŸ§Š",virginMary:"ðŸ˜‡",cocktailIce:"ðŸ§Š",cocktailLemon:"ðŸ‹",cocktailSP:"ðŸ§‚"};function _o(e){return Ga[e]||""}function Lo(e){return qa[e]||""}function gn(e){const t=e||document;!t||typeof t.querySelectorAll!="function"||(t.querySelectorAll(".pill.big").forEach(n=>{var c;const a=n.dataset.cat,l=n.dataset.sub,i=(c=To[a])==null?void 0:c[l];i&&(n.textContent=i)}),t.querySelectorAll(".pill[data-opt]").forEach(n=>{const a=Ga[n.dataset.opt];a&&(n.textContent=a)}),t.querySelectorAll(".pill.toggle[data-flag]").forEach(n=>{const a=qa[n.dataset.flag];a&&(n.textContent=a)}))}const qt=[{value:"creme",labelKey:"tcMilkCreme",fallback:"Cream",emojiKey:"milk:creme"},{value:"avoine",labelKey:"tcMilkAvoine",fallback:"Oat milk",emojiKey:"milk:avoine"},{value:"lait",labelKey:"tcMilkLait",fallback:"Milk",emojiKey:"milk:lait"},{value:"none",labelKey:"tcMilkNone",fallback:"None",emojiKey:"milk:none"}],Ut=[{value:"sucre",labelKey:"tcSweetSugar",fallback:"Sugar",emojiKey:"sweet:sucre"},{value:"succedane",labelKey:"tcSweetSub",fallback:"Substitute",emojiKey:"sweet:succedane"},{value:"none",labelKey:"tcSweetNone",fallback:"None",emojiKey:"sweet:none"}],Bo=[{value:"english",labelKey:"tcTeaEnglish",fallback:"English Breakfast",emojiKey:"theType:english"},{value:"vert",labelKey:"tcTeaVert",fallback:"Green tea",emojiKey:"theType:vert"},{value:"menthe",labelKey:"tcTeaMenthe",fallback:"Mint tea",emojiKey:"theType:menthe"},{value:"hotwater",labelKey:"tcHotWater",fallback:"Hot water",emojiKey:"theType:hotwater",breakBefore:!0},{value:"camomille",labelKey:"tcTeaCamomille",fallback:"Chamomile",emojiKey:"theType:camomille"}],Io=[{value:"plate",labelKey:"tcWaterStill",fallback:"Still",emojiKey:"waterType:plate"},{value:"gazeuse",labelKey:"tcWaterSpark",fallback:"Sparkling",emojiKey:"waterType:gazeuse"}],wo=[{value:"normal",labelKey:"tcCocaClassic",fallback:"Classic",emojiKey:"cocaType:normal"},{value:"zero",labelKey:"tcCocaZero",fallback:"Zero",emojiKey:"cocaType:zero"}],Mo=[{value:"orange",labelKey:"tcJuiceOrange",fallback:"Orange",emojiKey:"juiceType:orange"},{value:"pomme",labelKey:"tcJuiceApple",fallback:"Apple",emojiKey:"juiceType:pomme"},{value:"tomate",labelKey:"tcJuiceTomato",fallback:"Tomato",emojiKey:"juiceType:tomate"}],No=[{value:"quoellfrisch",labelKey:"tcBeerQ",fallback:"QuÃ¶llfrisch Lager",emojiKey:"beer:quoellfrisch"},{value:"calvinus",labelKey:"tcBeerC",fallback:"Calvinus Blanche",emojiKey:"beer:calvinus"},{value:"leermond",labelKey:"tcBeerL",fallback:"Leermond (0%)",emojiKey:"beer:leermond"}],Ao=[{value:"suisse",labelKey:"tcCH",fallback:"Swiss",emojiKey:"vinRouge:suisse"},{value:"etranger",labelKey:"tcForeign",fallback:"Foreign",emojiKey:"vinRouge:etranger"}],Do=[{value:"suisse",labelKey:"tcCH",fallback:"Swiss",emojiKey:"vinBlanc:suisse"},{value:"etranger",labelKey:"tcForeign",fallback:"Foreign",emojiKey:"vinBlanc:etranger"}],Oo=[{value:"whisky_jw",labelKey:"tcDigJW",fallback:"Johnnie Walker",emojiKey:"digestif:whisky_jw"},{value:"whisky_jb",labelKey:"tcDigJB",fallback:"Jim Beam",emojiKey:"digestif:whisky_jb"},{value:"cognac",labelKey:"tcDigCognac",fallback:"Cognac",emojiKey:"digestif:cognac"},{value:"baileys",labelKey:"tcDigBaileys",fallback:"Baileys",emojiKey:"digestif:baileys"}],xo=[{value:"campari",labelKey:"tcCampari",fallback:"Campari",emojiKey:"cocktail:campari"},{value:"bloody_mary",labelKey:"tcBloody",fallback:"Bloody Mary",emojiKey:"cocktail:bloody_mary"},{value:"screwdriver",labelKey:"tcScrew",fallback:"Screw Driver",emojiKey:"cocktail:screwdriver"},{value:"gin_tonic",labelKey:"tcGinTonic",fallback:"Gin Tonic",emojiKey:"cocktail:gin_tonic"},{value:"cuba_libre",labelKey:"tcCuba",fallback:"Cuba Libre",emojiKey:"cocktail:cuba_libre"}],Po=[{value:"orange",labelKey:"tcJuiceOrange",fallback:"Orange",emojiKey:"campariMix:orange"},{value:"soda",labelKey:"tcSoda",fallback:"Soda",emojiKey:"campariMix:soda"}],yn=[{id:"chaud",cardId:"grpHot",headerId:"hdrHot",containerId:"hotOpts",subsections:{cafe:{id:"cafe",labelKey:"drink_coffee",fallback:"Coffee",defaultOpen:0,resetKeys:["milk","sweet","theType","theLemon"],sections:[{id:"milk",kind:"exclusive",key:"milk",titleKey:"tcMilk",fallback:"Milk/Cream",options:qt},{id:"sweet",kind:"exclusive",key:"sweet",titleKey:"tcSweet",fallback:"Sweetener",options:Ut}]},deca:{id:"deca",labelKey:"drink_decaf",fallback:"Decaf",defaultOpen:0,resetKeys:["milk","sweet","theType","theLemon"],sections:[{id:"milk",kind:"exclusive",key:"milk",titleKey:"tcMilk",fallback:"Milk/Cream",options:qt},{id:"sweet",kind:"exclusive",key:"sweet",titleKey:"tcSweet",fallback:"Sweetener",options:Ut}]},the:{id:"the",labelKey:"drink_tea",fallback:"Tea",defaultOpen:0,resetKeys:["milk","sweet","theType","theLemon"],sections:[{id:"teaType",kind:"exclusive",key:"theType",titleKey:"tcTeaTitle",fallback:"Tea",options:Bo},{id:"milk",kind:"exclusive",key:"milk",titleKey:"tcMilk",fallback:"Milk/Cream",options:qt},{id:"sweet",kind:"exclusive",key:"sweet",titleKey:"tcSweet",fallback:"Sugar",options:Ut},{id:"teaExtras",kind:"toggles",titleKey:"tcLemon",fallback:"Lemon",toggles:[{flag:"theLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"theLemon"}]}]},chocolat:{id:"chocolat",labelKey:"drink_caotina",fallback:"Caotina",resetKeys:[],sections:[]}}},{id:"soft",cardId:"grpSoft",headerId:"hdrSoft",containerId:"softOpts",subsections:{eau:{id:"eau",labelKey:"drink_water",fallback:"Water",defaultOpen:0,resetKeys:["waterType","softIce","softLemon"],sections:[{id:"waterType",kind:"exclusive",key:"waterType",titleKey:"tcWater",fallback:"Water",options:Io},{id:"waterExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"softIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"softIce"},{flag:"softLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"softLemon"}]}]},coca:{id:"coca",labelKey:"drink_cola",fallback:"Cola",defaultOpen:0,resetKeys:["cocaType","softIce","softLemon"],sections:[{id:"cocaType",kind:"exclusive",key:"cocaType",titleKey:"tcCola",fallback:"Cola",options:wo},{id:"cocaExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"softIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"softIce"},{flag:"softLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"softLemon"}]}]},jus:{id:"jus",labelKey:"drink_juice",fallback:"Juice",defaultOpen:0,resetKeys:["juiceType","juiceIce","juiceLemon","juiceSalt","juicePepper","juiceSP","juiceApfelschorle"],sections:[{id:"juiceType",kind:"exclusive",key:"juiceType",titleKey:"tcJuice",fallback:"Juice",options:Mo},{id:"juiceExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"juiceIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"juiceIce"},{flag:"juiceLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"juiceLemon"},{flag:"juiceSP",labelKey:"tcSaltPepper",fallback:"Salt + Pepper",emojiKey:"juiceSP",linkedFlags:["juiceSalt","juicePepper"],showWhen:{key:"juiceType",equals:"tomate"}},{flag:"juiceApfelschorle",labelKey:"tcApfelschorle",fallback:"Apfelschorle",emojiKey:"juiceApfelschorle",showWhen:{key:"juiceType",equals:"pomme"}}]}]},sprite:{id:"sprite",labelKey:"drink_sprite",fallback:"Sprite",defaultOpen:0,resetKeys:["spriteIce","spriteLemon"],sections:[{id:"spriteExtras",kind:"toggles",titleKey:"tcSprite",fallback:"Sprite",toggles:[{flag:"spriteIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"spriteIce"},{flag:"spriteLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"spriteLemon"}]}]},tonic:{id:"tonic",labelKey:"drink_tonic",fallback:"Tonic",defaultOpen:0,resetKeys:["tonicIce","tonicLemon"],sections:[{id:"tonicExtras",kind:"toggles",titleKey:"tcTonic",fallback:"Tonic",toggles:[{flag:"tonicIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"tonicIce"},{flag:"tonicLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"tonicLemon"}]}]}}},{id:"alcool",cardId:"grpAlco",headerId:"hdrAlco",containerId:"alcoOpts",subsections:{biere:{id:"biere",labelKey:"drink_beer",fallback:"Beer",defaultOpen:0,resetKeys:["beer"],sections:[{id:"beer",kind:"exclusive",key:"beer",titleKey:"tcBeer",fallback:"Beer",options:No}]},vin_rouge:{id:"vin_rouge",labelKey:"drink_red",fallback:"Red wine",defaultOpen:0,resetKeys:["vinRouge","vinIce"],sections:[{id:"vinRouge",kind:"exclusive",key:"vinRouge",titleKey:"tcRed",fallback:"Red",options:Ao},{id:"vinRougeExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"vinIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"champIce"}]}]},vin_blanc:{id:"vin_blanc",labelKey:"drink_white",fallback:"White wine",defaultOpen:0,resetKeys:["vinBlanc","vinIce"],sections:[{id:"vinBlanc",kind:"exclusive",key:"vinBlanc",titleKey:"tcWhite",fallback:"White",options:Do},{id:"vinBlancExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"vinIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"champIce"}]}]},champagne:{id:"champagne",labelKey:"drink_champagne",fallback:"Champagne",defaultOpen:0,resetKeys:["champIce","champMimosa"],sections:[{id:"champagneExtras",kind:"toggles",titleKey:"tcChampagne",fallback:"Champagne",toggles:[{flag:"champIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"champIce"},{flag:"champMimosa",labelKey:"tcMimosa",fallback:"Mimosa",emojiKey:"champMimosa"}]}]},digestif:{id:"digestif",labelKey:"drink_digestif",fallback:"Digestif",defaultOpen:0,resetKeys:["digestif","digIce"],sections:[{id:"digestifChoice",kind:"exclusive",key:"digestif",titleKey:"tcDigestif",fallback:"Digestif",options:Oo},{id:"digestifExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"digIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"digIce"}]}]},cocktail:{id:"cocktail",labelKey:"drink_cocktail",fallback:"Cocktail",defaultOpen:0,resetKeys:["cocktail","campariMix","virginMary","cocktailIce","cocktailLemon","cocktailSalt","cocktailPepper","cocktailSP"],sections:[{id:"cocktailChoice",kind:"exclusive",key:"cocktail",titleKey:"tcCocktail",fallback:"Cocktail",options:xo},{id:"campariMix",kind:"exclusive",key:"campariMix",titleKey:"tcCampari",fallback:"Campari",options:Po,showWhen:{key:"cocktail",equals:"campari"}},{id:"bloodyMary",kind:"toggles",titleKey:"tcBloody",fallback:"Bloody Mary",showWhen:{key:"cocktail",equals:"bloody_mary"},toggles:[{flag:"virginMary",labelKey:"tcVirgin",fallback:"Virgin Mary",emojiKey:"virginMary"}]},{id:"cocktailExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"cocktailIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"cocktailIce"},{flag:"cocktailLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"cocktailLemon"},{flag:"cocktailSP",labelKey:"tcSaltPepper",fallback:"Salt + Pepper",emojiKey:"cocktailSP",linkedFlags:["cocktailSalt","cocktailPepper"],showWhen:{key:"cocktail",equals:"bloody_mary"}}]}]}}}],Ua=new Map,hn=new Map;yn.forEach(e=>{Ua.set(e.id,e),Object.values(e.subsections).forEach(t=>{hn.set(`${e.id}::${t.id}`,t)})});const Za={cat:"",sub:"",waterType:"",juiceType:"",cocaType:"",milk:"",sweet:"",theType:"",campariMix:"",beer:"",vinRouge:"",vinBlanc:"",digestif:"",cocktail:"",softIce:!1,softLemon:!1,spriteIce:!1,spriteLemon:!1,tonicIce:!1,tonicLemon:!1,juiceIce:!1,juiceLemon:!1,juiceSalt:!1,juicePepper:!1,juiceSP:!1,juiceApfelschorle:!1,champIce:!1,champMimosa:!1,vinIce:!1,digIce:!1,cocktailIce:!1,cocktailLemon:!1,cocktailSalt:!1,cocktailPepper:!1,cocktailSP:!1,theLemon:!1,virginMary:!1};function ln(){return JSON.parse(JSON.stringify(Za))}const L=ln();let Ve=()=>({phase:"fiche",config:{lang:"EN"}});function Ko(e){e&&typeof e.getStore=="function"&&(Ve=e.getStore)}function Tt(e,t){var i;const n=Ve==null?void 0:Ve(),a=((i=n==null?void 0:n.config)==null?void 0:i.lang)||"EN",l=v[a]||v.EN;return(l==null?void 0:l[e])||t}function An(e){if(!e)return!0;const t=String(L[e.key]??"");return!(e.equals!==void 0&&t!==e.equals||e.notEquals!==void 0&&t===e.notEquals||e.in&&!e.in.includes(t))}const Ro=new Map([["the","theType"],["eau","waterType"],["coca","cocaType"],["jus","juiceType"],["biere","beer"],["vin_rouge","vinRouge"],["vin_blanc","vinBlanc"],["digestif","digestif"],["cocktail","cocktail"]]),Fo=new Set(["cafe","deca","chocolat","sprite","tonic","champagne"]);function Ya(e,t={}){if(!e)return null;const n=t.sectionSelector||".accordion__section",a=t.headerSelector||".accordion__header",l=t.singleOpen!==!1,i=Array.from(e.querySelectorAll(n));if(!i.length)return null;const c=i.map((g,h)=>{const m=g.querySelector(a);let k=g.querySelector(".accordion__body");if(!k){const b=Array.from(g.children).filter(S=>S!==m);b.length&&(k=document.createElement("div"),k.className="accordion__body",b.forEach(S=>k.appendChild(S)),m?m.after(k):g.appendChild(k))}const w=g.dataset.accordionId||g.dataset.id||String(h);return g.dataset.accordionId=w,g.dataset.open="false",m&&(m.setAttribute("role","button"),m.setAttribute("tabindex","0"),m.setAttribute("aria-expanded","false"),m.addEventListener("click",()=>r(w)),m.addEventListener("keydown",b=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),r(w))})),k&&(k.hidden=!0),{id:w,section:g,header:m,body:k}});function s(g,h){const m=c.find(S=>S.id===String(g));if(!m)return;const{section:k,header:w,body:b}=m;k.dataset.open=h?"true":"false",w&&w.setAttribute("aria-expanded",h?"true":"false"),b&&(b.hidden=!h)}function r(g){const h=c.find(k=>k.id===String(g));if(!h)return;const m=h.section.dataset.open==="true";l&&!m&&p(),s(g,!m)}function d(g){s(g,!1)}function u(g){l&&p(),s(g,!0)}function p(){c.forEach(g=>{s(g.id,!1)})}const y=t.defaultOpen;return y!=null&&u(y),{open:u,close:d,closeAll:p}}let Re=null,wt=null;function Vt(){if(Re)return;const e=document.getElementById("drinkGrid");e&&(yn.forEach(t=>{const n=document.getElementById(t.cardId);n&&(n.dataset.accordionId=t.id)}),Re=Ya(e,{sectionSelector:".group-card",headerSelector:".group-title",singleOpen:!0,defaultOpen:null}),Re&&Re.closeAll())}function bn(e,t){var p;const n=Ua.get(e);if(!n)return;const a=document.getElementById(n.containerId);if(!a)return;const l=`${e}::${t}`,i=wt===l?Array.from(a.querySelectorAll(".accordion__section")).filter(y=>y.dataset.open==="true").map(y=>y.dataset.accordionId||"").filter(Boolean):[],c=hn.get(l);if(!c){a.innerHTML="";return}if(!c.sections.length){a.innerHTML="",wt=l;return}a.innerHTML="";const s=document.createElement("div");s.className="accordion",c.sections.forEach((y,g)=>{if(!An(y.showWhen||null))return;const h=document.createElement("div");h.className="accordion__section",h.dataset.accordionId=y.id||String(g);const m=document.createElement("div");if(m.className="accordion__header",m.textContent=Tt(y.titleKey,y.fallback),h.appendChild(m),y.kind==="info"){const b=document.createElement("div");b.className="accordion__body",y.bodyKey&&(b.textContent=Tt(y.bodyKey,y.bodyFallback||"")),h.appendChild(b),s.appendChild(h);return}const k=document.createElement("div");k.className="accordion__body";const w=document.createElement("div");w.className="pill-row",y.kind==="exclusive"?y.options.forEach(b=>{if(b.breakBefore){const $=document.createElement("span");$.className="pill-break",w.appendChild($)}const S=document.createElement("div");S.className="pill-wrap";const E=document.createElement("button");E.type="button",E.className="pill",E.dataset.action="exclusive",E.dataset.key=y.key,E.dataset.value=b.value,E.dataset.cat=e,E.dataset.sub=t;const _=Tt(b.labelKey,b.fallback);E.title=_,E.setAttribute("aria-label",_);const M=_o(b.emojiKey);E.textContent=M||_;const A=(L[y.key]||"")===b.value;E.classList.toggle("active",A),E.setAttribute("aria-pressed",String(A));const K=document.createElement("div");K.className="pill-cap",K.textContent=_,S.appendChild(E),S.appendChild(K),w.appendChild(S)}):y.kind==="toggles"&&y.toggles.forEach(b=>{if(!An(b.showWhen||null))return;const S=document.createElement("div");S.className="pill-wrap";const E=document.createElement("button");E.type="button",E.className="pill toggle",E.dataset.action="toggle",E.dataset.flag=b.flag,E.dataset.cat=e,E.dataset.sub=t,b.linkedFlags&&b.linkedFlags.length&&(E.dataset.linkedFlags=b.linkedFlags.join(","));const _=Tt(b.labelKey,b.fallback);E.title=_,E.setAttribute("aria-label",_);const M=Lo(b.emojiKey);E.textContent=M||_;const A=b.linkedFlags&&b.linkedFlags.length?b.linkedFlags.every($=>!!L[$]):!!L[b.flag];E.classList.toggle("active",A),E.setAttribute("aria-pressed",String(A));const K=document.createElement("div");K.className="pill-cap",K.textContent=_,S.appendChild(E),S.appendChild(K),w.appendChild(S)}),k.appendChild(w),h.appendChild(k),s.appendChild(h)}),a.appendChild(s);const r=Ya(s,{singleOpen:!0,defaultOpen:null});let d=null;if(c.defaultOpen!==void 0&&c.defaultOpen!==null)if(typeof c.defaultOpen=="number"){const y=(p=c.sections)==null?void 0:p[c.defaultOpen];d=(y==null?void 0:y.id)||String(c.defaultOpen)}else d=String(c.defaultOpen);const u=i.length>0?i:d!==null?[d]:[];r&&u.forEach(y=>r.open(y)),gn(a),wt=l}function cn(e){if(Array.isArray(e)){if(!e.length)return;e.forEach(t=>{L[t]=ln()[t]});return}Object.keys(Za).forEach(t=>{L[t]=ln()[t]})}function Qa(){L.cat="",L.sub="",wt=null}function Xa(){yn.forEach(e=>{const t=document.getElementById(e.containerId);t&&(t.innerHTML="")})}function sn(e,t){const n=document.getElementById("drinkGrid");n&&n.querySelectorAll(".pill.big").forEach(a=>{const l=a.dataset.cat===e&&a.dataset.sub===t;a.classList.toggle("active",l),a.setAttribute("aria-pressed",String(l))})}function jo(e){const t=e.dataset.cat||"",n=e.dataset.sub||"";if(!t||!n)return;const a=e.classList.contains("active");if(cn(),a){Qa(),sn("",""),Xa(),Ht(),D();return}L.cat=t,L.sub=n,sn(t,n),Vt(),Wo(t);const l=hn.get(`${t}::${n}`);l&&cn(l.resetKeys),bn(t,n),D()}function Vo(e){const t=e.dataset.key,n=e.dataset.value||"";if(!t)return;const a=L[t]||"";L[t]=a===n?"":n;const l=L.cat,i=L.sub;l&&i&&bn(l,i),D()}function Ho(e){const t=e.dataset.flag;if(!t)return;const n=!L[t];L[t]=n;const a=(e.dataset.linkedFlags||"").split(",").map(c=>c.trim()).filter(Boolean);a.length&&a.forEach(c=>{L[c]=n});const l=L.cat,i=L.sub;l&&i&&bn(l,i),D()}let Dn=!1;function vt(){if(Dn)return;Dn=!0,Vt();const e=document.getElementById("drinkGrid");e&&e.addEventListener("click",t=>{const n=t.target;if(!n)return;const a=n.closest("[data-action]");if(a&&e.contains(a)){const i=a.dataset.action;i==="exclusive"?Vo(a):i==="toggle"&&Ho(a);return}const l=n.closest(".pill.big");l&&e.contains(l)&&jo(l)})}function Wo(e){Vt(),Re&&Re.open(e)}function Ht(){Vt(),Re&&Re.closeAll()}function oe(e=!1){vt(),cn(),Qa(),sn("",""),Xa(),Ht(),D();const t=document.getElementById("drinkGrid");t&&gn(t)}function Z(){vt(),oe(!0)}function Y(){const e=document.getElementById("drinkGrid");e&&e.querySelectorAll(".pill").forEach(t=>{t.disabled=!1,t.style.pointerEvents="",t.classList.remove("disabled")})}function D(){const e=document.getElementById("serveAperitif"),t=document.getElementById("serveTC"),n=document.getElementById("serveMealDrink"),a=Ve==null?void 0:Ve(),l=a==null?void 0:a.phase;let i=L.cat,c=L.sub;const s=document.getElementById("tc_chaud_type");(!i||!c)&&(s!=null&&s.value)&&(i="chaud",c=s.value);const r=document.getElementById("tc_cat");r!=null&&r.value&&(i||(i=r.value),c||(c=r.value));let d=!1;if(i&&c)if(Fo.has(c)||c==="chocolat"||i==="chocolat")d=!0;else{const u=Ro.get(c);u&&(d=!!L[u])}[e,t,n].forEach(u=>{u&&(u.disabled=!0)}),l==="aperitif"&&e&&(e.disabled=!d),l==="tc"&&t&&(t.disabled=!d),l==="repas"&&n&&(n.disabled=!d)}const On="EN";function zo(e){return v[e||On]||v[On]||{}}function Se(e,t,n=""){return t&&e&&typeof e[t]=="string"?e[t]:n||""}const $o=[{rotation:1,direction:"both",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:2,direction:"inbound",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",note:"Out of nightstop menu",noteKey:"autoMenu_nightstopNote",dataStatus:"ok"},{rotation:3,direction:"inbound",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",note:"Out of nightstop menu",noteKey:"autoMenu_nightstopNote",dataStatus:"ok"},{rotation:4,direction:"inbound",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",note:"Out of nightstop menu",noteKey:"autoMenu_nightstopNote",dataStatus:"ok"},{rotation:5,direction:"inbound",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",note:"Out of nightstop menu",noteKey:"autoMenu_nightstopNote",dataStatus:"ok"},{rotation:6,direction:"inbound",serviceType:"breakfast",breakfastType:"nightstop",label1:"SWISS Saveurs Cold Cuts Platter",label1Key:"autoMenu_coldCutsPlatter",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",note:"Out of nightstop menu",noteKey:"autoMenu_nightstopNote",dataStatus:"ok"},{rotation:1,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"GruyÃ¨re egg roll with mountain herbs, sautÃ©ed shiitake mushrooms and tomatoes",label1Key:"autoMenu_gruyereEggRoll",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:1,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Omelette with Appenzeller cheese, rÃ¶sti, spinach and cherry tomatoes",label1Key:"autoMenu_appenzellerOmelette",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:1,direction:"outbound",serviceType:"day",label1:"Grilled beef tenderloin with porcini mushroom sauce, potato gratin and broccoli",label1Key:"autoMenu_beefTenderloinPorcini",label2:"Truffle triangoli with white wine truffle sauce, spinach and Sbrinz cheese",label2Key:"autoMenu_truffleTriangoli",dataStatus:"ok"},{rotation:1,direction:"inbound",serviceType:"day",label1:"Chicken breast with jus de volaille, mascarpone polenta, red cabbage and brussels sprouts",label1Key:"autoMenu_chickenMascarponePolenta",label2:"Trofie pasta with mushroom cream sauce, glazed salsify, roasted leek, pumpkin and pumpkin seeds",label2Key:"autoMenu_trofieMushroom",dataStatus:"ok"},{rotation:2,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"Savoury crÃªpe with ricotta and spinach, grilled vegetables, pan-fried potatoes",label1Key:"autoMenu_crepeRicottaSpinach",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:2,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Scrambled eggs with Engelberg Abbey mountain cheese and spinach, potato rÃ¶sti",label1Key:"autoMenu_scrambledEngelberg",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:2,direction:"outbound",serviceType:"day",label1:"Chicken breast with jus de volaille, mascarpone polenta, red cabbage and brussels sprouts",label1Key:"autoMenu_chickenMascarponePolenta",label2:"Trofie pasta with mushroom cream sauce, glazed salsify, roasted leek, pumpkin and pumpkin seeds",label2Key:"autoMenu_trofieMushroom",dataStatus:"ok"},{rotation:2,direction:"inbound",serviceType:"day",label1:"Beef bourguignon, potato purÃ©e and glazed root vegetables",label1Key:"autoMenu_beefBourguignonPuree",label2:"Cheese spaetzle with fried onions and apple slices",label2Key:"autoMenu_cheeseSpaetzleOnionApple",dataStatus:"ok"},{rotation:3,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"Egg soufflÃ© with tomatoes and cheese, mushroom sauce and broccoli",label1Key:"autoMenu_eggSouffleMushroom",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:3,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Omelette with asparagus and sauce hollandaise, parsley potatoes",label1Key:"autoMenu_asparagusOmelette",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:3,direction:"outbound",serviceType:"day",label1:"Beef bourguignon, potato purÃ©e and glazed root vegetables",label1Key:"autoMenu_beefBourguignonPuree",label2:"Cheese spaetzle with fried onions and apple slices",label2Key:"autoMenu_cheeseSpaetzleOnionApple",dataStatus:"ok"},{rotation:3,direction:"inbound",serviceType:"day",label1:"Grilled beef tenderloin with porcini mushroom sauce, potato gratin and broccoli",label1Key:"autoMenu_beefTenderloinPorcini",label2:"Truffle triangoli with white wine truffle sauce, spinach and Sbrinz cheese",label2Key:"autoMenu_truffleTriangoli",dataStatus:"ok"},{rotation:4,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"GruyÃ¨re egg roll with mountain herbs, sautÃ©ed shiitake mushrooms and tomatoes",label1Key:"autoMenu_gruyereEggRoll",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:4,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Omelette with Appenzeller cheese, rÃ¶sti, spinach and cherry tomatoes",label1Key:"autoMenu_appenzellerOmelette",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:4,direction:"outbound",serviceType:"day",label1:"Grilled beef tenderloin with porcini mushroom sauce, potato gratin and broccoli",label1Key:"autoMenu_beefTenderloinPorcini",label2:"Truffle triangoli with white wine truffle sauce, spinach and Sbrinz cheese",label2Key:"autoMenu_truffleTriangoli",dataStatus:"ok"},{rotation:4,direction:"inbound",serviceType:"day",label1:"Sauteed chicken breast with jus, mascarpone polenta, brussels sprouts, braised red cabbage",label1Key:"autoMenu_sauteedChickenPolenta",label2:"Trofie pasta with mushroom cream sauce, glazed salsify, roasted leek, pumpkin and pumpkin seeds",label2Key:"autoMenu_trofieMushroom",dataStatus:"ok"},{rotation:5,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"Savoury crÃªpe with ricotta and spinach, grilled vegetables, pan-fried potatoes",label1Key:"autoMenu_crepeRicottaSpinach",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:5,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Scrambled eggs with Engelberg Abbey mountain cheese and spinach, potato rÃ¶sti",label1Key:"autoMenu_scrambledEngelberg",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:5,direction:"outbound",serviceType:"day",label1:"Sauteed chicken breast with jus, mascarpone polenta, brussels sprouts, braised red cabbage",label1Key:"autoMenu_sauteedChickenPolenta",label2:"Trofie pasta with mushroom cream sauce, glazed salsify, roasted leek, pumpkin and pumpkin seeds",label2Key:"autoMenu_trofieMushroom",dataStatus:"ok"},{rotation:5,direction:"inbound",serviceType:"day",label1:"Beef bourguignon, potato purÃ©e and glazed root vegetables",label1Key:"autoMenu_beefBourguignonPuree",label2:"Cheese spaetzle with fried onions and apple slices",label2Key:"autoMenu_cheeseSpaetzleOnionApple",dataStatus:"ok"},{rotation:6,direction:"outbound",serviceType:"breakfast",breakfastType:"standard",label1:"Egg soufflÃ© with tomatoes and cheese, mushroom sauce and broccoli",label1Key:"autoMenu_eggSouffleMushroom",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:6,direction:"inbound",serviceType:"breakfast",breakfastType:"standard",label1:"Omelette with asparagus and sauce hollandaise, parsley potatoes",label1Key:"autoMenu_asparagusOmelette",label2:"Granola with milk",label2Key:"autoMenu_granolaMilk",dataStatus:"ok"},{rotation:6,direction:"outbound",serviceType:"day",label1:"Beef bourguignon, potato purÃ©e and glazed root vegetables",label1Key:"autoMenu_beefBourguignonPuree",label2:"Gratinated cheese spaetzle with apple and fried onions",label2Key:"autoMenu_gratinatedCheeseSpaetzle",dataStatus:"ok"},{rotation:6,direction:"inbound",serviceType:"day",label1:"Grilled beef tenderloin with porcini mushroom sauce, potato gratin and broccoli",label1Key:"autoMenu_beefTenderloinPorcini",label2:"Truffle triangoli with white wine truffle sauce, spinach and Sbrinz cheese",label2Key:"autoMenu_truffleTriangoli",dataStatus:"ok"}],Jo=[{rotation:1,dates:new Set(["2025-06-04","2025-06-05","2025-06-06","2025-06-07","2025-06-08","2025-06-09","2025-06-10","2025-07-16","2025-07-17","2025-07-18","2025-07-19","2025-07-20","2025-07-21","2025-07-22","2025-08-27","2025-08-28","2025-08-29","2025-08-30","2025-08-31","2025-09-01","2025-09-02","2025-10-08","2025-10-09","2025-10-10","2025-10-11","2025-10-12","2025-10-13","2025-10-14","2025-11-19","2025-11-20","2025-11-21","2025-11-22","2025-11-23","2025-11-24","2025-11-25","2025-12-31","2026-01-01","2026-01-02","2026-01-03","2026-01-04","2026-01-05","2026-01-06","2026-02-11","2026-02-12","2026-02-13","2026-02-14","2026-02-15","2026-02-16","2026-02-17"])},{rotation:2,dates:new Set(["2025-06-11","2025-06-12","2025-06-13","2025-06-14","2025-06-15","2025-06-16","2025-06-17","2025-07-23","2025-07-24","2025-07-25","2025-07-26","2025-07-27","2025-07-28","2025-07-29","2025-09-03","2025-09-04","2025-09-05","2025-09-06","2025-09-07","2025-09-08","2025-09-09","2025-09-15","2025-09-16","2025-09-17","2025-09-18","2025-09-19","2025-09-20","2025-09-21","2025-11-26","2025-11-27","2025-11-28","2025-11-29","2025-11-30","2025-12-01","2025-12-02","2026-01-07","2026-01-08","2026-01-09","2026-01-10","2026-01-11","2026-01-12","2026-01-13","2026-02-18","2026-02-19","2026-02-20","2026-02-21","2026-02-22","2026-02-23","2026-02-24"])},{rotation:3,dates:new Set(["2025-06-18","2025-06-19","2025-06-20","2025-06-21","2025-06-22","2025-06-23","2025-06-24","2025-07-30","2025-07-31","2025-08-01","2025-08-02","2025-08-03","2025-08-04","2025-08-05","2025-09-10","2025-09-11","2025-09-12","2025-09-13","2025-09-14","2025-09-15","2025-09-16","2025-10-22","2025-10-23","2025-10-24","2025-10-25","2025-10-26","2025-10-27","2025-10-28","2025-12-03","2025-12-04","2025-12-05","2025-12-06","2025-12-07","2025-12-08","2025-12-09","2026-01-14","2026-01-15","2026-01-16","2026-01-17","2026-01-18","2026-01-19","2026-01-20","2026-02-25","2026-02-26","2026-02-27","2026-02-28"])},{rotation:4,dates:new Set(["2025-06-25","2025-06-26","2025-06-27","2025-06-28","2025-06-29","2025-06-30","2025-07-01","2025-08-06","2025-08-07","2025-08-08","2025-08-09","2025-08-10","2025-08-11","2025-08-12","2025-09-17","2025-09-18","2025-09-19","2025-09-20","2025-09-21","2025-09-22","2025-09-23","2025-10-29","2025-10-30","2025-10-31","2025-11-01","2025-11-02","2025-11-03","2025-11-04","2025-12-10","2025-12-11","2025-12-12","2025-12-13","2025-12-14","2025-12-15","2025-12-16","2026-01-21","2026-01-22","2026-01-23","2026-01-24","2026-01-25","2026-01-26","2026-01-27"])},{rotation:5,dates:new Set(["2025-07-02","2025-07-03","2025-07-04","2025-07-05","2025-07-06","2025-07-07","2025-07-08","2025-08-13","2025-08-14","2025-08-15","2025-08-16","2025-08-17","2025-08-18","2025-08-19","2025-09-24","2025-09-25","2025-09-26","2025-09-27","2025-09-28","2025-09-29","2025-09-30","2025-11-05","2025-11-06","2025-11-07","2025-11-08","2025-11-09","2025-11-10","2025-11-11","2025-12-17","2025-12-18","2025-12-19","2025-12-20","2025-12-21","2025-12-22","2025-12-23","2026-01-28","2026-01-29","2026-01-30","2026-01-31","2026-02-01","2026-02-02","2026-02-03"])},{rotation:6,dates:new Set(["2025-06-01","2025-06-02","2025-06-03","2025-07-09","2025-07-10","2025-07-11","2025-07-12","2025-07-13","2025-07-14","2025-07-15","2025-08-20","2025-08-21","2025-08-22","2025-08-23","2025-08-24","2025-08-25","2025-08-26","2025-10-01","2025-10-02","2025-10-03","2025-10-04","2025-10-05","2025-10-06","2025-10-07","2025-11-12","2025-11-13","2025-11-14","2025-11-15","2025-11-16","2025-11-17","2025-11-18","2025-12-24","2025-12-25","2025-12-26","2025-12-27","2025-12-28","2025-12-29","2025-12-30","2026-02-04","2026-02-05","2026-02-06","2026-02-07","2026-02-08","2026-02-09","2026-02-10"])}];function eo(e){if(!e)return null;const t=qo(e);if(!t)return null;for(const n of Jo)if(n.dates.has(t))return n.rotation;return null}function xn(e,t,n,a,l,i){const c=t?`R${t}`:"R?",s=a==="breakfast"?l==="nightstop"?Se(i,"menuBreakfastNight","Breakfast - out of night stop"):Se(i,"menuBreakfast","Breakfast"):Se(i,"menuDayService","Day service"),r=n==="outbound"?Se(i,"menuOutbound","Outbound"):Se(i,"menuInbound","Inbound");return`${s} - ${r} (${c})`}function Go(e){const t=zo(e.lang),n=e.direction||"outbound",a=e.serviceType||"day",l=e.breakfastType||"standard",i=e.rotation??eo(e.dateISO),c=$o.filter(r=>!(i&&r.rotation!==i||r.serviceType!==a||r.direction!=="both"&&r.direction!==n||r.serviceType==="breakfast"&&(r.breakfastType||"standard")!==l)),s=c.find(r=>r.dataStatus==="ok")||c.find(r=>r.dataStatus==="placeholder")||c[0];return s?{rotation:i??s.rotation??null,option1:Se(t,s.label1Key,s.label1),option2:Se(t,s.label2Key,s.label2),status:s.dataStatus||"placeholder",note:Se(t,s.noteKey,s.note)}:{rotation:i??null,option1:xn("option1",i??null,n,a,l,t),option2:xn("option2",i??null,n,a,l,t),status:"missing",note:i?Se(t,"autoMenu_pendingNote","Menu data will be loaded automatically when provided."):Se(t,"autoMenu_outOfRotation","Selected date is outside defined rotations.")}}function qo(e){if(!e)return null;const t=String(e).trim(),n=/^(\d{4})-(\d{2})-(\d{2})/.exec(t);if(n)return`${n[1]}-${n[2]}-${n[3]}`;const a=/^(\d{2})[\/\.](\d{2})[\/\.](\d{4})$/.exec(t);if(a){const[i,c,s,r]=a;return`${r}-${s}-${c}`}const l=new Date(t);return Number.isNaN(l.getTime())?null:l.toISOString().slice(0,10)}function Wt(e,t){e.addEventListener("click",t),e.addEventListener("touchstart",function(n){n.preventDefault(),t(n)},{passive:!1})}const kt=["AVML","BBML","CHML","GFML","HNML","KSML","LFML","LSML","MOML","NLML","VGML","VJML","VLML"],Uo=["OBHA","OBHB","OBHC","OBHD","OBHE","OBHF","OBHG","OBHH","OBHJ"],I=e=>document.querySelector(e),o={title:{flightNo:"",date:""},config:{rowsBiz:4,layout:"A220",lang:"EN",theme:"dark",histAsc:!1},inventory:{plateaux:0,hot_viande:0,hot_vege:0,hot_special:0,spml:{},pre:{}},menu:{mode:"auto",direction:null,serviceType:null,breakfastType:"standard",rotation:null,viandeLabel:"",vegeLabel:"",manualViandeLabel:"",manualVegeLabel:"",autoViandeLabel:"",autoVegeLabel:"",autoStatus:"",autoNote:""},seats:{},phase:"fiche",reminders:[],history:[],clientView:!1};Ko({getStore:()=>o});const _t={mode:"auto",direction:null,serviceType:null,breakfastType:"standard"};function Le(){o.menu||(o.menu={});const e=o.menu;e.mode!=="manual"&&e.mode!=="auto"&&(e.mode=_t.mode),e.direction!=="outbound"&&e.direction!=="inbound"&&(e.direction=_t.direction),e.serviceType!=="day"&&e.serviceType!=="breakfast"&&(e.serviceType=_t.serviceType),e.breakfastType!=="nightstop"&&e.breakfastType!=="standard"&&(e.breakfastType=_t.breakfastType),e.rotation===void 0&&(e.rotation=null),typeof e.viandeLabel!="string"&&(e.viandeLabel=""),typeof e.vegeLabel!="string"&&(e.vegeLabel=""),typeof e.manualViandeLabel!="string"&&(e.manualViandeLabel=e.viandeLabel||""),typeof e.manualVegeLabel!="string"&&(e.manualVegeLabel=e.vegeLabel||""),typeof e.autoViandeLabel!="string"&&(e.autoViandeLabel=""),typeof e.autoVegeLabel!="string"&&(e.autoVegeLabel=""),typeof e.autoStatus!="string"&&(e.autoStatus=""),typeof e.autoNote!="string"&&(e.autoNote="")}const Mt={sleep:"ðŸ˜´"},Zo=["sleepMealBtn","sleepAperoBtn","sleepTCBtn","sleepModalBtn"],Yo=[{id:"aperoNotesBlock",labelId:"mdAperoNotes",fallback:"Drink / aperitif notes"},{id:"tcNotesBlock",labelId:"mdTCNotes",fallback:"Tea & coffee notes"},{id:"mealDrinkNotesBlock",labelId:"mdMealDrinkNotes",fallback:"Meal drink notes"}],Nt=new Map,Qo=20;let H=!1;const Te=new Set;function Xo(){Yo.forEach(e=>{const t=document.getElementById(e.id);if(!t)return;if(Nt.has(e.id)){const d=Nt.get(e.id);Pn(d),rn(d),Rn(d);return}const n=Array.from(t.childNodes),a=document.createElement("div");a.className="notes-accordion__content",n.forEach(d=>{a.appendChild(d)});const l=document.createElement("div");l.className="accordion__header notes-accordion__header",l.setAttribute("role","button"),l.setAttribute("tabindex","0");const i=document.createElement("span");i.className="notes-accordion__title",l.appendChild(i);const c=document.createElement("div");c.className="accordion__body notes-accordion__body",c.appendChild(a);const s=document.createElement("div");for(s.className="accordion__section",s.appendChild(l),s.appendChild(c);t.firstChild;)t.removeChild(t.firstChild);t.classList.add("accordion","notes-accordion"),t.dataset.notesAccordion="1",t.appendChild(s);const r={id:e.id,block:t,section:s,header:l,headerText:i,body:c,labelId:e.labelId,fallback:e.fallback,defaultOpen:e.defaultOpen===!0};Nt.set(e.id,r),l.addEventListener("click",()=>Kn(r)),l.addEventListener("keydown",d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),Kn(r))}),vn(r,r.defaultOpen),Pn(r),Rn(r)})}function Pn(e){if(!e||e.labelObserver||!e.labelId)return;const t=document.getElementById(e.labelId);if(!t){rn(e);return}const n=()=>rn(e);if(n(),typeof MutationObserver>"u")return;const a=new MutationObserver(n);a.observe(t,{characterData:!0,childList:!0,subtree:!0}),e.labelObserver=a}function rn(e){if(!e)return;const t=e.labelId?document.getElementById(e.labelId):null,n=((t==null?void 0:t.textContent)||(t==null?void 0:t.innerText)||"").trim()||e.fallback||"";e.headerText.textContent=n}function vn(e,t){e&&(e.section.dataset.open=t?"true":"false",e.header.setAttribute("aria-expanded",t?"true":"false"),e.body.hidden=!t)}function Kn(e){if(!e)return;const t=e.section.dataset.open==="true";vn(e,!t)}function Rn(e){if(!e)return;const t=e.block.querySelector("label");t&&(t.classList.add("sr-only"),t.setAttribute("aria-hidden","true"))}function el(e){const t=(n,a)=>{const l=Nt.get(n);l&&vn(l,a)};e==="aperitif"?(t("aperoNotesBlock",!0),t("tcNotesBlock",!1),t("mealDrinkNotesBlock",!1)):e==="tc"?(t("aperoNotesBlock",!1),t("tcNotesBlock",!0),t("mealDrinkNotesBlock",!1)):e==="repas"&&(t("aperoNotesBlock",!1),t("tcNotesBlock",!1),t("mealDrinkNotesBlock",!1))}function Zt(e,t,n,a){if(!e)return;const l=document.createElement("div");l.className=`tag seat-flag ${t}`.trim(),a&&(l.textContent=a),n&&(l.title=n,l.setAttribute("aria-label",n)),e.appendChild(l)}(async()=>{try{navigator.storage&&navigator.storage.persist&&(await navigator.storage.persisted()||await navigator.storage.persist())}catch(e){console.warn("Persistent storage request failed:",e)}})();for(const e of kt)o.inventory.spml[e]=o.inventory.spml[e]||0;(function(){var h;const e=document.getElementById("flightDate");if(!e)return;function t(){var k;const m=(((k=o==null?void 0:o.config)==null?void 0:k.lang)||"EN").toUpperCase();return m==="FR"?{months:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wk:["L","M","M","J","V","S","D"],weekStart:1}:m==="DE"?{months:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wk:["M","D","M","D","F","S","S"],weekStart:1}:{months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wk:["S","M","T","W","T","F","S"],weekStart:0}}function n(m){return String(m).padStart(2,"0")}function a(m,k,w){return`${m}-${n(k+1)}-${n(w)}`}function l(){const m=new Date;return{y:m.getFullYear(),m:m.getMonth(),d:m.getDate()}}function i(m){const k=/^(\d{4})-(\d{2})-(\d{2})$/.exec(m||"");return k?{y:+k[1],m:+k[2]-1,d:+k[3]}:null}const c=((h=document.getElementById("flightDateISO"))==null?void 0:h.value)||e.value;let s=i(c)||l(),r;function d(){u(),r=document.createElement("div"),r.className="dp",document.body.appendChild(r),g();const m=e.getBoundingClientRect();r.style.left=window.scrollX+m.left+"px",r.style.top=window.scrollY+m.bottom+6+"px",setTimeout(()=>{document.addEventListener("mousedown",p),document.addEventListener("keydown",y)},0)}function u(){document.removeEventListener("mousedown",p),document.removeEventListener("keydown",y),r&&r.parentNode&&r.parentNode.removeChild(r),r=null}function p(m){r&&(m.target===r||r.contains(m.target)||m.target===e||u())}function y(m){m.key==="Escape"&&u()}function g(){var T;if(!r)return;const m=t();r.innerHTML="";const k=document.createElement("header"),w=document.createElement("button");w.textContent="";const b=document.createElement("button");b.textContent="";const S=document.createElement("div");S.className="m",S.textContent=`${m.months[s.m]} ${s.y}`,w.addEventListener("click",()=>{s.m--,s.m<0&&(s.m=11,s.y--),g()}),b.addEventListener("click",()=>{s.m++,s.m>11&&(s.m=0,s.y++),g()}),k.appendChild(w),k.appendChild(S),k.appendChild(b),r.appendChild(k);const E=document.createElement("div");E.className="grid";const _=m.wk.slice();if(m.weekStart===1){const C=_.shift();_.push(C)}_.forEach(C=>{const N=document.createElement("div");N.className="w",N.textContent=C,E.appendChild(N)});const A=(new Date(s.y,s.m,1).getDay()-(m.weekStart||0)+7)%7,K=new Date(s.y,s.m+1,0).getDate(),$=new Date(s.y,s.m,0).getDate();for(let C=0;C<A;C++){const N=document.createElement("div");N.className="d out",N.textContent=String($-A+1+C),E.appendChild(N)}const fe=l(),he=((T=document.getElementById("flightDateISO"))==null?void 0:T.value)||e.value,ie=i(he);for(let C=1;C<=K;C++){const N=document.createElement("div");N.className="d",N.textContent=String(C),fe.y===s.y&&fe.m===s.m&&fe.d===C&&N.classList.add("today"),ie&&ie.y===s.y&&ie.m===s.m&&ie.d===C&&N.classList.add("sel"),N.addEventListener("click",()=>{const W=a(s.y,s.m,C);document.getElementById("flightDateISO").value=W,e.value=yt(W),ht(),e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),u()}),E.appendChild(N)}const be=(7-(A+K)%7)%7;for(let C=1;C<=be;C++){const N=document.createElement("div");N.className="d out",N.textContent=String(C),E.appendChild(N)}r.appendChild(E)}e.addEventListener("focus",d),e.addEventListener("click",d),window._rerenderDatepickerLang=function(){var w,b;r&&g();const m=(((w=o==null?void 0:o.config)==null?void 0:w.lang)||"EN").toUpperCase();e.placeholder=m==="FR"?"AAAA-MM-JJ":m==="DE"?"JJJJ-MM-TT":"YYYY-MM-DD";const k=(b=document.getElementById("flightDateISO"))==null?void 0:b.value;k&&(document.getElementById("flightDate").value=yt(k),ht())}})();function kn(e=!1){const t=document.getElementById("tc_vin_rouge"),n=document.getElementById("tc_vin_blanc");if(!t||!n)return;const a=t.value,l=n.value;e&&a&&l&&(n.value=""),n.disabled=!!t.value,t.disabled=!!n.value}function to(){["tc_cat","tc_milk","tc_sweet","tc_the_type","tc_digestif_type","tc_beer","tc_vin_rouge","tc_vin_blanc","tc_cocktail_type","tc_soft_eau","tc_soft_jus","tc_soft_coca"].forEach(n=>{const a=document.getElementById(n);a&&(a.value="")}),["tc_digestif_ice","tc_champ_ice","tc_vin_ice","tc_cocktail_ice","tc_cocktail_lemon","tc_cocktail_salt","tc_cocktail_pepper","tc_soft_ice","tc_soft_lemon","tc_soft_ice2","tc_soft_lemon2","tc_soft_salt","tc_soft_pepper","tc_soft_ice3","tc_soft_lemon3","tc_soft_ice4","tc_soft_lemon4","tc_soft_ice5","tc_soft_lemon5"].forEach(n=>{const a=document.getElementById(n);a&&(a.checked=!1)}),["tc_group","tc_alcool_type","tc_chaud_type","tc_soft_type"].forEach(n=>{const a=document.getElementById(n);a&&(a.value="")}),document.getElementById("tc_alcool")&&(document.getElementById("tc_alcool").style.display="none"),document.getElementById("tc_chaud")&&(document.getElementById("tc_chaud").style.display="none"),Je(""),kn(!0);const e=document.getElementById("tc_tipBtn"),t=document.getElementById("tc_tip");e&&(e.style.display="none"),t&&(t.style.display="none")}function Ye(){const e=document.getElementById("modalBack");if(!(!(e&&(e.style.display==="flex"||e.style.display===""))||!document.getElementById("drinkGrid")))try{vt(),Z(),Y(),Ht(),D()}catch(a){console.warn("ensureDrinkGridActive:",a)}}function mt(){const e=document.getElementById("serveTC");if(!e)return;const t=v[o.config.lang||"EN"],n=t.serveMealDrink||t.serveTC||"Order drink";e.textContent=n}function Sn(e,t){return e+t}function Ae(e){return(!e||typeof e!="object")&&(e={}),typeof e.occupied!="boolean"&&(e.occupied=!1),e.type||(e.type="normal"),e.status||(e.status="none"),e.lang===void 0&&(e.lang=""),e.notes===void 0&&(e.notes=""),e.sleep===void 0&&(e.sleep=!1),e.spml===void 0&&(e.spml=""),e.preLabel===void 0&&(e.preLabel=""),e.normalMeal===void 0&&(e.normalMeal=""),e.aperoNotes===void 0&&(e.aperoNotes=""),e.tcNotes===void 0&&(e.tcNotes=""),(!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null}),e.served||(e.served={aperitif:null,meal:null}),typeof e.served.trayUsed!="boolean"&&(e.served.trayUsed=!1),e.serveLaterAt===void 0&&(e.serveLaterAt=null),typeof e.served.tc>"u"&&(e.served.tc=null),typeof e.served.trayCleared>"u"&&(e.served.trayCleared=!1),e.apDrink||(e.apDrink={cat:"",milk:"",sweet:"",theType:"",digestif:"",whiskyStyle:"",baileysIce:!1,beer:"",vinRouge:"",vinBlanc:"",vinNotes:"",cognacIce:!1,champIce:!1,vinIce:!1,softType:"",waterType:"",juiceType:"",cocaType:"",softIce:!1,softLemon:!1,juiceIce:!1,juiceLemon:!1,juiceSalt:!1,juicePepper:!1,spriteIce:!1,spriteLemon:!1,cocktail:"",cocktailIce:!1,cocktailLemon:!1,cocktailSalt:!1,cocktailPepper:!1,campariMix:"",virginMary:!1,choco:!1}),e.eatWith===void 0&&(e.eatWith=""),e}function pe(e,t){const n=Sn(e,t),a=Ae(o.seats[n]);return o.seats[n]=a,a}function B(){try{localStorage.setItem(at(),JSON.stringify(o)),localStorage.setItem("serviceflow::lastKey",at())}catch(e){console.warn("localStorage indisponible:",e)}X()}document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="hidden")try{B()}catch{}});window.addEventListener("pagehide",()=>{try{B()}catch{}},{capture:!0});window.addEventListener("beforeunload",e=>{(o.history||[]).length>0&&(e.preventDefault(),e.returnValue="")});function at(){const e=o.title||{flightNo:"",date:""};return`serviceflow::${e.flightNo||"no-flight"}::${e.date||"no-date"}`}function no(e){e&&e!==at()&&localStorage.setItem(at(),JSON.stringify(o))}function tl(){var n;const e=at();o.title.flightNo=I("#flightNo").value.trim();const t=((n=document.getElementById("flightDateISO"))==null?void 0:n.value)||I("#flightDate").value;o.title.date=t,no(e),B(),G({type:"titleSet",flightNo:o.title.flightNo||"",dateISO:o.title.date||""})}(function(){var t,n,a,l;(t=document.getElementById("saveSnapshot"))==null||t.addEventListener("click",tl),(n=document.getElementById("importJSON"))==null||n.addEventListener("click",()=>{const i=document.getElementById("importFile");i&&(i.value="",i.click())}),(a=document.getElementById("importFile"))==null||a.addEventListener("change",i=>{var d;if(window.__importingJSON)return;window.__importingJSON=!0;const c=()=>setTimeout(()=>{window.__importingJSON=!1},0),s=(d=i.target.files)==null?void 0:d[0];if(!s){c();return}const r=new FileReader;r.onload=()=>{var u,p,y,g,h,m,k,w;try{const b=JSON.parse(String(r.result||"{}")),S=at();for(const $ of Object.keys(o))delete o[$];Object.assign(o,b),typeof normalizeImportedStore=="function"&&normalizeImportedStore(o),document.getElementById("flightNo").value=((u=o==null?void 0:o.title)==null?void 0:u.flightNo)||"";const E=((p=o==null?void 0:o.title)==null?void 0:p.date)||"";document.getElementById("flightDateISO").value=E,document.getElementById("flightDate").value=E;const _=document.getElementById("labelViande"),M=document.getElementById("labelVege");Le(),_&&(_.value=((y=o==null?void 0:o.menu)==null?void 0:y.manualViandeLabel)||((g=o==null?void 0:o.menu)==null?void 0:g.viandeLabel)||"",o.menu.manualViandeLabel=_.value||""),M&&(M.value=((h=o==null?void 0:o.menu)==null?void 0:h.manualVegeLabel)||((m=o==null?void 0:o.menu)==null?void 0:m.vegeLabel)||"",o.menu.manualVegeLabel=M.value||""),je(),we(!1),no(S),B(),et==null||et(),O==null||O(),x==null||x(),ne==null||ne();const A=(((k=o==null?void 0:o.config)==null?void 0:k.lang)||"EN").toUpperCase(),K=v[o.config.lang||"EN"]||v.EN;alert(K.jsonRestored||"Session restaure depuis le JSON.")}catch(b){console.error(b);const S=(((w=o==null?void 0:o.config)==null?void 0:w.lang)||"EN").toUpperCase(),E=v[S]||v.EN;alert(E.invalidFile||"Invalid file.")}finally{i.target.value="",c()}},r.readAsText(s)}),(l=document.getElementById("exportPNG"))==null||l.addEventListener("click",()=>{try{typeof exportSeatmapPNG=="function"?exportSeatmapPNG():console.warn("exportSeatmapPNG() non dfinie")}catch{}})})();function nl(e){o.history.unshift({ts:Date.now(),type:"text",text:e}),ne()}function G(e){const t=Object.assign({ts:Date.now()},e);o.history.unshift(t),ne()}function xt(e){const t=Array.isArray(o.history)?o.history[0]:null;t&&t.type===e.type&&t.seat===e.seat&&(!e.ctx||t.ctx===e.ctx)&&(!e.label||t.label===e.label)&&(!e.notes||t.notes===e.notes)||G(e)}function ye(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),n=e.createGain();t.type="sine",t.frequency.value=880,t.connect(n),n.connect(e.destination),t.start(),n.gain.setValueAtTime(.08,e.currentTime),n.gain.exponentialRampToValueAtTime(1e-5,e.currentTime+.15),t.stop(e.currentTime+.16)}catch{}}function al(){return Object.values(o.inventory.spml||{}).reduce((e,t)=>e+(t||0),0)}function ol(){return Object.values(o.inventory.pre||{}).reduce((e,t)=>e+(t||0),0)}function ao(){return o.config.layout==="A320"?["C","B","A"]:["C","A"]}function ue(){const e=document.getElementById("seatmapTitle");if(!e)return;const t=v[o.config.lang||"EN"]||v.EN,n="F E D",a=o.config.layout==="A320"?"C B A":"C A",l=t.seatmapTitle||"Seatmap ({L} | {R})";e.textContent=l.replace("{L}",n).replace("{R}",a)}function oo(){const e=document.querySelector("#filterTabs .subtab.active");return(e==null?void 0:e.dataset.filter)||"all"}function lo(e){document.querySelectorAll("#filterTabs .subtab").forEach(t=>{const n=t.dataset.filter===e;t.classList.toggle("active",n),t.setAttribute("aria-selected",n?"true":"false")})}function zt(e){document.querySelectorAll("#phaseChips .tab").forEach(t=>{const n=t.dataset.phase===e;t.classList.toggle("active",n),t.setAttribute("aria-selected",n?"true":"false")})}const Fn={FTL:"status-pill status-pill--ftl",SEN:"status-pill status-pill--sen",HON:"status-pill status-pill--hon",FCL:"status-pill status-pill--fcl",VIP:"status-pill status-pill--vip",PAD:"status-pill status-pill--pad",OTHER:"status-pill status-pill--other"};function En(){var c;const e=document.getElementById("modalSeatMeta");if(!e)return;e.innerHTML="";const t=document.getElementById("m_status"),n=t==null?void 0:t.value,a=(c=f==null?void 0:f.data)==null?void 0:c.type;if(a==="infant"||a==="child"){const s=document.createElement("span");s.className="status-pill status-pill--minor",s.textContent=a==="infant"?"INF":"CHD",e.appendChild(s)}if(!n||n==="none")return;const l=n.toUpperCase(),i=document.createElement("span");i.className=Fn[l]||Fn.OTHER,i.textContent=n,e.appendChild(i)}function Cn(){const e=document.getElementById("m_lang"),t=(e==null?void 0:e.value)||"";document.querySelectorAll(".language-btn").forEach(n=>{const l=(n.dataset.lang||"")===t&&t!=="";n.classList.toggle("active",l),n.setAttribute("aria-pressed",l?"true":"false")})}function $t(){const e=document.getElementById("layoutSelect"),t=(e==null?void 0:e.value)||o.config.layout||"A220";document.querySelectorAll(".layout-btn").forEach(n=>{const l=(n.dataset.layout||"")===t;n.classList.toggle("active",l),n.setAttribute("aria-pressed",l?"true":"false")})}function ze(){const e=document.getElementById("m_later"),t=(e==null?void 0:e.value)||"",n=Jt();document.querySelectorAll(".later-btn").forEach(c=>{const r=(c.dataset.value||"")===t&&t!=="";c.classList.toggle("active",r),c.setAttribute("aria-pressed",r?"true":"false"),c.disabled=!n}),e&&(e.disabled=!n);const a=document.getElementById("laterCustomContainer"),l=document.getElementById("m_later_time"),i=t==="custom"&&n;a&&a.classList.toggle("active",i),l&&(l.disabled=!i,!i&&document.activeElement===l&&l.blur())}function Jt(){const e=document.getElementById("m_occ_chk");return!!(e!=null&&e.checked)}function io(){const e=Jt();document.querySelectorAll(".language-btn").forEach(i=>{i.disabled=!e});const t=document.getElementById("m_lang");t&&(t.disabled=!e),document.querySelectorAll('input[name="m_type"]').forEach(i=>{i.disabled=!e});const n=document.getElementById("m_status");n&&(n.disabled=!e);const a=document.getElementById("m_eatWith");a&&(a.disabled=!e);const l=document.getElementById("movePaxBtn");if(l&&(l.disabled=!e,l.setAttribute("aria-disabled",(!e).toString())),!e){const i=document.getElementById("m_later");if(i&&i.value)i.value="",i.dispatchEvent(new Event("change",{bubbles:!0}));else{f&&(f.data.serveLaterAt=null);const c=document.getElementById("m_later_view");c&&(c.textContent="",c.style.display="none")}}de(),ze()}const te=document.getElementById("legendToggle"),Q=document.getElementById("legendPopover"),dn=document.querySelector(".seatmap");function co(){if(!te||!Q||!dn)return;const e=te.getBoundingClientRect(),t=dn.getBoundingClientRect(),n=Q.offsetWidth||0,a=12,l=Math.max(a,e.bottom-t.top+a);let i=e.right-t.left-n;const c=t.width-n-a;Number.isFinite(i)||(i=a),i=Math.max(a,Math.min(i,c)),Q.style.top=`${l}px`,Q.style.left=`${i}px`}function ut(e){if(!te||!Q)return;Q.dataset.open=e?"true":"false",Q.setAttribute("aria-hidden",e?"false":"true"),te.setAttribute("aria-expanded",e?"true":"false"),te.classList.toggle("active",e);const t=te.dataset.labelShow||"Show legend",n=te.dataset.labelHide||"Hide legend",a=e?n:t;te.textContent=a,te.title=a,te.setAttribute("aria-label",a),e?requestAnimationFrame(co):(Q.style.top="",Q.style.left="")}function Qe(){return(Q==null?void 0:Q.dataset.open)==="true"}function ll(){document.querySelectorAll("#seatgrid .seat").forEach(e=>{const t=e.dataset.seatKey||"";e.classList.toggle("bulk-picked",!!t&&Te.has(t))})}function $e(){const e=v[o.config.lang||"EN"]||v.EN,t=document.getElementById("bulkOccupyToggle"),n=document.getElementById("bulkOccupyApply"),a=document.getElementById("bulkOccupyClear"),l=document.getElementById("bulkOccupyStatus"),i=document.getElementById("seatgrid"),c=Te.size;if(i&&i.classList.toggle("bulk-occupy-mode",!!H),t){const s=H?e.bulkOccCancel||"Cancel selection":e.bulkOccStart||"Mark multiple seats";t.textContent=s,t.title=s,t.setAttribute("aria-pressed",H?"true":"false")}if(n){const s=e.bulkOccApply||"Mark {n} seat(s) as occupied";n.textContent=s.replace("{n}",String(Math.max(1,c||1))),n.disabled=!H||c===0,n.style.display=H?"":"none"}if(a){const s=e.bulkOccClear||"Clear selection";a.textContent=s,a.title=s,a.disabled=!H||c===0,a.style.display=H?"":"none"}if(l)if(!H)l.textContent="";else if(c===0)l.textContent=e.bulkOccHint||"Click seats to select them, then apply.";else{const s=c===1?e.bulkOccSelected||"{n} seat selected":e.bulkOccSelectedPlural||e.bulkOccSelected||"{n} seats selected";l.textContent=s.replace("{n}",String(c))}ll()}function Pt(e){if(e===H){$e();return}H=!!e,H?_e&&(_e=null,Gt(!1)):Te.clear(),$e(),ue()}function so(e){if(!H)return;const[t,n]=De(e);if(!t||!n)return;const a=pe(t,n),l=document.getElementById("bulkOccupyStatus"),i=v[o.config.lang||"EN"]||v.EN;if(a.occupied){l&&(l.textContent=i.bulkOccBlocked||"Seat already occupied");return}Te.has(e)?Te.delete(e):Te.add(e),$e()}function il(){H&&(Te.clear(),$e())}function cl(){if(!H)return;const e=Te.size;if(e===0){Pt(!1),ue();return}if(e>=Qo){const a=((v[o.config.lang||"EN"]||v.EN).bulkOccConfirm||"Confirm marking {n} seats as occupied?").replace("{n}",String(e));if(!window.confirm(a))return}const t=Array.from(Te);for(const n of t){const[a,l]=De(n);if(!a||!l)continue;const i=pe(a,l);i.occupied=!0,o.seats[n]=i;const c=document.querySelector(`#seatgrid .seat[data-seat-key="${n}"]`);c&&c.classList.add("occupied")}B(),x();try{tt==null||tt()}catch{}Pt(!1),ue()}function jn(e){return H?(so(e),!0):!1}function yt(e){var s;const t=(((s=o==null?void 0:o.config)==null?void 0:s.lang)||"EN").toUpperCase();if(!e)return"";const n=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!n)return e;const a=n[1],l=n[2],i=n[3];return t==="FR"?`${i}/${l}/${a}`:t==="DE"?`${i}.${l}.${a}`:`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(l,10)-1]} ${parseInt(i,10)}, ${a}`}function ht(){const e=document.getElementById("flightDatePretty"),t=document.getElementById("flightDate");e&&t&&(e.textContent=yt(t.value))}function Tn(){var n;const e=document.getElementById("flightDateISO");if(e&&e.value)return String(e.value).trim();const t=document.getElementById("flightDate");return t&&t.value?String(t.value).trim():String(((n=o==null?void 0:o.title)==null?void 0:n.date)||"").trim()}function pt(e){Le();const t=v[o.config.lang||"EN"]||v.EN,n=o.menu.direction==="outbound"||o.menu.direction==="inbound",a=o.menu.serviceType==="day"||o.menu.serviceType==="breakfast",l=!!Tn(),i=document.getElementById("menuPreview");i&&(i.style.display=n&&a?"flex":"none");const c=document.getElementById("menuAutoOption1"),s=document.getElementById("menuAutoOption2"),r=document.getElementById("lblAutoOpt1"),d=document.getElementById("lblAutoOpt2"),u=document.getElementById("menuAutoStatus");if(r&&(r.textContent=t.lblViande||"Option 1"),d&&(d.textContent=t.lblVege||"Option 2"),!n||!a){c&&(c.textContent="--"),s&&(s.textContent="--"),u&&(u.textContent=t.menuSelectContext||"Select outbound/inbound and service to load menu.",u.dataset.state="missing");return}if(!l){c&&(c.textContent="--"),s&&(s.textContent="--"),u&&(u.textContent=t.menuPickDate||"Select a flight date to load the menu.",u.dataset.state="missing");return}if(c&&(c.textContent=(e==null?void 0:e.option1)||o.menu.autoViandeLabel||o.menu.viandeLabel||t.lblViande||"Option 1"),s&&(s.textContent=(e==null?void 0:e.option2)||o.menu.autoVegeLabel||o.menu.vegeLabel||t.lblVege||"Option 2"),u){const p=(e==null?void 0:e.status)||o.menu.autoStatus||"missing";let y="";p==="ok"?y=(e==null?void 0:e.note)||o.menu.autoNote||"":p==="placeholder"?y=(e==null?void 0:e.note)||o.menu.autoNote||t.menuAutoPlaceholder||"":y=(e==null?void 0:e.note)||o.menu.autoNote||t.menuAutoMissing||"",u.textContent=y,u.dataset.state=p}}function we(e=!1){Le();const t=Tn();o.title.date=t||"";const n=o.menu.direction==="outbound"||o.menu.direction==="inbound",a=o.menu.serviceType==="day"||o.menu.serviceType==="breakfast",l=!!t;if(!n||!a){o.menu.autoViandeLabel="",o.menu.autoVegeLabel="",o.menu.autoStatus="missing",o.menu.autoNote="",o.menu.mode==="auto"&&(o.menu.viandeLabel="",o.menu.vegeLabel=""),pt(),He(),e&&B();return}if(!l){o.menu.autoViandeLabel="",o.menu.autoVegeLabel="",o.menu.autoStatus="missing",o.menu.autoNote="",o.menu.mode==="auto"&&(o.menu.viandeLabel="",o.menu.vegeLabel=""),pt(),He(),e&&B();return}const i=eo(t);o.menu.rotation=i;const c=Go({dateISO:t,rotation:i,direction:o.menu.direction,serviceType:o.menu.serviceType,breakfastType:o.menu.breakfastType,lang:o.config.lang});o.menu.autoViandeLabel=c.option1||"",o.menu.autoVegeLabel=c.option2||"",o.menu.autoStatus=c.status,o.menu.autoNote=c.note||"",o.menu.mode==="auto"&&(o.menu.viandeLabel=c.option1||o.menu.manualViandeLabel||o.menu.viandeLabel||"",o.menu.vegeLabel=c.option2||o.menu.manualVegeLabel||o.menu.vegeLabel||""),pt(c),He(),e&&B()}function je(){Le();const e=o.menu.mode==="manual"?"manual":"auto",t=o.menu.direction==="outbound"||o.menu.direction==="inbound";document.querySelectorAll(".menu-mode-btn").forEach(p=>{const g=(p.getAttribute("data-menu-mode")||"auto")===e;p.classList.toggle("active",g),p.setAttribute("aria-pressed",g?"true":"false")});const n=document.getElementById("menuAutoPanel"),a=document.getElementById("menuManualPanel");n&&(n.hidden=e!=="auto",n.style.display=e==="auto"?"flex":"none"),a&&(a.hidden=e!=="manual",a.style.display=e==="manual"?"flex":"none"),document.querySelectorAll("[data-menu-direction]").forEach(p=>{const y=p.dataset.menuDirection===o.menu.direction;p.classList.toggle("active",y),p.setAttribute("aria-pressed",y?"true":"false")}),document.querySelectorAll("[data-menu-service]").forEach(p=>{const y=p.dataset.menuService===o.menu.serviceType;p.classList.toggle("active",y),p.setAttribute("aria-pressed",y?"true":"false")});const l=document.getElementById("menuServiceRow");l&&(l.style.display=t?"flex":"none"),document.querySelectorAll("[data-menu-service]").forEach(p=>{p.disabled=!t});const i=document.getElementById("menuBreakfastRow");i&&(i.style.display=o.menu.serviceType==="breakfast"&&t?"":"none");const c=document.getElementById("menuBreakfastNight"),s=document.getElementById("lblMenuBreakfastType");if(c){c.checked=o.menu.breakfastType==="nightstop";const p=o.menu.serviceType==="breakfast"&&o.menu.direction==="inbound";c.disabled=!p,c.style.display=p?"inline-block":"none",c.style.visibility=p?"visible":"hidden",s&&(s.style.display=p?"inline-block":"none",s.style.visibility=p?"visible":"hidden"),p||(c.checked=!1,o.menu.breakfastType="standard")}const r=document.getElementById("labelViande"),d=document.getElementById("labelVege");r&&(r.value=o.menu.manualViandeLabel||"",r.disabled=e==="auto"),d&&(d.value=o.menu.manualVegeLabel||"",d.disabled=e==="auto");const u=document.getElementById("menuManualHint");if(u){const p=v[o.config.lang||"EN"]||v.EN;u.textContent=p.menuManualHint!==void 0?p.menuManualHint:""}pt(),He()}function He(){const e=document.getElementById("normalInfoOpt1"),t=document.getElementById("normalInfoOpt2"),n=document.getElementById("normalInfoOpt1Label"),a=document.getElementById("normalInfoOpt2Label"),l=document.getElementById("normalInfoBtn"),i=document.getElementById("normalInfoPopup");if(!e||!t)return;const c=v[o.config.lang||"EN"]||v.EN;n&&(n.textContent=c.optNormalMeat||"Option 1"),a&&(a.textContent=c.optNormalVeg||"Option 2");const s=o.menu.mode==="manual"?"manual":"auto",r=(o.menu.manualViandeLabel||"").trim(),d=(o.menu.manualVegeLabel||"").trim(),u=(o.menu.viandeLabel||o.menu.autoViandeLabel||"").trim(),p=(o.menu.vegeLabel||o.menu.autoVegeLabel||"").trim(),y=s==="manual"?!!(r||d):!!(u||p);l&&(l.disabled=!y),i&&!y&&(i.hidden=!0,i.style.display="none",l==null||l.setAttribute("aria-expanded","false"));const g=c.optNormalMissing||"Option not set",h=s==="manual"?r||g:o.menu.viandeLabel||o.menu.autoViandeLabel||o.menu.manualViandeLabel||c.optNormalMeat||"Option 1",m=s==="manual"?d||g:o.menu.vegeLabel||o.menu.autoVegeLabel||o.menu.manualVegeLabel||c.optNormalVeg||"Option 2";e.textContent=h,t.textContent=m}function sl(){const e=document.getElementById("normalInfoBtn"),t=document.getElementById("normalInfoPopup");if(!e||!t)return;t.hidden=!0,t.style.display="none",e.setAttribute("aria-expanded","false"),He();const n=()=>{t.hidden=!0,t.style.display="none",e.setAttribute("aria-expanded","false")},a=()=>{He(),t.hidden=!1,t.style.display="block",e.setAttribute("aria-expanded","true")};e.addEventListener("click",l=>{l.stopPropagation(),e.getAttribute("aria-expanded")==="true"?n():a()}),document.addEventListener("click",l=>{t.hidden||t.contains(l.target)||e.contains(l.target)||n()})}function rl(){const e=document.getElementById("menuSelectionAccordion"),t=e==null?void 0:e.querySelector(".accordion__section"),n=document.getElementById("menuSelectionHeader"),a=document.getElementById("menuSelectionBody");if(!e||!t||!n||!a)return;const l=i=>{t.dataset.open=i?"true":"false",n.setAttribute("aria-expanded",i?"true":"false"),a.style.display=i?"flex":"none"};l(!0),n.addEventListener("click",()=>{const i=t.dataset.open==="true";l(!i)}),n.addEventListener("keydown",i=>{if(i.key==="Enter"||i.key===" "){i.preventDefault();const c=t.dataset.open==="true";l(!c)}})}function dl(e){Le(),o.menu.mode=e==="manual"?"manual":"auto",o.menu.mode==="manual"?(o.menu.viandeLabel=o.menu.manualViandeLabel||"",o.menu.vegeLabel=o.menu.manualVegeLabel||""):we(!1),je(),B()}function ul(){var r,d;Le();const e=(u,p)=>{u&&(u.addEventListener("click",p),u.addEventListener("touchstart",y=>{y.preventDefault(),p()},{passive:!1}))};document.querySelectorAll("[data-menu-mode]").forEach(u=>{e(u,()=>{const p=u.dataset.menuMode||"auto";dl(p)})}),document.querySelectorAll("[data-menu-direction]").forEach(u=>{e(u,()=>{const p=u.dataset.menuDirection==="inbound"?"inbound":"outbound";o.menu.direction===p?(o.menu.direction=null,o.menu.serviceType=null,o.menu.breakfastType="standard"):(o.menu.direction=p,o.menu.serviceType=null,o.menu.breakfastType="standard"),we(!0),je()})}),document.querySelectorAll("[data-menu-service]").forEach(u=>{u.addEventListener("click",()=>{const p=u.dataset.menuService==="breakfast"?"breakfast":"day";o.menu.serviceType===p?o.menu.serviceType=null:o.menu.serviceType=p,o.menu.serviceType!=="breakfast"&&(o.menu.breakfastType="standard"),we(!0),je()})});const t=document.getElementById("menuBreakfastNight"),n=()=>{!t||t.disabled||(o.menu.breakfastType=t.checked?"nightstop":"standard",we(!0),je())};t==null||t.addEventListener("change",n);const a=document.getElementById("lblMenuBreakfastType");t&&a&&Wt(a,()=>{t.disabled||(t.checked=!t.checked,n())});const l=document.getElementById("labelViande"),i=document.getElementById("labelVege"),c=()=>{Le(),l&&(o.menu.manualViandeLabel=(l.value||"").trim()),i&&(o.menu.manualVegeLabel=(i.value||"").trim()),o.menu.mode==="manual"&&(o.menu.viandeLabel=o.menu.manualViandeLabel||"",o.menu.vegeLabel=o.menu.manualVegeLabel||""),B(),He()};l==null||l.addEventListener("input",c),i==null||i.addEventListener("input",c),l==null||l.addEventListener("change",c),i==null||i.addEventListener("change",c);const s=()=>{const u=Tn();o.title.date=u||"",we(!0)};(r=document.getElementById("flightDate"))==null||r.addEventListener("change",s),(d=document.getElementById("flightDateISO"))==null||d.addEventListener("change",s),we(!1),je()}const Lt=[["lblFlight","flight"],["lblDate","date"],["saveTitle","saveTitle"],["resetFlight","reset"],["lblLang","lblLang"],['#phaseChips .tab[data-phase="fiche"]',"chips_fiche"],['#phaseChips .tab[data-phase="aperitif"]',"chips_apero"],['#phaseChips .tab[data-phase="repas"]',"chips_meal"],['#phaseChips .tab[data-phase="tc"]',"chips_tc"],["#filterTabs .subtab[data-filter='all']","filter_all"],["#filterTabs .subtab[data-filter='toServe']","filter_toserve"],["#filterTabs .subtab[data-filter='later']","filter_later"],["#filterTabs .subtab[data-filter='clear']","filter_clear"],["flowTitle","flowTitle"],["flowNowTitle","flowNowTitle"],["flowLaterTitle","flowLaterTitle"],["flowClearTitle","flowClearTitle"],["hdrConfig","hdrConfig"],["lblLayout","lblLayout"],["lblRows","lblRows"],["secMenuTitle","secMenuTitle"],["menuModeAuto","menuModeAuto"],["menuModeManual","menuModeManual"],["menuDirOutbound","menuOutbound"],["menuDirInbound","menuInbound"],["menuServiceDay","menuDayService"],["menuServiceBreakfast","menuBreakfast"],["lblMenuBreakfastType","menuBreakfastNight"],["menuBreakfastStandard","menuBreakfastStandard"],["menuBreakfastNight","menuBreakfastNight"],["menuSelectionHeader","menuSelection"],["lblAutoOpt1","lblViande"],["lblAutoOpt2","lblVege"],["lblViande","lblViande"],["lblVege","lblVege"],["hdrInventaire","hdrInventaire"],["lblInvPlateaux","invPlateaux"],["lblInvViande","invViande"],["lblInvVege","invVege"],["lblInvSpecial","invSpecial"],["lblSpml","spml"],["spmlAddBtn","add"],["lblPreAdd","preAdd"],["preAddBtn","add"],["preHeader","preHeader"],["tcTitle","tcTitle"],["tcLblCat","tcDrink"],["tcCatCafe","tcCatCafe"],["tcCatDeca","tcCatDeca"],["tcCatThe","tcCatThe"],["tcCatInf","tcCatInf"],["tcCatDig","tcCatDig"],["tcCatBeer","tcCatBeer"],["tcCatChamp","tcCatChamp"],["tcCatVin","tcCatVin"],["tcCatSoft","tcCatSoft"],["tcCatChoco","tcCatChoco"],["tcGroupSoft","tcGroupSoft"],["tcGroupAlcohol","tcGroupAlcohol"],["tcGroupHot","tcGroupHot"],["tcLblAlcohol","tcLblAlcohol"],["tcLblHot","tcLblHot"],["tcLblSoft","tcLblSoft"],["tcLblWater","tcLblWater"],["tcLblJuice","tcLblJuice"],["tcLblCoca","tcLblCoca"],["tcLblMilk","tcMilk"],["tcLblSweet","tcSweet"],["tcLblTeaType","tcTeaType"],["tcLblInfusion","tcInfusion"],["tcLblDigestif","tcDigestif"],["tcLblService","tcService"],["tcLblBaileys","tcBaileys"],["tcLblBeer","tcBeer"],["tcLblChamp","tcChampagne"],["tcLblVin","tcWines"],["tcLblRed","tcRed"],["tcLblWhite","tcWhite"],["tcLblChoco","tcLblChoco"],["tcRedCH","tcCH"],["tcRedForeign","tcForeign"],["tcWhiteCH","tcCH"],["tcSoftWater","tcSoftWater"],["tcSoftJuice","tcSoftJuice"],["tcSoftCoca","tcSoftCoca"],["tcSoftSprite","tcSoftSprite"],["tcSoftTonic","tcSoftTonic"],["tcWaterStill","tcWaterStill"],["tcWaterSpark","tcWaterSpark"],["tcJuiceApple","tcJuiceApple"],["tcJuiceOrange","tcJuiceOrange"],["tcJuiceTomato","tcJuiceTomato"],["tcCocaClassic","tcCocaClassic"],["tcCocaZero","tcCocaZero"],["hdrHot","tcGroupHot"],["hdrSoft","tcGroupSoft"],["hdrAlco","tcGroupAlcohol"],["tcChocoBrand","tcChocoBrand"],["tcIceSoft","tcIce"],["tcIceSoft2","tcIce"],["tcIceSoft3","tcIce"],["tcIceSoft4","tcIce"],["tcLemonSoft","tcLemon"],["tcLemonSoft2","tcLemon"],["tcLemonSoft3","tcLemon"],["tcLemonSoft4","tcLemon"],["tcSalt","tcSalt"],["tcPepper","tcPepper"],["tcMilkCreme","tcMilkCreme"],["tcMilkAvoine","tcMilkAvoine"],["tcMilkLait","tcMilkLait"],["tcMilkNone","tcMilkNone"],["tcSweetSugar","tcSweetSugar"],["tcSweetSub","tcSweetSub"],["tcSweetNone","tcSweetNone"],["tcTeaEnglish","tcTeaEnglish"],["tcTeaVert","tcTeaVert"],["tcTeaMenthe","tcTeaMenthe"],["tcInfCam","tcInfCam"],["tcDigJW","tcDigJW"],["tcDigJB","tcDigJB"],["tcDigCognac","tcDigCognac"],["tcDigBaileys","tcDigBaileys"],["tcPur","tcPur"],["tcRocks","tcRocks"],["tcIce","tcIce"],["tcBeerQ","tcBeerQ"],["tcBeerC","tcBeerC"],["tcBeerL","tcBeerL"],["tcChampagne","tcChampagne"],["tcWines","tcWines"],["tcRed","tcRed"],["tcWhite","tcWhite"],["tcNotes","tcNotes"],["tcLblIceGen","tcIce"],["tcIceGen","tcIce"],["tcIceChamp","tcIce"],["tcIceVin","tcIce"],["mdTCNotes","mdTCNotes"],["mdMealDrinkNotes","mealDrinkNotes"],["serveTC","serveTC"],["serveMealDrink","serveMealDrink"],["lgSleep","lgSleep"],["lgLater","lgLater"],["lgServed","lgServed"],["lgInfant","lgInfant"],["lgChild","lgChild"],["lgTogether","lgTogether"],["lgclear","lgclear"],["secHistoryTitle","secHistoryTitle"],["remindersTitle","remindersTitle"],["histLbl","histViewLabel"],["histLblSeat","histLblSeat"],["histLblType","histLblType"],["histAscLbl","histAscLbl"],["#histType option[value='mealDrinkServed']","histType_mealDrinkServed"],["histModeAll","histScope_all"],["histModeSeat","histScope_seat"],["histModeType","histScope_type"],["#histType option[value='apServed']","histType_apServed"],["#histType option[value='tcServed']","histType_tcServed"],["#histType option[value='mealServed']","histType_mealServed"],["#histType option[value='apCanceled']","histType_apCanceled"],["#histType option[value='serviceCanceled']","histType_serviceCanceled"],["#histType option[value='trayCleared']","histType_trayCleared"],["#histType option[value='trayUncleared']","histType_trayUncleared"],["#histType option[value='reset']","histType_reset"],["#histType option[value='text']","histType_text"],["#histType option[value='seatMoveStart']","histType_seatMoveStart"],["#histType option[value='seatMoved']","histType_seatMoved"],["#histType option[value='seatSwapped']","histType_seatSwapped"],["closeModal","close"],["mdPass","mdPass"],["mdOcc","mdOcc"],["mdSleepTxt","mdSleepTxt"],["mdType","mdType"],["mdAdult","mdAdult"],["mdChild","mdChild"],["mdInfant","mdInfant"],["mdStatus","mdStatus"],["mdLang","mdLang"],["mdLater","mdLater"],["mdLaterSet","mdLaterSet"],["mdLaterCancel","mdLaterCancel"],["mdLaterCustom","mdLaterCustom"],["mdNotes","mdNotes"],["mdAperoNotes","mdAperoNotes"],["serveAperitif","serveAperitif"],["mdMeal","mdMeal"],["mdNormal","mdNormal"],["optNormalMeat","optNormalMeat"],["optNormalVeg","optNormalVeg"],["optNormalTray","optNormalTray"],["mdSpml","mdSpml"],["mdPre","mdPre"],["serveMeal","serveMeal"],["optStatusOther","optStatusOther"],["movePaxBtn","moveSeat"],["mdEatTogether","eatTogether"],["mdEatWith","mdEatWith"],["btnClearEat","clear"]];function ro(){if(!document.getElementById("appLegal")){const e=document.createElement("div");e.id="appLegal",e.style.position="fixed",e.style.bottom="6px",e.style.right="10px",e.style.fontSize="12px",e.style.color="var(--muted)",e.style.background="var(--panel)",e.style.padding="4px 8px",e.style.border="1px solid var(--grid)",e.style.borderRadius="8px",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML=' 2025 Â© Nicolas Debesse | DEBN | 47762  <span id="legalRights"></span>',document.body.appendChild(e)}}function et(){var $,fe,he,ie,ce,be;const e=o.config.lang||"EN";ro();const t=document.getElementById("legalRights");t&&(t.textContent=(v[e]||v.EN).rights||"All rights reserved");const n=v[e]||v.EN,a=document.getElementById("clientView");a&&(a.textContent=o.clientView?" "+n.crew:" "+n.client);const l=document.getElementById("flightNo");if(l&&(l.placeholder=n.flightPlaceholder||"e.g. LX2810"),Array.isArray(typeof Lt<"u"?Lt:[])){for(let T=0;T<Lt.length;T++){const C=Lt[T];if(!C||C.length<2)continue;const N=C[0],W=C[1],J=document.getElementById("m_eatWith");J&&!J.title&&(J.title=n.mdEatWithPh||"e.g. 12B");const ee=N&&(N.startsWith("#")||N.startsWith("."))?document.querySelector(N):document.getElementById(N);ee&&n[W]!==void 0&&(ee.textContent=n[W])}gt==null||gt()}(function(){const C=v[o.config.lang||"EN"]||v.EN;["sleepMealBtn","sleepAperoBtn","sleepTCBtn","sleepModalBtn"].forEach(J=>{const ee=document.getElementById(J);ee&&(ee.title=C.mdSleepTxt||"Sleep")});const N=[["saveSnapshot","saveTitle"],["exportJSON","exportJSON"],["importJSON","importJSON"],["exportPNG","exportPNG"],["resetFlight","reset"]],W={saveSnapshot:String.fromCodePoint(128190),importJSON:String.fromCodePoint(128193)};for(const[J,ee]of N){const Fe=document.getElementById(J);if(Fe&&C[ee]){const P=W[J]||"",q=C[ee];Fe.textContent=P?`${P} ${q}`:q,Fe.setAttribute("aria-label",q),Fe.title=q}}})(),document.querySelectorAll("[data-i18n]").forEach(T=>{const C=T.getAttribute("data-i18n");C&&n[C]!==void 0&&(T.textContent=n[C])});const i=document.getElementById("menuManualHint");i&&(i.textContent=n.menuManualHint!==void 0?n.menuManualHint:""),pt(),function(){const C=v[o.config.lang||"EN"]||v.EN,N={drink_coffee:()=>C.tcCatCafe||"Coffee",drink_decaf:()=>C.tcCatDeca||"Decaf",drink_tea:()=>C.tcCatThe||"Tea",drink_caotina:()=>C.tcChocoBrand||C.tcCatChoco||"Caotina",drink_water:()=>C.tcSoftWater||C.tcWater||"Water",drink_cola:()=>C.tcSoftCoca||C.tcCola||"Cola",drink_juice:()=>C.tcSoftJuice||C.tcJuice||"Juice",drink_sprite:()=>C.tcSoftSprite||"Sprite",drink_tonic:()=>C.tcSoftTonic||"Tonic",drink_champagne:()=>C.tcChampagne||"Champagne",drink_red:()=>C.tcWines&&C.tcRed?`${C.tcWines}  ${C.tcRed}`:"Red wine",drink_white:()=>C.tcWines&&C.tcWhite?`${C.tcWines}  ${C.tcWhite}`:"White wine",drink_beer:()=>C.tcBeer||"Beer",drink_cocktail:()=>C.tcCocktail||"Cocktail",drink_digestif:()=>C.tcDigestif||"Digestif"};document.querySelectorAll("#drinkGrid .pill-cap[data-i18n-cap]").forEach(W=>{const J=W.getAttribute("data-i18n-cap"),ee=(N[J]?N[J]():W.textContent||"").trim();ee&&(W.textContent=ee)})}();{const T=v[o.config.lang||"EN"]||v.EN,C=(N,W)=>{const J=document.querySelector(N);J&&(J.title=W,J.setAttribute("aria-label",W))};C('#hotRow .pill.big[data-sub="cafe"]',T.tcCatCafe||"Coffee"),C('#hotRow .pill.big[data-sub="deca"]',T.tcCatDeca||"Decaf"),C('#hotRow .pill.big[data-sub="the"]',T.tcCatThe||"Tea"),C('#hotRow .pill.big[data-sub="chocolat"]',T.tcCatChoco||"Caotina"),C('#softRow .pill.big[data-sub="eau"]',T.tcSoftWater||T.tcWater||"Water"),C('#softRow .pill.big[data-sub="coca"]',T.tcCola||"Cola"),C('#softRow .pill.big[data-sub="jus"]',T.tcSoftJuice||T.tcJuice||"Juice"),C('#softRow .pill.big[data-sub="sprite"]',T.tcSoftSprite||"Sprite"),C('#softRow .pill.big[data-sub="tonic"]',T.tcSoftTonic||"Tonic"),C('#alcoRow .pill.big[data-sub="champagne"]',T.tcChampagne||"Champagne"),C('#alcoRow .pill.big[data-sub="biere"]',T.tcBeer||"Beer"),C('#alcoRow .pill.big[data-sub="vin_rouge"]',T.tcWines&&T.tcRed?`${T.tcWines}  ${T.tcRed}`:"Red wine"),C('#alcoRow .pill.big[data-sub="vin_blanc"]',T.tcWines&&T.tcWhite?`${T.tcWines}  ${T.tcWhite}`:"White wine"),C('#alcoRow .pill.big[data-sub="digestif"]',T.tcDigestif||"Digestif")}const c=document.getElementById("m_tcNotes");c&&(c.placeholder=n.tcNotesPlaceholder||"e.g. Long coffee, sugar");const s=document.getElementById("m_notes");s&&(s.placeholder=n.passengerNotesPlaceholder||"e.g., DE only, no nuts");const r=document.getElementById("m_mealDrinkNotes");r&&(r.placeholder=n.mealDrinkNotesPlaceholder||"e.g. sparkling water, white wine, peanuts");const d=document.getElementById("m_eatWith");d&&(d.placeholder=n.mdEatWithPh||"e.g. 12B");const u=document.getElementById("labelViande"),p=document.getElementById("labelVege");u&&(u.placeholder=n.meatPlaceholder||"e.g., Beef in red-wine sauce"),p&&(p.placeholder=n.vegPlaceholder||"e.g., Vegetarian lasagna");const y=document.getElementById("filterTabs");if(y){const T=e==="FR"?"Filtrer":e==="DE"?"Filtern":"Filter";y.setAttribute("aria-label",T),y.setAttribute("title",T)}const g=document.getElementById("layoutButtons");if(g){const T=e==="FR"?"Type d'appareil":e==="DE"?"Flugzeugtyp":"Aircraft type";g.setAttribute("title",T),g.setAttribute("aria-label",T)}$t();const h=document.getElementById("legendToggle");if(h){const T=n.legendShow||"Show legend",C=n.legendHide||"Hide legend";h.dataset.labelShow=T,h.dataset.labelHide=C;const N=Qe()?C:T;h.textContent=N,h.title=N,h.setAttribute("aria-label",N)}typeof $e=="function"&&$e();const m=document.getElementById("spmlAddCode");m&&(m.title=e==="FR"?"Ajouter code SPML":e==="DE"?"SPML-Code hinzufï¿½gen":"Add SPML code");const k=document.getElementById("preAddCode");if(k){const T=n.preAddSelectPlaceholder||(e==="FR"?"Choisir un code":e==="DE"?"Code auswaehlen":"Choose a code");k.title=T,k.setAttribute("aria-label",T)}const w=document.getElementById("preAddLabel");w&&(w.placeholder=n.preAddPlaceholder||"e.g., Gluten-free pasta");const b=document.querySelector(".later-btn[data-value='custom']");if(b){const T=(n.mdLaterCustomBtn||"Custom").trim()||"Custom";b.textContent=T}const S=document.getElementById("resetFlight");if(S){const T=(n.reset??S.textContent??"").trim();S.dataset.defaultLabel=T,S.dataset.resetArmed!=="true"&&(S.textContent=T)}document.documentElement.lang=e.toLowerCase();const E=document.getElementById("legalRights");E&&(E.textContent=n.rights||"All rights reserved");const _=document.getElementById("m_notes");_&&(_.placeholder=n.passengerNotesPlaceholder||"e.g., DE only, no nuts");const M=document.getElementById("m_aperoNotes");M&&(M.placeholder=n.aperoNotesPlaceholder||"e.g. Sparkling water, white wine, peanuts");const A=document.getElementById("histSeat");A&&(A.placeholder=n.histSeatPlaceholder||"e.g., 3A"),typeof ue=="function"&&ue(),typeof window._rerenderDatepickerLang=="function"&&window._rerenderDatepickerLang();const K=document.getElementById("flightDate");K&&(o.config.lang==="FR"?K.placeholder="JJ/MM/AAAA":o.config.lang==="DE"?K.placeholder="TT.MM.JJJJ":K.placeholder="MM, DD, YYYY"),ht(),uo(),mt();try{($=document.getElementById("tc_soft_type"))==null||$.dispatchEvent(new Event("change")),(fe=document.getElementById("tc_cocktail_type"))==null||fe.dispatchEvent(new Event("change")),(he=document.getElementById("tc_beer"))==null||he.dispatchEvent(new Event("change")),(ie=document.getElementById("tc_vin_rouge"))==null||ie.dispatchEvent(new Event("change")),(ce=document.getElementById("tc_vin_blanc"))==null||ce.dispatchEvent(new Event("change")),We==null||We(),D();try{((be=document.getElementById("modalBack"))==null?void 0:be.style.display)==="flex"&&typeof Ge=="function"&&Ge()}catch{}}catch(T){console.warn("Post-i18n drinks refresh:",T)}try{const T=document.getElementById("modalBack");!!T&&(T.style.display==="flex"||T.style.display==="")&&document.getElementById("drinkGrid")&&(vt(),Z(),Y(),Ht(),D(),typeof f<"u"&&f&&(o.phase==="tc"?Ce==null||Ce(f.key):o.phase==="repas"&&(Ee==null||Ee(f.key))))}catch(T){console.warn("Drink grid rebind after i18n failed:",T)}(()=>{const T=document.getElementById("langActive");if(T){const C={EN:String.fromCodePoint(127468,127463),DE:String.fromCodePoint(127465,127466),FR:String.fromCodePoint(127467,127479)},N=(o.config.lang||"EN").toUpperCase(),W=C[N]||String.fromCodePoint(127987);T.textContent=W,T.setAttribute("aria-label",N),T.title=N}})()}function O(){const e=I("#seatgrid");e.classList.toggle("bulk-occupy-mode",!!H),e.innerHTML="";const t=o.config.rowsBiz||0,n=ao();e.style.gridTemplateColumns="40px minmax(60px,1fr) minmax(60px,1fr) minmax(60px,1fr) 28px "+n.map(()=>"minmax(60px,1fr)").join(" "),["","F","E","D",""].concat(n).forEach(l=>{const i=document.createElement("div");i.style.textAlign="center",i.style.color="var(--muted)",i.style.fontSize="12px",i.textContent=l,e.appendChild(i)});for(let l=t;l>=1;l--){const i=document.createElement("div");i.className="row-label",i.textContent=l,e.appendChild(i),["F","E","D"].forEach(s=>e.appendChild(Vn(l,s)));const c=document.createElement("div");c.className="aisle",e.appendChild(c),n.forEach(s=>e.appendChild(Vn(l,s)))}ue()}function Vn(e,t){var p,y,g,h,m;const n=pe(e,t),a=document.createElement("div"),l=Sn(e,t);a.className="seat bus",a.dataset.seatKey=l,n.occupied&&a.classList.add("occupied"),n.sleep&&a.classList.add("sleeping"),H&&Te.has(l)&&a.classList.add("bulk-picked");const i=v[o.config.lang||"EN"]||v.EN,c=document.createElement("div");c.className="mini";const s=document.createElement("div");s.className="dot",n.status==="FTL"?s.classList.add("ftl"):n.status==="SEN"?s.classList.add("sen"):n.status==="HON"?s.classList.add("hon"):n.status==="VIP"?s.classList.add("vip"):n.status==="FCL"?s.classList.add("fcl"):n.status==="PAD"&&s.classList.add("pad"),c.appendChild(s),a.appendChild(c);const r=document.createElement("div");if(r.className="seat-label",r.textContent=e+t,a.appendChild(r),!((p=n==null?void 0:n.served)!=null&&p.trayCleared)){const k=document.createElement("div");k.className="meal-tag";const w=n.spml||n.preLabel?null:n.normalMeal==="viande"?"1":n.normalMeal==="vege"?"2":n.normalMeal==="plateau"?"":null;let b=null,S=!1;n.spml?(b=n.spml,S=!0):n.preLabel?(b="PRE",S=!0):w?b=w:(y=n==null?void 0:n.served)!=null&&y.mealNone&&(b="Ã˜"),b&&(k.textContent=b,S&&k.classList.add("vertical"),a.appendChild(k))}const d=document.createElement("div");d.className="iconbar",n.type==="infant"&&Zt(d,"flag-infant",i.lgInfant||i.mdInfant||"Infant","INF"),n.type==="child"&&Zt(d,"flag-child",i.lgChild||i.mdChild||"Child","CHD"),n!=null&&n.served&&n.served.trayCleared,n.serveLaterAt&&Zt(d,"flag-later",i.lgLater||i.mdLater||"Serve later","ðŸ›Žï¸"),a.appendChild(d),Wt(a,k=>{o.clientView||(k.preventDefault(),k.stopPropagation(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),!jn(l)&&mn(l))}),a.addEventListener("pointerup",k=>{o.clientView||k.pointerType==="mouse"&&(jn(l)||mn(l))},{passive:!0});const u=oo();if(u==="toServe"){const k=o.phase==="aperitif"?"aperitif":o.phase==="tc"?"tc":"meal",w=!!((g=n==null?void 0:n.served)!=null&&g[k]);a.style.opacity=!n.occupied||w?.25:1}else if(u==="sleeping")a.style.opacity=n.sleep?1:.2;else if(u==="later")a.style.opacity=n.serveLaterAt?1:.2;else if(u==="clear"){const k=!!((h=n==null?void 0:n.served)!=null&&h.meal)&&!((m=n==null?void 0:n.served)!=null&&m.trayCleared);a.style.opacity=k?1:.2}else a.style.opacity=1;return a}function ne(){var s,r;const e=I("#history");if(!e)return;e.innerHTML="";const t=v[o.config.lang||"EN"],n=_n(),a=(((s=document.getElementById("histSeat"))==null?void 0:s.value)||"").trim().toUpperCase().replace(/\s+/g,""),l=((r=document.getElementById("histType"))==null?void 0:r.value)||"",i=!!o.config.histAsc;let c=Array.isArray(o.history)?o.history.slice():[];n==="seat"&&a?c=c.filter(d=>d&&typeof d=="object"&&(d.seat||"").toUpperCase()===a):n==="type"&&l&&(c=c.filter(d=>d&&typeof d=="object"&&(d.type===l||l==="mealDrinkServed"&&d.type==="tcServed"&&d.ctx==="repas")&&!(l==="tcServed"&&d.ctx==="repas"))),i&&(c=c.slice().reverse());for(const d of c){const u=document.createElement("div");if(typeof d=="string"){u.textContent=d,e.appendChild(u);continue}const p=new Date(d.ts||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});let y="";switch(d.type){case"trayCleared":y=`${v[o.config.lang||"EN"].clearTray} - ${d.seat}`;break;case"trayUncleared":y=`${v[o.config.lang||"EN"].undoClearTray} - ${d.seat}`;break;case"apServed":{const g=d.seat,h=le(d.ap,t,o.config.lang)||"",m=d.notes?`  ${d.notes}`:"";y=`${t.histApServed} ${g}${h?" - "+h:""}${m}`;break}case"apOrdered":{const g=d.seat,h=le(d.ap,t,o.config.lang)||"",m=d.notes?`  ${d.notes}`:"";y=`${t.histApOrdered||"Aperitif ordered at"} ${g}${h?" - "+h:""}${m}`;break}case"tcServed":{const g=d.seat,h=le(d.ap,t,o.config.lang)||"",m=d.notes?`  ${d.notes}`:"";y=`${d.ctx==="repas"?t.histMealDrinkServed||"Meal drinks served at":t.histTcServed||"Tea & coffee served at"} ${g}${h?" - "+h:""}${m}`;break}case"tcOrdered":{const g=d.seat,h=le(d.ap,t,o.config.lang)||"",m=d.notes?`  ${d.notes}`:"";y=`${d.ctx==="repas"?t.histMealDrinkOrdered||"Meal drinks ordered at":t.histTcOrdered||"Tea & coffee ordered at"} ${g}${h?" - "+h:""}${m}`;break}case"apCanceled":y=`${t.histApCanceled} ${d.seat}`;break;case"mealServed":{const g=d.label==="__TRAY__"?t.trayShort||"Tray":d.label||"";y=`${t.histMealServed} ${d.seat}${g?" - "+g:""}`;break}case"serviceCanceled":y=`${t.histCanceled} ${d.seat}`;break;case"reset":y=t.resetDone;break;case"titleSet":{const g=d.flightNo||"",h=yt(d.dateISO||"")||d.dateISO||"";y=`${t.histTitleSet} ${g}${h?"  "+h:""}`;break}case"seatMoveStart":y=`${t.moveSeat} - ${d.from}`;break;case"seatMoved":y=`${d.from} -> ${d.to} - ${t.moved}`;break;case"seatSwapped":y=`${d.a} <-> ${d.b} - ${t.swapped}`;break;case"text":default:y=d.text||""}u.textContent=`[${p}] ${y}`,e.appendChild(u)}}function uo(){const e=v[o.config.lang||"EN"]||v.EN,t=document.getElementById("secHistoryTitle");if(t){const a=(e.secHistoryTitle||"History").replace(/\s*\(.*\)\s*$/,"").trim(),l=o.config.histAsc?e.histOldest||" (oldest on top)":e.histNewest||" (newest on top)";t.textContent=a+" "+l}const n=document.getElementById("histOrderBtn");if(n){const a=!!o.config.histAsc,l=a?e.histOldestBtn:e.histNewestBtn,c=`${a?"â¬‡ï¸":"â¬†ï¸"} ${l}`;n.textContent=c,n.title=c,n.setAttribute("aria-label",c)}}function tt(){const e=document.getElementById("histSeat");if(!e)return;const t=(e.value||"").trim().toUpperCase();e.innerHTML='<option value=""></option>';const n=Object.keys(o.seats||{}).sort();for(const a of n){const l=o.seats[a];if(l&&l.occupied){const i=document.createElement("option");i.value=a,i.textContent=a,e.appendChild(i)}}[...e.options].some(a=>a.value===t)&&(e.value=t)}function _n(){return mo||"all"}function fo(e){mo=e,Array.from(document.querySelectorAll(".hist-mode-switch .btn")).forEach(n=>{const a=(n.dataset.mode||"all")===e;n.classList.toggle("active",a),n.setAttribute("aria-pressed",a?"true":"false")}),fl()}function fl(){const e=_n(),t=document.getElementById("histSeatWrap"),n=document.getElementById("histTypeWrap");t&&(t.style.display=e==="seat"?"inline-flex":"none"),n&&(n.style.display=e==="type"?"inline-flex":"none"),e==="seat"&&tt(),ne()}document.querySelectorAll(".hist-mode-switch .btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.mode||"all";fo(t)})});var ta;(ta=document.getElementById("histSeat"))==null||ta.addEventListener("change",ne);var na;(na=document.getElementById("histType"))==null||na.addEventListener("change",ne);var aa;(aa=document.getElementById("histOrderBtn"))==null||aa.addEventListener("click",()=>{o.config.histAsc=!o.config.histAsc,B(),ne(),uo()});fo("all");function X(){var u,p,y;const e=o.config.lang||"EN";o.inventory.hot_special=al();const t=e==="FR"?"Diminuer":e==="DE"?"Reduzieren":"Decrease",n=e==="FR"?"Augmenter":e==="DE"?"Erhï¿½hen":"Increase",a=(g,h)=>{const m=document.querySelector(`[data-badge="${g}"]`);m&&(m.textContent=h,m.className="badge",m.classList.add(h<=0?"zero":h<=2?"low":"ok"))},l=(g,h)=>{g.forEach(m=>{m&&(m.style.display=h?"":"none")})};a("plateaux",o.inventory.plateaux),a("hot_viande",o.inventory.hot_viande),a("hot_vege",o.inventory.hot_vege),a("hot_special",o.inventory.hot_special);const i=ol();a("hot_pre",i),l([document.getElementById("lblInvSpecial"),((u=document.querySelector('[data-badge="hot_special"]'))==null?void 0:u.parentElement)||null,document.getElementById("spmlInv")],(o.inventory.hot_special||0)>0),l([document.getElementById("preHeader"),((p=document.querySelector('[data-badge="hot_pre"]'))==null?void 0:p.parentElement)||null,document.getElementById("preInv")],i>0);const c=document.querySelector('[data-badge="hot_pre"]');c&&(c.title=e==="FR"?"Somme des prÃ©commandes":e==="DE"?"Summe Vorbestellungen":"Pre-order sum");const s=document.querySelector('[data-badge="hot_special"]');s&&(s.title=e==="FR"?"Somme des SPML":e==="DE"?"Summe SPML":"SPML sum");const r=I("#spmlAddCode");if(r){const g=(r==null?void 0:r.value)||"",h=e==="FR"?"Choisir":e==="DE"?"Waehlen":"Choose";r.innerHTML=`<option value="">${h}</option>`;for(const m of kt){const k=document.createElement("option");k.value=m,k.textContent=m,r.appendChild(k)}[...r.options].some(m=>m.value===g)&&(r.value=g)}const d=I("#preAddCode");if(d){const g=(d==null?void 0:d.value)||"",h=(((y=v[e])==null?void 0:y.preAddSelectPlaceholder)||"").trim()||(e==="FR"?"Choisir un code":e==="DE"?"Code auswaehlen":"Choose a code");d.innerHTML=`<option value="">${h}</option>`;for(const m of Uo){const k=document.createElement("option");k.value=m,k.textContent=m,d.appendChild(k)}[...d.options].some(m=>m.value===g)&&(d.value=g)}ml(t,n),pl(t,n)}function ml(e,t){const n=I("#spmlInv");if(!n)return;n.innerHTML="";const a=Object.entries(o.inventory.spml||{}).filter(([,l])=>(l||0)>0).sort((l,i)=>l[0].localeCompare(i[0]));for(const[l,i]of a){const c=i||0,s=document.createElement("div");s.textContent=l,n.appendChild(s);const r=document.createElement("div");r.className="row";const d=document.createElement("button");d.type="button",d.className="btn inv-minus",d.setAttribute("aria-label",e),d.addEventListener("click",()=>Kt("spml",l,-1));const u=document.createElement("div");u.className="badge",u.dataset.badge="spml_"+l,u.textContent=c;const p=document.createElement("button");p.type="button",p.className="btn inv-plus",p.setAttribute("aria-label",t),p.addEventListener("click",()=>Kt("spml",l,1)),r.append(d,u,p),n.appendChild(r)}}function pl(e,t){const n=I("#preInv");if(!n)return;n.innerHTML="";const a=Object.entries(o.inventory.pre||{}).filter(([l])=>l&&l.trim().length>0).sort((l,i)=>l[0].localeCompare(i[0]));for(const[l,i]of a){const c=i||0,s=document.createElement("div");s.textContent=l,n.appendChild(s);const r=document.createElement("div");r.className="row";const d=document.createElement("button");d.type="button",d.className="btn inv-minus",d.setAttribute("aria-label",e),d.disabled=c<=0,d.addEventListener("click",()=>Kt("pre",l,-1));const u=document.createElement("div");u.className="badge",u.dataset.badge="pre_"+l,u.textContent=c;const p=document.createElement("button");p.type="button",p.className="btn inv-plus",p.setAttribute("aria-label",t),p.addEventListener("click",()=>Kt("pre",l,1)),r.append(d,u,p),n.appendChild(r)}}function Kt(e,t,n){e==="spml"?o.inventory.spml[t]=Math.max(0,(o.inventory.spml[t]||0)+n):e==="pre"?o.inventory.pre[t]=Math.max(0,(o.inventory.pre[t]||0)+n):o.inventory[t]=Math.max(0,(o.inventory[t]||0)+n),B()}const gl={viande:"hot_viande",vege:"hot_vege"};function yl(e,t){const n=v[o.config.lang||"EN"];(!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null,trayReserved:!1});const a=e.normalMeal||"",l=t&&t!=="plateau"?gl[t]:null;if(t===a)return a!=="plateau"&&e.alloc.normalKey&&(Rt(e,e.alloc.normalKey),e.alloc.normalKey=null),a==="plateau"&&e.alloc.trayReserved&&(o.inventory.plateaux=(o.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),e.normalMeal="",B(),X(),!0;if(e.alloc.spmlCode&&(Ln(e,e.alloc.spmlCode),e.spml="",e.alloc.spmlCode=null),e.alloc.preLabel&&(Bn(e,e.alloc.preLabel),e.preLabel="",e.alloc.preLabel=null),e.alloc.normalKey&&(Rt(e,e.alloc.normalKey),e.alloc.normalKey=null),a==="plateau"&&e.alloc.trayReserved&&(o.inventory.plateaux=(o.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),t==="plateau")return(o.inventory.plateaux||0)<=0?(alert(n.alertNoTrays||"No more trays."),!1):(o.inventory.plateaux--,e.alloc.trayReserved=!0,e.normalMeal="plateau",B(),X(),!0);if(l){if((o.inventory[l]||0)<=0){const i=t==="viande"?n.lblViande:t==="vege"?n.lblVege:t==="plateau"?n.trayShort||"Tray":t;return alert(n.alertStock+" "+i+"."),!1}return o.inventory[l]--,e.alloc.normalKey=l,e.normalMeal=t,B(),X(),!0}return e.normalMeal="",B(),X(),!0}function Hn(e,t){const n=v[o.config.lang||"EN"];if((!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null}),t&&(t=t.trim()),e.alloc.trayReserved&&(o.inventory.plateaux=(o.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),e.normalMeal==="plateau"&&(e.normalMeal=""),e.alloc.normalKey&&(Rt(e,e.alloc.normalKey),e.normalMeal="",e.alloc.normalKey=null),e.alloc.preLabel&&(Bn(e,e.alloc.preLabel),e.preLabel="",e.alloc.preLabel=null),e.alloc.spmlCode&&(Ln(e,e.alloc.spmlCode),e.spml="",e.alloc.spmlCode=null),t){if((o.inventory.spml[t]||0)<=0)return alert(t+" "+n.alertDepleted),!1;o.inventory.spml[t]--,e.alloc.spmlCode=t,e.spml=t,B(),X()}return!0}function hl(e,t){const n=v[o.config.lang||"EN"];if((!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null}),t&&(t=t.trim()),e.alloc.trayReserved&&(o.inventory.plateaux=(o.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),e.normalMeal==="plateau"&&(e.normalMeal=""),e.alloc.normalKey&&(Rt(e,e.alloc.normalKey),e.normalMeal="",e.alloc.normalKey=null),e.alloc.spmlCode&&(Ln(e,e.alloc.spmlCode),e.spml="",e.alloc.spmlCode=null),e.alloc.preLabel&&(Bn(e,e.alloc.preLabel),e.preLabel="",e.alloc.preLabel=null),t){if((o.inventory.pre[t]||0)<=0)return alert(t+" "+n.alertDepleted),!1;o.inventory.pre[t]--,e.alloc.preLabel=t,e.preLabel=t,B(),X()}return!0}function Rt(e,t){o.inventory[t]=(o.inventory[t]||0)+1,B()}function Ln(e,t){o.inventory.spml[t]=(o.inventory.spml[t]||0)+1,B()}function Bn(e,t){o.inventory.pre[t]=(o.inventory.pre[t]||0)+1,B()}function Oe(){if(!f)return;const e=f.data,t=!!(e.served&&e.served.mealNone),n=!!(e.served&&e.served.meal),a=document.getElementById("m_normalMealValue"),l=((a==null?void 0:a.value)||e.normalMeal||"").trim();a&&(a.value=l);const i=document.getElementById("m_spmlValue");i&&(i.value=e.spml||"");const c=I("#m_pre");c&&(c.value=e.preLabel||"");const s=!!e.spml||!!e.preLabel||["viande","vege","plateau"].includes(l),r=I("#serveMeal");r&&(r.disabled=!(n||s),r.title=r.disabled?"Choisissez un plat (normal, SPML ou prcommande) pour servir":"");const d=v[o.config.lang||"EN"];r&&(r.disabled=!(n||s),r.title=r.disabled?"Choisissez un plat (normal, SPML ou prcommande) pour servir":"",r.textContent=n&&!t?d.cancelService||"Cancel service":d.serveMeal||"Serve main",r.classList.toggle("is-hot",n||s),r.setAttribute("aria-pressed",n&&!t?"true":"false"));const u=I("#serveMealNone");u&&(u.disabled=s,u.setAttribute("aria-disabled",s?"true":"false"),u.classList.toggle("disabled",s),u.style.pointerEvents=s?"none":"",u.classList.toggle("is-hot",t),u.setAttribute("aria-pressed",t?"true":"false"),u.setAttribute("data-variant","ghost"),u.title=u.disabled?"":u.title);const p=I("#clearTrayBtn");if(p){const y=!!(e.served&&e.served.trayCleared);p.classList.toggle("is-hot",y),p.setAttribute("aria-pressed",y?"true":"false"),p.setAttribute("data-variant","ghost")}gn(document.getElementById("drinkGrid"))}let f=null,Xe=[],ke=null;const Yt=48;var mo="all";function po(e){const t=/^(\d+)([A-Z]+)$/i.exec(e||"");return t?{row:parseInt(t[1],10),col:t[2].toUpperCase()}:null}function bl(e){const t=po(e);t&&ge(t.row,t.col)}function un(e){if(!f)return;const t=Xe.indexOf(f.key);if(t===-1)return;const n=Xe[t+e];n&&bl(n)}function ot(){const e=o.seats||{},t=["A","B","C","D","E","F"],n=[];for(const p of Object.keys(e)){const y=po(p);!y||!(e[p]||{}).occupied||n.push({key:p,parts:y})}n.sort((p,y)=>{if(p.parts.row===y.parts.row){const g=t.indexOf(p.parts.col),h=t.indexOf(y.parts.col);return g!==-1&&h!==-1?g-h:g!==-1?-1:h!==-1?1:p.parts.col.localeCompare(y.parts.col)}return p.parts.row-y.parts.row}),Xe=n.map(p=>p.key);const a=(f==null?void 0:f.key)||"",l=document.getElementById("seatNav"),i=document.getElementById("seatNavPrev"),c=document.getElementById("seatNavNext"),s=document.getElementById("seatNavCurrent");s&&(s.textContent=a||"--");const r=Xe.indexOf(a),d=r>0,u=r!==-1&&r<Xe.length-1;l&&l.setAttribute("data-empty",Xe.length?"false":"true"),i&&(i.disabled=!d,i.setAttribute("aria-disabled",(!d).toString()),i.onclick=()=>un(-1)),c&&(c.disabled=!u,c.setAttribute("aria-disabled",(!u).toString()),c.onclick=()=>un(1))}function vl(e,t){return e==="viande"?t.optNormalMeat||"Option 1":e==="vege"?t.optNormalVeg||"Option 2":e==="plateau"?t.optNormalTray||"Tray (no casserole)":e||""}function lt(e){const t=document.getElementById("m_normalMeal"),n=document.getElementById("m_normalMealValue");if(!t)return;const a=v[o.config.lang||"EN"],l=((e==null?void 0:e.normalMeal)||"").trim();n&&(n.value=l),t.innerHTML="";const i=[{value:"viande",inventoryKey:"hot_viande"},{value:"vege",inventoryKey:"hot_vege"},{value:"plateau",inventoryKey:"plateaux"}];for(const c of i){const s=document.createElement("button");s.type="button",s.className="meal-card",s.setAttribute("role","radio"),s.dataset.value=c.value;const r=document.createElement("div");r.className="meal-card__row";const d=document.createElement("div");d.className="meal-card__name",d.textContent=vl(c.value,a);const u=c.value!=="plateau";let p=0;if(c.inventoryKey&&(p=Math.max(0,o.inventory[c.inventoryKey]||0)),r.appendChild(d),u){const h=document.createElement("div");h.className="meal-card__meta";const m=document.createElement("span");m.className="badge",m.textContent=String(p),h.appendChild(m),r.appendChild(h)}s.appendChild(r);const y=l===c.value;y?(s.classList.add("is-selected"),s.setAttribute("aria-pressed","true")):s.setAttribute("aria-pressed","false"),!(p>0)&&!y&&s.setAttribute("aria-disabled","true"),Wt(s,()=>{if(!f)return;const h=f.data,m=h.normalMeal===c.value?"":c.value;yl(h,m)&&(B(),O(),x(),lt(h),it(h),Oe(),ot())}),t.appendChild(s)}}function it(e){const t=document.getElementById("spmlRow"),n=document.getElementById("m_spml"),a=document.getElementById("m_spmlValue");if(!t||!n)return;const l=(e==null?void 0:e.spml)||"";a&&(a.value=l),n.innerHTML="";const i=kt.map(s=>{const r=o.inventory.spml[s]||0;return{code:s,qty:r,isChosen:l===s}}).filter(s=>s.qty>0||s.isChosen);if(!i.length){t.style.display="none";return}if(i.length>3){const s=document.createElement("select");s.id="m_spml_select";const r=document.createElement("option");r.value="",r.textContent="",s.appendChild(r),i.forEach(({code:d,qty:u,isChosen:p})=>{const y=document.createElement("option");y.value=d,y.textContent=`${d} (${Math.max(0,u)})`,u<=0&&!p&&(y.disabled=!0),s.appendChild(y)}),s.value=l||"",s.addEventListener("change",()=>{if(!f)return;const d=f.data,u=s.value||"";if(!Hn(d,u)){s.value=l||"";return}B(),O(),x(),lt(d),it(d),Oe(),ot()}),n.appendChild(s)}else i.forEach(({code:s,qty:r,isChosen:d})=>{const u=document.createElement("button");u.type="button",u.className="meal-card",u.dataset.value=s,u.setAttribute("role","radio");const p=document.createElement("div");p.className="meal-card__row";const y=document.createElement("div");y.className="meal-card__name",y.textContent=s;const g=document.createElement("div");g.className="meal-card__meta";const h=document.createElement("span");h.className="badge",h.textContent=String(Math.max(0,r)),g.appendChild(h),p.appendChild(y),p.appendChild(g),u.appendChild(p),d?(u.classList.add("is-selected"),u.setAttribute("aria-pressed","true")):u.setAttribute("aria-pressed","false"),r<=0&&!d&&u.setAttribute("aria-disabled","true"),Wt(u,()=>{if(!f)return;const m=f.data,k=m.spml===s?"":s;Hn(m,k)&&(B(),O(),x(),lt(m),it(m),Oe(),ot())}),n.appendChild(u)});t.style.display=""}function kl(e){if(!f||!e.touches||e.touches.length!==1)return;const t=e.touches[0],n=e.target,a=!!(n!=null&&n.closest(".meal-header"));ke={startX:t.clientX,startY:t.clientY,time:Date.now(),mode:a?"nav":"actions"}}function Sl(e){if(!ke||!f)return;if(!e.changedTouches||e.changedTouches.length!==1){ke=null;return}const t=e.changedTouches[0],n=t.clientX-ke.startX,a=t.clientY-ke.startY,l=Math.abs(n),i=Math.abs(a);if(ke.mode==="nav"&&l>i&&l>Yt){un(n>0?-1:1),ke=null;return}if(ke.mode==="actions"){if(l>i&&l>Yt){const c=n>0?document.getElementById("serveMeal"):document.getElementById("serveMealNone");c&&!c.disabled&&c.click()}else if(a>Yt){const c=document.getElementById("clearTrayBtn");c&&!c.disabled&&c.click()}}ke=null}function El(){const e=f&&f.data?f.data:{};lt(e),it(e);const t=I("#m_pre");t.innerHTML='<option value=""></option>';for(const[n,a]of Object.entries(o.inventory.pre)){const l=(a||0)>0,i=e.preLabel===n;if(l||i){const c=document.createElement("option");c.value=n,c.textContent=`${n} (${Math.max(0,a)})`,t.appendChild(c)}}t.value=e.preLabel||""}function ge(e,t){var he,ie,ce,be,T,C,N,W,J,ee,Fe;const n=Sn(e,t);f={row:e,col:t,key:n,data:pe(e,t)};const a=document.getElementById("movePaxBtn");a&&(a.onclick=()=>{Bl(f.key),At==null||At()}),a&&(a.disabled=!f.data.occupied,a.setAttribute("aria-disabled",(!f.data.occupied).toString())),fn(),I("#modalTitle").textContent=v[o.config.lang||"EN"].seat,El(),ot(),I("#m_status").value=f.data.status,En(),I("#m_lang").value=f.data.lang||"",Cn(),I("#m_notes").value=f.data.notes||"";const l=document.getElementById("m_eatWith");if(l){l.innerHTML='<option value=""></option>';const P=f&&f.key||"",q=Object.keys(o.seats||{}).sort();for(const me of q){if(me===P)continue;const V=o.seats[me];if(V&&V.occupied){const z=document.createElement("option");z.value=me,z.textContent=me,l.appendChild(z)}}l.value=f.data.eatWith||"";const ve=v[o.config.lang||"EN"]||v.EN;l.title=ve.mdEatWithPh||"e.g. 12B"}const i=v[o.config.lang||"EN"],c=document.getElementById("mdNotes");c&&(c.textContent=i.mdNotes||"Notes");const s=document.getElementById("m_notes");s&&!s.placeholder&&(s.placeholder="ex: DE only, no nuts"),I("#m_aperoNotes").value=f.data.aperoNotes||"",I("#m_later").value="";const r=document.getElementById("laterCustomContainer");r&&r.classList.remove("active");const d=document.getElementById("m_later_time");d&&(d.value="",d.disabled=!0);const u=document.getElementById("clearTrayBtn");if(u){u.disabled=!((ie=(he=f.data)==null?void 0:he.served)!=null&&ie.meal);const P=v[o.config.lang||"EN"];u.textContent=(be=(ce=f.data)==null?void 0:ce.served)!=null&&be.trayCleared?P.undoClearTray:P.clearTray}const p=I("#m_occ_chk");p&&(p.checked=!!f.data.occupied),io(),Oe();const y=f.data.type||"normal",g=document.getElementById("m_type_adult"),h=document.getElementById("m_type_child"),m=document.getElementById("m_type_infant");g&&h&&m&&(g.checked=y==="normal",h.checked=y==="child",m.checked=y==="infant");const k=I("#m_sleep_chk");k&&(k.checked=!!f.data.sleep),fn();let w=f.data.served.aperitif?i.apLabel+": "+new Date(f.data.served.aperitif).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):i.apLabel+": ",b=f.data.served.meal?i.mealLabel+": "+new Date(f.data.served.meal).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):i.mealLabel+": ",S=f.data.served.tc?(i.chips_tc||"Tea & Coffee")+": "+new Date(f.data.served.tc).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):(i.chips_tc||"Tea & Coffee")+": ";if(f.data.served.aperitif){const P=le(f.data.apDrink,i,o.config.lang||"EN");P&&(w+="  "+P+(i.ordered?" "+i.ordered:""))}if(f.data.served.tc){const P=le(f.data.apDrink,i,o.config.lang||"EN");P&&(S+="  "+P+(i.ordered?" "+i.ordered:""))}const E=I("#m_history"),_=I("#m_history_apero"),M=I("#m_history_tc");o.phase==="aperitif"?(E&&(E.textContent=""),M&&(M.textContent=""),_&&(_.textContent=w)):o.phase==="tc"?(E&&(E.textContent=""),_&&(_.textContent=""),Ce(f.key)):(_&&(_.textContent=""),M&&(M.textContent=""),E&&(E.textContent=b),Ee(f.key));const A=o.phase;if((T=document.getElementById("mealBlock"))!=null&&T.style&&(document.getElementById("mealBlock").style.display=A==="repas"?"block":"none"),(C=document.getElementById("aperoBlock"))!=null&&C.style&&(document.getElementById("aperoBlock").style.display=A==="aperitif"?"block":"none"),(N=document.getElementById("tcServeBlock"))!=null&&N.style&&(document.getElementById("tcServeBlock").style.display=A==="tc"?"block":"none"),(W=document.getElementById("mealDrinkServeRow"))!=null&&W.style&&(document.getElementById("mealDrinkServeRow").style.display=A==="repas"?"flex":"none"),(J=document.getElementById("aperoNotesBlock"))!=null&&J.style&&(document.getElementById("aperoNotesBlock").style.display=A==="aperitif"?"block":"none"),(ee=document.getElementById("tcNotesBlock"))!=null&&ee.style&&(document.getElementById("tcNotesBlock").style.display=A==="tc"?"block":"none"),(Fe=document.getElementById("tcBlock"))!=null&&Fe.style&&(document.getElementById("tcBlock").style.display=A==="aperitif"||A==="tc"?"block":"none"),o.phase==="tc"&&f)Ce(f.key);else{const P=document.getElementById("mhTCInline");P&&(P.textContent="")}if(o.phase==="repas"&&f)Ee(f.key);else{const P=document.getElementById("mhMealDrinkInline");if(P){const q=v[o.config.lang||"EN"]||v.EN;P.textContent=(q.mealDrinkTitle||"Meal drinks")+": "}}function K(P,q){var wn;gt();const ve=document.querySelector(".modal"),me=document.querySelector(".two > div:first-child"),V=document.getElementById("rightCol"),z=document.getElementById("mealBlock"),Ie=z==null?void 0:z.querySelector(".modal-card__content"),R=document.getElementById("tcBlock"),xe=document.getElementById("aperoBlock"),Pe=document.getElementById("tcServeBlock");let F=document.getElementById("rightNotes");if(Xo(),el(P),F||(F=document.createElement("div"),F.id="rightNotes",V==null||V.insertAdjacentElement("afterbegin",F)),R){const j=document.getElementById("aperoNotesBlock"),U=document.getElementById("tcNotesBlock");j&&j.parentElement!==R&&R.appendChild(j),U&&U.parentElement!==R&&R.appendChild(U)}xe&&xe.parentElement!==R&&(R==null||R.appendChild(xe)),Pe&&Pe.parentElement!==R&&(R==null||R.appendChild(Pe));const rt=document.getElementById("mealDrinkNotesBlock"),dt=document.getElementById("mealDrinkServeRow");Ie&&(rt&&rt.parentElement!==Ie&&Ie.appendChild(rt),dt&&dt.parentElement!==Ie&&Ie.appendChild(dt)),rt&&(rt.style.display="none"),dt&&(dt.style.display="none"),xe&&(xe.style.display="none"),Pe&&(Pe.style.display="none"),z&&z.parentElement!==V&&(V==null||V.appendChild(z)),R&&R.parentElement!==V&&(V==null||V.appendChild(R)),F&&(F.innerHTML="",F.style.display="none");const Et=j=>{const U=document.querySelector(".two > div:first-child");U&&Array.from(U.children).forEach(se=>{se.style.display=se.id===j||j==="__ALL__"?"":"none"})},Ct=(wn=document.getElementById("m_later"))==null?void 0:wn.closest(".row");if(V&&(V.style.display=""),Ct&&(Ct.style.display=""),P==="fiche"){ve&&ve.classList.add("mono"),V&&(V.style.display="none"),Ct&&(Ct.style.display="none"),Et("__ALL__"),Ye();return}if(P==="aperitif"){if(ve&&ve.classList.remove("mono"),R&&me&&me.appendChild(R),z&&(z.style.display="none"),R){const j=document.getElementById("aperoNotesBlock"),U=document.getElementById("tcNotesBlock");if(U&&(U.style.display="none"),j){j.style.display="block",F==null||F.appendChild(j),F&&(F.style.display="block");const Ue=document.getElementById("mdAperoNotes");Ue&&(Ue.textContent=q.mdAperoNotes||"Drink / aperitif notes")}xe&&(xe.style.display="flex",F==null||F.appendChild(xe),F&&(F.style.display="block"));const se=document.getElementById("tcTitle");se&&(se.textContent=q.tcTitle||"Aperitif")}Et("tcBlock"),Ye(),Y(),D();return}if(P==="tc"){if(ve&&ve.classList.remove("mono"),R&&me&&me.appendChild(R),z&&(z.style.display="none"),R){const j=document.getElementById("aperoNotesBlock"),U=document.getElementById("tcNotesBlock");j&&(j.style.display="none"),U&&(U.style.display="block",F==null||F.appendChild(U),F&&(F.style.display="block")),Pe&&(Pe.style.display="flex",F==null||F.appendChild(Pe),F&&(F.style.display="block"));const se=document.getElementById("tcTitle");se&&(se.textContent=q.chips_tc||"Tea & Coffee")}Et("tcBlock"),Ye(),Y(),D();return}if(P==="repas"){if(ve&&ve.classList.remove("mono"),R&&me){me.appendChild(R),R.style.display="block";const j=document.getElementById("aperoNotesBlock"),U=document.getElementById("tcNotesBlock");j&&(j.style.display="none"),U&&(U.style.display="none");const se=document.getElementById("mealDrinkNotesBlock");if(se){se.style.display="block",Ie&&Ie.appendChild(se);const Nn=document.getElementById("mdMealDrinkNotes");Nn&&(Nn.textContent=q.mealDrinkNotes||"Meal drink notes")}const Ue=document.getElementById("mealDrinkServeRow");Ue&&(Ue.style.display="flex",Ie&&Ie.appendChild(Ue));const Mn=document.getElementById("tcTitle");Mn&&(Mn.textContent=q.mealDrinkTitle||"Meal drinks")}z&&V&&(z.style.display="block",V.appendChild(z)),document.getElementById("drinkGrid")&&(oe(),Z(),document.querySelectorAll("#drinkGrid .pill").forEach(j=>{j.disabled=!1,j.style.pointerEvents="auto"})),Y(),D(),Z(),Ye(),Et("tcBlock");return}R&&(R.style.display="block"),oe(),Z(),document.querySelectorAll("#drinkGrid .pill").forEach(j=>{j.disabled=!1,j.style.pointerEvents="auto"}),z&&(z.style.display="block")}const $=document.getElementById("tcTitle");$&&($.textContent=A==="tc"?i.chips_tc||"Tea & Coffee":i.tcTitle||"Aperitif");const fe=document.getElementById("mealDrinkNotesBlock");if(fe&&(fe.style.display="none"),K(A,i),o.phase==="tc"&&f?Ce(f.key):o.phase==="repas"&&f&&Ee(f.key),to(),I("#m_aperoNotes").value="",I("#m_tcNotes").value="",o.phase==="tc"&&f)Ce(f.key);else{const P=document.getElementById("mhTCInline");P&&(P.textContent="")}if(o.phase==="repas"&&f)Ee(f.key);else{const P=document.getElementById("mhMealDrinkInline");if(P){const q=v[o.config.lang||"EN"]||v.EN;P.textContent=(q.mealDrinkTitle||"Meal drinks")+": "}}Oe(),D(),I("#modalBack").style.display="flex"}function Je(e){["tc_cafe","tc_deca","tc_the","tc_digestif","tc_cocktail","tc_biere","tc_champagne","tc_vin","tc_soft","tc_chocolat"].forEach(i=>{const c=document.getElementById(i);c&&(c.style.display="none")});const n=document.getElementById("tc_milk_sweet");n&&(n.style.display=["cafe","deca","the"].includes(e)?"block":"none");const l={cafe:"tc_cafe",deca:"tc_deca",the:"tc_the",digestif:"tc_digestif",cocktail:"tc_cocktail",biere:"tc_biere",champagne:"tc_champagne",vin:"tc_vin",soft:"tc_soft",chocolat:"tc_chocolat"}[e];if(l){const i=document.getElementById(l);i&&(i.style.display="block")}}function We(){var c,s;const e=((c=document.getElementById("tc_soft_type"))==null?void 0:c.value)||"",t={eau:"tc_soft_eau_row",jus:"tc_soft_jus_row",coca:"tc_soft_coca_row",sprite:"tc_soft_sprite_row",tonic:"tc_soft_tonic_row"};["tc_soft_eau_row","tc_soft_jus_row","tc_soft_coca_row","tc_soft_sprite_row","tc_soft_tonic_row"].forEach(r=>{const d=document.getElementById(r);d&&(d.style.display="none")});const n=t[e];if(n){const r=document.getElementById(n);r&&(r.style.display="flex")}const a=((s=document.getElementById("tc_soft_jus"))==null?void 0:s.value)||"",l=document.getElementById("tc_soft_salt_row"),i=document.getElementById("tc_soft_pepper_row");l&&(l.style.display=e==="jus"&&a==="tomate"?"inline-flex":"none"),i&&(i.style.display=e==="jus"&&a==="tomate"?"inline-flex":"none")}function Cl(){var n,a,l,i,c;const e=((n=document.getElementById("tc_group"))==null?void 0:n.value)||"";(a=document.getElementById("tc_alcool"))!=null&&a.style&&(document.getElementById("tc_alcool").style.display="none"),(l=document.getElementById("tc_chaud"))!=null&&l.style&&(document.getElementById("tc_chaud").style.display="none"),Je("");const t=document.getElementById("tc_cat");t&&(t.value=""),e==="soft"?(Je("soft"),document.getElementById("tc_soft_type")&&(document.getElementById("tc_soft_type").value=""),t&&(t.value="soft"),We()):e==="alcool"?(i=document.getElementById("tc_alcool"))!=null&&i.style&&(document.getElementById("tc_alcool").style.display="block"):e==="chaud"&&(c=document.getElementById("tc_chaud"))!=null&&c.style&&(document.getElementById("tc_chaud").style.display="block"),D()}function Tl(){var n;const e=((n=document.getElementById("tc_alcool_type"))==null?void 0:n.value)||"",t=document.getElementById("tc_cat");Je(""),e?(t&&(t.value=e),Je(e)):t&&(t.value=""),D()}function _l(){var n;const e=((n=document.getElementById("tc_chaud_type"))==null?void 0:n.value)||"",t=document.getElementById("tc_cat");if(Je(""),e){t&&(t.value=e),Je(e);const a=document.getElementById("tc_milk_sweet");a&&(a.style.display=e==="cafe"||e==="deca"||e==="the"?"block":"none")}else t&&(t.value="");D()}function Ft(e){e.apDrink||(e.apDrink={});const t=e.apDrink;L.cat==="soft"?t.cat="soft":L.cat==="chaud"||L.cat==="alcool"?t.cat=L.sub:t.cat="",t.softType=L.cat==="soft"&&L.sub||"",t.waterType=L.waterType||"",t.cocaType=L.cocaType||"",t.juiceType=L.juiceType||"",t.softIce=!!L.softIce,t.softLemon=!!L.softLemon,t.spriteIce=!!L.spriteIce,t.spriteLemon=!!L.spriteLemon,t.tonicIce=!!L.tonicIce,t.tonicLemon=!!L.tonicLemon,t.juiceIce=!!L.juiceIce,t.juiceLemon=!!L.juiceLemon,t.juiceSalt=!!L.juiceSalt,t.juicePepper=!!L.juicePepper,t.juiceApfelschorle=!!L.juiceApfelschorle,t.cat==="cafe"||t.cat==="deca"||t.cat==="the"||t.cat==="chocolat"?(t.milk=L.milk||"",t.sweet=L.sweet||"",t.theType=t.cat==="the"&&L.theType||"",t.theLemon=!!L.theLemon,t.choco=t.cat==="chocolat"):(t.milk="",t.sweet="",t.theType="",t.theLemon=!1,t.choco=!1),t.champIce=t.cat==="champagne"?!!L.champIce:!1,t.champMimosa=t.cat==="champagne"?!!L.champMimosa:!1,t.beer=t.cat==="biere"&&L.beer||"",t.vinRouge=t.cat==="vin_rouge"&&L.vinRouge||"",t.vinBlanc=t.cat==="vin_blanc"&&L.vinBlanc||"",t.vinIce=t.cat==="vin_rouge"||t.cat==="vin_blanc"?!!L.vinIce:!1,t.digestif=t.cat==="digestif"&&L.digestif||"",t.digIce=t.cat==="digestif"?!!L.digIce:!1,t.cocktail=t.cat==="cocktail"&&L.cocktail||"",t.campariMix=t.cat==="cocktail"&&L.cocktail==="campari"&&L.campariMix||"",t.cocktailSP=t.cat==="cocktail"&&L.cocktail==="bloody_mary"?!!L.cocktailSP:!1,t.virginMary=t.cat==="cocktail"&&L.cocktail==="bloody_mary"?!!L.virginMary:!1,t.cocktailIce=t.cat==="cocktail"?!!L.cocktailIce:!1,t.cocktailLemon=t.cat==="cocktail"?!!L.cocktailLemon:!1,t.cocktailSalt=t.cat==="cocktail"?!!L.cocktailSalt:!1,t.cocktailPepper=t.cat==="cocktail"?!!L.cocktailPepper:!1}function At(){to();const e=document.getElementById("m_aperoNotes");e&&(e.value="");const t=document.getElementById("m_tcNotes");t&&(t.value="");const n=document.getElementById("m_mealDrinkNotes");n&&(n.value=""),I("#modalBack").style.display="none",f=null}function ct(){var l;if(!f)return;const e=f.data;e.occupied=!!((l=document.getElementById("m_occ_chk"))!=null&&l.checked);const t=document.querySelector('input[name="m_type"]:checked');t&&(e.type=t.value);const n=document.getElementById("m_sleep_chk");n&&(e.sleep=!!n.checked),e.status=I("#m_status").value,e.lang=I("#m_lang").value,e.notes=I("#m_notes").value.trim(),e.aperoNotes="",e.tcNotes="";const a=document.getElementById("m_eatWith");if(a){const i=(e.eatWith||"").trim().toUpperCase(),c=(a.value||"").trim().toUpperCase();f.data.eatWith=c;const s=(r,d)=>{if(!r)return;const u=o.seats[r];if(!u)return;Ae(u);const p=(d||"").toUpperCase();p&&(u.eatWith||"").toUpperCase()===p&&(u.eatWith="")};if(i&&i!==c&&s(i,f.key),c&&o.seats[c]){const r=o.seats[c];Ae(r),r.eatWith&&r.eatWith!==f.key&&s(r.eatWith,c),r.eatWith=f.key}else!c&&i&&s(i,f.key)}B(),O();try{_n()==="seat"&&typeof tt=="function"&&tt()}catch{}x(),Ye(),lt(f.data),it(f.data),Oe(),ot()}I("#m_pre").addEventListener("change",()=>{if(!f)return;const e=I("#m_pre").value;hl(f.data,e),B(),O(),x(),Oe(),lt(f.data),it(f.data),ot()});let _e=null;function De(e){const t=/^(\d+)([A-Z])$/i.exec((e||"").trim());return t?[parseInt(t[1],10),t[2].toUpperCase()]:[null,null]}function Ll(){if(!f)return;f.data.sleep=!f.data.sleep;const e=document.getElementById("m_sleep_chk");e&&(e.checked=f.data.sleep),B(),O(),x(),fn()}function fn(){const e=document.getElementById("m_sleep_chk"),t=e?e.checked:!!(f&&f.data&&f.data.sleep),a=(v[o.config.lang||"EN"]||v.EN).mdSleepTxt||"Sleep";Zo.forEach(i=>{const c=document.getElementById(i);c&&(c.textContent=Mt.sleep,c.title=a,c.setAttribute("aria-label",a))});const l=document.getElementById("sleepModalBtn");l&&l.classList.toggle("active",!!t)}function Gt(e){const t=document.getElementById("seatgrid");t&&t.classList.toggle("moving",!!e);const n=v[o.config.lang||"EN"],a=document.getElementById("seatmapTitle");a&&(e?a.textContent=(n.pickDestSeat||"Select destination seat")+(_e?"  "+_e:""):typeof ue=="function"&&ue())}function Bl(e){_e=e,Gt(!0),v[o.config.lang||"EN"],typeof G=="function"&&G({type:"seatMoveStart",from:e})}document.addEventListener("keydown",e=>{if(e.key==="Escape"&&H){Pt(!1),ue();return}e.key==="Escape"&&_e&&(_e=null,Gt(!1),typeof ue=="function"&&ue())});function Wn(e){return!e||!e.occupied}function Il(e,t){if(!e||!t||e===t)return;const n=Ae(o.seats[e]||{}),a=Ae(o.seats[t]||{});v[o.config.lang||"EN"];const l=(i,c)=>{Object.keys(o.seats||{}).forEach(s=>{const r=o.seats[s];r&&(Ae(r),r.eatWith===i&&(r.eatWith=c))})};if(Wn(a))o.seats[t]=JSON.parse(JSON.stringify(n)),o.seats[e]=Ae({}),typeof G=="function"&&G({type:"seatMoved",from:e,to:t});else{const i=JSON.parse(JSON.stringify(a));o.seats[t]=JSON.parse(JSON.stringify(n)),o.seats[e]=i,typeof G=="function"&&G({type:"seatSwapped",a:e,b:t})}if(Wn(a))l(e,t);else{const i="__SWAP_TMP__";l(e,i),l(t,e),l(i,t)}typeof B=="function"&&B(),typeof O=="function"&&O(),typeof x=="function"&&x()}function mn(e){if(e=(e||"").toUpperCase(),H){so(e);return}if(_e){const a=_e;if(_e=null,Gt(!1),e&&e!==a){Il(a,e);return}const[l,i]=De(a);l&&i&&(ge(l,i),document.getElementById("modalBack").style.display="flex");return}const[t,n]=De(e);t&&n&&(ge(t,n),document.getElementById("modalBack").style.display="flex")}function le(e,t,n){if(e&&(e.beer==="calvinus_blanche"&&(e.beer="calvinus"),e.beer&&e.beer.startsWith("leermond")&&(e.beer="leermond"),e.vin==="rouge"&&!e.vinRouge&&(e.vinRouge=e.vinOrigine||"suisse"),e.vin==="blanc"&&!e.vinBlanc&&(e.vinBlanc=e.vinOrigine||"suisse")),!e||!e.cat)return"";const a=[],l=r=>{r&&a.push(t.tcIce||"Ice")},i=r=>{r&&a.push(t.tcLemon||"Lemon")},c=r=>r==="creme"?t.tcMilkCreme:r==="avoine"?t.tcMilkAvoine:r==="lait"?t.tcMilkLait:r==="none"?t.tcMilkNone:"",s=r=>r==="sucre"?t.tcSweetSugar:r==="succedane"?t.tcSweetSub:r==="none"?t.tcSweetNone:"";switch(e.cat){case"cafe":if(a.push(t.tcCatCafe),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}break;case"deca":if(a.push(t.tcCatDeca),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}break;case"the":if(e.theType==="hotwater"){a.push(t.tcHotWater||"Eau chaude"),e.theLemon&&a.push(t.tcLemon||"Citron");break}if(a.push(t.tcCatThe),e.theType==="english"?a.push(t.tcTeaEnglish):e.theType==="vert"?a.push(t.tcTeaVert):e.theType==="menthe"?a.push(t.tcTeaMenthe):e.theType==="camomille"&&a.push(t.tcTeaCamomille||t.tcInfCam),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}e.theLemon&&a.push(t.tcLemon||"Lemon");break;case"infusion":if(a.push(t.tcCatInf),a.push(t.tcInfCam),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}break;case"chocolat":a.push(t.tcChocoBrand||"Caotina");break;case"digestif":a.push(t.tcCatDig),e.digestif==="whisky_jw"?a.push(t.tcDigJW):e.digestif==="whisky_jb"?a.push(t.tcDigJB):e.digestif==="cognac"?a.push(t.tcDigCognac):e.digestif==="baileys"&&a.push(t.tcDigBaileys),e.whiskyStyle==="pur"?a.push(t.tcPur):e.whiskyStyle==="rocks"?a.push(t.tcRocks):l(!!e.digIce);break;case"biere":{a.push(t.tcCatBeer||"Beer");const r={quoellfrisch:t.tcBeerQ||"Qullfrisch Lager",calvinus:t.tcBeerC||"Calvinus Blanche",leermond:t.tcBeerL||"Leermond (alcohol-free)"};e.beer&&r[e.beer]?a.push(r[e.beer]):e.beer&&a.push(e.beer);break}case"champagne":a.push(t.tcCatChamp),l(!!e.champIce),e.champMimosa&&a.push(" Mimosa");break;case"vin_rouge":{a.push(t.tcCatVin||"Wines");let r=t.tcRed||"Red";const d=e.vinRouge==="suisse"?t.tcCH||"Swiss":e.vinRouge==="etranger"?t.tcForeign||"Foreign":"";d&&(r+="  "+d),e.vinNotes&&(r+=` (${e.vinNotes})`),a.push(r),e.vinIce&&a.push(t.tcIce||"Ice");break}case"vin_blanc":{a.push(t.tcCatVin||"Wines");let r=t.tcWhite||"White";const d=e.vinBlanc==="suisse"?t.tcCH||"Swiss":e.vinBlanc==="etranger"?t.tcForeign||"Foreign":"";d&&(r+="  "+d),e.vinNotes&&(r+=` (${e.vinNotes})`),e.vinIce&&a.push(t.tcIce||"Ice"),a.push(r);break}case"cocktail":{a.push(t.tcCocktail||"Cocktail");const r=e.cocktail||"";r==="gin_tonic"?a.push(t.tcGinTonic||"Gin Tonic"):r==="cuba_libre"?a.push(t.tcCubaLibre||"Cuba Libre"):r==="screwdriver"?a.push(t.tcScrewDriver||"Screw Driver"):r==="bloody_mary"?(a.push(t.tcBloodyMary||"Bloody Mary"),e.virginMary&&a.push(t.tcVirginMary||"Virgin Mary"),e.cocktailSP&&a.push([t.tcSalt||"Salt",t.tcPepper||"Pepper"].join(" + "))):r==="campari"&&(a.push("Campari"),e.campariMix==="orange"?a.push(t.tcJuiceOrange||"Orange"):e.campariMix==="soda"&&a.push(t.tcSoda||"Soda")),e.cocktailIce&&a.push(t.tcIce||"Ice"),e.cocktailLemon&&a.push(t.tcLemon||"Lemon");break}case"soft":e.softType==="eau"?(a.push(t.tcLblWater),e.waterType==="plate"?a.push(t.tcWaterStill):e.waterType==="gazeuse"&&a.push(t.tcWaterSpark),l(!!e.softIce),i(!!e.softLemon)):e.softType==="jus"?(a.push(t.tcLblJuice),e.juiceType==="pomme"?e.juiceApfelschorle?a.push("Apfelschorle"):a.push(t.tcJuiceApple||"Apple"):e.juiceType==="orange"?a.push(t.tcJuiceOrange):e.juiceType==="tomate"&&a.push(t.tcJuiceTomato),l(!!e.juiceIce),i(!!e.juiceLemon),e.juiceType==="tomate"&&(e.juiceSalt||e.juicePepper)&&a.push([t.tcSalt||"Salt",t.tcPepper||"Pepper"].join(" + "))):e.softType==="coca"?(a.push("Coca-Cola",e.cocaType==="zero"?"Zero":e.cocaType==="normal"?"Classic":""),l(!!e.softIce),i(!!e.softLemon)):e.softType==="sprite"?(a.push("Sprite"),l(!!e.spriteIce),i(!!e.spriteLemon)):e.softType==="tonic"&&(e.tonicIce&&a.push(t.tcIce),e.tonicLemon&&a.push(t.tcLemon||"Citron"),a.unshift("Tonic"));break}return a.join(", ")}var oa;(oa=document.getElementById("serveAperitif"))==null||oa.addEventListener("click",()=>{if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}Ft(t),t.served.aperitif||(t.served.aperitif=Date.now());const n=JSON.parse(JSON.stringify(t.apDrink||{}));console.log("DEBUG SERVE AP:",t.apDrink,le(t.apDrink,v[o.config.lang||"EN"],o.config.lang)),xt({type:"apOrdered",seat:f.key,ap:n,notes:I("#m_aperoNotes").value||t.aperoNotes||""});const a=document.getElementById("m_aperoNotes");a&&(a.value="");const l=document.getElementById("m_tcNotes");l&&(l.value=""),t.aperoNotes="",t.tcNotes="",ye(),B(),oe(!0),Y(),Z(),D(),ge(f.row,f.col),O(),x()});var la;(la=document.getElementById("serveTC"))==null||la.addEventListener("click",()=>{var s,r;if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}Ft(t),o.phase==="tc"&&!t.served.tc&&(t.served.tc=Date.now());const n=JSON.parse(JSON.stringify(t.apDrink||{}));console.log("DEBUG SERVE AP:",t.apDrink,le(t.apDrink,v[o.config.lang||"EN"],o.config.lang));const a=o.phase==="repas"?((s=document.getElementById("m_mealDrinkNotes"))==null?void 0:s.value)||"":((r=document.getElementById("m_tcNotes"))==null?void 0:r.value)||t.tcNotes||"";xt({type:"tcOrdered",seat:f.key,ts:Date.now(),ap:n,notes:a,ctx:o.phase});const l=document.getElementById("m_aperoNotes");l&&(l.value="");const i=document.getElementById("m_tcNotes");i&&(i.value="");const c=document.getElementById("m_mealDrinkNotes");c&&(c.value=""),t.aperoNotes="",t.tcNotes="",ye(),B(),o.phase==="tc"?Ce(f.key):o.phase==="repas"&&Ee(f.key),oe(!0),Y(),Z(),D(),ge(f.row,f.col),O(),x()});var ia;(ia=document.getElementById("serveAperitifNone"))==null||ia.addEventListener("click",()=>{if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}t.served.aperitif||(t.served.aperitif=Date.now()),ye(),B(),oe(!0),Y(),Z(),ge(f.row,f.col),O(),x()});var ca;(ca=document.getElementById("serveTCNone"))==null||ca.addEventListener("click",()=>{if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}t.served.tc||(t.served.tc=Date.now()),ye(),B(),oe(!0),Y(),Z(),D(),ge(f.row,f.col),O(),x()});var sa;(sa=document.getElementById("serveMealDrink"))==null||sa.addEventListener("click",()=>{var l;if(!f)return;const e=f.key,t=f.data,n=v[o.config.lang||"EN"];if(!t.occupied){alert(n.alertSeatEmpty);return}typeof Ft=="function"&&Ft(t);const a=(((l=document.getElementById("m_mealDrinkNotes"))==null?void 0:l.value)||"").trim();G==null||G({type:"tcServed",seat:e,ts:Date.now(),ctx:"repas",ap:t.apDrink?JSON.parse(JSON.stringify(t.apDrink)):null,notes:a}),ye(),B==null||B(),o.phase==="tc"?Ce(e):o.phase==="repas"&&Ee(e),typeof oe=="function"&&oe(!0),typeof D=="function"&&D(),typeof Ge=="function"&&Ge()});var ra;(ra=document.getElementById("serveMealDrinkNone"))==null||ra.addEventListener("click",()=>{var e;(e=document.getElementById("serveTCNone"))==null||e.click()});var da;(da=document.getElementById("sleepModalBtn"))==null||da.addEventListener("click",Ll);function Be(){}function Ge(){f&&(zt(o.phase),oe(!0),D(),Y(),Z(),ge(f.row,f.col),O(),x())}[["navFicheBtn","fiche"],["navAperoBtn","aperitif"],["navMealBtn","repas"],["navTCBtn","tc"]].forEach(([e,t])=>{const n=document.getElementById(e);n&&(n.addEventListener("click",a=>{a.preventDefault(),o.phase!==t&&(o.phase=t,B(),gt(),mt==null||mt(),oe(!0),Ge(),Ye(),Y(),Z(),f&&(o.phase==="tc"?Ce(f.key):o.phase==="repas"&&Ee(f.key)))}),Y(),Z(),document.querySelectorAll("#drinkGrid .pill").forEach(a=>{a.disabled=!1,a.style.pointerEvents="auto"}))});function gt(){const e=v[o.config.lang||"EN"]||v.EN,t=document.getElementById("navFicheBtn"),n=document.getElementById("navAperoBtn"),a=document.getElementById("navMealBtn"),l=document.getElementById("navTCBtn"),i=(s,r)=>{if(!s)return;const d=s.querySelector("span");if(!d)return;const p=(e[r]||"").replace(/\s+/g," ").trim();p&&(d.textContent=p)};i(t,"modalTabFiche"),i(n,"modalTabApero"),i(a,"modalTabMeal"),i(l,"modalTabTC"),t&&(t.title=e.chips_fiche||"Pax record"),n&&(n.title=e.chips_apero||"Aperitif"),a&&(a.title=e.chips_meal||"Main"),l&&(l.title=e.chips_tc||"Tea & Coffee"),[t,n,a,l].forEach(s=>{s&&(s.style.display="",s.classList.remove("active"),s.setAttribute("aria-pressed","false"),s.setAttribute("aria-selected","false"))});const c=o.phase;c==="fiche"&&t&&(t.classList.add("active"),t.setAttribute("aria-pressed","true"),t.setAttribute("aria-selected","true")),c==="aperitif"&&n&&(n.classList.add("active"),n.setAttribute("aria-pressed","true"),n.setAttribute("aria-selected","true")),c==="repas"&&a&&(a.classList.add("active"),a.setAttribute("aria-pressed","true"),a.setAttribute("aria-selected","true")),c==="tc"&&l&&(l.classList.add("active"),l.setAttribute("aria-pressed","true"),l.setAttribute("aria-selected","true"))}var ua;(ua=document.getElementById("tc_milk"))==null||ua.addEventListener("change",Be);var fa;(fa=document.getElementById("tc_sweet"))==null||fa.addEventListener("change",Be);var ma;(ma=document.getElementById("tc_the_type"))==null||ma.addEventListener("change",Be);var pa;(pa=document.getElementById("tc_beer"))==null||pa.addEventListener("change",Be);var ga;(ga=document.getElementById("tc_soft_type"))==null||ga.addEventListener("change",()=>{We(),D()});var ya;(ya=document.getElementById("tc_soft_jus"))==null||ya.addEventListener("change",()=>{We(),D()});["tc_soft_eau","tc_soft_coca","tc_soft_ice","tc_soft_lemon","tc_soft_ice2","tc_soft_lemon2","tc_soft_salt","tc_soft_pepper","tc_soft_ice4","tc_soft_lemon4","tc_cocktail_type","tc_cocktail_ice","tc_cocktail_lemon"].forEach(e=>{var t;return(t=document.getElementById(e))==null?void 0:t.addEventListener("change",Be)});const Me=document.getElementById("tc_vin_rouge"),Ne=document.getElementById("tc_vin_blanc");Me==null||Me.addEventListener("change",()=>{Me.value?Ne&&(Ne.value="",Ne.disabled=!0):Ne&&(Ne.disabled=!1),kn()});Ne==null||Ne.addEventListener("change",()=>{Ne.value?Me&&(Me.value="",Me.disabled=!0):Me&&(Me.disabled=!1),kn()});var ha;(ha=document.getElementById("tc_vin_notes"))==null||ha.addEventListener("input",Be);var ba;(ba=document.getElementById("tc_champ_ice"))==null||ba.addEventListener("change",Be);var va;(va=document.getElementById("tc_vin_ice"))==null||va.addEventListener("change",Be);var ka;(ka=document.getElementById("tc_digestif_type"))==null||ka.addEventListener("change",Be);var Sa;(Sa=document.getElementById("tc_digestif_ice"))==null||Sa.addEventListener("change",Be);var Ea;(Ea=document.getElementById("clearTrayBtn"))==null||Ea.addEventListener("click",()=>{var n;if(!f)return;const e=f.data,t=v[o.config.lang||"EN"];if(!e.occupied||!((n=e.served)!=null&&n.meal)){alert(t.alertSeatEmpty);return}e.served.trayCleared?(e.served.trayCleared=!1,G({type:"trayUncleared",seat:f.key})):(e.served.trayCleared=!0,G({type:"trayCleared",seat:f.key})),ye(),B(),X(),oe(!0),Y(),Z(),ge(f.row,f.col),O(),x()});var Ca;(Ca=document.getElementById("serveMealNone"))==null||Ca.addEventListener("click",()=>{if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}t.served||(t.served={}),t.served.meal=Date.now(),t.served.mealNone=!0,t.served.trayUsed=!1,t.served.trayFromReservation=!1,ye(),B(),oe(!0),Y(),Z(),ge(f.row,f.col),O(),x(),Oe()});I("#serveMeal").addEventListener("click",()=>{if(!f)return;const e=v[o.config.lang||"EN"],t=f.data;if(!t.occupied){alert(e.alertSeatEmpty);return}let n=!!t.served.meal;!!(t.served&&t.served.mealNone)&&(n=!1);const l=document.getElementById("m_normalMealValue"),i=((l==null?void 0:l.value)||t.normalMeal||"").trim();if(!(!!t.spml||!!t.preLabel||["viande","vege","plateau"].includes(i))&&!n){alert(e.alertChoose);return}const s=(r,d)=>r==="plateau"||r==="viande"||r==="vege"||!!d.spml||!!d.preLabel;if(n)t.served.trayUsed&&(t.served.trayFromReservation||(o.inventory.plateaux=(o.inventory.plateaux||0)+1,X()),t.served.trayUsed=!1,t.served.trayFromReservation=!1),t.served.meal=null,G({type:"serviceCanceled",seat:f.key});else{if(s(i,t))if(i==="plateau"&&!!(t.alloc&&t.alloc.trayReserved))t.served.trayUsed=!0,t.served.trayFromReservation=!0,t.alloc.trayReserved=!1;else{if((o.inventory.plateaux||0)<=0){alert(e.alertNoTrays);return}o.inventory.plateaux--,t.served.trayUsed=!0,t.served.trayFromReservation=!1,X()}else t.served.trayUsed=!1,t.served.trayFromReservation=!1;t.served.meal=Date.now(),t.served.mealNone=!1;const d=yo(t,e);G({type:"mealServed",seat:f.key,label:d})}ye(),B(),oe(!0),Y(),Z(),ge(f.row,f.col),O(),x(),Oe()});I("#m_later").addEventListener("change",()=>{typeof ze=="function"&&ze()});function go(e,t,n=null){if(!f)return;const a=new Date;let l=null;if(n){const[c,s]=n.split(":").map(r=>parseInt(r,10));l=new Date,l.setHours(c,s,0,0),l.getTime()<a.getTime()&&(l=new Date(l.getTime()+24*3600*1e3))}else l=new Date(a.getTime()+t*60*1e3);const i=l.getTime();e.serveLaterAt=i,o.reminders=(o.reminders||[]).filter(c=>c.key!==f.key),o.reminders.push({key:f.key,at:e.serveLaterAt}),B(),qe(),x()}function de(){const e=document.getElementById("m_later_apply"),t=document.getElementById("m_later_cancel"),n=document.getElementById("m_later_view"),a=document.getElementById("m_later"),l=document.getElementById("m_later_time"),i=a==null?void 0:a.value,c=l==null?void 0:l.value;if(!e||!f)return;const s=f.data||{},r=Date.now(),d=!!(s.serveLaterAt&&s.serveLaterAt>r),u=Jt();if(e.disabled=!u||i!=="custom"||!c,t&&(t.style.display=d?"":"none",t.disabled=!u||!d),l){const p=u&&i==="custom";l.disabled=!p}if(n)if(d){const p=new Date(s.serveLaterAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});n.textContent=" "+p,n.style.display=""}else n.textContent="",n.style.display="none";ze()}I("#m_later_time").addEventListener("change",()=>{typeof de=="function"&&de()});I("#m_later_apply").addEventListener("click",()=>{if(!f||!Jt())return;const e=v[o.config.lang||"EN"],t=I("#m_later_time").value;if(!t){alert(e.alertPickTime);return}go(f.data,0,t),typeof de=="function"&&de()});var Ta;(Ta=document.getElementById("m_later_cancel"))==null||Ta.addEventListener("click",()=>{if(!f)return;const e=f.key;o.reminders=(o.reminders||[]).filter(l=>l.key!==e),f.data.serveLaterAt=null;const t=document.getElementById("m_later");t&&(t.value="");const n=document.getElementById("laterCustomContainer");n&&n.classList.remove("active");const a=document.getElementById("m_later_time");a&&(a.value=""),B(),qe(),O(),x(),de(),ze()});var _a;(_a=document.getElementById("m_status"))==null||_a.addEventListener("change",()=>{En()});var La;(La=document.getElementById("m_lang"))==null||La.addEventListener("change",()=>{Cn()});document.querySelectorAll(".language-btn").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("m_lang");if(!t||e.disabled)return;const n=e.dataset.lang||"";t.value=t.value===n?"":n;const a=new Event("change",{bubbles:!0});t.dispatchEvent(a)})});Cn();En();ze();document.querySelectorAll(".later-btn").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("m_later");if(!t||e.disabled)return;const n=e.dataset.value||"",a=t.value===n?"":n;t.value=a;const l=new Event("change",{bubbles:!0});t.dispatchEvent(l)})});document.addEventListener("click",e=>{var c;const t=document.getElementById("laterCustomContainer");if(!(t!=null&&t.classList.contains("active")))return;const n=e.target;if(!n||t.contains(n)||(c=n.classList)!=null&&c.contains("later-btn")&&n.dataset.value==="custom"||n.closest(".form-field--actions")||n.id==="m_later_apply"||n.id==="m_later_cancel")return;const a=document.getElementById("m_later");if(!a||a.value!=="custom")return;const l=document.getElementById("m_later_time");if(l!=null&&l.value)return;const i=f==null?void 0:f.data;i!=null&&i.serveLaterAt&&i.serveLaterAt>Date.now()||(a.value="",a.dispatchEvent(new Event("change",{bubbles:!0})))});I("#closeModal").addEventListener("click",()=>{ct(),At()});["m_status","m_lang","m_notes","m_aperoNotes","m_eatWith"].forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("change",ct);const n=document.getElementById("m_tcNotes");n&&n.addEventListener("change",ct)});var Ba;(Ba=document.getElementById("m_occ_chk"))==null||Ba.addEventListener("change",()=>{ct(),io()});var Ia;(Ia=document.getElementById("m_sleep_chk"))==null||Ia.addEventListener("change",ct);document.querySelectorAll('input[name="m_type"]').forEach(e=>{e.addEventListener("change",ct)});I("#m_later").addEventListener("change",()=>{if(!f)return;ze();const e=I("#m_later").value;if(e===""){f.data.serveLaterAt=null,o.reminders=(o.reminders||[]).filter(t=>t.key!==f.key),B(),qe(),O(),x(),typeof de=="function"&&de();return}if(e==="custom"){typeof de=="function"&&de();return}go(f.data,parseInt(e,10)),typeof de=="function"&&de()});function qe(){const e=o.config.lang||"EN",t=e==="FR"?"Annuler":e==="DE"?"Lschen":"Cancel",n=I("#remindersList");n.innerHTML="";const a=Date.now();o.reminders=o.reminders.filter(i=>i.at&&i.at>a);const l=[...o.reminders].sort((i,c)=>i.at-c.at);for(const i of l){const c=document.createElement("div");c.className="row";const s=o.seats[i.key],r=new Date(i.at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),d=document.createElement("div");d.textContent=i.key+"  "+r+(s!=null&&s.sleep?" ()":"");const u=document.createElement("button");u.className="btn",u.textContent=t,u.addEventListener("click",()=>{const p=o.reminders.findIndex(y=>y.key===i.key&&y.at===i.at);p>=0&&o.reminders.splice(p,1),o.seats[i.key]&&(o.seats[i.key].serveLaterAt=null),B(),qe(),O(),x()}),c.appendChild(d),c.appendChild(u),n.appendChild(c)}B()}setInterval(()=>{const e=Date.now();for(const t of o.reminders)if(t.at&&e>=t.at){const n=v[o.config.lang||"EN"];nl(n.remindServe+" "+t.key),ye(),t.at=null,o.seats[t.key]&&(o.seats[t.key].serveLaterAt=null),O(),x()}o.reminders=o.reminders.filter(t=>t.at),qe(),x()},1e3);const Ke=["A","B","C","D","E","F"];function zn(e){return e==="B"?o.config.layout==="A320":!0}function $n(e){return e.spml==="CHML"?0:e.status==="HON"?1:e.status==="SEN"?2:e.status==="PAD"?4:3}function wl(){return o.phase==="aperitif"?"aperitif":o.phase==="tc"?"tc":"meal"}function Ml(){var u,p,y;const e=Date.now(),t=o.config.rowsBiz||0,n=wl(),a=o.phase==="repas",l=[];for(let g=1;g<=t;g++)for(const h of Ke){if(!zn(h))continue;const m=pe(g,h);m.occupied&&(m.served[n]||m.serveLaterAt&&m.serveLaterAt>e||l.push({key:g+h,r:g,c:h,seat:m}))}let i=[...l].sort((g,h)=>{const m=g.seat.sleep?1:0,k=h.seat.sleep?1:0;if(m!==k)return m-k;if(a){const w=g.seat.spml==="CHML"?0:1,b=h.seat.spml==="CHML"?0:1;if(w!==b)return w-b}return g.r!==h.r?g.r-h.r:Ke.indexOf(g.c)-Ke.indexOf(h.c)});i=d(i);let s=l.filter(g=>{const h=g.seat;return!(h.spml||h.preLabel||h.normalMeal)}).sort((g,h)=>{const m=g.seat.sleep?1:0,k=h.seat.sleep?1:0;if(m!==k)return m-k;if(a){const w=$n(g.seat),b=$n(h.seat);if(w!==b)return w-b}return g.r!==h.r?g.r-h.r:Ke.indexOf(g.c)-Ke.indexOf(h.c)});s=d(s);const r=[];for(let g=1;g<=t;g++)for(const h of Ke){if(!zn(h))continue;const m=pe(g,h);m.occupied&&(u=m.served)!=null&&u.meal&&(p=m.served)!=null&&p.trayUsed&&!((y=m.served)!=null&&y.trayCleared)&&r.push({key:g+h,r:g,c:h,seat:m})}r.sort((g,h)=>g.r!==h.r?g.r-h.r:Ke.indexOf(g.c)-Ke.indexOf(h.c));function d(g){var w;const h=new Map(g.map((b,S)=>[b.key,S])),m=new Set,k=[];for(const b of g){if(m.has(b.key))continue;k.push(b),m.add(b.key);const S=(w=b.seat)==null?void 0:w.eatWith;S&&h.has(S)&&!m.has(S)&&(k.push(g[h.get(S)]),m.add(S))}return k}return{serveList:i,orderList:s,clearList:r}}function Dt(e){return String(e||"").replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])}function Bt(e){if(e.spml)return`<span class="${e.spml==="CHML"?"tag chml":"tag"}">${Dt(e.spml)}</span>`;if(e.preLabel){const a=typeof e.preLabel=="string"&&e.preLabel.length>10?`${e.preLabel.slice(0,10)}...`:e.preLabel;return`<span class="tag">${Dt(a)}</span>`}const t=(e.normalMeal||"").trim();if(!t)return"";if(t==="plateau"){const a=v[o.config.lang||"EN"]||v.EN;return`<span class="tag">${Dt(a.trayShort||"Tray")}</span>`}return`<span class="tag">${t==="viande"?"1":t==="vege"?"2":""}</span>`}function yo(e,t){if(!e)return"";if(e.spml)return e.spml;if(e.preLabel){const a=String(e.preLabel||"").trim();return a.length>10?`${a.slice(0,10)}...`:a}const n=(e.normalMeal||"").trim();return n==="viande"?(t==null?void 0:t.optNormalMeat)||"Option 1":n==="vege"?(t==null?void 0:t.optNormalVeg)||"Option 2":n==="plateau"?(t==null?void 0:t.trayShort)||"Tray":""}const Qt=new Set;function Xt(e,t,n,a){let l=!1,i=null;const c=e.querySelector(".flow-serve-confirm")||(()=>{const u=document.createElement("div");return u.className="flow-confirm flow-serve-confirm",u.textContent=(v[o.config.lang||"EN"]||v.EN).flowServeTag||"Serve",e.appendChild(u),u})(),s=t||e.dataset.key||"";s&&Qt.has(s)&&(l=!0,c.classList.add("is-visible"));const r=()=>{l=!1,c.classList.remove("is-visible"),s&&Qt.delete(s),i&&(clearTimeout(i),i=null)},d=()=>{t&&(a?a(t):Nl(t,n),r())};e.addEventListener("click",u=>{if(u.stopPropagation(),!l){l=!0,c.classList.add("is-visible"),s&&Qt.add(s),i&&clearTimeout(i),i=window.setTimeout(r,3e3);return}d()})}function Nl(e,t){const[n,a]=typeof De=="function"?De(e):[null,null];if(!n||!a)return;const l=pe(n,a);if(l.served||(l.served={}),t==="aperitif"){l.served.aperitifDelivered=Date.now();const c=JSON.parse(JSON.stringify(l.apDrink||{}));xt({type:"apServed",seat:e,ap:c,notes:l.aperoNotes||""}),B(),O(),x();return}if(t==="tc"){l.served.tcDelivered=Date.now();const c=JSON.parse(JSON.stringify(l.apDrink||{}));xt({type:"tcServed",seat:e,ts:Date.now(),ap:c,notes:l.tcNotes||"",ctx:o.phase}),B(),O(),x();return}t==="repas"&&Al(e,l),t==="clear"&&ho(e,l)}function Al(e,t){const n=v[o.config.lang||"EN"];if(!t||!t.occupied||(t.served||(t.served={}),t.served.meal))return;const a=(t.normalMeal||"").trim();if(!(!!t.spml||!!t.preLabel||["viande","vege","plateau"].includes(a)))return;const i=t.spml||t.preLabel||["viande","vege","plateau"].includes(a);if((!t.alloc||typeof t.alloc!="object")&&(t.alloc={normalKey:null,spmlCode:null,preLabel:null,trayReserved:!1}),i)if(t.alloc.trayReserved===!0&&a==="plateau")t.served.trayUsed=!0,t.served.trayFromReservation=!0,t.alloc.trayReserved=!1;else{if((o.inventory.plateaux||0)<=0){alert(n.alertNoTrays||"No trays available.");return}o.inventory.plateaux=(o.inventory.plateaux||0)-1,t.served.trayUsed=!0,t.served.trayFromReservation=!1,X()}else t.served.trayUsed=!1,t.served.trayFromReservation=!1;t.served.meal=Date.now(),t.served.mealNone=!1;const c=yo(t,n);G({type:"mealServed",seat:e,label:c}),ye(),B(),O(),x()}function ho(e,t){v[o.config.lang||"EN"],!(!t||!t.occupied)&&(!t.served||!t.served.meal||!t.served.trayUsed||t.served.trayCleared||(t.served.trayCleared=!0,G({type:"trayCleared",seat:e}),ye(),B(),X(),O(),x()))}function x(){var g,h,m,k,w;const e=v[o.config.lang||"EN"],t=document.getElementById("flowNow"),n=document.getElementById("flowLater"),a=document.getElementById("flowClear");if(!t||!n)return;const l=(g=document.getElementById("flowLaterTitle"))==null?void 0:g.parentElement,i=(h=document.getElementById("flowNowTitle"))==null?void 0:h.parentElement,c=(m=document.getElementById("flowClearTitle"))==null?void 0:m.parentElement,s=o.phase==="aperitif",r=o.phase==="tc",d=o.phase==="fiche";i&&(i.style.display=s||r||d?"none":""),c&&(c.style.display=s||r||d?"none":""),l&&(l.style.display=d?"none":""),t.innerHTML="",n.innerHTML="",a&&(a.innerHTML="");const{serveList:u,orderList:p,clearList:y}=Ml();{const b=document.getElementById("flowLaterTitle");if(b&&(b.textContent=o.phase==="aperitif"?e.flowAperoTakenTitle||"Orders taken ":o.phase==="tc"?e.flowTCTakenTitle||"Tea & coffee taken ":e.flowLaterTitle||"Orders to take "),o.phase==="aperitif"||o.phase==="tc"){const S=o.phase==="aperitif"?"apOrdered":"tcOrdered",E=(Array.isArray(o.history)?o.history:[]).filter(_=>_&&_.type===S&&(S!=="tcOrdered"||_.ctx!=="repas"));if(E.length===0){const _=document.createElement("div");_.style.color="var(--muted)",_.textContent=e.flowEmptyTaken||"No orders taken yet",n.appendChild(_)}else for(const _ of E){let M=null;if(typeof De=="function"){const[be,T]=De(_.seat||"");be&&T&&typeof pe=="function"&&(M=pe(be,T))}const A=[];M&&(M.status==="HON"?A.push('<span class="tag hon">HON</span>'):M.status==="SEN"?A.push('<span class="tag sen">SEN</span>'):M.status==="VIP"?A.push('<span class="tag vip">VIP</span>'):M.status==="FCL"?A.push('<span class="tag fcl">FCL</span>'):M.status==="PAD"?A.push('<span class="tag pad">PAD</span>'):M.status==="FTL"&&A.push('<span class="tag ftl">FTL</span>'),M.sleep&&A.push(`<span class="tag sleep">${Mt.sleep}</span>`));const K=typeof pn=="function"&&pn(_.ap)||"",$=typeof le=="function"&&le(_.ap,e,o.config.lang)||"",fe=(_.notes||"").trim(),he=[$,fe].filter(Boolean).join("  "),ie=he?`<div class="flow-sub">${K?K+" ":""}${Dt(he)}</div>`:"";if(M&&(s&&((k=M.served)!=null&&k.aperitifDelivered)||r&&((w=M.served)!=null&&w.tcDelivered)))continue;const ce=document.createElement("div");ce.className="flow-item",ce.dataset.key=_.seat||"",ce.innerHTML=`
          <div class="flow-seat">${_.seat||""}</div>
          <div class="flow-desc">${A.join(" ")}${ie}</div>
          <div class="flow-confirm flow-serve-confirm">${e.flowServeTag||"Serve"}</div>
        `,Xt(ce,_.seat||"",o.phase),n.appendChild(ce)}}else if(p.length===0){const S=document.createElement("div");S.style.color="var(--muted)",S.textContent=e.flowEmptyLater||"Aucune commande  prendre",n.appendChild(S)}else for(const S of p){const E=S.seat,_=[];E.status==="HON"?_.push('<span class="tag hon">HON</span>'):E.status==="SEN"?_.push('<span class="tag sen">SEN</span>'):E.status==="VIP"?_.push('<span class="tag vip">VIP</span>'):E.status==="FCL"?_.push('<span class="tag fcl">FCL</span>'):E.status==="PAD"?_.push('<span class="tag pad">PAD</span>'):E.status==="FTL"&&_.push('<span class="tag ftl">FTL</span>'),E.type==="infant"?_.push('<span class="tag inf">INF</span>'):E.type==="child"&&_.push('<span class="tag chd">CHD</span>'),E.sleep&&_.push(`<span class="tag sleep">${Mt.sleep}</span>`);const M=document.createElement("div");M.className="flow-item",M.dataset.key=S.key;const A=Bt==null?void 0:Bt(E);A&&_.unshift(A),M.innerHTML=`
          <div class="flow-seat">${S.key}</div>
          <div class="flow-desc">${_.join(" ")}</div>
          <div class="tag">${e.flowTakeOrder||"Order"}</div>
        `,M.addEventListener("click",()=>mn(S.key)),n.appendChild(M)}}if(u.length===0){const b=document.createElement("div");b.style.color="var(--muted)",b.textContent=e.flowEmptyLater||"No passenger to serve",t.appendChild(b)}else for(const b of u){const S=b.seat,E=[];S.status==="HON"?E.push('<span class="tag hon">HON</span>'):S.status==="SEN"?E.push('<span class="tag sen">SEN</span>'):S.status==="VIP"?E.push('<span class="tag vip">VIP</span>'):S.status==="FCL"?E.push('<span class="tag fcl">FCL</span>'):S.status==="PAD"?E.push('<span class="tag pad">PAD</span>'):S.status==="FTL"&&E.push('<span class="tag ftl">FTL</span>'),S.type==="infant"?E.push('<span class="tag inf">INF</span>'):S.type==="child"&&E.push('<span class="tag chd">CHD</span>'),S.sleep&&E.push(`<span class="tag sleep">${Mt.sleep}</span>`);const _=document.createElement("div");if(_.className="flow-item"+(S.eatWith?" eat-with":""),S.eatWith){const K=[b.key,S.eatWith].sort().join("-");_.dataset.pair=K}_.dataset.key=b.key;const M=Bt(S);M&&E.unshift(M);const A=jl(b.key);_.innerHTML=`
  <div class="flow-seat">${b.key}</div>
  <div class="flow-desc">${E.join(" ")}</div>
  <div class="flow-confirm flow-serve-confirm">${e.flowServeTag||"Serve"}</div>
  ${A}
`,Xt(_,b.key,o.phase),t.appendChild(_)}if(a)if(!y||y.length===0){const b=document.createElement("div");b.style.color="var(--muted)",b.textContent=e.flowEmptyClear||"Rien  dbarrasser",a.appendChild(b)}else for(const b of y){const S=b.seat,E=[];S.status==="HON"?E.push('<span class="tag hon">HON</span>'):S.status==="SEN"?E.push('<span class="tag sen">SEN</span>'):S.status==="VIP"?E.push('<span class="tag vip">VIP</span>'):S.status==="FCL"?E.push('<span class="tag fcl">FCL</span>'):S.status==="PAD"?E.push('<span class="tag pad">PAD</span>'):S.status==="FTL"&&E.push('<span class="tag ftl">FTL</span>'),S.type==="infant"?E.push('<span class="tag inf">INF</span>'):S.type==="child"&&E.push('<span class="tag chd">CHD</span>'),S.sleep&&E.push('<span class="tag sleep"></span>');const _=document.createElement("div");if(_.className="flow-item"+(S.eatWith?" eat-with":""),S.eatWith){const M=[b.key,S.eatWith].sort().join("-");_.dataset.pair=M}_.dataset.key=b.key,_.innerHTML=`
          <div class="flow-seat">${b.key}</div>
          <div class="flow-desc">${E.join(" ")}</div>
          <div class="flow-confirm flow-serve-confirm">${e.flowClearTag||"DÃ©barrasser"}</div>
        `,Xt(_,b.key,"clear",M=>{const[A,K]=De(M),$=A&&K?pe(A,K):null;ho(M,$)}),a.appendChild(_)}}function Ot(){const e=document.getElementById("langDropdown"),t=document.getElementById("langActive"),n=document.getElementById("langMenu");if(!e||!t||!n)return;e.style.pointerEvents="auto",e.style.position="relative",e.style.zIndex="600";const a={EN:String.fromCodePoint(127468,127463),DE:String.fromCodePoint(127465,127466),FR:String.fromCodePoint(127467,127479)},l=String.fromCodePoint(127987),i=()=>{const d=(o.config.lang||"EN").toUpperCase(),u=a[d]||l;t.textContent=u,t.setAttribute("aria-label",d),t.title=d},c=()=>{n.querySelectorAll("[data-lang]").forEach(d=>{const u=(d.dataset.lang||"").toUpperCase(),p=a[u]||l;d.textContent=p,d.setAttribute("aria-label",u),d.title=u})};c(),i();const s=d=>{e.classList.toggle("open",d),t.setAttribute("aria-expanded",String(d)),n.style.display=d?"flex":"none",d&&n.querySelectorAll("[data-lang]").forEach(u=>{u.classList.toggle("primary",u.dataset.lang===(o.config.lang||"EN"))})};t.addEventListener("click",d=>{d.stopPropagation(),s(!e.classList.contains("open"))}),n.addEventListener("click",d=>d.stopPropagation());const r=d=>{e.classList.contains("open")&&(e.contains(d.target)||s(!1))};document.addEventListener("click",r),document.addEventListener("pointerdown",r),document.addEventListener("keydown",d=>{d.key==="Escape"&&s(!1)}),n.querySelectorAll("[data-lang]").forEach(d=>{d.addEventListener("click",()=>{var p;const u=d.dataset.lang;u&&(o.config.lang=u,B(),et(),ne(),O(),x(),((p=document.getElementById("modalBack"))==null?void 0:p.style.display)==="flex"&&typeof Ge=="function"&&Ge(),i(),c(),s(!1))})})}function nt(){const e=o.config.theme==="dark";document.body.classList.toggle("theme-dark",e),document.body.classList.toggle("theme-light",!e);const t=document.getElementById("themeToggle");if(t){const n=e?"Light mode":"Dark mode";t.textContent=e?"â˜€ï¸":"ðŸŒ™",t.setAttribute("aria-label",n),t.title=n}}const Jn=document.getElementById("themeToggle");Jn&&Jn.addEventListener("click",()=>{o.config.theme=o.config.theme==="dark"?"light":"dark",B(),nt()});const en=document.getElementById("layoutSelect");en&&en.addEventListener("change",()=>{const e=en.value||"A220";o.config.layout=e,B(),$t(),O(),x()});document.querySelectorAll(".layout-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.layout||"";if(!t)return;const n=document.getElementById("layoutSelect");if(n){if(n.value===t){$t();return}n.value=t,n.dispatchEvent(new Event("change",{bubbles:!0}))}})});document.querySelectorAll("[data-inv]").forEach(e=>e.addEventListener("click",()=>{const t=e.dataset.key,n=e.dataset.inv==="+1"?1:-1;t&&(t.startsWith("hot_")||t==="plateaux")&&(o.inventory[t]=Math.max(0,(o.inventory[t]||0)+n)),B(),X()}));const bo=document.getElementById("rowsBizDisplay");document.getElementById("rowsBizMinus").addEventListener("click",()=>{o.config.rowsBiz=Math.max(0,(o.config.rowsBiz||0)-1),bo.textContent=o.config.rowsBiz,B(),O(),x()});document.getElementById("rowsBizPlus").addEventListener("click",()=>{o.config.rowsBiz=Math.min(15,(o.config.rowsBiz||0)+1),bo.textContent=o.config.rowsBiz,B(),O()});I("#spmlAddBtn").addEventListener("click",()=>{const e=v[o.config.lang||"EN"]||v.EN,t=(I("#spmlAddCode").value||"").trim().toUpperCase(),n=Math.max(1,parseInt(I("#spmlAddQty").value||"1",10));if(!t){alert(e.spmlCodeRequired);return}o.inventory.spml[t]=(o.inventory.spml[t]||0)+n,I("#spmlAddCode").value="",B()});var wa;(wa=document.getElementById("spmlAddCode"))==null||wa.addEventListener("change",e=>e.target.blur());I("#preAddBtn").addEventListener("click",()=>{var c;const e=v[o.config.lang||"EN"]||v.EN,t=(((c=I("#preAddCode"))==null?void 0:c.value)||"").trim(),n=(I("#preAddLabel").value||"").trim(),a=(t||n).trim(),l=Math.max(1,parseInt(I("#preAddQty").value||"1",10));if(!a){alert(e.preAddLabelRequired);return}o.inventory.pre[a]=(o.inventory.pre[a]||0)+l,I("#preAddLabel").value="";const i=I("#preAddCode");i&&(i.value=""),B()});var Ma;(Ma=document.getElementById("preAddCode"))==null||Ma.addEventListener("change",e=>e.target.blur());document.querySelectorAll("#filterTabs .subtab[data-filter]").forEach(e=>e.addEventListener("click",()=>{if(e.classList.contains("active"))return;const t=e.dataset.filter||"all";lo(t),Qe()&&ut(!1),O(),x()}));lo(oo());const Gn=document.getElementById("bulkOccupyToggle"),qn=document.getElementById("bulkOccupyApply"),Un=document.getElementById("bulkOccupyClear");Gn&&Gn.addEventListener("click",()=>{Pt(!H)});qn&&qn.addEventListener("click",()=>cl());Un&&Un.addEventListener("click",()=>il());$e();Q&&te&&dn&&(ut(!1),Q.addEventListener("click",e=>{e.stopPropagation()}),te.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=!Qe();ut(t)}),document.addEventListener("click",e=>{if(!Qe())return;const t=e.target;t&&(Q.contains(t)||te.contains(t)||ut(!1))}),window.addEventListener("resize",()=>{Qe()&&co()}),document.addEventListener("keydown",e=>{e.key!=="Escape"||!Qe()||(ut(!1),te.focus({preventScroll:!0}))}));document.querySelectorAll("#phaseChips .tab").forEach(e=>e.addEventListener("click",()=>{if(e.classList.contains("active"))return;const t=e.dataset.phase||"fiche";o.phase=t,zt(t),O(),x(),mt()}));I("#exportPNG").addEventListener("click",()=>{const e=o.config.rowsBiz||0,t=72,n=48,a=40,l=["F","E","D"],i=ao(),c=l.length+i.length,s=a+c*t+28+20,r=a+e*n+20,d=document.createElement("canvas");d.width=s,d.height=r;const u=d.getContext("2d");u.fillStyle="#ffffff",u.fillRect(0,0,s,r),u.fillStyle="#000000",u.font="12px system-ui";let p=a;const y=l.concat([""]).concat(i);for(const m of y){if(m===""){p+=28;continue}u.fillText(m,p+t/2-4,a-12),p+=t}for(let m=e;m>=1;m--){const k=a+(e-m)*n;u.fillText(String(m),10,k+28);for(let b=0;b<l.length;b++){const S=a+b*t;Zn(u,m,l[b],S,k,t,n)}const w=a+l.length*t+28;for(let b=0;b<i.length;b++){const S=w+b*t;Zn(u,m,i[b],S,k,t,n)}}const g=document.createElement("a");g.href=d.toDataURL("image/png");const h=(o.title.flightNo||"vol")+"_"+(o.title.date||"date")+"_seatmap.png";g.download=h,g.click()});function Zn(e,t,n,a,l,i,c){var d;e.strokeStyle="#888",e.strokeRect(a,l,i-6,c-6);const s=pe(t,n);s.occupied&&(e.fillStyle="#dce6ff",e.fillRect(a+1,l+1,i-8,c-8)),e.fillStyle="#000",e.font="12px system-ui",e.textBaseline="alphabetic",e.fillText(t+n,a+8,l+18);let r="";if(!((d=s==null?void 0:s.served)!=null&&d.trayCleared)){const u=s.spml||s.preLabel?null:s.normalMeal==="viande"?"1":s.normalMeal==="vege"?"2":s.normalMeal==="plateau"?"":null;r=s.spml?s.spml:s.preLabel?"PRE":u||""}r&&(e.font="12px system-ui",e.fillStyle="#000",e.textBaseline="bottom",e.fillText(r,a+i-32,l+c-6),e.textBaseline="alphabetic"),s.status!=="none"&&(s.status==="FTL"?e.fillStyle="#9aa4b2":s.status==="SEN"?e.fillStyle="#ffd24d":s.status==="HON"?e.fillStyle="#000000":s.status==="VIP"?e.fillStyle="#9b5cff":s.status==="FCL"?e.fillStyle="#ff5757":s.status==="PAD"?e.fillStyle="#39d98a":e.fillStyle="#666",e.beginPath(),e.arc(a+i-20,l+16,6,0,2*Math.PI),e.fill(),e.fillStyle="#000")}I("#clientView").addEventListener("click",()=>{o.clientView=!o.clientView,B(),document.body.classList.toggle("client",o.clientView),nt(),et(),O(),x()});let tn=!1,Ze=null;const Dl=4e3;function Ol(){o.inventory.plateaux=0,o.inventory.hot_viande=0,o.inventory.hot_vege=0;for(const e of kt)o.inventory.spml[e]=0;o.inventory.hot_special=0,o.inventory.pre={},Le(),o.menu.mode="auto",o.menu.direction=null,o.menu.serviceType=null,o.menu.breakfastType="standard",o.menu.rotation=null,o.menu.viandeLabel="",o.menu.vegeLabel="",o.menu.manualViandeLabel="",o.menu.manualVegeLabel="",o.menu.autoViandeLabel="",o.menu.autoVegeLabel="",o.menu.autoStatus="",o.menu.autoNote="",o.reminders=[],o.history=[];for(const e of Object.keys(o.seats))o.seats[e]=Ae({});o.phase="fiche",document.querySelectorAll("input[type='text'], textarea").forEach(e=>e.value=""),je(),we(!1),zt("fiche"),B(),O(),X(),ne(),qe(),G({type:"reset"})}const re=document.getElementById("resetFlight");if(re){const e=()=>{var s;const n=(re.dataset.defaultLabel??"").trim();if(n)return n;const a=o.config.lang||"EN",i=((v[a]||v.EN).reset??"").trim();if(i)return i;const c=(re.textContent??"").trim();return c||(((s=v.EN)==null?void 0:s.reset)??"Reset").trim()},t=n=>{var i;Ze!==null&&(clearTimeout(Ze),Ze=null),tn=!1,re.dataset.resetArmed="false";const l=(n??e()).trim()||(((i=v.EN)==null?void 0:i.reset)??"Reset");re.dataset.defaultLabel=l,re.textContent=l};re.dataset.resetArmed=re.dataset.resetArmed??"false",re.addEventListener("click",()=>{const n=o.config.lang||"EN",a=v[n]||v.EN,l=(a.resetConfirm??a.reset??"Confirm").trim()||"Confirm",i=e();tn?(t(i),Ol()):(tn=!0,re.dataset.resetArmed="true",re.dataset.defaultLabel=i,re.textContent=l,Ze!==null&&clearTimeout(Ze),Ze=window.setTimeout(()=>{t()},Dl))})}function xl(){if(!Array.isArray(o.history))return;const e=[];for(const t of o.history){if(t&&typeof t=="object"&&t.type){e.push(t);continue}if(typeof t!="string"){e.push(t);continue}const n=t.replace(/^\s*\[\d{2}:\d{2}\]\s*/,"");let a;if(a=n.match(/^(Apritif servi |Aperitif served at|Aperitif serviert bei)\s+([0-9]+[A-F])/)){e.push({ts:Date.now(),type:"apServed",seat:a[2]});continue}if(a=n.match(/^(Apritif annul pour|Aperitif canceled for|Aperitif storniert fr)\s+([0-9]+[A-F])/)){e.push({ts:Date.now(),type:"apCanceled",seat:a[2]});continue}if(a=n.match(/^(Plat servi |Main served at|Hauptgang serviert bei)\s+([0-9]+[A-F])(?:\s+\s+(.+))?/)){e.push({ts:Date.now(),type:"mealServed",seat:a[2],label:a[3]||""});continue}if(a=n.match(/^(Service annul pour|Service canceled for|Service storniert fr)\s+([0-9]+[A-F])/)){e.push({ts:Date.now(),type:"serviceCanceled",seat:a[2]});continue}if(/(Vol rinitialis\.|Flight reset\.|Flug zurckgesetzt\.)/.test(n)){e.push({ts:Date.now(),type:"reset"});continue}e.push({ts:Date.now(),type:"text",text:n})}o.history=e}(function(){var l;if(o.seats&&typeof o.seats=="object")for(const i of Object.keys(o.seats))o.seats[i]=Ae(o.seats[i]);for(const i of kt)typeof o.inventory.spml[i]!="number"&&(o.inventory.spml[i]=0);I("#flightNo").value=o.title.flightNo||"",document.getElementById("flightDateISO").value=o.title.date||"",I("#flightDate").value=yt(o.title.date||""),(l=document.getElementById("flightDate"))==null||l.addEventListener("input",ht),ht();const t=document.getElementById("rowsBizDisplay"),n=document.getElementById("layoutSelect");n&&(n.value=o.config.layout||"A220"),$t();const a=document.getElementById("langSelect");a&&(a.value=o.config.lang||"EN"),et(),ne(),xl(),ne(),Ot(),o.config.theme="dark",nt(),ue(),O(),t&&(t.textContent=o.config.rowsBiz||0),Le(),!o.menu.manualViandeLabel&&o.menu.viandeLabel&&(o.menu.manualViandeLabel=o.menu.viandeLabel),!o.menu.manualVegeLabel&&o.menu.vegeLabel&&(o.menu.manualVegeLabel=o.menu.vegeLabel),o.menu.direction!=="inbound"&&o.menu.direction!=="outbound"&&(o.menu.direction=null),o.menu.serviceType=o.menu.serviceType==="day"||o.menu.serviceType==="breakfast"?o.menu.serviceType:null,rl(),ul(),sl(),document.body.classList.toggle("client",o.clientView),zt(o.phase),O(),X(),ne(),qe()})();var Na;(Na=document.getElementById("tc_group"))==null||Na.addEventListener("change",Cl);var Aa;(Aa=document.getElementById("tc_alcool_type"))==null||Aa.addEventListener("change",Tl);var Da;(Da=document.getElementById("tc_chaud_type"))==null||Da.addEventListener("change",_l);["tc_soft_type","tc_soft_eau","tc_soft_jus","tc_soft_coca","tc_soft_sprite","tc_beer","tc_vin_rouge","tc_vin_blanc","tc_digestif_type","tc_the_type","tc_group","tc_alcool_type","tc_chaud_type"].forEach(e=>{var t;return(t=document.getElementById(e))==null?void 0:t.addEventListener("change",D)});var Oa;(Oa=document.getElementById("tc_group"))==null||Oa.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value=""),D()});var xa;(xa=document.getElementById("tc_alcool_type"))==null||xa.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value=this.value||""),D()});var Pa;(Pa=document.getElementById("tc_chaud_type"))==null||Pa.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value=this.value||""),D()});var Ka;(Ka=document.getElementById("tc_soft_type"))==null||Ka.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value="soft"),D()});var Ra;(Ra=document.getElementById("tc_soft_eau"))==null||Ra.addEventListener("change",D);var Fa;(Fa=document.getElementById("tc_soft_coca"))==null||Fa.addEventListener("change",D);var ja;(ja=document.getElementById("tc_soft_sprite"))==null||ja.addEventListener("change",D);var Va;(Va=document.getElementById("tc_beer"))==null||Va.addEventListener("change",D);var Ha;(Ha=document.getElementById("tc_vin_rouge"))==null||Ha.addEventListener("change",D);var Wa;(Wa=document.getElementById("tc_vin_blanc"))==null||Wa.addEventListener("change",D);var za;(za=document.getElementById("tc_cocktail_type"))==null||za.addEventListener("change",D);const Pl={FR:{campari:["<b>Campari Orange</b> : Glaons, Campari, Jus d'orange","<b>Campari Soda</b> : Glaons, Campari, Eau gazeuse"],bloody_mary:["Glaons, Vodka, Jus de tomate, sel, poivre, citron"],screwdriver:["Glaons, Vodka, Jus d'orange"],gin_tonic:["Glaons, Gin, Citron, Tonic"],cuba_libre:["Glaons, Rhum, Citron, Coca-Cola"]},EN:{campari:["<b>Campari Orange</b>: Ice, Campari, Orange juice","<b>Campari Soda</b>: Ice, Campari, Sparkling water"],bloody_mary:["Ice, Vodka, Tomato juice, salt, pepper, lemon"],screwdriver:["Ice, Vodka, Orange juice"],gin_tonic:["Ice, Gin, Lemon, Tonic"],cuba_libre:["Ice, Rum, Lemon, Coca-Cola"]},DE:{campari:["<b>Campari Orange</b>: Eis, Campari, Orangensaft","<b>Campari Soda</b>: Eis, Campari, Sodawasser"],bloody_mary:["Eis, Wodka, Tomatensaft, Salz, Pfeffer, Zitrone"],screwdriver:["Eis, Wodka, Orangensaft"],gin_tonic:["Eis, Gin, Zitrone, Tonic"],cuba_libre:["Eis, Rum, Zitrone, Coca-Cola"]}};function Kl(){var e;return(((e=o==null?void 0:o.config)==null?void 0:e.lang)||"EN").toUpperCase()}function Rl(e){var i;const t=document.getElementById("tc_tip"),n=Kl(),a=((i=Pl[n])==null?void 0:i[e])||null,l=Array.isArray(a)&&a.length>1;t.innerHTML=a?a.map(c=>`<div>${l?" ":""}${c}</div>`).join(""):""}function Fl(e){const t=document.getElementById("tc_tipBtn"),n=document.getElementById("tc_tip");!t||!n||(e?(t.style.display="inline-flex",n.style.display="none"):(t.style.display="none",n.style.display="none"))}(function(){var l;const t=document.getElementById("tc_cocktail_type");if(!t)return;const n=t.cloneNode(!0);t.parentNode.replaceChild(n,t);const a=document.getElementById("tc_cocktail_type");a.addEventListener("change",i=>{const c=i.target.value,s=c==="bloody_mary";document.querySelectorAll("#tc_cocktail .bm-only").forEach(r=>{r.style.display=s?"inline-flex":"none",s||(r.querySelector("input").checked=!1)}),Fl(c),Rl(c),D()}),(l=document.getElementById("tc_tipBtn"))==null||l.addEventListener("click",()=>{const i=document.getElementById("tc_tip");i&&(i.style.display=i.style.display==="none"||!i.style.display?"block":"none")}),document.addEventListener("click",i=>{const c=document.getElementById("tc_cocktail_tipwrap"),s=document.getElementById("tc_tip");c&&s&&!c.contains(i.target)&&(s.style.display="none")}),a.dispatchEvent(new Event("change"))})();var $a;($a=document.getElementById("tc_soft_type"))==null||$a.addEventListener("change",function(){We(),D()});document.addEventListener("DOMContentLoaded",()=>{ro()});var Ja;(Ja=document.getElementById("saveSnapshot"))==null||Ja.addEventListener("click",()=>{var s;const e=(((s=o==null?void 0:o.title)==null?void 0:s.flightNo)||"no-flight").replace(/\W+/g,"_"),t=new Date,n=`${t.getFullYear()}${String(t.getMonth()+1).padStart(2,"0")}${String(t.getDate()).padStart(2,"0")}-${String(t.getHours()).padStart(2,"0")}${String(t.getMinutes()).padStart(2,"0")}`,a=`${e||"flight"}-${n}.json`,l=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),i=URL.createObjectURL(l),c=document.createElement("a");c.href=i,c.download=a,document.body.appendChild(c),c.click(),setTimeout(()=>{URL.revokeObjectURL(i),c.remove()},500)});function vo(e){for(let t=0;t<o.history.length;t++){const n=o.history[t];if(n&&n.type==="tcServed"&&n.seat===e&&n.ctx==="repas")return n}return null}function pn(e){return!e||e.cat==="cafe"||e.cat==="deca"||e.cat==="the"||e.cat==="chocolat"||e.cat==="soft"&&(e.softType==="eau"||e.softType==="coca"||e.softType==="jus"||e.softType==="sprite"||e.softType==="tonic")||e.cat==="champagne"||e.cat==="vin_rouge"||e.cat==="vin_blanc"||e.cat==="biere"||e.cat==="cocktail"||e.cat==="digestif",""}function jl(e){const t=vo(e);if(!t)return"";const n=v[o.config.lang||"EN"];let a="";t.ap&&(a=le(t.ap,n,o.config.lang||"EN")||"");const l=(t.notes||"").trim(),i=[a,l].filter(Boolean).join("  "),c=pn(t.ap),s=(c?c+" ":"")+i;return i?`<div class="flow-sub">${s}</div>`:""}function Ee(e){const t=document.getElementById("mhMealDrinkInline");if(!t)return;const n=v[o.config.lang||"EN"],a=vo(e),l=(n.mealDrinkTitle||"Meal drinks")+": ";if(!a){t.textContent=l+"";return}const i=a.ts||a.t||null,c=i?new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";let s="";a.ap&&(s=le(a.ap,n,o.config.lang||"EN")||""),t.textContent=l+(s?`${c}  ${s}`:`${c}`)}function Vl(e){for(let t=0;t<o.history.length;t++){const n=o.history[t];if(n&&n.type==="tcServed"&&n.seat===e&&n.ctx!=="repas")return n}return null}function Ce(e){const t=document.getElementById("mhTCInline");if(!t)return;const n=v[o.config.lang||"EN"],a=Vl(e),l=(n.chips_tc||"Tea & Coffee")+": ";if(!a){t.textContent=l+"";return}const i=a.ts||a.t||null,c=i?new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";let s="";a.ap&&(s=le(a.ap,n,o.config.lang||"EN")||""),t.textContent=l+(s?`${c}  ${s}`:`${c}`)}function Hl(){const e=document.getElementById("flightNo"),t=document.getElementById("flightDateISO"),n=document.getElementById("flightDate");o.title||(o.title={flightNo:"",date:""}),e&&(o.title.flightNo=(e.value||"").trim()),t&&t.value?o.title.date=t.value:n&&(o.title.date=n.value);const a=document.getElementById("labelViande"),l=document.getElementById("labelVege");Le(),a&&(o.menu.manualViandeLabel=(a.value||"").trim()),l&&(o.menu.manualVegeLabel=(l.value||"").trim()),o.menu.mode==="manual"?(o.menu.viandeLabel=o.menu.manualViandeLabel||"",o.menu.vegeLabel=o.menu.manualVegeLabel||""):we(!1)}function Wl(){typeof initFlightDatePicker=="function"&&initFlightDatePicker(),attachHeaderButtons==null||attachHeaderButtons(),Ot==null||Ot(),nt==null||nt()}function zl(){vt(),Z(),Y(),D();const e=document.getElementById("mealBlock");e&&!e.dataset.touchReady&&(e.addEventListener("touchstart",kl,{passive:!0}),e.addEventListener("touchend",Sl,{passive:!0}),e.addEventListener("touchcancel",()=>{ke=null},{passive:!0}),e.dataset.touchReady="1")}function $l(){setTooltips==null||setTooltips()}function Jl(){init==null||init()}function Gl(){Hl(),B()}function ql(){Wl()}function Ul(){$l()}function Zl(){zl()}async function Yl(){try{navigator.storage&&navigator.storage.persist&&(await navigator.storage.persisted()||await navigator.storage.persist())}catch(e){console.warn("Persistent storage request failed:",e)}}const Ql="swiss-serviceflow",Xl=1,st="flights",jt="meta",ko="lastKey",bt="ssf::flight::",So="ssf::lastKey";let ae=typeof window<"u"&&window.localStorage?window.localStorage:null;function ei(e){ae=e}let nn=null;function ti(){return typeof indexedDB<"u"}function St(){return ti()?(nn||(nn=new Promise((e,t)=>{const n=indexedDB.open(Ql,Xl);n.onupgradeneeded=()=>{const a=n.result;a.objectStoreNames.contains(st)||a.createObjectStore(st,{keyPath:"id"}),a.objectStoreNames.contains(jt)||a.createObjectStore(jt,{keyPath:"key"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error??new Error("IndexedDB open failed"))})),nn):Promise.reject(new Error("IndexedDB is not available"))}function In(e,t,n,a){return new Promise((l,i)=>{const c=e.transaction(t,n),s=c.objectStore(t);try{a(s)}catch(r){i(r instanceof Error?r:new Error("IndexedDB transaction error"));return}c.oncomplete=()=>l(),c.onerror=()=>i(c.error??new Error("IndexedDB transaction failed")),c.onabort=()=>i(c.error??new Error("IndexedDB transaction aborted"))})}function Eo(e,t){return St().then(n=>new Promise((a,l)=>{const s=n.transaction(e,"readonly").objectStore(e).get(t);s.onsuccess=()=>a(s.result),s.onerror=()=>l(s.error??new Error("IndexedDB get failed"))}))}function ni(e){return St().then(t=>new Promise((n,a)=>{const c=t.transaction(e,"readonly").objectStore(e).getAllKeys();c.onsuccess=()=>{const s=c.result.map(r=>String(r));n(s)},c.onerror=()=>a(c.error??new Error("IndexedDB getAllKeys failed"))}))}function ai(e,t){if(ae)try{const n=JSON.stringify(t);ae.setItem(`${bt}${e}`,n)}catch(n){console.warn("Fallback save failed:",n)}}function Yn(e){if(!ae)return null;try{const t=ae.getItem(`${bt}${e}`);return t?JSON.parse(t):null}catch(t){return console.warn("Fallback load failed:",t),null}}function oi(e){if(ae)try{ae.setItem(So,e)}catch(t){console.warn("Fallback setLastKey failed:",t)}}function Qn(){if(!ae)return null;try{return ae.getItem(So)??null}catch(e){return console.warn("Fallback getLastKey failed:",e),null}}function Xn(){if(!ae)return[];try{const e=[];for(let t=0;t<ae.length;t+=1){const n=ae.key(t);n&&n.startsWith(bt)&&e.push(n.replace(bt,""))}return e}catch(e){return console.warn("Fallback listKeys failed:",e),[]}}function li(e){if(ae)try{ae.removeItem(`${bt}${e}`)}catch(t){console.warn("Fallback deleteFlight failed:",t)}}async function ea(e,t){const n={id:e,payload:t,updatedAt:Date.now()};try{const a=await St();await In(a,st,"readwrite",l=>{l.put(n)})}catch(a){console.warn("[db] saveFlight falling back:",a),ai(e,t)}}async function ii(e){try{const t=await St();await In(t,st,"readwrite",n=>{n.delete(e)})}catch(t){console.warn("[db] deleteFlight falling back:",t),li(e)}}async function ci(e){try{const t=await Eo(st,e);return t?t.payload??null:Yn(e)}catch(t){return console.warn("[db] loadFlight falling back:",t),Yn(e)}}async function an(e){const t={key:ko,value:e,updatedAt:Date.now()};try{const n=await St();await In(n,jt,"readwrite",a=>{a.put(t)})}catch(n){console.warn("[db] setLastFlightKey falling back:",n),oi(e)}}async function si(){try{const e=await Eo(jt,ko);return e?typeof e.value=="string"?e.value:null:Qn()}catch(e){return console.warn("[db] getLastFlightKey falling back:",e),Qn()}}async function ri(){try{const e=await ni(st);return e.length?e:Xn()}catch(e){return console.warn("[db] listFlightKeys falling back:",e),Xn()}}const Co="serviceflow::",ft=`${Co}lastKey`;async function di(){if(typeof window>"u")return;const e=Storage.prototype.setItem,t=Storage.prototype.removeItem,n=Storage.prototype.getItem,a=window.localStorage;ei(a);try{for(let l=0;l<a.length;l+=1){const i=a.key(l);if(!i)continue;const c=n.call(a,i);if(c){if(i===ft){an(c).catch(s=>console.warn("[persistence] setLastFlightKey failed during migration:",s));continue}if(It(i))try{const s=JSON.parse(c);ea(i,s).catch(r=>console.warn("[persistence] saveFlight failed during migration:",r))}catch(s){console.warn("[persistence] migration parse error:",s)}}}}catch(l){console.warn("[persistence] migration failed:",l)}try{const l=await ri();for(const c of l)if(It(c)&&!n.call(a,c)){const s=await ci(c);s&&e.call(a,c,JSON.stringify(s))}const i=await si();i&&e.call(a,ft,i)}catch(l){console.warn("[persistence] preload failed:",l)}Storage.prototype.setItem=function(i,c){if(e.call(this,i,c),i===ft){an(c).catch(s=>console.warn("[persistence] setLastFlightKey failed:",s));return}if(It(i))try{const s=JSON.parse(c);ea(i,s).catch(r=>console.warn("[persistence] saveFlight failed:",r))}catch(s){console.warn("[persistence] saveFlight parse error:",s)}},Storage.prototype.removeItem=function(i){if(t.call(this,i),i===ft){an("").catch(()=>{});return}It(i)&&ii(i).catch(c=>console.warn("[persistence] deleteFlight failed:",c))}}function It(e){return e.startsWith(Co)&&e!==ft}const ui=1200;let on;function fi(){on!==void 0&&window.clearTimeout(on),on=window.setTimeout(()=>{try{Gl()}catch(e){console.warn("[autosave] persist failed:",e)}},ui)}function mi(e){const t=()=>fi();e.addEventListener("input",t,{capture:!0}),e.addEventListener("change",t,{capture:!0})}document.addEventListener("DOMContentLoaded",async()=>{await Yl(),await di(),ql(),Ul(),Zl(),Jl(),mi(document)});
