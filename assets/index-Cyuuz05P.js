(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();const k={EN:{flight:"Flight",date:"Date",saveTitle:"Save",reset:"Reset",client:"Client mode",crew:"Crew mode",lblLang:"Language",flightPlaceholder:"e.g. LX2810",exportJSON:"Export JSON",importJSON:"Import",exportPNG:"PNG",rights:"All rights reserved",chips_apero:"Aperitif",chips_meal:"Main",chips_tc:"Tea & Coffee",chips_fiche:"Pax record",filter_all:"All seats",filter_toserve:"To serve",filter_clear:"To clear",filter_sleep:"Sleeping",filter_later:"Serve later",lgServed:"âœ… Served",lgclear:"ðŸ§¹ Cleared",flowTitle:"Order flow",flowNowTitle:"Service path â¬‡ï¸",flowLaterTitle:"Orders to take â¬‡ï¸",flowClearTitle:"To clear â¬‡ï¸",flowAperoTakenTitle:"Orders taken â¬‡ï¸",flowTaken:"Taken",flowEmptyTaken:"No orders taken yet",flowTCTakenTitle:"Tea & coffee taken â¬‡ï¸",flowTakeOrder:"Order",flowServeTag:"Serve",flowClearTag:"To clear",flowEmptyLater:"No orders left",flowEmptyClear:"Nothing to clear",seatmapTitle:"Seatmap ({L} | {R})",seat:"Seat",trayShort:"Tray",apLabel:"Aperitif",mealLabel:"Main",hdrConfig:"Curtain & configuration",lblLayout:"Aircraft",lblRows:"Rows",secMenuTitle:"Menu",lblViande:"Option 1",lblVege:"Option 2",hdrInventaire:"Inventory",invPlateaux:"Trays",invViande:"Option 1",invVege:"Option 2",invSpecial:"SPML",spml:"SPML",add:"Add",preHeader:"Pre-order",preAdd:"Pre-order",close:"âœ–ï¸",mdPass:"Passenger",mdOcc:"Seat occupied",mdSleepTxt:"ðŸ˜´ Sleeping",mdType:"Pax type",mdAdult:"Adult",mdChild:"Child",mdInfant:"Infant",mdStatus:"Status",mdLang:"Language",mdEatWith:"Eat together with",mdEatWithPh:"e.g. 12B",mdLater:"Serve later",mdLaterCustom:"Time",mdLaterSet:"Set time",mdLaterCancel:"Cancel",mdLaterCustomBtn:"Custom time",mdNotes:"Notes",mdAperoNotes:"Drink / aperitif notes",mdTCNotes:"Tea & coffee notes",serveAperitif:"Order drink",mdMeal:"Meal",mdNormal:"Normal choice",optNormalMeat:"Option 1",optNormalVeg:"Option 2",optNormalTray:"Tray (no casserole)",mealDrinkTitle:"Meal drinks",mealDrinkNotes:"Meal drink notes",passengerNotesPlaceholder:"e.g. DE only, no nuts",aperoNotesPlaceholder:"e.g. Sparkling water, white wine, peanuts",mealDrinkNotesPlaceholder:"e.g. Sparkling water, white wine, peanuts",tcNotesPlaceholder:"e.g. Long coffee, sugar",meatPlaceholder:"e.g., Beef in red-wine sauce",vegPlaceholder:"e.g., Vegetarian lasagna",preAddPlaceholder:"e.g., Gluten-free pasta",optStatusOther:"Other",mdSpml:"SPML",mdPre:"Pre-order",serveMeal:"Serve main",cancelService:"Cancel service",clearTray:"Tray cleared",undoClearTray:"Undo tray clearing",modalTabFiche:"Pax record",modalTabApero:"Aperitif",modalTabMeal:"Main",modalTabTC:"Tea & Coffee",ordered:"ordered",eatTogether:"ðŸ½ï¸ Eat together with",eatTogetherPH:"e.g. 4C",clear:"Clear",moveSeat:"ðŸ” Move pax",moved:"Moved",swapped:"Swapped",pickDestSeat:"Pick destination seat",moved:"Moved",swapped:"Swapped",tcCH:"Swiss",tcForeign:"Foreign",serveTC:"Order drink",serveMealDrink:"Order drink",histTcServed:"Tea & Coffee served at",histMealDrinkServed:"Meal drink ordered by",serveNone:"No drink",serveNoFood:"No food",lgSleep:"ðŸ˜´ Sleeping",lgLater:"â³ Serve later",lgChoice:"ðŸ½ï¸ Choice saved",lgInfant:"ðŸ‘¶ Infant",lgChild:"ðŸ§’ Child",lgTogether:"ðŸ¤ Eat together",legendShow:"Show legend",legendHide:"Hide legend",alertSeatEmpty:"Seat not occupied.",alertChoose:"Choose a meal first (normal, SPML or pre-order).",alertNoTrays:"No trays available.",alertStock:"Insufficient stock for",alertDepleted:"depleted.",alertPickTime:"Pick a time.",resetConfirm:"Confirm",preAddLabelRequired:"Enter a pre-order name",spmlCodeRequired:"Select a SPML code",secHistoryTitle:"History (newest on top)",histTitleSet:"Title set:",histApServed:"Aperitif served at",histApOrdered:"Aperitif ordered at",histApCanceled:"Aperitif canceled for",histMealServed:"Main served at",histMealDrinkOrdered:"Meal drinks ordered at",histTcServed:"Tea & coffee served at",histTcOrdered:"Tea & coffee ordered at",histMealDrinkOrdered:"Meal drinks ordered at",histCanceled:"Service canceled for",resetDone:"Flight reset.",remindersTitle:"Upcoming reminders",remindServe:"ðŸ›Žï¸ Reminder: serve",histViewLabel:"View",histScope_all:"All events",histScope_seat:"By seat",histScope_type:"By type",histLblSeat:"Seat",histLblType:"Type",histAscLbl:"Oldest first",histType_mealDrinkServed:"Meal drink served",histType_apServed:"Aperitif served",histType_apOrdered:"Aperitif ordered",histType_tcServed:"Tea & Coffee served",histType_tcOrdered:"Tea & Coffee ordered",histType_tcOrdered:"Tea & Coffee ordered",histType_mealServed:"Main served",histType_apCanceled:"Aperitif canceled",histType_serviceCanceled:"Service canceled",histType_trayCleared:"Tray cleared",histType_trayUncleared:"Undo tray clearing",histType_reset:"Flight reset",histType_seatMoveStart:"Move pax",histType_seatMoved:"Seat moved",histType_seatSwapped:"Seats swapped",histType_text:"Notes",histNewest:"(newest on top)",histOldest:"(oldest on top)",histNewestBtn:"Switch to oldest on top",histOldestBtn:"Switch to newest on top",optStatusOther:"Other",tcTitle:"Aperitif",tcDrink:"Drink",tcService:"Service",tcNotes:"Notes",tcGroupSoft:"Softs",tcGroupAlcohol:"Alcohol",tcGroupHot:"Hot",tcLblAlcohol:"Alcohol",tcLblHot:"Hot",tcCatSoft:"Soft",tcLblSoft:"Soft",tcLblWater:"Water",tcLblJuice:"Juice",tcLblCoca:"Coca-Cola",tcSoftWater:"Water",tcSoftJuice:"Juice",tcSoftCoca:"Coca-Cola",tcSoftSprite:"Sprite",tcSoftTonic:"Tonic",tcWaterStill:"Still",tcWaterSpark:"Sparkling",tcJuiceApple:"Apple",tcJuiceOrange:"Orange",tcJuiceTomato:"Tomato",tcCocaClassic:"Classic",tcCocaZero:"Zero",tcLemon:"Lemon",tcSalt:"Salt",tcPepper:"Pepper",tcExtras:"Options",tcCatCafe:"Coffee",tcCatDeca:"Decaf",tcCatThe:"Tea",tcCatInf:"Infusion",tcCatChoco:"Caotina",tcLblChoco:"Caotina",tcChocoBrand:"Caotina",tcMilk:"Milk/Cream",tcMilkCreme:"Cream",tcMilkAvoine:"Oat milk",tcMilkLait:"Milk",tcMilkNone:"None",tcSweet:"Sweetener",tcSweetSugar:"Sugar",tcSweetSub:"Substitute",tcSweetNone:"None",tcTeaType:"Tea type",tcTeaEnglish:"English breakfast",tcTeaCamomille:"Chamomile",tcInfusion:"Infusion",tcInfCam:"Chamomile",tcPur:"Neat",tcRocks:"On the rocks",tcBaileys:"Baileys",tcIce:"Ice",tcCatDig:"Digestif",tcDigestif:"Digestif",tcDigJW:"Johnnie Walker",tcDigJB:"Jim Beam (Bourbon)",tcDigCognac:"Cognac",tcDigBaileys:"Baileys",tcCatBeer:"Beer",tcBeer:"Beer",tcBeerQ:"QuÃ¶llfrisch Lager Blonde",tcBeerC:"Calvinus White",tcBeerL:"Leermond (alcohol-free)",tcCatChamp:"Champagne",tcChampagne:"Champagne",tcChampPH:"Notes (e.g., brand, rosÃ©â€¦)",tcCatVin:"Wines",tcWines:"Wines",tcRed:"Red",tcWhite:"White",tcVinPH:"Notes (e.g., grape, commentâ€¦)",tcCatHot:"Hot drinks",tcMilkTitle:"Milk / Cream",tcSugarTitle:"Sugar",tcTeaTitle:"Tea",tcAlcoholTitle:"Alcoholic drinks",tcSoftTitle:"Soft drinks",tcTeaEnglish:"English Breakfast",tcTeaVert:"Green tea",tcTeaMenthe:"Mint tea",tcTeaCamomille:"Chamomile tea",tcHotWater:"Hot water",tcWater:"Water",tcCola:"Cola",tcJuice:"Juice",tcSprite:"Sprite",tcTonic:"Tonic",tcStill:"Still",tcSpark:"Sparkling",tcClassic:"Classic",tcZero:"Zero",tcOrange:"Orange",tcApple:"Apple",tcTomato:"Tomato",tcCaotina:"Caotina",jsonRestored:"Session restored from JSON",invalidFile:"Invalid file."},FR:{flight:"Vol",date:"Date",saveTitle:"Enregistrer",reset:"RÃ©initialiser",client:"Mode client",crew:"Mode Ã©quipage",lblLang:"Langue",flightPlaceholder:"ex : LX2810",exportJSON:"Export JSON",importJSON:"Importer",exportPNG:"PNG",rights:"Tous droits rÃ©servÃ©s",tcGroupSoft:"Softs",tcGroupAlcohol:"Alcool",tcGroupHot:"Chaud",tcLblAlcohol:"Alcool",tcLblHot:"Chaud",chips_apero:"ApÃ©ritif",chips_meal:"Plat",chips_tc:"ThÃ© & CafÃ©",chips_fiche:"Fiche pax",filter_all:"Tous les siÃ¨ges",filter_toserve:"Ã€ servir",filter_clear:"Ã€ dÃ©barrasser",filter_sleep:"En train de dormir",filter_later:"Servir plus tard",lgServed:"âœ… Servi",lgclear:"ðŸ§¹ DÃ©barrassÃ©",flowTitle:"Ordre de service",flowNowTitle:"Chemin de service â¬‡ï¸",flowLaterTitle:"Commandes Ã  prendre â¬‡ï¸",flowClearTitle:"Ã€ dÃ©barrasser â¬‡ï¸",flowAperoTakenTitle:"Commandes prises â¬‡ï¸",flowTaken:"Pris",flowEmptyTaken:"Aucune commande prise",flowTCTakenTitle:"ThÃ© & cafÃ© pris â¬‡ï¸",flowTakeOrder:"Commande",flowServeTag:"Servir",flowClearTag:"Ã€ dÃ©barrasser",flowEmptyLater:"Aucune commande",flowEmptyClear:"Rien Ã  dÃ©barrasser",seatmapTitle:"Plan cabine ({L} | {R})",seat:"SiÃ¨ge",trayShort:"Plateau",apLabel:"ApÃ©ritif",mealLabel:"Plat",hdrConfig:"Rideau & configuration",lblLayout:"Appareil",lblRows:"RangÃ©es",secMenuTitle:"Menu",lblViande:"Option 1",lblVege:"Option 2",hdrInventaire:"Inventaire",invPlateaux:"Plateaux",invViande:"Option 1",invVege:"Option 2",invSpecial:"SPML",spml:"SPML",add:"Ajouter",preHeader:"PrÃ©commande",preAdd:"PrÃ©commande",close:"âœ–ï¸",mdPass:"Passager",mdOcc:"SiÃ¨ge occupÃ©",mdSleepTxt:"ðŸ˜´ Dort",mdType:"Type de pax",mdAdult:"Adulte",mdChild:"Enfant",mdInfant:"BÃ©bÃ©",mdStatus:"Statut",mdLang:"Langue",mdEatWith:"Manger avec",mdEatWithPh:"ex : 12B",mdLater:"Servir plus tard",mdLaterCustom:"Heure",mdLaterSet:"DÃ©finir l'heure",mdLaterCancel:"Annuler",mdLaterCustomBtn:"Heure personnalisÃ©e",mdNotes:"Notes",mdAperoNotes:"Boisson / notes apÃ©ritif",mdTCNotes:"Notes thÃ© & cafÃ©",serveAperitif:"Commander boisson",mdMeal:"Plat",mdNormal:"Choix normal",optNormalMeat:"Option 1",optNormalVeg:"Option 2",optNormalTray:"Plateau (sans cocotte)",mealDrinkTitle:"Boissons repas",mealDrinkNotes:"Notes boissons repas",passengerNotesPlaceholder:"ex : DE uniquement, sans cacahuÃ¨tes",aperoNotesPlaceholder:"ex : eau gazeuse, vin blanc, cacahuÃ¨tes",mealDrinkNotesPlaceholder:"ex : eau gazeuse, vin blanc, cacahuÃ¨tes",tcNotesPlaceholder:"ex : CafÃ© allongÃ©, sucre",meatPlaceholder:"ex : BÅ“uf sauce vin rouge",vegPlaceholder:"ex : Lasagnes vÃ©gÃ©tariennes",preAddPlaceholder:"ex : PÃ¢tes sans gluten",optStatusOther:"Autre",mdSpml:"SPML",mdPre:"PrÃ©commande",serveMeal:"Plat servi",cancelService:"Annuler service",clearTray:"Plateau dÃ©barrassÃ©",undoClearTray:"Annuler dÃ©barrassage",modalTabFiche:"Fiche pax",modalTabApero:"ApÃ©ritif",modalTabMeal:"Plat",modalTabTC:"ThÃ© CafÃ©",ordered:"commandÃ©",moveSeat:"ðŸ” DÃ©placer pax",moved:"DÃ©placÃ©",swapped:"Ã‰changÃ©",eatTogether:"ðŸ½ï¸ Manger avec",eatTogetherPH:"ex : 4C",clear:"Effacer",pickDestSeat:"Choisis le siÃ¨ge de destination",moved:"DÃ©placÃ©",swapped:"Ã‰changÃ©",tcCH:"Suisse",tcForeign:"Ã‰tranger",serveTC:"Commander boisson",serveMealDrink:"Commander boisson",histTcServed:"ThÃ© & CafÃ© servi Ã ",histMealDrinkServed:"Boisson repas commandÃ©e par",serveNone:"Pas de boisson",serveNoFood:"Pas de plat",lgSleep:"ðŸ˜´ Dort",lgLater:"â³ Plus tard",lgChoice:"ðŸ½ï¸ Choix enregistrÃ©",lgInfant:"ðŸ‘¶ BÃ©bÃ©",lgChild:"ðŸ§’ Enfant",lgTogether:"ðŸ¤ Manger ensemble",legendShow:"Afficher la lÃ©gende",legendHide:"Masquer la lÃ©gende",alertSeatEmpty:"SiÃ¨ge non occupÃ©.",alertChoose:"Choisissez d'abord un plat (normal, SPML ou prÃ©commande).",alertNoTrays:"Plus de plateaux disponibles.",alertStock:"Stock insuffisant pour",alertDepleted:"Ã©puisÃ©.",alertPickTime:"Choisir une heure.",resetConfirm:"Confirmer",preAddLabelRequired:"Entrez un nom de prÃ©commande",spmlCodeRequired:"SÃ©lectionnez un code SPML",secHistoryTitle:"Historique (dernier en haut)",histTitleSet:"Titre dÃ©fini:",histApServed:"ApÃ©ritif servi Ã ",histApOrdered:"ApÃ©ritif commandÃ© Ã ",histApCanceled:"ApÃ©ritif annulÃ© pour",histMealServed:"Plat servi Ã ",histMealDrinkOrdered:"Boissons repas commandÃ©es Ã ",histTcServed:"ThÃ© & cafÃ© servis Ã ",histTcOrdered:"ThÃ© & cafÃ© commandÃ©s Ã ",histCanceled:"Service annulÃ© pour",resetDone:"Vol rÃ©initialisÃ©.",remindersTitle:"Rappels Ã  venir",remindServe:"ðŸ›Žï¸ Rappel: servir",histViewLabel:"Affichage",histScope_all:"Tous les Ã©vÃ©nements",histScope_seat:"Par siÃ¨ge",histScope_type:"Par type",histLblSeat:"SiÃ¨ge",histLblType:"Type",histAscLbl:"Du plus ancien au plus rÃ©cent",histType_mealDrinkServed:"Boisson repas servie",histType_apServed:"ApÃ©ritif servi",histType_apOrdered:"ApÃ©ritif commandÃ©",histType_tcServed:"ThÃ© & CafÃ© servi",histType_tcOrdered:"ThÃ© & CafÃ© commandÃ©",histType_tcOrdered:"ThÃ© & CafÃ© commandÃ©",histType_mealServed:"Plat servi",histType_apCanceled:"ApÃ©ritif annulÃ©",histType_serviceCanceled:"Service annulÃ©",histType_trayCleared:"Plateau dÃ©barrassÃ©",histType_trayUncleared:"Annuler dÃ©barrassage",histType_reset:"RÃ©initialisation vol",histType_seatMoveStart:"DÃ©placement pax",histType_seatMoved:"SiÃ¨ge dÃ©placÃ©",histType_seatSwapped:"SiÃ¨ges Ã©changÃ©s",histType_text:"Notes",histNewest:"(rÃ©cent en haut)",histOldest:"(ancien en haut)",histNewestBtn:"Basculer vers ancien en haut",histOldestBtn:"Basculer vers rÃ©cent en haut",optStatusOther:"Autre",tcTitle:"ApÃ©ritif",tcDrink:"Boisson",tcService:"Service",tcNotes:"Notes",tcCatSoft:"Soft",tcLblSoft:"Soft",tcLblWater:"Eau",tcLblJuice:"Jus",tcLblCoca:"Coca-Cola",tcSoftWater:"Eau",tcSoftJuice:"Jus",tcSoftCoca:"Coca-Cola",tcSoftSprite:"Sprite",tcSoftTonic:"Tonic",tcWaterStill:"Plate",tcWaterSpark:"Gazeuse",tcJuiceApple:"Pomme",tcJuiceOrange:"Orange",tcJuiceTomato:"Tomate",tcCocaClassic:"Normal",tcCocaZero:"Zero",tcLemon:"Citron",tcSalt:"Sel",tcPepper:"Poivre",tcExtras:"Options",tcCatCafe:"CafÃ©",tcCatDeca:"DÃ©cafÃ©inÃ©",tcCatThe:"ThÃ©",tcCatInf:"Infusion",tcCatChoco:"Caotina",tcLblChoco:"Caotina",tcChocoBrand:"Caotina",tcTeaType:"Type de thÃ©",tcTeaEnglish:"English Breakfast",tcTeaVert:"Vert",tcTeaMenthe:"Menthe",tcHotWater:"Eau chaude",tcInfusion:"Infusion",tcInfCam:"Camomille",tcMilk:"Lait/CrÃ¨me",tcMilkCreme:"CrÃ¨me",tcMilkAvoine:"Lait d'avoine",tcMilkLait:"Lait",tcMilkNone:"Sans",tcSweet:"Sucre",tcSweetSugar:"Sucre",tcSweetSub:"SuccÃ©danÃ©",tcSweetNone:"Sans",tcPur:"Pur",tcRocks:"On the rocks",tcBaileys:"Baileys",tcIce:"GlaÃ§ons",tcCatDig:"Digestif",tcDigestif:"Digestif",tcDigJW:"Johnnie Walker",tcDigJB:"Jim Beam (Bourbon)",tcDigCognac:"Cognac",tcDigBaileys:"Baileys",tcCatBeer:"BiÃ¨re",tcBeer:"BiÃ¨re",tcBeerQ:"QuÃ¶llfrisch Lager Blonde",tcBeerC:"Calvinus Blanche",tcBeerL:"Leermond (sans alcool)",tcCatChamp:"Champagne",tcChampagne:"Champagne",tcChampPH:"Notes (ex : marque, rosÃ©â€¦)",tcCatVin:"Vins",tcWines:"Vins",tcRed:"Rouge",tcWhite:"Blanc",tcVinPH:"Notes (ex : cÃ©page, commentaireâ€¦)",tcCatHot:"Boissons chaudes",tcMilkTitle:"Lait / CrÃ¨me",tcSugarTitle:"Sucre",tcTeaTitle:"ThÃ©",tcAlcoholTitle:"Boissons alcoolisÃ©es",tcSoftTitle:"Boissons soft",tcTeaEnglish:"English Breakfast",tcTeaVert:"ThÃ© vert",tcTeaMenthe:"ThÃ© menthe",tcTeaCamomille:"Camomille",tcWater:"Eau",tcCola:"Cola",tcJuice:"Jus",tcSprite:"Sprite",tcTonic:"Tonic",tcStill:"Plate",tcSpark:"Gazeuse",tcClassic:"Classic",tcZero:"Zero",tcOrange:"Orange",tcApple:"Pomme",tcTomato:"Tomate",tcCaotina:"Caotina",jsonRestored:"Session restaurÃ©e depuis le JSON",invalidFile:"Fichier invalide."},DE:{flight:"Flug",date:"Datum",saveTitle:"Speichern",reset:"ZurÃ¼cksetzen",client:"Kundensicht",crew:"Crew-Modus",lblLang:"Sprache",flightPlaceholder:"z. B. LX2810",exportJSON:"JSON exportieren",importJSON:"Importieren",exportPNG:"PNG",rights:"Alle Rechte vorbehalten",chips_apero:"Aperitif",chips_meal:"Hauptgang",chips_tc:"Tee & Kaffee",chips_fiche:"Paxdaten",filter_all:"Alle Sitze",filter_toserve:"Zu bedienen",filter_clear:"Zum AbrÃ¤umen",filter_sleep:"SchlÃ¤ft",filter_later:"SpÃ¤ter bedienen",lgServed:"âœ… Serviert",lgclear:"ðŸ§¹ AbgerÃ¤umt",flowTitle:"Serviceablauf",flowNowTitle:"Reihenfolge â¬‡ï¸",flowLaterTitle:"Bestellungen aufnehmen â¬‡ï¸",flowClearTitle:"Zum AbrÃ¤umen â¬‡ï¸",flowAperoTakenTitle:"Aufgenommene Bestellungen â¬‡ï¸",flowTaken:"Aufgenommen",flowEmptyTaken:"Noch keine Bestellungen",flowTCTakenTitle:"Tee & Kaffee aufgenommen â¬‡ï¸",flowTakeOrder:"Bestellung",flowServeTag:"Servieren",flowClearTag:"Zum AbrÃ¤umen",flowEmptyLater:"Keine Bestellungen",flowEmptyClear:"Nichts abzurÃ¤umen",seatmapTitle:"Sitzplan ({L} | {R})",seat:"Sitz",trayShort:"Tray",apLabel:"Aperitif",mealLabel:"Hauptgang",hdrConfig:"Vorhang & Konfiguration",lblLayout:"Flugzeug",lblRows:"Reihen",secMenuTitle:"MenÃ¼",lblViande:"Option 1",lblVege:"Option 2",hdrInventaire:"Inventar",invPlateaux:"Trays",invViande:"Option 1",invVege:"Option 2",invSpecial:"SPML",spml:"SPML",add:"HinzufÃ¼gen",preHeader:"Vorbestellung",preAdd:"Vorbestellung",close:"âœ–ï¸",mdPass:"Passagier",mdOcc:"Sitz belegt",mdSleepTxt:"ðŸ˜´ SchlÃ¤ft",mdType:"Paxtyp",mdAdult:"Erwachsener",mdChild:"Kind",mdInfant:"SÃ¤ugling",mdStatus:"Status",mdLang:"Sprache",mdEatWith:"Zusammen essen mit",mdEatWithPh:"z. B. 12B",mdLater:"SpÃ¤ter bedienen",mdLaterCustom:"Uhrzeit",mdLaterSet:"Uhrzeit setzen",mdLaterCancel:"Abbrechen",mdLaterCustomBtn:"Individuelle Uhrzeit",mdNotes:"Notizen",mdAperoNotes:"GetrÃ¤nk / Aperitif-Notizen",mdTCNotes:"Tee & Kaffee â€“ Notizen",serveAperitif:"GetrÃ¤nk bestellen",mdMeal:"Hauptgang",mdNormal:"Normale Auswahl",optNormalMeat:"Option 1",optNormalVeg:"Option 2",optNormalTray:"Tray (ohne Kasserolle)",mealDrinkTitle:"GetrÃ¤nke zum Essen",mealDrinkNotes:"GetrÃ¤nke-Notizen",passengerNotesPlaceholder:"z. B.: nur DE, keine NÃ¼sse",aperoNotesPlaceholder:"z. B.: Sprudelwasser, WeiÃŸwein, ErdnÃ¼sse",mealDrinkNotesPlaceholder:"z. B.: Sprudelwasser, WeiÃŸwein, ErdnÃ¼sse",tcNotesPlaceholder:"z. B.: VerlÃ¤ngerter, Zucker",meatPlaceholder:"z. B.: Rind in Rotweinsauce",vegPlaceholder:"z. B.: Vegetarische Lasagne",preAddPlaceholder:"z. B.: Glutenfreie Pasta",optStatusOther:"Andere",mdSpml:"SPML",mdPre:"Vorbestellung",serveMeal:"Hauptgang serviert",cancelService:"Service zurÃ¼cknehmen",clearTray:"Tray abgerÃ¤umt",undoClearTray:"AbrÃ¤umen rÃ¼ckgÃ¤ngig",modalTabFiche:"Paxdaten",modalTabApero:"Aperitif",modalTabMeal:"Hauptgang",modalTabTC:"Tee & Kaffee",ordered:"bestellt",eatTogether:"ðŸ½ï¸ Zusammen essen mit",eatTogetherPH:"z.â€¯B. 4C",clear:"LÃ¶schen",moveSeat:"ðŸ” Pax verschieben",moved:"Verschoben",swapped:"Getauscht",pickDestSeat:"Zielsitz wÃ¤hlen",moved:"Verschoben",swapped:"Getauscht",tcCH:"Schweiz",tcForeign:"Ausland",serveTC:"GetrÃ¤nk bestellen",serveMealDrink:"GetrÃ¤nk bestellen",histTcServed:"Tee & Kaffee serviert bei",histTcOrdered:"Tee & Kaffee bestellt bei",histMealDrinkServed:"GetrÃ¤nk bestellt bei",histMealDrinkOrdered:"GetrÃ¤nke (Hauptgang) bestellt bei",serveNone:"Kein GetrÃ¤nk",serveNoFood:"Kein Essen",lgSleep:"ðŸ˜´ SchlÃ¤ft",lgLater:"â³ SpÃ¤ter bedienen",lgChoice:"ðŸ½ï¸ Auswahl gespeichert",lgInfant:"ðŸ‘¶ SÃ¤ugling",lgChild:"ðŸ§’ Kind",lgTogether:"ðŸ¤ Zusammen essen",legendShow:"Legende anzeigen",legendHide:"Legende ausblenden",alertSeatEmpty:"Sitz nicht belegt.",alertChoose:"Bitte zuerst eine Auswahl treffen (normal, SPML oder Vorbestellung).",alertNoTrays:"Keine Trays verfÃ¼gbar.",alertStock:"Zu wenig Bestand fÃ¼r",alertDepleted:"ausverkauft.",alertPickTime:"Uhrzeit wÃ¤hlen.",resetConfirm:"BestÃ¤tigen",preAddLabelRequired:"Geben Sie einen Namen fÃ¼r die Vorbestellung ein",spmlCodeRequired:"WÃ¤hlen Sie einen SPML-Code",histViewLabel:"Ansicht",histScope_all:"Alle Ereignisse",histScope_seat:"Nach Sitz",histScope_type:"Nach Typ",histLblSeat:"Sitz",histLblType:"Typ",histAscLbl:"Ã„lteste zuerst",histType_mealDrinkServed:"GetrÃ¤nk zum Essen serviert",histType_apServed:"Aperitif serviert",histType_apOrdered:"Aperitif bestellt",histType_tcServed:"Tee & Kaffee serviert",histType_tcOrdered:"Tee & Kaffee bestellt",histType_mealServed:"Hauptgang serviert",histType_apCanceled:"Aperitif storniert",histType_serviceCanceled:"Service storniert",histType_trayCleared:"Tray abgerÃ¤umt",histType_trayUncleared:"AbrÃ¤umen rÃ¼ckgÃ¤ngig",histType_reset:"Flug zurÃ¼ckgesetzt",histType_seatMoveStart:"Pax-Verschiebung",histType_seatMoved:"Sitz verschoben",histType_seatSwapped:"Sitze getauscht",histType_text:"Notizen",histNewest:"(neueste oben)",histOldest:"(Ã¤lteste oben)",histNewestBtn:"Auf Ã¤lteste oben umschalten",histOldestBtn:"Auf Neueste oben umschalten",secHistoryTitle:"Verlauf (neueste oben)",histTitleSet:"Titel gesetzt:",histApServed:"Aperitif serviert bei",histApOrdered:"Aperitif bestellt bei",histApCanceled:"Aperitif storniert fÃ¼r",histMealServed:"Hauptgang serviert bei",histCanceled:"Service storniert fÃ¼r",resetDone:"Flug zurÃ¼ckgesetzt.",remindersTitle:"Anstehende Erinnerungen",remindServe:"ðŸ›Žï¸ Erinnerung: bedienen",optStatusOther:"Andere",tcTitle:"Aperitif",tcDrink:"GetrÃ¤nk",tcService:"Servierart",tcNotes:"Notizen",tcGroupSoft:"Softdrinks",tcGroupAlcohol:"Alkohol",tcGroupHot:"HeiÃŸgetrÃ¤nke",tcLblAlcohol:"Alkohol",tcLblHot:"HeiÃŸgetrÃ¤nke",tcCatSoft:"Softdrinks",tcLblSoft:"Softdrinks",tcLblWater:"Wasser",tcLblJuice:"Saft",tcLblCoca:"Coca-Cola",tcSoftWater:"Wasser",tcSoftJuice:"Saft",tcSoftCoca:"Coca-Cola",tcSoftSprite:"Sprite",tcSoftTonic:"Tonic",tcWaterStill:"Still",tcWaterSpark:"Sprudelnd",tcJuiceApple:"Apfel",tcJuiceOrange:"Orange",tcJuiceTomato:"Tomate",tcCocaClassic:"Classic",tcCocaZero:"Zero",tcLemon:"Zitrone",tcSalt:"Salz",tcPepper:"Pfeffer",tcExtras:"Extras",tcCatCafe:"Kaffee",tcCatDeca:"Koffeinfrei",tcCatThe:"Tee",tcCatInf:"Aufguss",tcCatChoco:"Caotina",tcLblChoco:"Caotina",tcChocoBrand:"Caotina",tcMilk:"Milch/Sahne",tcMilkCreme:"Sahne",tcMilkAvoine:"Hafermilch",tcMilkLait:"Milch",tcMilkNone:"Ohne",tcSweet:"SÃ¼ÃŸe",tcSweetSugar:"Zucker",tcSweetSub:"Ersatz",tcSweetNone:"Ohne",tcTeaType:"Teeart",tcTeaEnglish:"English Breakfast",tcTeaVert:"GrÃ¼n",tcTeaMenthe:"Minze",tcHotWater:"HeiÃŸes Wasser",tcInfusion:"Aufguss",tcInfCam:"Kamille",tcPur:"Pur",tcRocks:"On the rocks",tcBaileys:"Baileys",tcIce:"Eis",tcCatDig:"Digestif",tcDigestif:"Digestif",tcDigJW:"Johnnie Walker",tcDigJB:"Jim Beam (Bourbon)",tcDigCognac:"Cognac",tcDigBaileys:"Baileys",tcCatBeer:"Bier",tcBeer:"Bier",tcBeerQ:"QuÃ¶llfrisch Lager Blonde",tcBeerC:"Calvinus WeiÃŸ",tcBeerL:"Leermond (alkoholfrei)",tcCatChamp:"Champagner",tcChampagne:"Champagner",tcChampPH:"Notizen (z. B. Marke, RosÃ©â€¦)",tcCatVin:"Weine",tcWines:"Weine",tcRed:"Rot",tcWhite:"WeiÃŸ",tcVinPH:"Notizen (z. B. Rebsorte, Kommentarâ€¦)",tcCatHot:"HeiÃŸgetrÃ¤nke",tcMilkTitle:"Milch / Rahm",tcSugarTitle:"Zucker",tcTeaTitle:"Tee",tcAlcoholTitle:"Alkoholische GetrÃ¤nke",tcSoftTitle:"Softdrinks",tcTeaEnglish:"English Breakfast",tcTeaVert:"GrÃ¼ner Tee",tcTeaMenthe:"Minztee",tcTeaCamomille:"Kamillentee",tcWater:"Wasser",tcCola:"Cola",tcJuice:"Saft",tcSprite:"Sprite",tcTonic:"Tonic",tcStill:"Still",tcSpark:"Sprudel",tcClassic:"Classic",tcZero:"Zero",tcOrange:"Orange",tcApple:"Apfel",tcTomato:"Tomate",tcCaotina:"Caotina",jsonRestored:"Sitzung aus JSON wiederhergestellt",invalidFile:"UngÃ¼ltige Datei."}},el={chaud:{cafe:"â˜•",deca:"ðŸš«â˜•",the:"ðŸ«–",chocolat:"ðŸ«"},soft:{eau:"ðŸ’§",coca:"ðŸ¥¤",jus:"ðŸ§ƒ",sprite:"ðŸŸ¢",tonic:"ðŸ«§"},alcool:{champagne:"ðŸ¾",vin_rouge:"ðŸ·",vin_blanc:"ðŸ¥‚",biere:"ðŸº",cocktail:"ðŸ¹",digestif:"ðŸ¥ƒ"}},La={"milk:creme":"ðŸ¶","milk:avoine":"ðŸŒ¾","milk:lait":"ðŸ¥›","milk:none":"ðŸš«","sweet:sucre":"ðŸ¬","sweet:succedane":"ðŸ’Š","sweet:none":"ðŸš«","theType:english":"ðŸ‡¬ðŸ‡§","theType:vert":"ðŸƒ","theType:menthe":"ðŸŒ¿","theType:camomille":"ðŸŒ¼","theType:hotwater":"â™¨ï¸","waterType:plate":"ðŸ’§","waterType:gazeuse":"ðŸ’¦","cocaType:normal":"ðŸŸ¥","cocaType:zero":"â¬›","juiceType:orange":"ðŸŠ","juiceType:pomme":"ðŸ","juiceType:tomate":"ðŸ…","beer:quoellfrisch":"ðŸº","beer:calvinus":"âšª","beer:leermond":"ðŸŒš","vinRouge:suisse":"ðŸ‡¨ðŸ‡­","vinRouge:etranger":"ðŸŒ","vinBlanc:suisse":"ðŸ‡¨ðŸ‡­","vinBlanc:etranger":"ðŸŒ","digestif:whisky_jw":"ðŸ¥ƒ","digestif:whisky_jb":"ðŸ¤ ","digestif:cognac":"ðŸ‡","digestif:baileys":"ðŸ®","cocktail:campari":"ðŸŸ¥","cocktail:bloody_mary":"ðŸ©¸","cocktail:screwdriver":"ðŸª›","cocktail:gin_tonic":"ðŸ¸","cocktail:cuba_libre":"ðŸ‡¨ðŸ‡º","campariMix:orange":"ðŸŠ","campariMix:soda":"ðŸ’¦"},Ba={theLemon:"ðŸ‹",softIce:"ðŸ§Š",softLemon:"ðŸ‹",spriteIce:"ðŸ§Š",spriteLemon:"ðŸ‹",tonicIce:"ðŸ§Š",tonicLemon:"ðŸ‹",juiceIce:"ðŸ§Š",juiceLemon:"ðŸ‹",juiceSP:"ðŸ§‚",juiceApfelschorle:"ðŸ’¦",champIce:"ðŸ§Š",champMimosa:"ðŸŠ",digIce:"ðŸ§Š",virginMary:"ðŸ˜‡",cocktailIce:"ðŸ§Š",cocktailLemon:"ðŸ‹",cocktailSP:"ðŸ§‚"};function tl(e){return La[e]||""}function nl(e){return Ba[e]||""}function en(e){const t=e||document;!t||typeof t.querySelectorAll!="function"||(t.querySelectorAll(".pill.big").forEach(n=>{var c;const a=n.dataset.cat,l=n.dataset.sub,o=(c=el[a])==null?void 0:c[l];o&&(n.textContent=o)}),t.querySelectorAll(".pill[data-opt]").forEach(n=>{const a=La[n.dataset.opt];a&&(n.textContent=a)}),t.querySelectorAll(".pill.toggle[data-flag]").forEach(n=>{const a=Ba[n.dataset.flag];a&&(n.textContent=a)}))}const Pt=[{value:"creme",labelKey:"tcMilkCreme",fallback:"Cream",emojiKey:"milk:creme"},{value:"avoine",labelKey:"tcMilkAvoine",fallback:"Oat milk",emojiKey:"milk:avoine"},{value:"lait",labelKey:"tcMilkLait",fallback:"Milk",emojiKey:"milk:lait"},{value:"none",labelKey:"tcMilkNone",fallback:"None",emojiKey:"milk:none"}],Kt=[{value:"sucre",labelKey:"tcSweetSugar",fallback:"Sugar",emojiKey:"sweet:sucre"},{value:"succedane",labelKey:"tcSweetSub",fallback:"Substitute",emojiKey:"sweet:succedane"},{value:"none",labelKey:"tcSweetNone",fallback:"None",emojiKey:"sweet:none"}],al=[{value:"english",labelKey:"tcTeaEnglish",fallback:"English Breakfast",emojiKey:"theType:english"},{value:"vert",labelKey:"tcTeaVert",fallback:"Green tea",emojiKey:"theType:vert"},{value:"menthe",labelKey:"tcTeaMenthe",fallback:"Mint tea",emojiKey:"theType:menthe"},{value:"hotwater",labelKey:"tcHotWater",fallback:"Hot water",emojiKey:"theType:hotwater",breakBefore:!0},{value:"camomille",labelKey:"tcTeaCamomille",fallback:"Chamomile",emojiKey:"theType:camomille"}],ll=[{value:"plate",labelKey:"tcWaterStill",fallback:"Still",emojiKey:"waterType:plate"},{value:"gazeuse",labelKey:"tcWaterSpark",fallback:"Sparkling",emojiKey:"waterType:gazeuse"}],il=[{value:"normal",labelKey:"tcCocaClassic",fallback:"Classic",emojiKey:"cocaType:normal"},{value:"zero",labelKey:"tcCocaZero",fallback:"Zero",emojiKey:"cocaType:zero"}],ol=[{value:"orange",labelKey:"tcJuiceOrange",fallback:"Orange",emojiKey:"juiceType:orange"},{value:"pomme",labelKey:"tcJuiceApple",fallback:"Apple",emojiKey:"juiceType:pomme"},{value:"tomate",labelKey:"tcJuiceTomato",fallback:"Tomato",emojiKey:"juiceType:tomate"}],cl=[{value:"quoellfrisch",labelKey:"tcBeerQ",fallback:"QuÃ¶llfrisch Lager",emojiKey:"beer:quoellfrisch"},{value:"calvinus",labelKey:"tcBeerC",fallback:"Calvinus Blanche",emojiKey:"beer:calvinus"},{value:"leermond",labelKey:"tcBeerL",fallback:"Leermond (0%)",emojiKey:"beer:leermond"}],sl=[{value:"suisse",labelKey:"tcCH",fallback:"Swiss",emojiKey:"vinRouge:suisse"},{value:"etranger",labelKey:"tcForeign",fallback:"Foreign",emojiKey:"vinRouge:etranger"}],rl=[{value:"suisse",labelKey:"tcCH",fallback:"Swiss",emojiKey:"vinBlanc:suisse"},{value:"etranger",labelKey:"tcForeign",fallback:"Foreign",emojiKey:"vinBlanc:etranger"}],dl=[{value:"whisky_jw",labelKey:"tcDigJW",fallback:"Johnnie Walker",emojiKey:"digestif:whisky_jw"},{value:"whisky_jb",labelKey:"tcDigJB",fallback:"Jim Beam",emojiKey:"digestif:whisky_jb"},{value:"cognac",labelKey:"tcDigCognac",fallback:"Cognac",emojiKey:"digestif:cognac"},{value:"baileys",labelKey:"tcDigBaileys",fallback:"Baileys",emojiKey:"digestif:baileys"}],ul=[{value:"campari",labelKey:"tcCampari",fallback:"Campari",emojiKey:"cocktail:campari"},{value:"bloody_mary",labelKey:"tcBloody",fallback:"Bloody Mary",emojiKey:"cocktail:bloody_mary"},{value:"screwdriver",labelKey:"tcScrew",fallback:"Screw Driver",emojiKey:"cocktail:screwdriver"},{value:"gin_tonic",labelKey:"tcGinTonic",fallback:"Gin Tonic",emojiKey:"cocktail:gin_tonic"},{value:"cuba_libre",labelKey:"tcCuba",fallback:"Cuba Libre",emojiKey:"cocktail:cuba_libre"}],fl=[{value:"orange",labelKey:"tcJuiceOrange",fallback:"Orange",emojiKey:"campariMix:orange"},{value:"soda",labelKey:"tcSoda",fallback:"Soda",emojiKey:"campariMix:soda"}],tn=[{id:"chaud",cardId:"grpHot",headerId:"hdrHot",containerId:"hotOpts",subsections:{cafe:{id:"cafe",labelKey:"drink_coffee",fallback:"Coffee",defaultOpen:0,resetKeys:["milk","sweet","theType","theLemon"],sections:[{id:"milk",kind:"exclusive",key:"milk",titleKey:"tcMilk",fallback:"Milk/Cream",options:Pt},{id:"sweet",kind:"exclusive",key:"sweet",titleKey:"tcSweet",fallback:"Sweetener",options:Kt}]},deca:{id:"deca",labelKey:"drink_decaf",fallback:"Decaf",defaultOpen:0,resetKeys:["milk","sweet","theType","theLemon"],sections:[{id:"milk",kind:"exclusive",key:"milk",titleKey:"tcMilk",fallback:"Milk/Cream",options:Pt},{id:"sweet",kind:"exclusive",key:"sweet",titleKey:"tcSweet",fallback:"Sweetener",options:Kt}]},the:{id:"the",labelKey:"drink_tea",fallback:"Tea",defaultOpen:0,resetKeys:["milk","sweet","theType","theLemon"],sections:[{id:"teaType",kind:"exclusive",key:"theType",titleKey:"tcTeaTitle",fallback:"Tea",options:al},{id:"milk",kind:"exclusive",key:"milk",titleKey:"tcMilk",fallback:"Milk/Cream",options:Pt},{id:"sweet",kind:"exclusive",key:"sweet",titleKey:"tcSweet",fallback:"Sugar",options:Kt},{id:"teaExtras",kind:"toggles",titleKey:"tcLemon",fallback:"Lemon",toggles:[{flag:"theLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"theLemon"}]}]},chocolat:{id:"chocolat",labelKey:"drink_caotina",fallback:"Caotina",resetKeys:[],sections:[]}}},{id:"soft",cardId:"grpSoft",headerId:"hdrSoft",containerId:"softOpts",subsections:{eau:{id:"eau",labelKey:"drink_water",fallback:"Water",defaultOpen:0,resetKeys:["waterType","softIce","softLemon"],sections:[{id:"waterType",kind:"exclusive",key:"waterType",titleKey:"tcWater",fallback:"Water",options:ll},{id:"waterExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"softIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"softIce"},{flag:"softLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"softLemon"}]}]},coca:{id:"coca",labelKey:"drink_cola",fallback:"Cola",defaultOpen:0,resetKeys:["cocaType","softIce","softLemon"],sections:[{id:"cocaType",kind:"exclusive",key:"cocaType",titleKey:"tcCola",fallback:"Cola",options:il},{id:"cocaExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"softIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"softIce"},{flag:"softLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"softLemon"}]}]},jus:{id:"jus",labelKey:"drink_juice",fallback:"Juice",defaultOpen:0,resetKeys:["juiceType","juiceIce","juiceLemon","juiceSalt","juicePepper","juiceSP","juiceApfelschorle"],sections:[{id:"juiceType",kind:"exclusive",key:"juiceType",titleKey:"tcJuice",fallback:"Juice",options:ol},{id:"juiceExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"juiceIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"juiceIce"},{flag:"juiceLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"juiceLemon"},{flag:"juiceSP",labelKey:"tcSaltPepper",fallback:"Salt + Pepper",emojiKey:"juiceSP",linkedFlags:["juiceSalt","juicePepper"],showWhen:{key:"juiceType",equals:"tomate"}},{flag:"juiceApfelschorle",labelKey:"tcApfelschorle",fallback:"Apfelschorle",emojiKey:"juiceApfelschorle",showWhen:{key:"juiceType",equals:"pomme"}}]}]},sprite:{id:"sprite",labelKey:"drink_sprite",fallback:"Sprite",defaultOpen:0,resetKeys:["spriteIce","spriteLemon"],sections:[{id:"spriteExtras",kind:"toggles",titleKey:"tcSprite",fallback:"Sprite",toggles:[{flag:"spriteIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"spriteIce"},{flag:"spriteLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"spriteLemon"}]}]},tonic:{id:"tonic",labelKey:"drink_tonic",fallback:"Tonic",defaultOpen:0,resetKeys:["tonicIce","tonicLemon"],sections:[{id:"tonicExtras",kind:"toggles",titleKey:"tcTonic",fallback:"Tonic",toggles:[{flag:"tonicIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"tonicIce"},{flag:"tonicLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"tonicLemon"}]}]}}},{id:"alcool",cardId:"grpAlco",headerId:"hdrAlco",containerId:"alcoOpts",subsections:{biere:{id:"biere",labelKey:"drink_beer",fallback:"Beer",defaultOpen:0,resetKeys:["beer"],sections:[{id:"beer",kind:"exclusive",key:"beer",titleKey:"tcBeer",fallback:"Beer",options:cl}]},vin_rouge:{id:"vin_rouge",labelKey:"drink_red",fallback:"Red wine",defaultOpen:0,resetKeys:["vinRouge","vinIce"],sections:[{id:"vinRouge",kind:"exclusive",key:"vinRouge",titleKey:"tcRed",fallback:"Red",options:sl},{id:"vinRougeExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"vinIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"champIce"}]}]},vin_blanc:{id:"vin_blanc",labelKey:"drink_white",fallback:"White wine",defaultOpen:0,resetKeys:["vinBlanc","vinIce"],sections:[{id:"vinBlanc",kind:"exclusive",key:"vinBlanc",titleKey:"tcWhite",fallback:"White",options:rl},{id:"vinBlancExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"vinIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"champIce"}]}]},champagne:{id:"champagne",labelKey:"drink_champagne",fallback:"Champagne",defaultOpen:0,resetKeys:["champIce","champMimosa"],sections:[{id:"champagneExtras",kind:"toggles",titleKey:"tcChampagne",fallback:"Champagne",toggles:[{flag:"champIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"champIce"},{flag:"champMimosa",labelKey:"tcMimosa",fallback:"Mimosa",emojiKey:"champMimosa"}]}]},digestif:{id:"digestif",labelKey:"drink_digestif",fallback:"Digestif",defaultOpen:0,resetKeys:["digestif","digIce"],sections:[{id:"digestifChoice",kind:"exclusive",key:"digestif",titleKey:"tcDigestif",fallback:"Digestif",options:dl},{id:"digestifExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"digIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"digIce"}]}]},cocktail:{id:"cocktail",labelKey:"drink_cocktail",fallback:"Cocktail",defaultOpen:0,resetKeys:["cocktail","campariMix","virginMary","cocktailIce","cocktailLemon","cocktailSalt","cocktailPepper","cocktailSP"],sections:[{id:"cocktailChoice",kind:"exclusive",key:"cocktail",titleKey:"tcCocktail",fallback:"Cocktail",options:ul},{id:"campariMix",kind:"exclusive",key:"campariMix",titleKey:"tcCampari",fallback:"Campari",options:fl,showWhen:{key:"cocktail",equals:"campari"}},{id:"bloodyMary",kind:"toggles",titleKey:"tcBloody",fallback:"Bloody Mary",showWhen:{key:"cocktail",equals:"bloody_mary"},toggles:[{flag:"virginMary",labelKey:"tcVirgin",fallback:"Virgin Mary",emojiKey:"virginMary"}]},{id:"cocktailExtras",kind:"toggles",titleKey:"tcExtras",fallback:"Options",toggles:[{flag:"cocktailIce",labelKey:"tcIce",fallback:"Ice",emojiKey:"cocktailIce"},{flag:"cocktailLemon",labelKey:"tcLemon",fallback:"Lemon",emojiKey:"cocktailLemon"},{flag:"cocktailSP",labelKey:"tcSaltPepper",fallback:"Salt + Pepper",emojiKey:"cocktailSP",linkedFlags:["cocktailSalt","cocktailPepper"],showWhen:{key:"cocktail",equals:"bloody_mary"}}]}]}}}],Ia=new Map,nn=new Map;tn.forEach(e=>{Ia.set(e.id,e),Object.values(e.subsections).forEach(t=>{nn.set(`${e.id}::${t.id}`,t)})});const wa={cat:"",sub:"",waterType:"",juiceType:"",cocaType:"",milk:"",sweet:"",theType:"",campariMix:"",beer:"",vinRouge:"",vinBlanc:"",digestif:"",cocktail:"",softIce:!1,softLemon:!1,spriteIce:!1,spriteLemon:!1,tonicIce:!1,tonicLemon:!1,juiceIce:!1,juiceLemon:!1,juiceSalt:!1,juicePepper:!1,juiceSP:!1,juiceApfelschorle:!1,champIce:!1,champMimosa:!1,vinIce:!1,digIce:!1,cocktailIce:!1,cocktailLemon:!1,cocktailSalt:!1,cocktailPepper:!1,cocktailSP:!1,theLemon:!1,virginMary:!1};function Na(){return JSON.parse(JSON.stringify(wa))}const L=Na();let Me=()=>({phase:"fiche",config:{lang:"EN"}});function ml(e){e&&typeof e.getStore=="function"&&(Me=e.getStore)}function pt(e,t){var o;const n=Me==null?void 0:Me(),a=((o=n==null?void 0:n.config)==null?void 0:o.lang)||"EN",l=k[a]||k.EN;return(l==null?void 0:l[e])||t}function vn(e){if(!e)return!0;const t=String(L[e.key]??"");return!(e.equals!==void 0&&t!==e.equals||e.notEquals!==void 0&&t===e.notEquals||e.in&&!e.in.includes(t))}const pl=new Map([["the","theType"],["eau","waterType"],["coca","cocaType"],["jus","juiceType"],["biere","beer"],["vin_rouge","vinRouge"],["vin_blanc","vinBlanc"],["digestif","digestif"],["cocktail","cocktail"]]),gl=new Set(["cafe","deca","chocolat","sprite","tonic","champagne"]);function Da(e,t={}){if(!e)return null;const n=t.sectionSelector||".accordion__section",a=t.headerSelector||".accordion__header",l=t.singleOpen!==!1,o=Array.from(e.querySelectorAll(n));if(!o.length)return null;const c=o.map((m,g)=>{const f=m.querySelector(a);let b=m.querySelector(".accordion__body");if(!b){const h=Array.from(m.children).filter(C=>C!==f);h.length&&(b=document.createElement("div"),b.className="accordion__body",h.forEach(C=>b.appendChild(C)),f?f.after(b):m.appendChild(b))}const I=m.dataset.accordionId||m.dataset.id||String(g);return m.dataset.accordionId=I,m.dataset.open="false",f&&(f.setAttribute("role","button"),f.setAttribute("tabindex","0"),f.setAttribute("aria-expanded","false"),f.addEventListener("click",()=>r(I)),f.addEventListener("keydown",h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),r(I))})),b&&(b.hidden=!0),{id:I,section:m,header:f,body:b}});function s(m,g){const f=c.find(C=>C.id===String(m));if(!f)return;const{section:b,header:I,body:h}=f;b.dataset.open=g?"true":"false",I&&I.setAttribute("aria-expanded",g?"true":"false"),h&&(h.hidden=!g)}function r(m){const g=c.find(b=>b.id===String(m));if(!g)return;const f=g.section.dataset.open==="true";l&&!f&&v(),s(m,!f)}function d(m){s(m,!1)}function p(m){l&&v(),s(m,!0)}function v(){c.forEach(m=>{s(m.id,!1)})}const y=t.defaultOpen;return y!=null&&p(y),{open:p,close:d,closeAll:v}}let Be=null,bt=null;function Dt(){if(Be)return;const e=document.getElementById("drinkGrid");e&&(tn.forEach(t=>{const n=document.getElementById(t.cardId);n&&(n.dataset.accordionId=t.id)}),Be=Da(e,{sectionSelector:".group-card",headerSelector:".group-title",singleOpen:!0,defaultOpen:null}),Be&&Be.closeAll())}function an(e,t){var v;const n=Ia.get(e);if(!n)return;const a=document.getElementById(n.containerId);if(!a)return;const l=`${e}::${t}`,o=bt===l?Array.from(a.querySelectorAll(".accordion__section")).filter(y=>y.dataset.open==="true").map(y=>y.dataset.accordionId||"").filter(Boolean):[],c=nn.get(l);if(!c){a.innerHTML="";return}if(!c.sections.length){a.innerHTML="",bt=l;return}a.innerHTML="";const s=document.createElement("div");s.className="accordion",c.sections.forEach((y,m)=>{if(!vn(y.showWhen||null))return;const g=document.createElement("div");g.className="accordion__section",g.dataset.accordionId=y.id||String(m);const f=document.createElement("div");if(f.className="accordion__header",f.textContent=pt(y.titleKey,y.fallback),g.appendChild(f),y.kind==="info"){const h=document.createElement("div");h.className="accordion__body",y.bodyKey&&(h.textContent=pt(y.bodyKey,y.bodyFallback||"")),g.appendChild(h),s.appendChild(g);return}const b=document.createElement("div");b.className="accordion__body";const I=document.createElement("div");I.className="pill-row",y.kind==="exclusive"?y.options.forEach(h=>{if(h.breakBefore){const Y=document.createElement("span");Y.className="pill-break",I.appendChild(Y)}const C=document.createElement("div");C.className="pill-wrap";const E=document.createElement("button");E.type="button",E.className="pill",E.dataset.action="exclusive",E.dataset.key=y.key,E.dataset.value=h.value,E.dataset.cat=e,E.dataset.sub=t;const _=pt(h.labelKey,h.fallback);E.title=_,E.setAttribute("aria-label",_);const N=tl(h.emojiKey);E.textContent=N||_;const D=(L[y.key]||"")===h.value;E.classList.toggle("active",D),E.setAttribute("aria-pressed",String(D));const H=document.createElement("div");H.className="pill-cap",H.textContent=_,C.appendChild(E),C.appendChild(H),I.appendChild(C)}):y.kind==="toggles"&&y.toggles.forEach(h=>{if(!vn(h.showWhen||null))return;const C=document.createElement("div");C.className="pill-wrap";const E=document.createElement("button");E.type="button",E.className="pill toggle",E.dataset.action="toggle",E.dataset.flag=h.flag,E.dataset.cat=e,E.dataset.sub=t,h.linkedFlags&&h.linkedFlags.length&&(E.dataset.linkedFlags=h.linkedFlags.join(","));const _=pt(h.labelKey,h.fallback);E.title=_,E.setAttribute("aria-label",_);const N=nl(h.emojiKey);E.textContent=N||_;const D=h.linkedFlags&&h.linkedFlags.length?h.linkedFlags.every(Y=>!!L[Y]):!!L[h.flag];E.classList.toggle("active",D),E.setAttribute("aria-pressed",String(D));const H=document.createElement("div");H.className="pill-cap",H.textContent=_,C.appendChild(E),C.appendChild(H),I.appendChild(C)}),b.appendChild(I),g.appendChild(b),s.appendChild(g)}),a.appendChild(s);const r=Da(s,{singleOpen:!0,defaultOpen:null});let d=null;if(c.defaultOpen!==void 0&&c.defaultOpen!==null)if(typeof c.defaultOpen=="number"){const y=(v=c.sections)==null?void 0:v[c.defaultOpen];d=(y==null?void 0:y.id)||String(c.defaultOpen)}else d=String(c.defaultOpen);const p=o.length>0?o:d!==null?[d]:[];r&&p.forEach(y=>r.open(y)),en(a),bt=l}function $t(e){(e&&e.length?e:Object.keys(wa)).forEach(n=>{L[n]=Na()[n]})}function Aa(){L.cat="",L.sub="",bt=null}function Ma(){tn.forEach(e=>{const t=document.getElementById(e.containerId);t&&(t.innerHTML="")})}function Gt(e,t){const n=document.getElementById("drinkGrid");n&&n.querySelectorAll(".pill.big").forEach(a=>{const l=a.dataset.cat===e&&a.dataset.sub===t;a.classList.toggle("active",l),a.setAttribute("aria-pressed",String(l))})}function yl(e){const t=e.dataset.cat||"",n=e.dataset.sub||"";if(!t||!n)return;const a=e.classList.contains("active");if($t(),a){Aa(),Gt("",""),Ma(),At(),A();return}L.cat=t,L.sub=n,Gt(t,n),Dt(),bl(t);const l=nn.get(`${t}::${n}`);l&&$t(l.resetKeys),an(t,n),A()}function hl(e){const t=e.dataset.key,n=e.dataset.value||"";if(!t)return;const a=L[t]||"";L[t]=a===n?"":n;const l=L.cat,o=L.sub;l&&o&&an(l,o),A()}function vl(e){const t=e.dataset.flag;if(!t)return;const n=!L[t];L[t]=n;const a=(e.dataset.linkedFlags||"").split(",").map(c=>c.trim()).filter(Boolean);a.length&&a.forEach(c=>{L[c]=n});const l=L.cat,o=L.sub;l&&o&&an(l,o),A()}let bn=!1;function rt(){if(bn)return;bn=!0,Dt();const e=document.getElementById("drinkGrid");e&&e.addEventListener("click",t=>{const n=t.target;if(!n)return;const a=n.closest("[data-action]");if(a&&e.contains(a)){const o=a.dataset.action;o==="exclusive"?hl(a):o==="toggle"&&vl(a);return}const l=n.closest(".pill.big");l&&e.contains(l)&&yl(l)})}function bl(e){Dt(),Be&&Be.open(e)}function At(){Dt(),Be&&Be.closeAll()}function ne(e=!1){rt(),$t(),Aa(),Gt("",""),Ma(),At(),A();const t=document.getElementById("drinkGrid");t&&en(t)}function q(){rt(),ne(!0)}function U(){const e=document.getElementById("drinkGrid");e&&e.querySelectorAll(".pill").forEach(t=>{t.disabled=!1,t.style.pointerEvents="",t.classList.remove("disabled")})}function A(){const e=document.getElementById("serveAperitif"),t=document.getElementById("serveTC"),n=document.getElementById("serveMealDrink"),a=Me==null?void 0:Me(),l=a==null?void 0:a.phase;let o=L.cat,c=L.sub;const s=document.getElementById("tc_chaud_type");(!o||!c)&&(s!=null&&s.value)&&(o="chaud",c=s.value);const r=document.getElementById("tc_cat");r!=null&&r.value&&(o||(o=r.value),c||(c=r.value));let d=!1;if(o&&c)if(gl.has(c)||c==="chocolat"||o==="chocolat")d=!0;else{const p=pl.get(c);p&&(d=!!L[p])}[e,t,n].forEach(p=>{p&&(p.disabled=!0)}),l==="aperitif"&&e&&(e.disabled=!d),l==="tc"&&t&&(t.disabled=!d),l==="repas"&&n&&(n.disabled=!d)}function ln(e,t){e.addEventListener("click",t),e.addEventListener("touchstart",function(n){n.preventDefault(),t(n)},{passive:!1})}const dt=["AVML","BBML","CHML","GFML","HNML","KSML","LFML","LSML","MOML","NLML","VGML","VJML","VLML"],B=e=>document.querySelector(e),i={title:{flightNo:"",date:""},config:{rowsBiz:4,layout:"A220",lang:"EN",theme:"dark",histAsc:!1},inventory:{plateaux:0,hot_viande:0,hot_vege:0,hot_special:0,spml:{},pre:{}},menu:{viandeLabel:"",vegeLabel:""},seats:{},phase:"fiche",reminders:[],history:[],clientView:!1};ml({getStore:()=>i});const Et={sleep:"ðŸ˜´"},El=["sleepMealBtn","sleepAperoBtn","sleepTCBtn","sleepModalBtn"],kl=[{id:"aperoNotesBlock",labelId:"mdAperoNotes",fallback:"Drink / aperitif notes"},{id:"tcNotesBlock",labelId:"mdTCNotes",fallback:"Tea & coffee notes"},{id:"mealDrinkNotesBlock",labelId:"mdMealDrinkNotes",fallback:"Meal drink notes"}],kt=new Map;function Cl(){kl.forEach(e=>{const t=document.getElementById(e.id);if(!t)return;if(kt.has(e.id)){const d=kt.get(e.id);En(d),zt(d),Cn(d);return}const n=Array.from(t.childNodes),a=document.createElement("div");a.className="notes-accordion__content",n.forEach(d=>{a.appendChild(d)});const l=document.createElement("div");l.className="accordion__header notes-accordion__header",l.setAttribute("role","button"),l.setAttribute("tabindex","0");const o=document.createElement("span");o.className="notes-accordion__title",l.appendChild(o);const c=document.createElement("div");c.className="accordion__body notes-accordion__body",c.appendChild(a);const s=document.createElement("div");for(s.className="accordion__section",s.appendChild(l),s.appendChild(c);t.firstChild;)t.removeChild(t.firstChild);t.classList.add("accordion","notes-accordion"),t.dataset.notesAccordion="1",t.appendChild(s);const r={id:e.id,block:t,section:s,header:l,headerText:o,body:c,labelId:e.labelId,fallback:e.fallback,defaultOpen:e.defaultOpen===!0};kt.set(e.id,r),l.addEventListener("click",()=>kn(r)),l.addEventListener("keydown",d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),kn(r))}),on(r,r.defaultOpen),En(r),Cn(r)})}function En(e){if(!e||e.labelObserver||!e.labelId)return;const t=document.getElementById(e.labelId);if(!t){zt(e);return}const n=()=>zt(e);if(n(),typeof MutationObserver>"u")return;const a=new MutationObserver(n);a.observe(t,{characterData:!0,childList:!0,subtree:!0}),e.labelObserver=a}function zt(e){if(!e)return;const t=e.labelId?document.getElementById(e.labelId):null,n=((t==null?void 0:t.textContent)||(t==null?void 0:t.innerText)||"").trim()||e.fallback||"";e.headerText.textContent=n}function on(e,t){e&&(e.section.dataset.open=t?"true":"false",e.header.setAttribute("aria-expanded",t?"true":"false"),e.body.hidden=!t)}function kn(e){if(!e)return;const t=e.section.dataset.open==="true";on(e,!t)}function Cn(e){if(!e)return;const t=e.block.querySelector("label");t&&(t.classList.add("sr-only"),t.setAttribute("aria-hidden","true"))}function Sl(e){const t=(n,a)=>{const l=kt.get(n);l&&on(l,a)};e==="aperitif"?(t("aperoNotesBlock",!0),t("tcNotesBlock",!1),t("mealDrinkNotesBlock",!1)):e==="tc"?(t("aperoNotesBlock",!1),t("tcNotesBlock",!0),t("mealDrinkNotesBlock",!1)):e==="repas"&&(t("aperoNotesBlock",!1),t("tcNotesBlock",!1),t("mealDrinkNotesBlock",!1))}function gt(e,t,n,a){if(!e)return;const l=document.createElement("div");l.className=`tag seat-flag ${t}`.trim(),a&&(l.textContent=a),n&&(l.title=n,l.setAttribute("aria-label",n)),e.appendChild(l)}(async()=>{try{navigator.storage&&navigator.storage.persist&&(await navigator.storage.persisted()||await navigator.storage.persist())}catch(e){console.warn("Persistent storage request failed:",e)}})();for(const e of dt)i.inventory.spml[e]=i.inventory.spml[e]||0;(function(){var g;const e=document.getElementById("flightDate");if(!e)return;function t(){var b;const f=(((b=i==null?void 0:i.config)==null?void 0:b.lang)||"EN").toUpperCase();return f==="FR"?{months:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wk:["L","M","M","J","V","S","D"],weekStart:1}:f==="DE"?{months:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wk:["M","D","M","D","F","S","S"],weekStart:1}:{months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wk:["S","M","T","W","T","F","S"],weekStart:0}}function n(f){return String(f).padStart(2,"0")}function a(f,b,I){return`${f}-${n(b+1)}-${n(I)}`}function l(){const f=new Date;return{y:f.getFullYear(),m:f.getMonth(),d:f.getDate()}}function o(f){const b=/^(\d{4})-(\d{2})-(\d{2})$/.exec(f||"");return b?{y:+b[1],m:+b[2]-1,d:+b[3]}:null}const c=((g=document.getElementById("flightDateISO"))==null?void 0:g.value)||e.value;let s=o(c)||l(),r;function d(){p(),r=document.createElement("div"),r.className="dp",document.body.appendChild(r),m();const f=e.getBoundingClientRect();r.style.left=window.scrollX+f.left+"px",r.style.top=window.scrollY+f.bottom+6+"px",setTimeout(()=>{document.addEventListener("mousedown",v),document.addEventListener("keydown",y)},0)}function p(){document.removeEventListener("mousedown",v),document.removeEventListener("keydown",y),r&&r.parentNode&&r.parentNode.removeChild(r),r=null}function v(f){r&&(f.target===r||r.contains(f.target)||f.target===e||p())}function y(f){f.key==="Escape"&&p()}function m(){var K;if(!r)return;const f=t();r.innerHTML="";const b=document.createElement("header"),I=document.createElement("button");I.textContent="";const h=document.createElement("button");h.textContent="";const C=document.createElement("div");C.className="m",C.textContent=`${f.months[s.m]} ${s.y}`,I.addEventListener("click",()=>{s.m--,s.m<0&&(s.m=11,s.y--),m()}),h.addEventListener("click",()=>{s.m++,s.m>11&&(s.m=0,s.y++),m()}),b.appendChild(I),b.appendChild(C),b.appendChild(h),r.appendChild(b);const E=document.createElement("div");E.className="grid";const _=f.wk.slice();if(f.weekStart===1){const O=_.shift();_.push(O)}_.forEach(O=>{const M=document.createElement("div");M.className="w",M.textContent=O,E.appendChild(M)});const D=(new Date(s.y,s.m,1).getDay()-(f.weekStart||0)+7)%7,H=new Date(s.y,s.m+1,0).getDate(),Y=new Date(s.y,s.m,0).getDate();for(let O=0;O<D;O++){const M=document.createElement("div");M.className="d out",M.textContent=String(Y-D+1+O),E.appendChild(M)}const se=l(),me=((K=document.getElementById("flightDateISO"))==null?void 0:K.value)||e.value,le=o(me);for(let O=1;O<=H;O++){const M=document.createElement("div");M.className="d",M.textContent=String(O),se.y===s.y&&se.m===s.m&&se.d===O&&M.classList.add("today"),le&&le.y===s.y&&le.m===s.m&&le.d===O&&M.classList.add("sel"),M.addEventListener("click",()=>{const G=a(s.y,s.m,O);document.getElementById("flightDateISO").value=G,e.value=ot(G),ct(),e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),p()}),E.appendChild(M)}const T=(7-(D+H)%7)%7;for(let O=1;O<=T;O++){const M=document.createElement("div");M.className="d out",M.textContent=String(O),E.appendChild(M)}r.appendChild(E)}e.addEventListener("focus",d),e.addEventListener("click",d),window._rerenderDatepickerLang=function(){var I,h;r&&m();const f=(((I=i==null?void 0:i.config)==null?void 0:I.lang)||"EN").toUpperCase();e.placeholder=f==="FR"?"AAAA-MM-JJ":f==="DE"?"JJJJ-MM-TT":"YYYY-MM-DD";const b=(h=document.getElementById("flightDateISO"))==null?void 0:h.value;b&&(document.getElementById("flightDate").value=ot(b),ct())}})();function cn(e=!1){const t=document.getElementById("tc_vin_rouge"),n=document.getElementById("tc_vin_blanc");if(!t||!n)return;const a=t.value,l=n.value;e&&a&&l&&(n.value=""),n.disabled=!!t.value,t.disabled=!!n.value}function xa(){["tc_cat","tc_milk","tc_sweet","tc_the_type","tc_digestif_type","tc_beer","tc_vin_rouge","tc_vin_blanc","tc_cocktail_type","tc_soft_eau","tc_soft_jus","tc_soft_coca"].forEach(n=>{const a=document.getElementById(n);a&&(a.value="")}),["tc_digestif_ice","tc_champ_ice","tc_vin_ice","tc_cocktail_ice","tc_cocktail_lemon","tc_cocktail_salt","tc_cocktail_pepper","tc_soft_ice","tc_soft_lemon","tc_soft_ice2","tc_soft_lemon2","tc_soft_salt","tc_soft_pepper","tc_soft_ice3","tc_soft_lemon3","tc_soft_ice4","tc_soft_lemon4","tc_soft_ice5","tc_soft_lemon5"].forEach(n=>{const a=document.getElementById(n);a&&(a.checked=!1)}),["tc_group","tc_alcool_type","tc_chaud_type","tc_soft_type"].forEach(n=>{const a=document.getElementById(n);a&&(a.value="")}),document.getElementById("tc_alcool")&&(document.getElementById("tc_alcool").style.display="none"),document.getElementById("tc_chaud")&&(document.getElementById("tc_chaud").style.display="none"),Pe(""),cn(!0);const e=document.getElementById("tc_tipBtn"),t=document.getElementById("tc_tip");e&&(e.style.display="none"),t&&(t.style.display="none")}function We(){const e=document.getElementById("modalBack");if(!(!(e&&(e.style.display==="flex"||e.style.display===""))||!document.getElementById("drinkGrid")))try{rt(),q(),U(),At(),A()}catch(a){console.warn("ensureDrinkGridActive:",a)}}function lt(){const e=document.getElementById("serveTC");if(!e)return;const t=k[i.config.lang||"EN"],n=t.serveMealDrink||t.serveTC||"Order drink";e.textContent=n}function Tt(e,t){return e+t}function Ce(e){return(!e||typeof e!="object")&&(e={}),typeof e.occupied!="boolean"&&(e.occupied=!1),e.type||(e.type="normal"),e.status||(e.status="none"),e.lang===void 0&&(e.lang=""),e.notes===void 0&&(e.notes=""),e.sleep===void 0&&(e.sleep=!1),e.spml===void 0&&(e.spml=""),e.preLabel===void 0&&(e.preLabel=""),e.normalMeal===void 0&&(e.normalMeal=""),e.aperoNotes===void 0&&(e.aperoNotes=""),e.tcNotes===void 0&&(e.tcNotes=""),(!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null}),e.served||(e.served={aperitif:null,meal:null}),typeof e.served.trayUsed!="boolean"&&(e.served.trayUsed=!1),e.serveLaterAt===void 0&&(e.serveLaterAt=null),typeof e.served.tc>"u"&&(e.served.tc=null),typeof e.served.trayCleared>"u"&&(e.served.trayCleared=!1),e.apDrink||(e.apDrink={cat:"",milk:"",sweet:"",theType:"",digestif:"",whiskyStyle:"",baileysIce:!1,beer:"",vinRouge:"",vinBlanc:"",vinNotes:"",cognacIce:!1,champIce:!1,vinIce:!1,softType:"",waterType:"",juiceType:"",cocaType:"",softIce:!1,softLemon:!1,juiceIce:!1,juiceLemon:!1,juiceSalt:!1,juicePepper:!1,spriteIce:!1,spriteLemon:!1,cocktail:"",cocktailIce:!1,cocktailLemon:!1,cocktailSalt:!1,cocktailPepper:!1,campariMix:"",virginMary:!1,choco:!1}),e.eatWith===void 0&&(e.eatWith=""),e}function we(e,t){const n=Tt(e,t),a=Ce(i.seats[n]);return i.seats[n]=a,a}function w(){try{localStorage.setItem(Ge(),JSON.stringify(i)),localStorage.setItem("serviceflow::lastKey",Ge())}catch(e){console.warn("localStorage indisponible:",e)}X()}document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="hidden")try{w()}catch{}});window.addEventListener("pagehide",()=>{try{w()}catch{}},{capture:!0});window.addEventListener("beforeunload",e=>{(i.history||[]).length>0&&(e.preventDefault(),e.returnValue="")});function Ge(){const e=i.title||{flightNo:"",date:""};return`serviceflow::${e.flightNo||"no-flight"}::${e.date||"no-date"}`}function Oa(e){e&&e!==Ge()&&localStorage.setItem(Ge(),JSON.stringify(i))}function Tl(){var n;const e=Ge();i.title.flightNo=B("#flightNo").value.trim();const t=((n=document.getElementById("flightDateISO"))==null?void 0:n.value)||B("#flightDate").value;i.title.date=t,Oa(e),w(),$({type:"titleSet",flightNo:i.title.flightNo||"",dateISO:i.title.date||""})}(function(){var t,n,a,l;(t=document.getElementById("saveSnapshot"))==null||t.addEventListener("click",Tl),(n=document.getElementById("importJSON"))==null||n.addEventListener("click",()=>{const o=document.getElementById("importFile");o&&(o.value="",o.click())}),(a=document.getElementById("importFile"))==null||a.addEventListener("change",o=>{var d;if(window.__importingJSON)return;window.__importingJSON=!0;const c=()=>setTimeout(()=>{window.__importingJSON=!1},0),s=(d=o.target.files)==null?void 0:d[0];if(!s){c();return}const r=new FileReader;r.onload=()=>{var p,v,y,m,g,f;try{const b=JSON.parse(String(r.result||"{}")),I=Ge();for(const D of Object.keys(i))delete i[D];Object.assign(i,b),typeof normalizeImportedStore=="function"&&normalizeImportedStore(i),document.getElementById("flightNo").value=((p=i==null?void 0:i.title)==null?void 0:p.flightNo)||"";const h=((v=i==null?void 0:i.title)==null?void 0:v.date)||"";document.getElementById("flightDateISO").value=h,document.getElementById("flightDate").value=h;const C=document.getElementById("labelViande"),E=document.getElementById("labelVege");C&&(C.value=((y=i==null?void 0:i.menu)==null?void 0:y.viandeLabel)||""),E&&(E.value=((m=i==null?void 0:i.menu)==null?void 0:m.vegeLabel)||""),Oa(I),w(),Ve==null||Ve(),x==null||x(),P==null||P(),ee==null||ee();const _=(((g=i==null?void 0:i.config)==null?void 0:g.lang)||"EN").toUpperCase(),N=k[i.config.lang||"EN"]||k.EN;alert(N.jsonRestored||"Session restaure depuis le JSON.")}catch(b){console.error(b);const I=(((f=i==null?void 0:i.config)==null?void 0:f.lang)||"EN").toUpperCase(),h=k[I]||k.EN;alert(h.invalidFile||"Invalid file.")}finally{o.target.value="",c()}},r.readAsText(s)}),(l=document.getElementById("exportPNG"))==null||l.addEventListener("click",()=>{try{typeof exportSeatmapPNG=="function"?exportSeatmapPNG():console.warn("exportSeatmapPNG() non dfinie")}catch{}})})();function _l(e){i.history.unshift({ts:Date.now(),type:"text",text:e}),ee()}function $(e){const t=Object.assign({ts:Date.now()},e);i.history.unshift(t),ee()}function _t(e){const t=Array.isArray(i.history)?i.history[0]:null;t&&t.type===e.type&&t.seat===e.seat&&(!e.ctx||t.ctx===e.ctx)&&(!e.label||t.label===e.label)&&(!e.notes||t.notes===e.notes)||$(e)}function fe(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),n=e.createGain();t.type="sine",t.frequency.value=880,t.connect(n),n.connect(e.destination),t.start(),n.gain.setValueAtTime(.08,e.currentTime),n.gain.exponentialRampToValueAtTime(1e-5,e.currentTime+.15),t.stop(e.currentTime+.16)}catch{}}function Ll(){return Object.values(i.inventory.spml||{}).reduce((e,t)=>e+(t||0),0)}function Bl(){return Object.values(i.inventory.pre||{}).reduce((e,t)=>e+(t||0),0)}function Pa(){return i.config.layout==="A320"?["C","B","A"]:["C","A"]}function Ne(){const e=document.getElementById("seatmapTitle");if(!e)return;const t=k[i.config.lang||"EN"]||k.EN,n="F E D",a=i.config.layout==="A320"?"C B A":"C A",l=t.seatmapTitle||"Seatmap ({L} | {R})";e.textContent=l.replace("{L}",n).replace("{R}",a)}function Ka(){const e=document.querySelector("#filterTabs .subtab.active");return(e==null?void 0:e.dataset.filter)||"all"}function Fa(e){document.querySelectorAll("#filterTabs .subtab").forEach(t=>{const n=t.dataset.filter===e;t.classList.toggle("active",n),t.setAttribute("aria-selected",n?"true":"false")})}function Mt(e){document.querySelectorAll("#phaseChips .tab").forEach(t=>{const n=t.dataset.phase===e;t.classList.toggle("active",n),t.setAttribute("aria-selected",n?"true":"false")})}const Sn={FTL:"status-pill status-pill--ftl",SEN:"status-pill status-pill--sen",HON:"status-pill status-pill--hon",FCL:"status-pill status-pill--fcl",VIP:"status-pill status-pill--vip",PAD:"status-pill status-pill--pad",OTHER:"status-pill status-pill--other"};function sn(){const e=document.getElementById("modalSeatMeta");if(!e)return;e.innerHTML="";const t=document.getElementById("m_status"),n=t==null?void 0:t.value;if(!n||n==="none")return;const a=n.toUpperCase(),l=document.createElement("span");l.className=Sn[a]||Sn.OTHER,l.textContent=n,e.appendChild(l)}function rn(){const e=document.getElementById("m_lang"),t=(e==null?void 0:e.value)||"";document.querySelectorAll(".language-btn").forEach(n=>{const l=(n.dataset.lang||"")===t&&t!=="";n.classList.toggle("active",l),n.setAttribute("aria-pressed",l?"true":"false")})}function xt(){const e=document.getElementById("layoutSelect"),t=(e==null?void 0:e.value)||i.config.layout||"A220";document.querySelectorAll(".layout-btn").forEach(n=>{const l=(n.dataset.layout||"")===t;n.classList.toggle("active",l),n.setAttribute("aria-pressed",l?"true":"false")})}function Oe(){const e=document.getElementById("m_later"),t=(e==null?void 0:e.value)||"",n=Ot();document.querySelectorAll(".later-btn").forEach(c=>{const r=(c.dataset.value||"")===t&&t!=="";c.classList.toggle("active",r),c.setAttribute("aria-pressed",r?"true":"false"),c.disabled=!n}),e&&(e.disabled=!n);const a=document.getElementById("laterCustomContainer"),l=document.getElementById("m_later_time"),o=t==="custom"&&n;a&&a.classList.toggle("active",o),l&&(l.disabled=!o,!o&&document.activeElement===l&&l.blur())}function Ot(){const e=document.getElementById("m_occ_chk");return!!(e!=null&&e.checked)}function ja(){const e=Ot();document.querySelectorAll(".language-btn").forEach(o=>{o.disabled=!e});const t=document.getElementById("m_lang");t&&(t.disabled=!e),document.querySelectorAll('input[name="m_type"]').forEach(o=>{o.disabled=!e});const n=document.getElementById("m_status");n&&(n.disabled=!e);const a=document.getElementById("m_eatWith");a&&(a.disabled=!e);const l=document.getElementById("movePaxBtn");if(l&&(l.disabled=!e,l.setAttribute("aria-disabled",(!e).toString())),!e){const o=document.getElementById("m_later");if(o&&o.value)o.value="",o.dispatchEvent(new Event("change",{bubbles:!0}));else{u&&(u.data.serveLaterAt=null);const c=document.getElementById("m_later_view");c&&(c.textContent="",c.style.display="none")}}ce(),Oe()}const Q=document.getElementById("legendToggle"),Z=document.getElementById("legendPopover"),qt=document.querySelector(".seatmap");function Ra(){if(!Q||!Z||!qt)return;const e=Q.getBoundingClientRect(),t=qt.getBoundingClientRect(),n=Z.offsetWidth||0,a=12,l=Math.max(a,e.bottom-t.top+a);let o=e.right-t.left-n;const c=t.width-n-a;Number.isFinite(o)||(o=a),o=Math.max(a,Math.min(o,c)),Z.style.top=`${l}px`,Z.style.left=`${o}px`}function nt(e){if(!Q||!Z)return;Z.dataset.open=e?"true":"false",Z.setAttribute("aria-hidden",e?"false":"true"),Q.setAttribute("aria-expanded",e?"true":"false"),Q.classList.toggle("active",e);const t=Q.dataset.labelShow||"Show legend",n=Q.dataset.labelHide||"Hide legend",a=e?n:t;Q.textContent=a,Q.title=a,Q.setAttribute("aria-label",a),e?requestAnimationFrame(Ra):(Z.style.top="",Z.style.left="")}function He(){return(Z==null?void 0:Z.dataset.open)==="true"}function ot(e){var s;const t=(((s=i==null?void 0:i.config)==null?void 0:s.lang)||"EN").toUpperCase();if(!e)return"";const n=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!n)return e;const a=n[1],l=n[2],o=n[3];return t==="FR"?`${o}/${l}/${a}`:t==="DE"?`${o}.${l}.${a}`:`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(l,10)-1]} ${parseInt(o,10)}, ${a}`}function ct(){const e=document.getElementById("flightDatePretty"),t=document.getElementById("flightDate");e&&t&&(e.textContent=ot(t.value))}const yt=[["lblFlight","flight"],["lblDate","date"],["saveTitle","saveTitle"],["resetFlight","reset"],["lblLang","lblLang"],['#phaseChips .tab[data-phase="fiche"]',"chips_fiche"],['#phaseChips .tab[data-phase="aperitif"]',"chips_apero"],['#phaseChips .tab[data-phase="repas"]',"chips_meal"],['#phaseChips .tab[data-phase="tc"]',"chips_tc"],["#filterTabs .subtab[data-filter='all']","filter_all"],["#filterTabs .subtab[data-filter='toServe']","filter_toserve"],["#filterTabs .subtab[data-filter='later']","filter_later"],["#filterTabs .subtab[data-filter='clear']","filter_clear"],["flowTitle","flowTitle"],["flowNowTitle","flowNowTitle"],["flowLaterTitle","flowLaterTitle"],["flowClearTitle","flowClearTitle"],["hdrConfig","hdrConfig"],["lblLayout","lblLayout"],["lblRows","lblRows"],["secMenuTitle","secMenuTitle"],["lblViande","lblViande"],["lblVege","lblVege"],["hdrInventaire","hdrInventaire"],["lblInvPlateaux","invPlateaux"],["lblInvViande","invViande"],["lblInvVege","invVege"],["lblInvSpecial","invSpecial"],["lblSpml","spml"],["spmlAddBtn","add"],["lblPreAdd","preAdd"],["preAddBtn","add"],["preHeader","preHeader"],["tcTitle","tcTitle"],["tcLblCat","tcDrink"],["tcCatCafe","tcCatCafe"],["tcCatDeca","tcCatDeca"],["tcCatThe","tcCatThe"],["tcCatInf","tcCatInf"],["tcCatDig","tcCatDig"],["tcCatBeer","tcCatBeer"],["tcCatChamp","tcCatChamp"],["tcCatVin","tcCatVin"],["tcCatSoft","tcCatSoft"],["tcCatChoco","tcCatChoco"],["tcGroupSoft","tcGroupSoft"],["tcGroupAlcohol","tcGroupAlcohol"],["tcGroupHot","tcGroupHot"],["tcLblAlcohol","tcLblAlcohol"],["tcLblHot","tcLblHot"],["tcLblSoft","tcLblSoft"],["tcLblWater","tcLblWater"],["tcLblJuice","tcLblJuice"],["tcLblCoca","tcLblCoca"],["tcLblMilk","tcMilk"],["tcLblSweet","tcSweet"],["tcLblTeaType","tcTeaType"],["tcLblInfusion","tcInfusion"],["tcLblDigestif","tcDigestif"],["tcLblService","tcService"],["tcLblBaileys","tcBaileys"],["tcLblBeer","tcBeer"],["tcLblChamp","tcChampagne"],["tcLblVin","tcWines"],["tcLblRed","tcRed"],["tcLblWhite","tcWhite"],["tcLblChoco","tcLblChoco"],["tcRedCH","tcCH"],["tcRedForeign","tcForeign"],["tcWhiteCH","tcCH"],["tcSoftWater","tcSoftWater"],["tcSoftJuice","tcSoftJuice"],["tcSoftCoca","tcSoftCoca"],["tcSoftSprite","tcSoftSprite"],["tcSoftTonic","tcSoftTonic"],["tcWaterStill","tcWaterStill"],["tcWaterSpark","tcWaterSpark"],["tcJuiceApple","tcJuiceApple"],["tcJuiceOrange","tcJuiceOrange"],["tcJuiceTomato","tcJuiceTomato"],["tcCocaClassic","tcCocaClassic"],["tcCocaZero","tcCocaZero"],["hdrHot","tcGroupHot"],["hdrSoft","tcGroupSoft"],["hdrAlco","tcGroupAlcohol"],["tcChocoBrand","tcChocoBrand"],["tcIceSoft","tcIce"],["tcIceSoft2","tcIce"],["tcIceSoft3","tcIce"],["tcIceSoft4","tcIce"],["tcLemonSoft","tcLemon"],["tcLemonSoft2","tcLemon"],["tcLemonSoft3","tcLemon"],["tcLemonSoft4","tcLemon"],["tcSalt","tcSalt"],["tcPepper","tcPepper"],["tcMilkCreme","tcMilkCreme"],["tcMilkAvoine","tcMilkAvoine"],["tcMilkLait","tcMilkLait"],["tcMilkNone","tcMilkNone"],["tcSweetSugar","tcSweetSugar"],["tcSweetSub","tcSweetSub"],["tcSweetNone","tcSweetNone"],["tcTeaEnglish","tcTeaEnglish"],["tcTeaVert","tcTeaVert"],["tcTeaMenthe","tcTeaMenthe"],["tcInfCam","tcInfCam"],["tcDigJW","tcDigJW"],["tcDigJB","tcDigJB"],["tcDigCognac","tcDigCognac"],["tcDigBaileys","tcDigBaileys"],["tcPur","tcPur"],["tcRocks","tcRocks"],["tcIce","tcIce"],["tcBeerQ","tcBeerQ"],["tcBeerC","tcBeerC"],["tcBeerL","tcBeerL"],["tcChampagne","tcChampagne"],["tcWines","tcWines"],["tcRed","tcRed"],["tcWhite","tcWhite"],["tcNotes","tcNotes"],["tcLblIceGen","tcIce"],["tcIceGen","tcIce"],["tcIceChamp","tcIce"],["tcIceVin","tcIce"],["mdTCNotes","mdTCNotes"],["mdMealDrinkNotes","mealDrinkNotes"],["serveTC","serveTC"],["serveMealDrink","serveMealDrink"],["lgSleep","lgSleep"],["lgLater","lgLater"],["lgServed","lgServed"],["lgInfant","lgInfant"],["lgChild","lgChild"],["lgTogether","lgTogether"],["lgclear","lgclear"],["secHistoryTitle","secHistoryTitle"],["remindersTitle","remindersTitle"],["histLbl","histViewLabel"],["histLblSeat","histLblSeat"],["histLblType","histLblType"],["histAscLbl","histAscLbl"],["#histType option[value='mealDrinkServed']","histType_mealDrinkServed"],["histModeAll","histScope_all"],["histModeSeat","histScope_seat"],["histModeType","histScope_type"],["#histType option[value='apServed']","histType_apServed"],["#histType option[value='tcServed']","histType_tcServed"],["#histType option[value='mealServed']","histType_mealServed"],["#histType option[value='apCanceled']","histType_apCanceled"],["#histType option[value='serviceCanceled']","histType_serviceCanceled"],["#histType option[value='trayCleared']","histType_trayCleared"],["#histType option[value='trayUncleared']","histType_trayUncleared"],["#histType option[value='reset']","histType_reset"],["#histType option[value='text']","histType_text"],["#histType option[value='seatMoveStart']","histType_seatMoveStart"],["#histType option[value='seatMoved']","histType_seatMoved"],["#histType option[value='seatSwapped']","histType_seatSwapped"],["closeModal","close"],["mdPass","mdPass"],["mdOcc","mdOcc"],["mdSleepTxt","mdSleepTxt"],["mdType","mdType"],["mdAdult","mdAdult"],["mdChild","mdChild"],["mdInfant","mdInfant"],["mdStatus","mdStatus"],["mdLang","mdLang"],["mdLater","mdLater"],["mdLaterSet","mdLaterSet"],["mdLaterCancel","mdLaterCancel"],["mdLaterCustom","mdLaterCustom"],["mdNotes","mdNotes"],["mdAperoNotes","mdAperoNotes"],["serveAperitif","serveAperitif"],["mdMeal","mdMeal"],["mdNormal","mdNormal"],["optNormalMeat","optNormalMeat"],["optNormalVeg","optNormalVeg"],["optNormalTray","optNormalTray"],["mdSpml","mdSpml"],["mdPre","mdPre"],["serveMeal","serveMeal"],["optStatusOther","optStatusOther"],["movePaxBtn","moveSeat"],["mdEatTogether","eatTogether"],["mdEatWith","mdEatWith"],["btnClearEat","clear"]];function Wa(){if(!document.getElementById("appLegal")){const e=document.createElement("div");e.id="appLegal",e.style.position="fixed",e.style.bottom="6px",e.style.right="10px",e.style.fontSize="12px",e.style.color="var(--muted)",e.style.background="var(--panel)",e.style.padding="4px 8px",e.style.border="1px solid var(--grid)",e.style.borderRadius="8px",e.style.zIndex="9999",e.style.pointerEvents="none",e.innerHTML=' 2025 Â© Nicolas Debesse | DEBN | 47762  <span id="legalRights"></span>',document.body.appendChild(e)}}function Ve(){var D,H,Y,se,me,le;const e=i.config.lang||"EN";Wa();const t=document.getElementById("legalRights");t&&(t.textContent=(k[e]||k.EN).rights||"All rights reserved");const n=k[e]||k.EN,a=document.getElementById("clientView");a&&(a.textContent=i.clientView?" "+n.crew:" "+n.client);const l=document.getElementById("flightNo");if(l&&(l.placeholder=n.flightPlaceholder||"e.g. LX2810"),Array.isArray(typeof yt<"u"?yt:[])){for(let S=0;S<yt.length;S++){const T=yt[S];if(!T||T.length<2)continue;const K=T[0],O=T[1],M=document.getElementById("m_eatWith");M&&!M.title&&(M.title=n.mdEatWithPh||"e.g. 12B");const G=K&&(K.startsWith("#")||K.startsWith("."))?document.querySelector(K):document.getElementById(K);G&&n[O]!==void 0&&(G.textContent=n[O])}it==null||it()}(function(){const T=k[i.config.lang||"EN"]||k.EN;["sleepMealBtn","sleepAperoBtn","sleepTCBtn","sleepModalBtn"].forEach(M=>{const G=document.getElementById(M);G&&(G.title=T.mdSleepTxt||"Sleep")});const K=[["saveSnapshot","saveTitle"],["exportJSON","exportJSON"],["importJSON","importJSON"],["exportPNG","exportPNG"],["resetFlight","reset"]],O={saveSnapshot:String.fromCodePoint(128190),importJSON:String.fromCodePoint(128193)};for(const[M,G]of K){const De=document.getElementById(M);if(De&&T[G]){const Qe=O[M]||"",Ae=T[G];De.textContent=Qe?`${Qe} ${Ae}`:Ae,De.setAttribute("aria-label",Ae),De.title=Ae}}})(),document.querySelectorAll("[data-i18n]").forEach(S=>{const T=S.getAttribute("data-i18n");T&&n[T]!==void 0&&(S.textContent=n[T])}),function(){const T=k[i.config.lang||"EN"]||k.EN,K={drink_coffee:()=>T.tcCatCafe||"Coffee",drink_decaf:()=>T.tcCatDeca||"Decaf",drink_tea:()=>T.tcCatThe||"Tea",drink_caotina:()=>T.tcChocoBrand||T.tcCatChoco||"Caotina",drink_water:()=>T.tcSoftWater||T.tcWater||"Water",drink_cola:()=>T.tcSoftCoca||T.tcCola||"Cola",drink_juice:()=>T.tcSoftJuice||T.tcJuice||"Juice",drink_sprite:()=>T.tcSoftSprite||"Sprite",drink_tonic:()=>T.tcSoftTonic||"Tonic",drink_champagne:()=>T.tcChampagne||"Champagne",drink_red:()=>T.tcWines&&T.tcRed?`${T.tcWines}  ${T.tcRed}`:"Red wine",drink_white:()=>T.tcWines&&T.tcWhite?`${T.tcWines}  ${T.tcWhite}`:"White wine",drink_beer:()=>T.tcBeer||"Beer",drink_cocktail:()=>T.tcCocktail||"Cocktail",drink_digestif:()=>T.tcDigestif||"Digestif"};document.querySelectorAll("#drinkGrid .pill-cap[data-i18n-cap]").forEach(O=>{const M=O.getAttribute("data-i18n-cap"),G=(K[M]?K[M]():O.textContent||"").trim();G&&(O.textContent=G)})}();{const S=k[i.config.lang||"EN"]||k.EN,T=(K,O)=>{const M=document.querySelector(K);M&&(M.title=O,M.setAttribute("aria-label",O))};T('#hotRow .pill.big[data-sub="cafe"]',S.tcCatCafe||"Coffee"),T('#hotRow .pill.big[data-sub="deca"]',S.tcCatDeca||"Decaf"),T('#hotRow .pill.big[data-sub="the"]',S.tcCatThe||"Tea"),T('#hotRow .pill.big[data-sub="chocolat"]',S.tcCatChoco||"Caotina"),T('#softRow .pill.big[data-sub="eau"]',S.tcSoftWater||S.tcWater||"Water"),T('#softRow .pill.big[data-sub="coca"]',S.tcCola||"Cola"),T('#softRow .pill.big[data-sub="jus"]',S.tcSoftJuice||S.tcJuice||"Juice"),T('#softRow .pill.big[data-sub="sprite"]',S.tcSoftSprite||"Sprite"),T('#softRow .pill.big[data-sub="tonic"]',S.tcSoftTonic||"Tonic"),T('#alcoRow .pill.big[data-sub="champagne"]',S.tcChampagne||"Champagne"),T('#alcoRow .pill.big[data-sub="biere"]',S.tcBeer||"Beer"),T('#alcoRow .pill.big[data-sub="vin_rouge"]',S.tcWines&&S.tcRed?`${S.tcWines}  ${S.tcRed}`:"Red wine"),T('#alcoRow .pill.big[data-sub="vin_blanc"]',S.tcWines&&S.tcWhite?`${S.tcWines}  ${S.tcWhite}`:"White wine"),T('#alcoRow .pill.big[data-sub="digestif"]',S.tcDigestif||"Digestif")}const o=document.getElementById("m_tcNotes");o&&(o.placeholder=n.tcNotesPlaceholder||"e.g. Long coffee, sugar");const c=document.getElementById("m_notes");c&&(c.placeholder=n.passengerNotesPlaceholder||"e.g., DE only, no nuts");const s=document.getElementById("m_mealDrinkNotes");s&&(s.placeholder=n.mealDrinkNotesPlaceholder||"e.g. sparkling water, white wine, peanuts");const r=document.getElementById("m_eatWith");r&&(r.placeholder=n.mdEatWithPh||"e.g. 12B");const d=document.getElementById("labelViande"),p=document.getElementById("labelVege");d&&(d.placeholder=n.meatPlaceholder||"e.g., Beef in red-wine sauce"),p&&(p.placeholder=n.vegPlaceholder||"e.g., Vegetarian lasagna");const v=document.getElementById("filterTabs");if(v){const S=e==="FR"?"Filtrer":e==="DE"?"Filtern":"Filter";v.setAttribute("aria-label",S),v.setAttribute("title",S)}const y=document.getElementById("layoutButtons");if(y){const S=e==="FR"?"Type d'appareil":e==="DE"?"Flugzeugtyp":"Aircraft type";y.setAttribute("title",S),y.setAttribute("aria-label",S)}xt();const m=document.getElementById("legendToggle");if(m){const S=n.legendShow||"Show legend",T=n.legendHide||"Hide legend";m.dataset.labelShow=S,m.dataset.labelHide=T;const K=He()?T:S;m.textContent=K,m.title=K,m.setAttribute("aria-label",K)}const g=document.getElementById("spmlAddCode");g&&(g.title=e==="FR"?"Ajouter code SPML":e==="DE"?"SPML-Code hinzufï¿½gen":"Add SPML code");const f=document.getElementById("preAddLabel");f&&(f.placeholder=n.preAddPlaceholder||"e.g., Gluten-free pasta");const b=document.querySelector(".later-btn[data-value='custom']");if(b){const S=(n.mdLaterCustomBtn||"Custom").trim()||"Custom";b.textContent=S}const I=document.getElementById("resetFlight");if(I){const S=(n.reset??I.textContent??"").trim();I.dataset.defaultLabel=S,I.dataset.resetArmed!=="true"&&(I.textContent=S)}document.documentElement.lang=e.toLowerCase();const h=document.getElementById("legalRights");h&&(h.textContent=n.rights||"All rights reserved");const C=document.getElementById("m_notes");C&&(C.placeholder=n.passengerNotesPlaceholder||"e.g., DE only, no nuts");const E=document.getElementById("m_aperoNotes");E&&(E.placeholder=n.aperoNotesPlaceholder||"e.g. Sparkling water, white wine, peanuts");const _=document.getElementById("histSeat");_&&(_.placeholder=n.histSeatPlaceholder||"e.g., 3A"),typeof Ne=="function"&&Ne(),typeof window._rerenderDatepickerLang=="function"&&window._rerenderDatepickerLang();const N=document.getElementById("flightDate");N&&(i.config.lang==="FR"?N.placeholder="JJ/MM/AAAA":i.config.lang==="DE"?N.placeholder="TT.MM.JJJJ":N.placeholder="MM, DD, YYYY"),ct(),Ha(),lt();try{(D=document.getElementById("tc_soft_type"))==null||D.dispatchEvent(new Event("change")),(H=document.getElementById("tc_cocktail_type"))==null||H.dispatchEvent(new Event("change")),(Y=document.getElementById("tc_beer"))==null||Y.dispatchEvent(new Event("change")),(se=document.getElementById("tc_vin_rouge"))==null||se.dispatchEvent(new Event("change")),(me=document.getElementById("tc_vin_blanc"))==null||me.dispatchEvent(new Event("change")),xe==null||xe(),A();try{((le=document.getElementById("modalBack"))==null?void 0:le.style.display)==="flex"&&typeof Ke=="function"&&Ke()}catch{}}catch(S){console.warn("Post-i18n drinks refresh:",S)}try{const S=document.getElementById("modalBack");!!S&&(S.style.display==="flex"||S.style.display==="")&&document.getElementById("drinkGrid")&&(rt(),q(),U(),At(),A(),typeof u<"u"&&u&&(i.phase==="tc"?he==null||he(u.key):i.phase==="repas"&&(ye==null||ye(u.key))))}catch(S){console.warn("Drink grid rebind after i18n failed:",S)}(()=>{const S=document.getElementById("langActive");if(S){const T={EN:String.fromCodePoint(127468,127463),DE:String.fromCodePoint(127465,127466),FR:String.fromCodePoint(127467,127479)},K=(i.config.lang||"EN").toUpperCase(),O=T[K]||String.fromCodePoint(127987);S.textContent=O,S.setAttribute("aria-label",K),S.title=K}})()}function x(){const e=B("#seatgrid");e.innerHTML="";const t=i.config.rowsBiz||0,n=Pa();e.style.gridTemplateColumns="40px minmax(60px,1fr) minmax(60px,1fr) minmax(60px,1fr) 28px "+n.map(()=>"minmax(60px,1fr)").join(" "),["","F","E","D",""].concat(n).forEach(l=>{const o=document.createElement("div");o.style.textAlign="center",o.style.color="var(--muted)",o.style.fontSize="12px",o.textContent=l,e.appendChild(o)});for(let l=t;l>=1;l--){const o=document.createElement("div");o.className="row-label",o.textContent=l,e.appendChild(o),["F","E","D"].forEach(s=>e.appendChild(Tn(l,s)));const c=document.createElement("div");c.className="aisle",e.appendChild(c),n.forEach(s=>e.appendChild(Tn(l,s)))}Ne()}function Tn(e,t){var p,v,y,m,g;const n=we(e,t),a=document.createElement("div");a.className="seat bus",n.occupied&&a.classList.add("occupied"),n.sleep&&a.classList.add("sleeping");const l=k[i.config.lang||"EN"]||k.EN,o=document.createElement("div");o.className="mini";const c=document.createElement("div");c.className="dot",n.status==="FTL"?c.classList.add("ftl"):n.status==="SEN"?c.classList.add("sen"):n.status==="HON"?c.classList.add("hon"):n.status==="VIP"?c.classList.add("vip"):n.status==="FCL"?c.classList.add("fcl"):n.status==="PAD"&&c.classList.add("pad"),o.appendChild(c),a.appendChild(o);const s=document.createElement("div");if(s.className="seat-label",s.textContent=e+t,a.appendChild(s),!((p=n==null?void 0:n.served)!=null&&p.trayCleared)){const f=document.createElement("div");f.className="meal-tag";const b=n.spml||n.preLabel?null:n.normalMeal==="viande"?"1":n.normalMeal==="vege"?"2":n.normalMeal==="plateau"?"":null;let I=null,h=!1;n.spml?(I=n.spml,h=!0):n.preLabel?(I="PRE",h=!0):b?I=b:(v=n==null?void 0:n.served)!=null&&v.mealNone&&(I="Ã˜"),I&&(f.textContent=I,h&&f.classList.add("vertical"),a.appendChild(f))}const r=document.createElement("div");r.className="iconbar",n.type==="infant"&&gt(r,"flag-infant",l.lgInfant||l.mdInfant||"Infant","INF"),n.type==="child"&&gt(r,"flag-child",l.lgChild||l.mdChild||"Child","CHD"),n!=null&&n.served&&n.served.trayCleared&&gt(r,"flag-cleared",l.lgclear||l.undoClearTray||"Cleared","CLR"),n.serveLaterAt&&gt(r,"flag-later",l.lgLater||l.mdLater||"Serve later","ðŸ›Žï¸"),a.appendChild(r),ln(a,f=>{i.clientView||(f.preventDefault(),f.stopPropagation(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),wt(Tt(e,t)))}),a.addEventListener("pointerup",f=>{i.clientView||f.pointerType!=="mouse"&&wt(Tt(e,t))},{passive:!0});const d=Ka();if(d==="toServe"){const f=i.phase==="aperitif"?"aperitif":i.phase==="tc"?"tc":"meal",b=!!((y=n==null?void 0:n.served)!=null&&y[f]);a.style.opacity=!n.occupied||b?.25:1}else if(d==="sleeping")a.style.opacity=n.sleep?1:.2;else if(d==="later")a.style.opacity=n.serveLaterAt?1:.2;else if(d==="clear"){const f=!!((m=n==null?void 0:n.served)!=null&&m.meal)&&!((g=n==null?void 0:n.served)!=null&&g.trayCleared);a.style.opacity=f?1:.2}else a.style.opacity=1;return a}function ee(){var s,r;const e=B("#history");if(!e)return;e.innerHTML="";const t=k[i.config.lang||"EN"],n=dn(),a=(((s=document.getElementById("histSeat"))==null?void 0:s.value)||"").trim().toUpperCase().replace(/\s+/g,""),l=((r=document.getElementById("histType"))==null?void 0:r.value)||"",o=!!i.config.histAsc;let c=Array.isArray(i.history)?i.history.slice():[];n==="seat"&&a?c=c.filter(d=>d&&typeof d=="object"&&(d.seat||"").toUpperCase()===a):n==="type"&&l&&(c=c.filter(d=>d&&typeof d=="object"&&(d.type===l||l==="mealDrinkServed"&&d.type==="tcServed"&&d.ctx==="repas")&&!(l==="tcServed"&&d.ctx==="repas"))),o&&(c=c.slice().reverse());for(const d of c){const p=document.createElement("div");if(typeof d=="string"){p.textContent=d,e.appendChild(p);continue}const v=new Date(d.ts||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});let y="";switch(d.type){case"trayCleared":y=k[i.config.lang||"EN"].clearTray+" "+d.seat;break;case"trayUncleared":y=k[i.config.lang||"EN"].undoClearTray+" "+d.seat;break;case"apServed":{const m=d.seat,g=ae(d.ap,t,i.config.lang)||"",f=d.notes?`  ${d.notes}`:"";y=`${t.histApServed} ${m}${g?" - "+g:""}${f}`;break}case"apOrdered":{const m=d.seat,g=ae(d.ap,t,i.config.lang)||"",f=d.notes?`  ${d.notes}`:"";y=`${t.histApOrdered||"Aperitif ordered at"} ${m}${g?" - "+g:""}${f}`;break}case"tcServed":{const m=d.seat,g=ae(d.ap,t,i.config.lang)||"",f=d.notes?`  ${d.notes}`:"";y=`${d.ctx==="repas"?t.histMealDrinkServed||"Meal drinks served at":t.histTcServed||"Tea & coffee served at"} ${m}${g?" - "+g:""}${f}`;break}case"tcOrdered":{const m=d.seat,g=ae(d.ap,t,i.config.lang)||"",f=d.notes?`  ${d.notes}`:"";y=`${d.ctx==="repas"?t.histMealDrinkOrdered||"Meal drinks ordered at":t.histTcOrdered||"Tea & coffee ordered at"} ${m}${g?" - "+g:""}${f}`;break}case"apCanceled":y=`${t.histApCanceled} ${d.seat}`;break;case"mealServed":{const m=d.label==="__TRAY__"?t.trayShort||"Tray":d.label||"";y=`${t.histMealServed} ${d.seat}${m?"  "+m:""}`;break}case"serviceCanceled":y=`${t.histCanceled} ${d.seat}`;break;case"reset":y=t.resetDone;break;case"titleSet":{const m=d.flightNo||"",g=ot(d.dateISO||"")||d.dateISO||"";y=`${t.histTitleSet} ${m}${g?"  "+g:""}`;break}case"seatMoveStart":y=`${t.moveSeat} ${d.from}`;break;case"seatMoved":y=`${d.from}  ${d.to} : ${t.moved}`;break;case"seatSwapped":y=`${d.a}  ${d.b} : ${t.swapped}`;break;case"text":default:y=d.text||""}p.textContent=`[${v}] ${y}`,e.appendChild(p)}}function Ha(){const e=k[i.config.lang||"EN"]||k.EN,t=document.getElementById("secHistoryTitle");if(t){const a=(e.secHistoryTitle||"History").replace(/\s*\(.*\)\s*$/,"").trim(),l=i.config.histAsc?e.histOldest||" (oldest on top)":e.histNewest||" (newest on top)";t.textContent=a+" "+l}const n=document.getElementById("histOrderBtn");if(n){const a=!!i.config.histAsc,l=a?e.histOldestBtn:e.histNewestBtn,c=`${a?"â¬‡ï¸":"â¬†ï¸"} ${l}`;n.textContent=c,n.title=c,n.setAttribute("aria-label",c)}}function Ut(){const e=document.getElementById("histSeat");if(!e)return;const t=(e.value||"").trim().toUpperCase();e.innerHTML='<option value=""></option>';const n=Object.keys(i.seats||{}).sort();for(const a of n){const l=i.seats[a];if(l&&l.occupied){const o=document.createElement("option");o.value=a,o.textContent=a,e.appendChild(o)}}[...e.options].some(a=>a.value===t)&&(e.value=t)}function dn(){return Va||"all"}function Ja(e){Va=e,Array.from(document.querySelectorAll(".hist-mode-switch .btn")).forEach(n=>{const a=(n.dataset.mode||"all")===e;n.classList.toggle("active",a),n.setAttribute("aria-pressed",a?"true":"false")}),Il()}function Il(){const e=dn(),t=document.getElementById("histSeatWrap"),n=document.getElementById("histTypeWrap");t&&(t.style.display=e==="seat"?"inline-flex":"none"),n&&(n.style.display=e==="type"?"inline-flex":"none"),e==="seat"&&Ut(),ee()}document.querySelectorAll(".hist-mode-switch .btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.mode||"all";Ja(t)})});var On;(On=document.getElementById("histSeat"))==null||On.addEventListener("change",ee);var Pn;(Pn=document.getElementById("histType"))==null||Pn.addEventListener("change",ee);var Kn;(Kn=document.getElementById("histOrderBtn"))==null||Kn.addEventListener("click",()=>{i.config.histAsc=!i.config.histAsc,w(),ee(),Ha()});Ja("all");function X(){var v,y;const e=i.config.lang||"EN";i.inventory.hot_special=Ll();const t=e==="FR"?"Diminuer":e==="DE"?"Reduzieren":"Decrease",n=e==="FR"?"Augmenter":e==="DE"?"Erhï¿½hen":"Increase",a=(m,g)=>{const f=document.querySelector(`[data-badge="${m}"]`);f&&(f.textContent=g,f.className="badge",f.classList.add(g<=0?"zero":g<=2?"low":"ok"))},l=(m,g)=>{m.forEach(f=>{f&&(f.style.display=g?"":"none")})};a("plateaux",i.inventory.plateaux),a("hot_viande",i.inventory.hot_viande),a("hot_vege",i.inventory.hot_vege),a("hot_special",i.inventory.hot_special);const o=Bl();a("hot_pre",o),l([document.getElementById("lblInvSpecial"),((v=document.querySelector('[data-badge="hot_special"]'))==null?void 0:v.parentElement)||null,document.getElementById("spmlInv")],(i.inventory.hot_special||0)>0),l([document.getElementById("preHeader"),((y=document.querySelector('[data-badge="hot_pre"]'))==null?void 0:y.parentElement)||null,document.getElementById("preInv")],o>0);const c=document.querySelector('[data-badge="hot_pre"]');c&&(c.title=e==="FR"?"Somme des prÃ©commandes":e==="DE"?"Summe Vorbestellungen":"Pre-order sum");const s=document.querySelector('[data-badge="hot_special"]');s&&(s.title=e==="FR"?"Somme des SPML":e==="DE"?"Summe SPML":"SPML sum");const r=B("#spmlAddCode");if(!r)return;const d=(r==null?void 0:r.value)||"",p=e==="FR"?"Choisir":e==="DE"?"WÃ¤hlen":"Choose";r.innerHTML=`<option value="">${p}</option>`;for(const m of dt){const g=document.createElement("option");g.value=m,g.textContent=m,r.appendChild(g)}[...r.options].some(m=>m.value===d)&&(r.value=d),wl(t,n),Nl(t,n)}function wl(e,t){const n=B("#spmlInv");if(!n)return;n.innerHTML="";const a=Object.entries(i.inventory.spml||{}).filter(([,l])=>(l||0)>0).sort((l,o)=>l[0].localeCompare(o[0]));for(const[l,o]of a){const c=o||0,s=document.createElement("div");s.textContent=l,n.appendChild(s);const r=document.createElement("div");r.className="row";const d=document.createElement("button");d.type="button",d.className="btn inv-minus",d.setAttribute("aria-label",e),d.addEventListener("click",()=>Lt("spml",l,-1));const p=document.createElement("div");p.className="badge",p.dataset.badge="spml_"+l,p.textContent=c;const v=document.createElement("button");v.type="button",v.className="btn inv-plus",v.setAttribute("aria-label",t),v.addEventListener("click",()=>Lt("spml",l,1)),r.append(d,p,v),n.appendChild(r)}}function Nl(e,t){const n=B("#preInv");if(!n)return;n.innerHTML="";const a=Object.entries(i.inventory.pre||{}).filter(([l])=>l&&l.trim().length>0).sort((l,o)=>l[0].localeCompare(o[0]));for(const[l,o]of a){const c=o||0,s=document.createElement("div");s.textContent=l,n.appendChild(s);const r=document.createElement("div");r.className="row";const d=document.createElement("button");d.type="button",d.className="btn inv-minus",d.setAttribute("aria-label",e),d.disabled=c<=0,d.addEventListener("click",()=>Lt("pre",l,-1));const p=document.createElement("div");p.className="badge",p.dataset.badge="pre_"+l,p.textContent=c;const v=document.createElement("button");v.type="button",v.className="btn inv-plus",v.setAttribute("aria-label",t),v.addEventListener("click",()=>Lt("pre",l,1)),r.append(d,p,v),n.appendChild(r)}}function Lt(e,t,n){e==="spml"?i.inventory.spml[t]=Math.max(0,(i.inventory.spml[t]||0)+n):e==="pre"?i.inventory.pre[t]=Math.max(0,(i.inventory.pre[t]||0)+n):i.inventory[t]=Math.max(0,(i.inventory[t]||0)+n),w()}const Dl={viande:"hot_viande",vege:"hot_vege"};function Al(e,t){const n=k[i.config.lang||"EN"];(!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null,trayReserved:!1});const a=e.normalMeal||"",l=t&&t!=="plateau"?Dl[t]:null;if(t===a)return a!=="plateau"&&e.alloc.normalKey&&(Bt(e,e.alloc.normalKey),e.alloc.normalKey=null),a==="plateau"&&e.alloc.trayReserved&&(i.inventory.plateaux=(i.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),e.normalMeal="",w(),X(),!0;if(e.alloc.spmlCode&&(un(e,e.alloc.spmlCode),e.spml="",e.alloc.spmlCode=null),e.alloc.preLabel&&(fn(e,e.alloc.preLabel),e.preLabel="",e.alloc.preLabel=null),e.alloc.normalKey&&(Bt(e,e.alloc.normalKey),e.alloc.normalKey=null),a==="plateau"&&e.alloc.trayReserved&&(i.inventory.plateaux=(i.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),t==="plateau")return(i.inventory.plateaux||0)<=0?(alert(n.alertNoTrays||"No more trays."),!1):(i.inventory.plateaux--,e.alloc.trayReserved=!0,e.normalMeal="plateau",w(),X(),!0);if(l){if((i.inventory[l]||0)<=0){const o=t==="viande"?n.lblViande:t==="vege"?n.lblVege:t==="plateau"?n.trayShort||"Tray":t;return alert(n.alertStock+" "+o+"."),!1}return i.inventory[l]--,e.alloc.normalKey=l,e.normalMeal=t,w(),X(),!0}return e.normalMeal="",w(),X(),!0}function _n(e,t){const n=k[i.config.lang||"EN"];if((!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null}),t&&(t=t.trim()),e.alloc.trayReserved&&(i.inventory.plateaux=(i.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),e.normalMeal==="plateau"&&(e.normalMeal=""),e.alloc.normalKey&&(Bt(e,e.alloc.normalKey),e.normalMeal="",e.alloc.normalKey=null),e.alloc.preLabel&&(fn(e,e.alloc.preLabel),e.preLabel="",e.alloc.preLabel=null),e.alloc.spmlCode&&(un(e,e.alloc.spmlCode),e.spml="",e.alloc.spmlCode=null),t){if((i.inventory.spml[t]||0)<=0)return alert(t+" "+n.alertDepleted),!1;i.inventory.spml[t]--,e.alloc.spmlCode=t,e.spml=t,w(),X()}return!0}function Ml(e,t){const n=k[i.config.lang||"EN"];if((!e.alloc||typeof e.alloc!="object")&&(e.alloc={normalKey:null,spmlCode:null,preLabel:null}),t&&(t=t.trim()),e.alloc.trayReserved&&(i.inventory.plateaux=(i.inventory.plateaux||0)+1,e.alloc.trayReserved=!1),e.normalMeal==="plateau"&&(e.normalMeal=""),e.alloc.normalKey&&(Bt(e,e.alloc.normalKey),e.normalMeal="",e.alloc.normalKey=null),e.alloc.spmlCode&&(un(e,e.alloc.spmlCode),e.spml="",e.alloc.spmlCode=null),e.alloc.preLabel&&(fn(e,e.alloc.preLabel),e.preLabel="",e.alloc.preLabel=null),t){if((i.inventory.pre[t]||0)<=0)return alert(t+" "+n.alertDepleted),!1;i.inventory.pre[t]--,e.alloc.preLabel=t,e.preLabel=t,w(),X()}return!0}function Bt(e,t){i.inventory[t]=(i.inventory[t]||0)+1,w()}function un(e,t){i.inventory.spml[t]=(i.inventory.spml[t]||0)+1,w()}function fn(e,t){i.inventory.pre[t]=(i.inventory.pre[t]||0)+1,w()}function Se(){if(!u)return;const e=u.data,t=!!(e.served&&e.served.mealNone),n=!!(e.served&&e.served.meal),a=document.getElementById("m_normalMealValue"),l=((a==null?void 0:a.value)||e.normalMeal||"").trim();a&&(a.value=l);const o=document.getElementById("m_spmlValue");o&&(o.value=e.spml||"");const c=B("#m_pre");c&&(c.value=e.preLabel||"");const s=!!e.spml||!!e.preLabel||["viande","vege","plateau"].includes(l),r=B("#serveMeal");r&&(r.disabled=!(n||s),r.title=r.disabled?"Choisissez un plat (normal, SPML ou prcommande) pour servir":"");const d=k[i.config.lang||"EN"];r&&(r.disabled=!(n||s),r.title=r.disabled?"Choisissez un plat (normal, SPML ou prcommande) pour servir":"",r.textContent=n&&!t?d.cancelService||"Cancel service":d.serveMeal||"Serve main",r.classList.toggle("is-hot",n||s),r.setAttribute("aria-pressed",n&&!t?"true":"false"));const p=B("#serveMealNone");p&&(p.disabled=s,p.setAttribute("aria-disabled",s?"true":"false"),p.classList.toggle("disabled",s),p.style.pointerEvents=s?"none":"",p.classList.toggle("is-hot",t),p.setAttribute("aria-pressed",t?"true":"false"),p.setAttribute("data-variant","ghost"),p.title=p.disabled?"":p.title);const v=B("#clearTrayBtn");if(v){const y=!!(e.served&&e.served.trayCleared);v.classList.toggle("is-hot",y),v.setAttribute("aria-pressed",y?"true":"false"),v.setAttribute("data-variant","ghost")}en(document.getElementById("drinkGrid"))}let u=null,Je=[],ge=null;const Ft=48;var Va="all";function $a(e){const t=/^(\d+)([A-Z]+)$/i.exec(e||"");return t?{row:parseInt(t[1],10),col:t[2].toUpperCase()}:null}function xl(e){const t=$a(e);t&&ue(t.row,t.col)}function Zt(e){if(!u)return;const t=Je.indexOf(u.key);if(t===-1)return;const n=Je[t+e];n&&xl(n)}function ze(){const e=i.seats||{},t=["A","B","C","D","E","F"],n=[];for(const v of Object.keys(e)){const y=$a(v);!y||!(e[v]||{}).occupied||n.push({key:v,parts:y})}n.sort((v,y)=>{if(v.parts.row===y.parts.row){const m=t.indexOf(v.parts.col),g=t.indexOf(y.parts.col);return m!==-1&&g!==-1?m-g:m!==-1?-1:g!==-1?1:v.parts.col.localeCompare(y.parts.col)}return v.parts.row-y.parts.row}),Je=n.map(v=>v.key);const a=(u==null?void 0:u.key)||"",l=document.getElementById("seatNav"),o=document.getElementById("seatNavPrev"),c=document.getElementById("seatNavNext"),s=document.getElementById("seatNavCurrent");s&&(s.textContent=a||"--");const r=Je.indexOf(a),d=r>0,p=r!==-1&&r<Je.length-1;l&&l.setAttribute("data-empty",Je.length?"false":"true"),o&&(o.disabled=!d,o.setAttribute("aria-disabled",(!d).toString()),o.onclick=()=>Zt(-1)),c&&(c.disabled=!p,c.setAttribute("aria-disabled",(!p).toString()),c.onclick=()=>Zt(1))}function Ol(e,t){return e==="viande"?t.optNormalMeat||"Option 1":e==="vege"?t.optNormalVeg||"Option 2":e==="plateau"?t.optNormalTray||"Tray (no casserole)":e||""}function qe(e){const t=document.getElementById("m_normalMeal"),n=document.getElementById("m_normalMealValue");if(!t)return;const a=k[i.config.lang||"EN"],l=((e==null?void 0:e.normalMeal)||"").trim();n&&(n.value=l),t.innerHTML="";const o=[{value:"viande",inventoryKey:"hot_viande"},{value:"vege",inventoryKey:"hot_vege"},{value:"plateau",inventoryKey:"plateaux"}];for(const c of o){const s=document.createElement("button");s.type="button",s.className="meal-card",s.setAttribute("role","radio"),s.dataset.value=c.value;const r=document.createElement("div");r.className="meal-card__row";const d=document.createElement("div");d.className="meal-card__name",d.textContent=Ol(c.value,a);const p=c.value!=="plateau";let v=0;if(c.inventoryKey&&(v=Math.max(0,i.inventory[c.inventoryKey]||0)),r.appendChild(d),p){const g=document.createElement("div");g.className="meal-card__meta";const f=document.createElement("span");f.className="badge",f.textContent=String(v),g.appendChild(f),r.appendChild(g)}s.appendChild(r);const y=l===c.value;y?(s.classList.add("is-selected"),s.setAttribute("aria-pressed","true")):s.setAttribute("aria-pressed","false"),!(v>0)&&!y&&s.setAttribute("aria-disabled","true"),ln(s,()=>{if(!u)return;const g=u.data,f=g.normalMeal===c.value?"":c.value;Al(g,f)&&(w(),x(),P(),qe(g),Ue(g),Se(),ze())}),t.appendChild(s)}}function Ue(e){const t=document.getElementById("spmlRow"),n=document.getElementById("m_spml"),a=document.getElementById("m_spmlValue");if(!t||!n)return;const l=(e==null?void 0:e.spml)||"";a&&(a.value=l),n.innerHTML="";const o=dt.map(s=>{const r=i.inventory.spml[s]||0;return{code:s,qty:r,isChosen:l===s}}).filter(s=>s.qty>0||s.isChosen);if(!o.length){t.style.display="none";return}if(o.length>3){const s=document.createElement("select");s.id="m_spml_select";const r=document.createElement("option");r.value="",r.textContent="",s.appendChild(r),o.forEach(({code:d,qty:p,isChosen:v})=>{const y=document.createElement("option");y.value=d,y.textContent=`${d} (${Math.max(0,p)})`,p<=0&&!v&&(y.disabled=!0),s.appendChild(y)}),s.value=l||"",s.addEventListener("change",()=>{if(!u)return;const d=u.data,p=s.value||"";if(!_n(d,p)){s.value=l||"";return}w(),x(),P(),qe(d),Ue(d),Se(),ze()}),n.appendChild(s)}else o.forEach(({code:s,qty:r,isChosen:d})=>{const p=document.createElement("button");p.type="button",p.className="meal-card",p.dataset.value=s,p.setAttribute("role","radio");const v=document.createElement("div");v.className="meal-card__row";const y=document.createElement("div");y.className="meal-card__name",y.textContent=s;const m=document.createElement("div");m.className="meal-card__meta";const g=document.createElement("span");g.className="badge",g.textContent=String(Math.max(0,r)),m.appendChild(g),v.appendChild(y),v.appendChild(m),p.appendChild(v),d?(p.classList.add("is-selected"),p.setAttribute("aria-pressed","true")):p.setAttribute("aria-pressed","false"),r<=0&&!d&&p.setAttribute("aria-disabled","true"),ln(p,()=>{if(!u)return;const f=u.data,b=f.spml===s?"":s;_n(f,b)&&(w(),x(),P(),qe(f),Ue(f),Se(),ze())}),n.appendChild(p)});t.style.display=""}function Pl(e){if(!u||!e.touches||e.touches.length!==1)return;const t=e.touches[0],n=e.target,a=!!(n!=null&&n.closest(".meal-header"));ge={startX:t.clientX,startY:t.clientY,time:Date.now(),mode:a?"nav":"actions"}}function Kl(e){if(!ge||!u)return;if(!e.changedTouches||e.changedTouches.length!==1){ge=null;return}const t=e.changedTouches[0],n=t.clientX-ge.startX,a=t.clientY-ge.startY,l=Math.abs(n),o=Math.abs(a);if(ge.mode==="nav"&&l>o&&l>Ft){Zt(n>0?-1:1),ge=null;return}if(ge.mode==="actions"){if(l>o&&l>Ft){const c=n>0?document.getElementById("serveMeal"):document.getElementById("serveMealNone");c&&!c.disabled&&c.click()}else if(a>Ft){const c=document.getElementById("clearTrayBtn");c&&!c.disabled&&c.click()}}ge=null}function Fl(){const e=u&&u.data?u.data:{};qe(e),Ue(e);const t=B("#m_pre");t.innerHTML='<option value=""></option>';for(const[n,a]of Object.entries(i.inventory.pre)){const l=(a||0)>0,o=e.preLabel===n;if(l||o){const c=document.createElement("option");c.value=n,c.textContent=`${n} (${Math.max(0,a)})`,t.appendChild(c)}}t.value=e.preLabel||""}function ue(e,t){var me,le,S,T,K,O,M,G,De,Qe,Ae;const n=Tt(e,t);u={row:e,col:t,key:n,data:we(e,t)};const a=document.getElementById("movePaxBtn");a&&(a.onclick=()=>{Jl(u.key),Ct==null||Ct()}),a&&(a.disabled=!u.data.occupied,a.setAttribute("aria-disabled",(!u.data.occupied).toString())),Xt(),B("#modalTitle").textContent=k[i.config.lang||"EN"].seat,Fl(),ze(),B("#m_status").value=u.data.status,sn(),B("#m_lang").value=u.data.lang||"",rn(),B("#m_notes").value=u.data.notes||"";const l=document.getElementById("m_eatWith");if(l){l.innerHTML='<option value=""></option>';const F=u&&u.key||"",re=Object.keys(i.seats||{}).sort();for(const de of re){if(de===F)continue;const J=i.seats[de];if(J&&J.occupied){const V=document.createElement("option");V.value=de,V.textContent=de,l.appendChild(V)}}l.value=u.data.eatWith||"";const pe=k[i.config.lang||"EN"]||k.EN;l.title=pe.mdEatWithPh||"e.g. 12B"}const o=k[i.config.lang||"EN"],c=document.getElementById("mdNotes");c&&(c.textContent=o.mdNotes||"Notes");const s=document.getElementById("m_notes");s&&!s.placeholder&&(s.placeholder="ex: DE only, no nuts"),B("#m_aperoNotes").value=u.data.aperoNotes||"",B("#m_later").value="";const r=document.getElementById("laterCustomContainer");r&&r.classList.remove("active");const d=document.getElementById("m_later_time");d&&(d.value="",d.disabled=!0);const p=document.getElementById("clearTrayBtn");if(p){p.disabled=!((le=(me=u.data)==null?void 0:me.served)!=null&&le.meal);const F=k[i.config.lang||"EN"];p.textContent=(T=(S=u.data)==null?void 0:S.served)!=null&&T.trayCleared?F.undoClearTray:F.clearTray}const v=B("#m_occ_chk");v&&(v.checked=!!u.data.occupied),ja(),Se();const y=u.data.type||"normal",m=document.getElementById("m_type_adult"),g=document.getElementById("m_type_child"),f=document.getElementById("m_type_infant");m&&g&&f&&(m.checked=y==="normal",g.checked=y==="child",f.checked=y==="infant");const b=B("#m_sleep_chk");b&&(b.checked=!!u.data.sleep),Xt();let I=u.data.served.aperitif?o.apLabel+": "+new Date(u.data.served.aperitif).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):o.apLabel+": ",h=u.data.served.meal?o.mealLabel+": "+new Date(u.data.served.meal).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):o.mealLabel+": ",C=u.data.served.tc?(o.chips_tc||"Tea & Coffee")+": "+new Date(u.data.served.tc).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):(o.chips_tc||"Tea & Coffee")+": ";if(u.data.served.aperitif){const F=ae(u.data.apDrink,o,i.config.lang||"EN");F&&(I+="  "+F+(o.ordered?" "+o.ordered:""))}if(u.data.served.tc){const F=ae(u.data.apDrink,o,i.config.lang||"EN");F&&(C+="  "+F+(o.ordered?" "+o.ordered:""))}const E=B("#m_history"),_=B("#m_history_apero"),N=B("#m_history_tc");i.phase==="aperitif"?(E&&(E.textContent=""),N&&(N.textContent=""),_&&(_.textContent=I)):i.phase==="tc"?(E&&(E.textContent=""),_&&(_.textContent=""),he(u.key)):(_&&(_.textContent=""),N&&(N.textContent=""),E&&(E.textContent=h),ye(u.key));const D=i.phase;if((K=document.getElementById("mealBlock"))!=null&&K.style&&(document.getElementById("mealBlock").style.display=D==="repas"?"block":"none"),(O=document.getElementById("aperoBlock"))!=null&&O.style&&(document.getElementById("aperoBlock").style.display=D==="aperitif"?"block":"none"),(M=document.getElementById("tcServeBlock"))!=null&&M.style&&(document.getElementById("tcServeBlock").style.display=D==="tc"?"block":"none"),(G=document.getElementById("mealDrinkServeRow"))!=null&&G.style&&(document.getElementById("mealDrinkServeRow").style.display=D==="repas"?"flex":"none"),(De=document.getElementById("aperoNotesBlock"))!=null&&De.style&&(document.getElementById("aperoNotesBlock").style.display=D==="aperitif"?"block":"none"),(Qe=document.getElementById("tcNotesBlock"))!=null&&Qe.style&&(document.getElementById("tcNotesBlock").style.display=D==="tc"?"block":"none"),(Ae=document.getElementById("tcBlock"))!=null&&Ae.style&&(document.getElementById("tcBlock").style.display=D==="aperitif"||D==="tc"?"block":"none"),i.phase==="tc"&&u)he(u.key);else{const F=document.getElementById("mhTCInline");F&&(F.textContent="")}if(i.phase==="repas"&&u)ye(u.key);else{const F=document.getElementById("mhMealDrinkInline");if(F){const re=k[i.config.lang||"EN"]||k.EN;F.textContent=(re.mealDrinkTitle||"Meal drinks")+": "}}function H(F,re){var gn;it();const pe=document.querySelector(".modal"),de=document.querySelector(".two > div:first-child"),J=document.getElementById("rightCol"),V=document.getElementById("mealBlock"),be=V==null?void 0:V.querySelector(".modal-card__content"),j=document.getElementById("tcBlock"),Te=document.getElementById("aperoBlock"),_e=document.getElementById("tcServeBlock");let R=document.getElementById("rightNotes");if(Cl(),Sl(F),R||(R=document.createElement("div"),R.id="rightNotes",J==null||J.insertAdjacentElement("afterbegin",R)),j){const W=document.getElementById("aperoNotesBlock"),z=document.getElementById("tcNotesBlock");W&&W.parentElement!==j&&j.appendChild(W),z&&z.parentElement!==j&&j.appendChild(z)}Te&&Te.parentElement!==j&&(j==null||j.appendChild(Te)),_e&&_e.parentElement!==j&&(j==null||j.appendChild(_e));const et=document.getElementById("mealDrinkNotesBlock"),tt=document.getElementById("mealDrinkServeRow");be&&(et&&et.parentElement!==be&&be.appendChild(et),tt&&tt.parentElement!==be&&be.appendChild(tt)),et&&(et.style.display="none"),tt&&(tt.style.display="none"),Te&&(Te.style.display="none"),_e&&(_e.style.display="none"),V&&V.parentElement!==J&&(J==null||J.appendChild(V)),j&&j.parentElement!==J&&(J==null||J.appendChild(j)),R&&(R.innerHTML="",R.style.display="none");const ft=W=>{const z=document.querySelector(".two > div:first-child");z&&Array.from(z.children).forEach(ie=>{ie.style.display=ie.id===W||W==="__ALL__"?"":"none"})},mt=(gn=document.getElementById("m_later"))==null?void 0:gn.closest(".row");if(J&&(J.style.display=""),mt&&(mt.style.display=""),F==="fiche"){pe&&pe.classList.add("mono"),J&&(J.style.display="none"),mt&&(mt.style.display="none"),ft("__ALL__"),We();return}if(F==="aperitif"){if(pe&&pe.classList.remove("mono"),j&&de&&de.appendChild(j),V&&(V.style.display="none"),j){const W=document.getElementById("aperoNotesBlock"),z=document.getElementById("tcNotesBlock");if(z&&(z.style.display="none"),W){W.style.display="block",R==null||R.appendChild(W),R&&(R.style.display="block");const je=document.getElementById("mdAperoNotes");je&&(je.textContent=re.mdAperoNotes||"Drink / aperitif notes")}Te&&(Te.style.display="flex",R==null||R.appendChild(Te),R&&(R.style.display="block"));const ie=document.getElementById("tcTitle");ie&&(ie.textContent=re.tcTitle||"Aperitif")}ft("tcBlock"),We(),U(),A();return}if(F==="tc"){if(pe&&pe.classList.remove("mono"),j&&de&&de.appendChild(j),V&&(V.style.display="none"),j){const W=document.getElementById("aperoNotesBlock"),z=document.getElementById("tcNotesBlock");W&&(W.style.display="none"),z&&(z.style.display="block",R==null||R.appendChild(z),R&&(R.style.display="block")),_e&&(_e.style.display="flex",R==null||R.appendChild(_e),R&&(R.style.display="block"));const ie=document.getElementById("tcTitle");ie&&(ie.textContent=re.chips_tc||"Tea & Coffee")}ft("tcBlock"),We(),U(),A();return}if(F==="repas"){if(pe&&pe.classList.remove("mono"),j&&de){de.appendChild(j),j.style.display="block";const W=document.getElementById("aperoNotesBlock"),z=document.getElementById("tcNotesBlock");W&&(W.style.display="none"),z&&(z.style.display="none");const ie=document.getElementById("mealDrinkNotesBlock");if(ie){ie.style.display="block",be&&be.appendChild(ie);const hn=document.getElementById("mdMealDrinkNotes");hn&&(hn.textContent=re.mealDrinkNotes||"Meal drink notes")}const je=document.getElementById("mealDrinkServeRow");je&&(je.style.display="flex",be&&be.appendChild(je));const yn=document.getElementById("tcTitle");yn&&(yn.textContent=re.mealDrinkTitle||"Meal drinks")}V&&J&&(V.style.display="block",J.appendChild(V)),document.getElementById("drinkGrid")&&(ne(),q(),document.querySelectorAll("#drinkGrid .pill").forEach(W=>{W.disabled=!1,W.style.pointerEvents="auto"})),U(),A(),q(),We(),ft("tcBlock");return}j&&(j.style.display="block"),ne(),q(),document.querySelectorAll("#drinkGrid .pill").forEach(W=>{W.disabled=!1,W.style.pointerEvents="auto"}),V&&(V.style.display="block")}const Y=document.getElementById("tcTitle");Y&&(Y.textContent=D==="tc"?o.chips_tc||"Tea & Coffee":o.tcTitle||"Aperitif");const se=document.getElementById("mealDrinkNotesBlock");if(se&&(se.style.display="none"),H(D,o),i.phase==="tc"&&u?he(u.key):i.phase==="repas"&&u&&ye(u.key),xa(),B("#m_aperoNotes").value="",B("#m_tcNotes").value="",i.phase==="tc"&&u)he(u.key);else{const F=document.getElementById("mhTCInline");F&&(F.textContent="")}if(i.phase==="repas"&&u)ye(u.key);else{const F=document.getElementById("mhMealDrinkInline");if(F){const re=k[i.config.lang||"EN"]||k.EN;F.textContent=(re.mealDrinkTitle||"Meal drinks")+": "}}Se(),A(),B("#modalBack").style.display="flex"}function Pe(e){["tc_cafe","tc_deca","tc_the","tc_digestif","tc_cocktail","tc_biere","tc_champagne","tc_vin","tc_soft","tc_chocolat"].forEach(o=>{const c=document.getElementById(o);c&&(c.style.display="none")});const n=document.getElementById("tc_milk_sweet");n&&(n.style.display=["cafe","deca","the"].includes(e)?"block":"none");const l={cafe:"tc_cafe",deca:"tc_deca",the:"tc_the",digestif:"tc_digestif",cocktail:"tc_cocktail",biere:"tc_biere",champagne:"tc_champagne",vin:"tc_vin",soft:"tc_soft",chocolat:"tc_chocolat"}[e];if(l){const o=document.getElementById(l);o&&(o.style.display="block")}}function xe(){var c,s;const e=((c=document.getElementById("tc_soft_type"))==null?void 0:c.value)||"",t={eau:"tc_soft_eau_row",jus:"tc_soft_jus_row",coca:"tc_soft_coca_row",sprite:"tc_soft_sprite_row",tonic:"tc_soft_tonic_row"};["tc_soft_eau_row","tc_soft_jus_row","tc_soft_coca_row","tc_soft_sprite_row","tc_soft_tonic_row"].forEach(r=>{const d=document.getElementById(r);d&&(d.style.display="none")});const n=t[e];if(n){const r=document.getElementById(n);r&&(r.style.display="flex")}const a=((s=document.getElementById("tc_soft_jus"))==null?void 0:s.value)||"",l=document.getElementById("tc_soft_salt_row"),o=document.getElementById("tc_soft_pepper_row");l&&(l.style.display=e==="jus"&&a==="tomate"?"inline-flex":"none"),o&&(o.style.display=e==="jus"&&a==="tomate"?"inline-flex":"none")}function jl(){var n,a,l,o,c;const e=((n=document.getElementById("tc_group"))==null?void 0:n.value)||"";(a=document.getElementById("tc_alcool"))!=null&&a.style&&(document.getElementById("tc_alcool").style.display="none"),(l=document.getElementById("tc_chaud"))!=null&&l.style&&(document.getElementById("tc_chaud").style.display="none"),Pe("");const t=document.getElementById("tc_cat");t&&(t.value=""),e==="soft"?(Pe("soft"),document.getElementById("tc_soft_type")&&(document.getElementById("tc_soft_type").value=""),t&&(t.value="soft"),xe()):e==="alcool"?(o=document.getElementById("tc_alcool"))!=null&&o.style&&(document.getElementById("tc_alcool").style.display="block"):e==="chaud"&&(c=document.getElementById("tc_chaud"))!=null&&c.style&&(document.getElementById("tc_chaud").style.display="block"),A()}function Rl(){var n;const e=((n=document.getElementById("tc_alcool_type"))==null?void 0:n.value)||"",t=document.getElementById("tc_cat");Pe(""),e?(t&&(t.value=e),Pe(e)):t&&(t.value=""),A()}function Wl(){var n;const e=((n=document.getElementById("tc_chaud_type"))==null?void 0:n.value)||"",t=document.getElementById("tc_cat");if(Pe(""),e){t&&(t.value=e),Pe(e);const a=document.getElementById("tc_milk_sweet");a&&(a.style.display=e==="cafe"||e==="deca"||e==="the"?"block":"none")}else t&&(t.value="");A()}function It(e){e.apDrink||(e.apDrink={});const t=e.apDrink;L.cat==="soft"?t.cat="soft":L.cat==="chaud"||L.cat==="alcool"?t.cat=L.sub:t.cat="",t.softType=L.cat==="soft"&&L.sub||"",t.waterType=L.waterType||"",t.cocaType=L.cocaType||"",t.juiceType=L.juiceType||"",t.softIce=!!L.softIce,t.softLemon=!!L.softLemon,t.spriteIce=!!L.spriteIce,t.spriteLemon=!!L.spriteLemon,t.tonicIce=!!L.tonicIce,t.tonicLemon=!!L.tonicLemon,t.juiceIce=!!L.juiceIce,t.juiceLemon=!!L.juiceLemon,t.juiceSalt=!!L.juiceSalt,t.juicePepper=!!L.juicePepper,t.juiceApfelschorle=!!L.juiceApfelschorle,t.cat==="cafe"||t.cat==="deca"||t.cat==="the"||t.cat==="chocolat"?(t.milk=L.milk||"",t.sweet=L.sweet||"",t.theType=t.cat==="the"&&L.theType||"",t.theLemon=!!L.theLemon,t.choco=t.cat==="chocolat"):(t.milk="",t.sweet="",t.theType="",t.theLemon=!1,t.choco=!1),t.champIce=t.cat==="champagne"?!!L.champIce:!1,t.champMimosa=t.cat==="champagne"?!!L.champMimosa:!1,t.beer=t.cat==="biere"&&L.beer||"",t.vinRouge=t.cat==="vin_rouge"&&L.vinRouge||"",t.vinBlanc=t.cat==="vin_blanc"&&L.vinBlanc||"",t.vinIce=t.cat==="vin_rouge"||t.cat==="vin_blanc"?!!L.vinIce:!1,t.digestif=t.cat==="digestif"&&L.digestif||"",t.digIce=t.cat==="digestif"?!!L.digIce:!1,t.cocktail=t.cat==="cocktail"&&L.cocktail||"",t.campariMix=t.cat==="cocktail"&&L.cocktail==="campari"&&L.campariMix||"",t.cocktailSP=t.cat==="cocktail"&&L.cocktail==="bloody_mary"?!!L.cocktailSP:!1,t.virginMary=t.cat==="cocktail"&&L.cocktail==="bloody_mary"?!!L.virginMary:!1,t.cocktailIce=t.cat==="cocktail"?!!L.cocktailIce:!1,t.cocktailLemon=t.cat==="cocktail"?!!L.cocktailLemon:!1,t.cocktailSalt=t.cat==="cocktail"?!!L.cocktailSalt:!1,t.cocktailPepper=t.cat==="cocktail"?!!L.cocktailPepper:!1}function Ct(){xa();const e=document.getElementById("m_aperoNotes");e&&(e.value="");const t=document.getElementById("m_tcNotes");t&&(t.value="");const n=document.getElementById("m_mealDrinkNotes");n&&(n.value=""),B("#modalBack").style.display="none",u=null}function Ze(){var l;if(!u)return;const e=u.data;e.occupied=!!((l=document.getElementById("m_occ_chk"))!=null&&l.checked);const t=document.querySelector('input[name="m_type"]:checked');t&&(e.type=t.value);const n=document.getElementById("m_sleep_chk");n&&(e.sleep=!!n.checked),e.status=B("#m_status").value,e.lang=B("#m_lang").value,e.notes=B("#m_notes").value.trim(),e.aperoNotes="",e.tcNotes="";const a=document.getElementById("m_eatWith");if(a){const o=(e.eatWith||"").trim().toUpperCase(),c=(a.value||"").trim().toUpperCase();u.data.eatWith=c;const s=(r,d)=>{if(!r)return;const p=i.seats[r];if(!p)return;Ce(p);const v=(d||"").toUpperCase();v&&(p.eatWith||"").toUpperCase()===v&&(p.eatWith="")};if(o&&o!==c&&s(o,u.key),c&&i.seats[c]){const r=i.seats[c];Ce(r),r.eatWith&&r.eatWith!==u.key&&s(r.eatWith,c),r.eatWith=u.key}else!c&&o&&s(o,u.key)}w(),x();try{dn()==="seat"&&typeof Ut=="function"&&Ut()}catch{}P(),We(),qe(u.data),Ue(u.data),Se(),ze()}B("#m_pre").addEventListener("change",()=>{if(!u)return;const e=B("#m_pre").value;Ml(u.data,e),w(),x(),P(),Se(),qe(u.data),Ue(u.data),ze()});let Ie=null;function Xe(e){const t=/^(\d+)([A-Z])$/i.exec((e||"").trim());return t?[parseInt(t[1],10),t[2].toUpperCase()]:[null,null]}function Hl(){if(!u)return;u.data.sleep=!u.data.sleep;const e=document.getElementById("m_sleep_chk");e&&(e.checked=u.data.sleep),w(),x(),P(),Xt()}function Xt(){const e=document.getElementById("m_sleep_chk"),t=e?e.checked:!!(u&&u.data&&u.data.sleep),a=(k[i.config.lang||"EN"]||k.EN).mdSleepTxt||"Sleep";El.forEach(o=>{const c=document.getElementById(o);c&&(c.textContent=Et.sleep,c.title=a,c.setAttribute("aria-label",a))});const l=document.getElementById("sleepModalBtn");l&&l.classList.toggle("active",!!t)}function mn(e){const t=document.getElementById("seatgrid");t&&t.classList.toggle("moving",!!e);const n=k[i.config.lang||"EN"],a=document.getElementById("seatmapTitle");a&&(e?a.textContent=(n.pickDestSeat||"Select destination seat")+(Ie?"  "+Ie:""):typeof Ne=="function"&&Ne())}function Jl(e){Ie=e,mn(!0),k[i.config.lang||"EN"],typeof $=="function"&&$({type:"seatMoveStart",from:e})}document.addEventListener("keydown",e=>{e.key==="Escape"&&Ie&&(Ie=null,mn(!1),typeof Ne=="function"&&Ne())});function Ln(e){return!e||!e.occupied}function Vl(e,t){if(!e||!t||e===t)return;const n=Ce(i.seats[e]||{}),a=Ce(i.seats[t]||{});k[i.config.lang||"EN"];const l=(o,c)=>{Object.keys(i.seats||{}).forEach(s=>{const r=i.seats[s];r&&(Ce(r),r.eatWith===o&&(r.eatWith=c))})};if(Ln(a))i.seats[t]=JSON.parse(JSON.stringify(n)),i.seats[e]=Ce({}),typeof $=="function"&&$({type:"seatMoved",from:e,to:t});else{const o=JSON.parse(JSON.stringify(a));i.seats[t]=JSON.parse(JSON.stringify(n)),i.seats[e]=o,typeof $=="function"&&$({type:"seatSwapped",a:e,b:t})}if(Ln(a))l(e,t);else{const o="__SWAP_TMP__";l(e,o),l(t,e),l(o,t)}typeof w=="function"&&w(),typeof x=="function"&&x(),typeof P=="function"&&P()}function wt(e){if(e=(e||"").toUpperCase(),Ie){const a=Ie;if(Ie=null,mn(!1),e&&e!==a){Vl(a,e);return}const[l,o]=Xe(a);l&&o&&(ue(l,o),document.getElementById("modalBack").style.display="flex");return}const[t,n]=Xe(e);t&&n&&(ue(t,n),document.getElementById("modalBack").style.display="flex")}function ae(e,t,n){if(e&&(e.beer==="calvinus_blanche"&&(e.beer="calvinus"),e.beer&&e.beer.startsWith("leermond")&&(e.beer="leermond"),e.vin==="rouge"&&!e.vinRouge&&(e.vinRouge=e.vinOrigine||"suisse"),e.vin==="blanc"&&!e.vinBlanc&&(e.vinBlanc=e.vinOrigine||"suisse")),!e||!e.cat)return"";const a=[],l=r=>{r&&a.push(t.tcIce||"Ice")},o=r=>{r&&a.push(t.tcLemon||"Lemon")},c=r=>r==="creme"?t.tcMilkCreme:r==="avoine"?t.tcMilkAvoine:r==="lait"?t.tcMilkLait:r==="none"?t.tcMilkNone:"",s=r=>r==="sucre"?t.tcSweetSugar:r==="succedane"?t.tcSweetSub:r==="none"?t.tcSweetNone:"";switch(e.cat){case"cafe":if(a.push(t.tcCatCafe),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}break;case"deca":if(a.push(t.tcCatDeca),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}break;case"the":if(e.theType==="hotwater"){a.push(t.tcHotWater||"Eau chaude"),e.theLemon&&a.push(t.tcLemon||"Citron");break}if(a.push(t.tcCatThe),e.theType==="english"?a.push(t.tcTeaEnglish):e.theType==="vert"?a.push(t.tcTeaVert):e.theType==="menthe"?a.push(t.tcTeaMenthe):e.theType==="camomille"&&a.push(t.tcTeaCamomille||t.tcInfCam),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}e.theLemon&&a.push(t.tcLemon||"Lemon");break;case"infusion":if(a.push(t.tcCatInf),a.push(t.tcInfCam),e.milk){const r=c(e.milk);r&&a.push(r)}if(e.sweet){const r=s(e.sweet);r&&a.push(r)}break;case"chocolat":a.push(t.tcChocoBrand||"Caotina");break;case"digestif":a.push(t.tcCatDig),e.digestif==="whisky_jw"?a.push(t.tcDigJW):e.digestif==="whisky_jb"?a.push(t.tcDigJB):e.digestif==="cognac"?a.push(t.tcDigCognac):e.digestif==="baileys"&&a.push(t.tcDigBaileys),e.whiskyStyle==="pur"?a.push(t.tcPur):e.whiskyStyle==="rocks"?a.push(t.tcRocks):l(!!e.digIce);break;case"biere":{a.push(t.tcCatBeer||"Beer");const r={quoellfrisch:t.tcBeerQ||"Qullfrisch Lager",calvinus:t.tcBeerC||"Calvinus Blanche",leermond:t.tcBeerL||"Leermond (alcohol-free)"};e.beer&&r[e.beer]?a.push(r[e.beer]):e.beer&&a.push(e.beer);break}case"champagne":a.push(t.tcCatChamp),l(!!e.champIce),e.champMimosa&&a.push(" Mimosa");break;case"vin_rouge":{a.push(t.tcCatVin||"Wines");let r=t.tcRed||"Red";const d=e.vinRouge==="suisse"?t.tcCH||"Swiss":e.vinRouge==="etranger"?t.tcForeign||"Foreign":"";d&&(r+="  "+d),e.vinNotes&&(r+=` (${e.vinNotes})`),a.push(r),e.vinIce&&a.push(t.tcIce||"Ice");break}case"vin_blanc":{a.push(t.tcCatVin||"Wines");let r=t.tcWhite||"White";const d=e.vinBlanc==="suisse"?t.tcCH||"Swiss":e.vinBlanc==="etranger"?t.tcForeign||"Foreign":"";d&&(r+="  "+d),e.vinNotes&&(r+=` (${e.vinNotes})`),e.vinIce&&a.push(t.tcIce||"Ice"),a.push(r);break}case"cocktail":{a.push(t.tcCocktail||"Cocktail");const r=e.cocktail||"";r==="gin_tonic"?a.push(t.tcGinTonic||"Gin Tonic"):r==="cuba_libre"?a.push(t.tcCubaLibre||"Cuba Libre"):r==="screwdriver"?a.push(t.tcScrewDriver||"Screw Driver"):r==="bloody_mary"?(a.push(t.tcBloodyMary||"Bloody Mary"),e.virginMary&&a.push(t.tcVirginMary||"Virgin Mary"),e.cocktailSP&&a.push([t.tcSalt||"Salt",t.tcPepper||"Pepper"].join(" + "))):r==="campari"&&(a.push("Campari"),e.campariMix==="orange"?a.push(t.tcJuiceOrange||"Orange"):e.campariMix==="soda"&&a.push(t.tcSoda||"Soda")),e.cocktailIce&&a.push(t.tcIce||"Ice"),e.cocktailLemon&&a.push(t.tcLemon||"Lemon");break}case"soft":e.softType==="eau"?(a.push(t.tcLblWater),e.waterType==="plate"?a.push(t.tcWaterStill):e.waterType==="gazeuse"&&a.push(t.tcWaterSpark),l(!!e.softIce),o(!!e.softLemon)):e.softType==="jus"?(a.push(t.tcLblJuice),e.juiceType==="pomme"?e.juiceApfelschorle?a.push("Apfelschorle"):a.push(t.tcJuiceApple||"Apple"):e.juiceType==="orange"?a.push(t.tcJuiceOrange):e.juiceType==="tomate"&&a.push(t.tcJuiceTomato),l(!!e.juiceIce),o(!!e.juiceLemon),e.juiceType==="tomate"&&(e.juiceSalt||e.juicePepper)&&a.push([t.tcSalt||"Salt",t.tcPepper||"Pepper"].join(" + "))):e.softType==="coca"?(a.push("Coca-Cola",e.cocaType==="zero"?"Zero":e.cocaType==="normal"?"Classic":""),l(!!e.softIce),o(!!e.softLemon)):e.softType==="sprite"?(a.push("Sprite"),l(!!e.spriteIce),o(!!e.spriteLemon)):e.softType==="tonic"&&(e.tonicIce&&a.push(t.tcIce),e.tonicLemon&&a.push(t.tcLemon||"Citron"),a.unshift("Tonic"));break}return a.join(", ")}var Fn;(Fn=document.getElementById("serveAperitif"))==null||Fn.addEventListener("click",()=>{if(!u)return;const e=k[i.config.lang||"EN"],t=u.data;if(!t.occupied){alert(e.alertSeatEmpty);return}It(t),t.served.aperitif||(t.served.aperitif=Date.now());const n=JSON.parse(JSON.stringify(t.apDrink||{}));console.log("DEBUG SERVE AP:",t.apDrink,ae(t.apDrink,k[i.config.lang||"EN"],i.config.lang)),_t({type:"apOrdered",seat:u.key,ap:n,notes:B("#m_aperoNotes").value||t.aperoNotes||""});const a=document.getElementById("m_aperoNotes");a&&(a.value="");const l=document.getElementById("m_tcNotes");l&&(l.value=""),t.aperoNotes="",t.tcNotes="",fe(),w(),ne(!0),U(),q(),A(),ue(u.row,u.col),x(),P()});var jn;(jn=document.getElementById("serveTC"))==null||jn.addEventListener("click",()=>{var s,r;if(!u)return;const e=k[i.config.lang||"EN"],t=u.data;if(!t.occupied){alert(e.alertSeatEmpty);return}It(t),i.phase==="tc"&&!t.served.tc&&(t.served.tc=Date.now());const n=JSON.parse(JSON.stringify(t.apDrink||{}));console.log("DEBUG SERVE AP:",t.apDrink,ae(t.apDrink,k[i.config.lang||"EN"],i.config.lang));const a=i.phase==="repas"?((s=document.getElementById("m_mealDrinkNotes"))==null?void 0:s.value)||"":((r=document.getElementById("m_tcNotes"))==null?void 0:r.value)||t.tcNotes||"";_t({type:"tcOrdered",seat:u.key,ts:Date.now(),ap:n,notes:a,ctx:i.phase});const l=document.getElementById("m_aperoNotes");l&&(l.value="");const o=document.getElementById("m_tcNotes");o&&(o.value="");const c=document.getElementById("m_mealDrinkNotes");c&&(c.value=""),t.aperoNotes="",t.tcNotes="",fe(),w(),i.phase==="tc"?he(u.key):i.phase==="repas"&&ye(u.key),ne(!0),U(),q(),A(),ue(u.row,u.col),x(),P()});var Rn;(Rn=document.getElementById("serveAperitifNone"))==null||Rn.addEventListener("click",()=>{if(!u)return;const e=k[i.config.lang||"EN"],t=u.data;if(!t.occupied){alert(e.alertSeatEmpty);return}t.served.aperitif||(t.served.aperitif=Date.now()),fe(),w(),ne(!0),U(),q(),ue(u.row,u.col),x(),P()});var Wn;(Wn=document.getElementById("serveTCNone"))==null||Wn.addEventListener("click",()=>{if(!u)return;const e=k[i.config.lang||"EN"],t=u.data;if(!t.occupied){alert(e.alertSeatEmpty);return}t.served.tc||(t.served.tc=Date.now()),fe(),w(),ne(!0),U(),q(),A(),ue(u.row,u.col),x(),P()});var Hn;(Hn=document.getElementById("serveMealDrink"))==null||Hn.addEventListener("click",()=>{var l;if(!u)return;const e=u.key,t=u.data,n=k[i.config.lang||"EN"];if(!t.occupied){alert(n.alertSeatEmpty);return}typeof It=="function"&&It(t);const a=(((l=document.getElementById("m_mealDrinkNotes"))==null?void 0:l.value)||"").trim();$==null||$({type:"tcServed",seat:e,ts:Date.now(),ctx:"repas",ap:t.apDrink?JSON.parse(JSON.stringify(t.apDrink)):null,notes:a}),fe(),w==null||w(),i.phase==="tc"?he(e):i.phase==="repas"&&ye(e),typeof ne=="function"&&ne(!0),typeof A=="function"&&A(),typeof Ke=="function"&&Ke()});var Jn;(Jn=document.getElementById("serveMealDrinkNone"))==null||Jn.addEventListener("click",()=>{var e;(e=document.getElementById("serveTCNone"))==null||e.click()});var Vn;(Vn=document.getElementById("sleepModalBtn"))==null||Vn.addEventListener("click",Hl);function ve(){}function Ke(){u&&(Mt(i.phase),ne(!0),A(),U(),q(),ue(u.row,u.col),x(),P())}[["navFicheBtn","fiche"],["navAperoBtn","aperitif"],["navMealBtn","repas"],["navTCBtn","tc"]].forEach(([e,t])=>{const n=document.getElementById(e);n&&(n.addEventListener("click",a=>{a.preventDefault(),i.phase!==t&&(i.phase=t,w(),it(),lt==null||lt(),ne(!0),Ke(),We(),U(),q(),u&&(i.phase==="tc"?he(u.key):i.phase==="repas"&&ye(u.key)))}),U(),q(),document.querySelectorAll("#drinkGrid .pill").forEach(a=>{a.disabled=!1,a.style.pointerEvents="auto"}))});function it(){const e=k[i.config.lang||"EN"]||k.EN,t=document.getElementById("navFicheBtn"),n=document.getElementById("navAperoBtn"),a=document.getElementById("navMealBtn"),l=document.getElementById("navTCBtn"),o=(s,r)=>{if(!s)return;const d=s.querySelector("span");if(!d)return;const v=(e[r]||"").replace(/\s+/g," ").trim();v&&(d.textContent=v)};o(t,"modalTabFiche"),o(n,"modalTabApero"),o(a,"modalTabMeal"),o(l,"modalTabTC"),t&&(t.title=e.chips_fiche||"Pax record"),n&&(n.title=e.chips_apero||"Aperitif"),a&&(a.title=e.chips_meal||"Main"),l&&(l.title=e.chips_tc||"Tea & Coffee"),[t,n,a,l].forEach(s=>{s&&(s.style.display="",s.classList.remove("active"),s.setAttribute("aria-pressed","false"),s.setAttribute("aria-selected","false"))});const c=i.phase;c==="fiche"&&t&&(t.classList.add("active"),t.setAttribute("aria-pressed","true"),t.setAttribute("aria-selected","true")),c==="aperitif"&&n&&(n.classList.add("active"),n.setAttribute("aria-pressed","true"),n.setAttribute("aria-selected","true")),c==="repas"&&a&&(a.classList.add("active"),a.setAttribute("aria-pressed","true"),a.setAttribute("aria-selected","true")),c==="tc"&&l&&(l.classList.add("active"),l.setAttribute("aria-pressed","true"),l.setAttribute("aria-selected","true"))}var $n;($n=document.getElementById("tc_milk"))==null||$n.addEventListener("change",ve);var Gn;(Gn=document.getElementById("tc_sweet"))==null||Gn.addEventListener("change",ve);var zn;(zn=document.getElementById("tc_the_type"))==null||zn.addEventListener("change",ve);var qn;(qn=document.getElementById("tc_beer"))==null||qn.addEventListener("change",ve);var Un;(Un=document.getElementById("tc_soft_type"))==null||Un.addEventListener("change",()=>{xe(),A()});var Zn;(Zn=document.getElementById("tc_soft_jus"))==null||Zn.addEventListener("change",()=>{xe(),A()});["tc_soft_eau","tc_soft_coca","tc_soft_ice","tc_soft_lemon","tc_soft_ice2","tc_soft_lemon2","tc_soft_salt","tc_soft_pepper","tc_soft_ice4","tc_soft_lemon4","tc_cocktail_type","tc_cocktail_ice","tc_cocktail_lemon"].forEach(e=>{var t;return(t=document.getElementById(e))==null?void 0:t.addEventListener("change",ve)});const Ee=document.getElementById("tc_vin_rouge"),ke=document.getElementById("tc_vin_blanc");Ee==null||Ee.addEventListener("change",()=>{Ee.value?ke&&(ke.value="",ke.disabled=!0):ke&&(ke.disabled=!1),cn()});ke==null||ke.addEventListener("change",()=>{ke.value?Ee&&(Ee.value="",Ee.disabled=!0):Ee&&(Ee.disabled=!1),cn()});var Xn;(Xn=document.getElementById("tc_vin_notes"))==null||Xn.addEventListener("input",ve);var Yn;(Yn=document.getElementById("tc_champ_ice"))==null||Yn.addEventListener("change",ve);var Qn;(Qn=document.getElementById("tc_vin_ice"))==null||Qn.addEventListener("change",ve);var ea;(ea=document.getElementById("tc_digestif_type"))==null||ea.addEventListener("change",ve);var ta;(ta=document.getElementById("tc_digestif_ice"))==null||ta.addEventListener("change",ve);var na;(na=document.getElementById("clearTrayBtn"))==null||na.addEventListener("click",()=>{var n;if(!u)return;const e=u.data,t=k[i.config.lang||"EN"];if(!e.occupied||!((n=e.served)!=null&&n.meal)){alert(t.alertSeatEmpty);return}e.served.trayCleared?(e.served.trayCleared=!1,$({type:"trayUncleared",seat:u.key})):(e.served.trayCleared=!0,$({type:"trayCleared",seat:u.key})),fe(),w(),X(),ne(!0),U(),q(),ue(u.row,u.col),x(),P()});var aa;(aa=document.getElementById("serveMealNone"))==null||aa.addEventListener("click",()=>{if(!u)return;const e=k[i.config.lang||"EN"],t=u.data;if(!t.occupied){alert(e.alertSeatEmpty);return}t.served||(t.served={}),t.served.meal=Date.now(),t.served.mealNone=!0,t.served.trayUsed=!1,t.served.trayFromReservation=!1,fe(),w(),ne(!0),U(),q(),ue(u.row,u.col),x(),P(),Se()});B("#serveMeal").addEventListener("click",()=>{if(!u)return;const e=k[i.config.lang||"EN"],t=u.data;if(!t.occupied){alert(e.alertSeatEmpty);return}let n=!!t.served.meal;!!(t.served&&t.served.mealNone)&&(n=!1);const l=document.getElementById("m_normalMealValue"),o=((l==null?void 0:l.value)||t.normalMeal||"").trim();if(!(!!t.spml||!!t.preLabel||["viande","vege","plateau"].includes(o))&&!n){alert(e.alertChoose);return}const s=(r,d)=>r==="plateau"||r==="viande"||r==="vege"||!!d.spml||!!d.preLabel;if(n)t.served.trayUsed&&(t.served.trayFromReservation||(i.inventory.plateaux=(i.inventory.plateaux||0)+1,X()),t.served.trayUsed=!1,t.served.trayFromReservation=!1),t.served.meal=null,$({type:"serviceCanceled",seat:u.key});else{if(s(o,t))if(o==="plateau"&&!!(t.alloc&&t.alloc.trayReserved))t.served.trayUsed=!0,t.served.trayFromReservation=!0,t.alloc.trayReserved=!1;else{if((i.inventory.plateaux||0)<=0){alert(e.alertNoTrays);return}i.inventory.plateaux--,t.served.trayUsed=!0,t.served.trayFromReservation=!1,X()}else t.served.trayUsed=!1,t.served.trayFromReservation=!1;t.served.meal=Date.now(),t.served.mealNone=!1;const d=za(t,e);$({type:"mealServed",seat:u.key,label:d})}fe(),w(),ne(!0),U(),q(),ue(u.row,u.col),x(),P(),Se()});B("#m_later").addEventListener("change",()=>{typeof Oe=="function"&&Oe()});function Ga(e,t,n=null){if(!u)return;const a=new Date;let l=null;if(n){const[c,s]=n.split(":").map(r=>parseInt(r,10));l=new Date,l.setHours(c,s,0,0),l.getTime()<a.getTime()&&(l=new Date(l.getTime()+24*3600*1e3))}else l=new Date(a.getTime()+t*60*1e3);const o=l.getTime();e.serveLaterAt=o,i.reminders=(i.reminders||[]).filter(c=>c.key!==u.key),i.reminders.push({key:u.key,at:e.serveLaterAt}),w(),Fe(),P()}function ce(){const e=document.getElementById("m_later_apply"),t=document.getElementById("m_later_cancel"),n=document.getElementById("m_later_view"),a=document.getElementById("m_later"),l=document.getElementById("m_later_time"),o=a==null?void 0:a.value,c=l==null?void 0:l.value;if(!e||!u)return;const s=u.data||{},r=Date.now(),d=!!(s.serveLaterAt&&s.serveLaterAt>r),p=Ot();if(e.disabled=!p||o!=="custom"||!c,t&&(t.style.display=d?"":"none",t.disabled=!p||!d),l){const v=p&&o==="custom";l.disabled=!v}if(n)if(d){const v=new Date(s.serveLaterAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});n.textContent=" "+v,n.style.display=""}else n.textContent="",n.style.display="none";Oe()}B("#m_later_time").addEventListener("change",()=>{typeof ce=="function"&&ce()});B("#m_later_apply").addEventListener("click",()=>{if(!u||!Ot())return;const e=k[i.config.lang||"EN"],t=B("#m_later_time").value;if(!t){alert(e.alertPickTime);return}Ga(u.data,0,t),typeof ce=="function"&&ce()});var la;(la=document.getElementById("m_later_cancel"))==null||la.addEventListener("click",()=>{if(!u)return;const e=u.key;i.reminders=(i.reminders||[]).filter(l=>l.key!==e),u.data.serveLaterAt=null;const t=document.getElementById("m_later");t&&(t.value="");const n=document.getElementById("laterCustomContainer");n&&n.classList.remove("active");const a=document.getElementById("m_later_time");a&&(a.value=""),w(),Fe(),x(),P(),ce(),Oe()});var ia;(ia=document.getElementById("m_status"))==null||ia.addEventListener("change",()=>{sn()});var oa;(oa=document.getElementById("m_lang"))==null||oa.addEventListener("change",()=>{rn()});document.querySelectorAll(".language-btn").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("m_lang");if(!t||e.disabled)return;const n=e.dataset.lang||"";t.value=t.value===n?"":n;const a=new Event("change",{bubbles:!0});t.dispatchEvent(a)})});rn();sn();Oe();document.querySelectorAll(".later-btn").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("m_later");if(!t||e.disabled)return;const n=e.dataset.value||"",a=t.value===n?"":n;t.value=a;const l=new Event("change",{bubbles:!0});t.dispatchEvent(l)})});document.addEventListener("click",e=>{var c;const t=document.getElementById("laterCustomContainer");if(!(t!=null&&t.classList.contains("active")))return;const n=e.target;if(!n||t.contains(n)||(c=n.classList)!=null&&c.contains("later-btn")&&n.dataset.value==="custom"||n.closest(".form-field--actions")||n.id==="m_later_apply"||n.id==="m_later_cancel")return;const a=document.getElementById("m_later");if(!a||a.value!=="custom")return;const l=document.getElementById("m_later_time");if(l!=null&&l.value)return;const o=u==null?void 0:u.data;o!=null&&o.serveLaterAt&&o.serveLaterAt>Date.now()||(a.value="",a.dispatchEvent(new Event("change",{bubbles:!0})))});B("#closeModal").addEventListener("click",()=>{Ze(),Ct()});["m_status","m_lang","m_notes","m_aperoNotes","m_eatWith"].forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("change",Ze);const n=document.getElementById("m_tcNotes");n&&n.addEventListener("change",Ze)});var ca;(ca=document.getElementById("m_occ_chk"))==null||ca.addEventListener("change",()=>{Ze(),ja()});var sa;(sa=document.getElementById("m_sleep_chk"))==null||sa.addEventListener("change",Ze);document.querySelectorAll('input[name="m_type"]').forEach(e=>{e.addEventListener("change",Ze)});B("#m_later").addEventListener("change",()=>{if(!u)return;Oe();const e=B("#m_later").value;if(e===""){u.data.serveLaterAt=null,i.reminders=(i.reminders||[]).filter(t=>t.key!==u.key),w(),Fe(),x(),P(),typeof ce=="function"&&ce();return}if(e==="custom"){typeof ce=="function"&&ce();return}Ga(u.data,parseInt(e,10)),typeof ce=="function"&&ce()});function Fe(){const e=i.config.lang||"EN",t=e==="FR"?"Annuler":e==="DE"?"Lschen":"Cancel",n=B("#remindersList");n.innerHTML="";const a=Date.now();i.reminders=i.reminders.filter(o=>o.at&&o.at>a);const l=[...i.reminders].sort((o,c)=>o.at-c.at);for(const o of l){const c=document.createElement("div");c.className="row";const s=i.seats[o.key],r=new Date(o.at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),d=document.createElement("div");d.textContent=o.key+"  "+r+(s!=null&&s.sleep?" ()":"");const p=document.createElement("button");p.className="btn",p.textContent=t,p.addEventListener("click",()=>{const v=i.reminders.findIndex(y=>y.key===o.key&&y.at===o.at);v>=0&&i.reminders.splice(v,1),i.seats[o.key]&&(i.seats[o.key].serveLaterAt=null),w(),Fe(),x(),P()}),c.appendChild(d),c.appendChild(p),n.appendChild(c)}w()}setInterval(()=>{const e=Date.now();for(const t of i.reminders)if(t.at&&e>=t.at){const n=k[i.config.lang||"EN"];_l(n.remindServe+" "+t.key),fe(),t.at=null,i.seats[t.key]&&(i.seats[t.key].serveLaterAt=null),x(),P()}i.reminders=i.reminders.filter(t=>t.at),Fe(),P()},1e3);const Le=["A","B","C","D","E","F"];function Bn(e){return e==="B"?i.config.layout==="A320":!0}function In(e){return e.spml==="CHML"?0:e.status==="HON"?1:e.status==="SEN"?2:e.status==="PAD"?4:3}function $l(){return i.phase==="aperitif"?"aperitif":i.phase==="tc"?"tc":"meal"}function Gl(){var p,v,y;const e=Date.now(),t=i.config.rowsBiz||0,n=$l(),a=i.phase==="repas",l=[];for(let m=1;m<=t;m++)for(const g of Le){if(!Bn(g))continue;const f=we(m,g);f.occupied&&(f.served[n]||f.serveLaterAt&&f.serveLaterAt>e||l.push({key:m+g,r:m,c:g,seat:f}))}let o=[...l].sort((m,g)=>{const f=m.seat.sleep?1:0,b=g.seat.sleep?1:0;if(f!==b)return f-b;if(a){const I=m.seat.spml==="CHML"?0:1,h=g.seat.spml==="CHML"?0:1;if(I!==h)return I-h}return m.r!==g.r?m.r-g.r:Le.indexOf(m.c)-Le.indexOf(g.c)});o=d(o);let s=l.filter(m=>{const g=m.seat;return!(g.spml||g.preLabel||g.normalMeal)}).sort((m,g)=>{const f=m.seat.sleep?1:0,b=g.seat.sleep?1:0;if(f!==b)return f-b;if(a){const I=In(m.seat),h=In(g.seat);if(I!==h)return I-h}return m.r!==g.r?m.r-g.r:Le.indexOf(m.c)-Le.indexOf(g.c)});s=d(s);const r=[];for(let m=1;m<=t;m++)for(const g of Le){if(!Bn(g))continue;const f=we(m,g);f.occupied&&(p=f.served)!=null&&p.meal&&(v=f.served)!=null&&v.trayUsed&&!((y=f.served)!=null&&y.trayCleared)&&r.push({key:m+g,r:m,c:g,seat:f})}r.sort((m,g)=>m.r!==g.r?m.r-g.r:Le.indexOf(m.c)-Le.indexOf(g.c));function d(m){var I;const g=new Map(m.map((h,C)=>[h.key,C])),f=new Set,b=[];for(const h of m){if(f.has(h.key))continue;b.push(h),f.add(h.key);const C=(I=h.seat)==null?void 0:I.eatWith;C&&g.has(C)&&!f.has(C)&&(b.push(m[g.get(C)]),f.add(C))}return b}return{serveList:o,orderList:s,clearList:r}}function Yt(e){return String(e||"").replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])}function ht(e){if(e.spml)return`<span class="${e.spml==="CHML"?"tag chml":"tag"}">${Yt(e.spml)}</span>`;if(e.preLabel){const a=typeof e.preLabel=="string"&&e.preLabel.length>10?`${e.preLabel.slice(0,10)}...`:e.preLabel;return`<span class="tag">${Yt(a)}</span>`}const t=(e.normalMeal||"").trim();return t?`<span class="tag">${t==="viande"?"1":t==="vege"?"2":""}</span>`:""}function za(e,t){if(!e)return"";if(e.spml)return e.spml;if(e.preLabel){const a=String(e.preLabel||"").trim();return a.length>10?`${a.slice(0,10)}...`:a}const n=(e.normalMeal||"").trim();return n==="viande"?(t==null?void 0:t.optNormalMeat)||"Option 1":n==="vege"?(t==null?void 0:t.optNormalVeg)||"Option 2":n==="plateau"?(t==null?void 0:t.trayShort)||"Tray":""}function jt(e,t,n){let a=!1,l=null,o=null,c=null;const s=70,r=90,d=()=>{a=!1,e.classList.remove("flow-swipe-armed"),e.style.transition="",e.style.transform="",l&&(clearTimeout(l),l=null),o=null,c=null},p=()=>{t&&(zl(t,n),d())};e.addEventListener("click",()=>{if(!a){a=!0,e.classList.add("flow-swipe-armed"),e.style.transition="transform 0.15s ease",e.style.transform="translateX(6px)",l&&clearTimeout(l),l=window.setTimeout(d,1200);return}p()}),e.addEventListener("touchstart",v=>{var y,m;o=((m=(y=v.touches)==null?void 0:y[0])==null?void 0:m.clientX)??null,c=null,e.style.transition="none"},{passive:!0}),e.addEventListener("touchmove",v=>{var f,b;if(o===null)return;c=(((b=(f=v.touches)==null?void 0:f[0])==null?void 0:b.clientX)??o)-o;const m=Math.max(-r,Math.min(r,c));e.style.transform=`translateX(${m}px)`;const g=Math.abs(c)>s*.6;e.classList.toggle("flow-swipe-armed",g)},{passive:!0}),e.addEventListener("touchend",v=>{var f,b;if(o===null)return;const y=((b=(f=v.changedTouches)==null?void 0:f[0])==null?void 0:b.clientX)??o,m=c!==null?c:y-o,g=Math.abs(m)>s;e.style.transition="transform 0.18s ease",g?(e.style.transform=`translateX(${m>0?r:-r}px)`,p()):(e.style.transform="translateX(0px)",window.setTimeout(d,180)),o=null,c=null},{passive:!0})}function zl(e,t){const[n,a]=typeof Xe=="function"?Xe(e):[null,null];if(!n||!a)return;const l=we(n,a);if(l.served||(l.served={}),t==="aperitif"){l.served.aperitifDelivered=Date.now();const c=JSON.parse(JSON.stringify(l.apDrink||{}));_t({type:"apServed",seat:e,ap:c,notes:l.aperoNotes||""}),w(),x(),P();return}if(t==="tc"){l.served.tcDelivered=Date.now();const c=JSON.parse(JSON.stringify(l.apDrink||{}));_t({type:"tcServed",seat:e,ts:Date.now(),ap:c,notes:l.tcNotes||"",ctx:i.phase}),w(),x(),P();return}t==="repas"&&ql(e,l),t==="clear"&&Ul(e,l)}function ql(e,t){const n=k[i.config.lang||"EN"];if(!t||!t.occupied||(t.served||(t.served={}),t.served.meal))return;const a=(t.normalMeal||"").trim();if(!(!!t.spml||!!t.preLabel||["viande","vege","plateau"].includes(a)))return;const o=t.spml||t.preLabel||["viande","vege","plateau"].includes(a);if((!t.alloc||typeof t.alloc!="object")&&(t.alloc={normalKey:null,spmlCode:null,preLabel:null,trayReserved:!1}),o)if(t.alloc.trayReserved===!0&&a==="plateau")t.served.trayUsed=!0,t.served.trayFromReservation=!0,t.alloc.trayReserved=!1;else{if((i.inventory.plateaux||0)<=0){alert(n.alertNoTrays||"No trays available.");return}i.inventory.plateaux=(i.inventory.plateaux||0)-1,t.served.trayUsed=!0,t.served.trayFromReservation=!1,X()}else t.served.trayUsed=!1,t.served.trayFromReservation=!1;t.served.meal=Date.now(),t.served.mealNone=!1;const c=za(t,n);$({type:"mealServed",seat:e,label:c}),fe(),w(),x(),P()}function Ul(e,t){k[i.config.lang||"EN"],!(!t||!t.occupied)&&(!t.served||!t.served.meal||!t.served.trayUsed||t.served.trayCleared||(t.served.trayCleared=!0,$({type:"trayCleared",seat:e}),fe(),w(),X(),x(),P()))}function P(){var m,g,f,b,I;const e=k[i.config.lang||"EN"],t=document.getElementById("flowNow"),n=document.getElementById("flowLater"),a=document.getElementById("flowClear");if(!t||!n)return;const l=(m=document.getElementById("flowLaterTitle"))==null?void 0:m.parentElement,o=(g=document.getElementById("flowNowTitle"))==null?void 0:g.parentElement,c=(f=document.getElementById("flowClearTitle"))==null?void 0:f.parentElement,s=i.phase==="aperitif",r=i.phase==="tc",d=i.phase==="fiche";o&&(o.style.display=s||r||d?"none":""),c&&(c.style.display=s||r||d?"none":""),l&&(l.style.display=d?"none":""),t.innerHTML="",n.innerHTML="",a&&(a.innerHTML="");const{serveList:p,orderList:v,clearList:y}=Gl();{const h=document.getElementById("flowLaterTitle");if(h&&(h.textContent=i.phase==="aperitif"?e.flowAperoTakenTitle||"Orders taken ":i.phase==="tc"?e.flowTCTakenTitle||"Tea & coffee taken ":e.flowLaterTitle||"Orders to take "),i.phase==="aperitif"||i.phase==="tc"){const C=i.phase==="aperitif"?"apOrdered":"tcOrdered",E=(Array.isArray(i.history)?i.history:[]).filter(_=>_&&_.type===C&&(C!=="tcOrdered"||_.ctx!=="repas"));if(E.length===0){const _=document.createElement("div");_.style.color="var(--muted)",_.textContent=e.flowEmptyTaken||"No orders taken yet",n.appendChild(_)}else for(const _ of E){let N=null;if(typeof Xe=="function"){const[T,K]=Xe(_.seat||"");T&&K&&typeof we=="function"&&(N=we(T,K))}const D=[];N&&(N.status==="HON"?D.push('<span class="tag hon">HON</span>'):N.status==="SEN"?D.push('<span class="tag sen">SEN</span>'):N.status==="VIP"?D.push('<span class="tag vip">VIP</span>'):N.status==="FCL"?D.push('<span class="tag fcl">FCL</span>'):N.status==="PAD"?D.push('<span class="tag pad">PAD</span>'):N.status==="FTL"&&D.push('<span class="tag ftl">FTL</span>'),N.sleep&&D.push(`<span class="tag sleep">${Et.sleep}</span>`));const H=typeof Qt=="function"&&Qt(_.ap)||"",Y=typeof ae=="function"&&ae(_.ap,e,i.config.lang)||"",se=(_.notes||"").trim(),me=[Y,se].filter(Boolean).join("  "),le=me?`<div class="flow-sub">${H?H+" ":""}${Yt(me)}</div>`:"";if(N&&(s&&((b=N.served)!=null&&b.aperitifDelivered)||r&&((I=N.served)!=null&&I.tcDelivered)))continue;const S=document.createElement("div");S.className="flow-item",S.dataset.key=_.seat||"",S.innerHTML=`
          <div class="flow-seat">${_.seat||""}</div>
          <div class="flow-desc">${D.join(" ")}${le}</div>
          <div class="tag">${e.flowTaken||"Taken"}</div>
        `,jt(S,_.seat||"",i.phase),n.appendChild(S)}}else if(v.length===0){const C=document.createElement("div");C.style.color="var(--muted)",C.textContent=e.flowEmptyLater||"Aucune commande  prendre",n.appendChild(C)}else for(const C of v){const E=C.seat,_=[];E.status==="HON"?_.push('<span class="tag hon">HON</span>'):E.status==="SEN"?_.push('<span class="tag sen">SEN</span>'):E.status==="VIP"?_.push('<span class="tag vip">VIP</span>'):E.status==="FCL"?_.push('<span class="tag fcl">FCL</span>'):E.status==="PAD"?_.push('<span class="tag pad">PAD</span>'):E.status==="FTL"&&_.push('<span class="tag ftl">FTL</span>'),E.sleep&&_.push(`<span class="tag sleep">${Et.sleep}</span>`);const N=document.createElement("div");N.className="flow-item",N.dataset.key=C.key;const D=ht==null?void 0:ht(E);D&&_.unshift(D),N.innerHTML=`
          <div class="flow-seat">${C.key}</div>
          <div class="flow-desc">${_.join(" ")}</div>
          <div class="tag">${e.flowTakeOrder||"Order"}</div>
        `,N.addEventListener("click",()=>wt(C.key)),n.appendChild(N)}}if(p.length===0){const h=document.createElement("div");h.style.color="var(--muted)",h.textContent=e.flowEmptyLater||"No passenger to serve",t.appendChild(h)}else for(const h of p){const C=h.seat,E=[];C.status==="HON"?E.push('<span class="tag hon">HON</span>'):C.status==="SEN"?E.push('<span class="tag sen">SEN</span>'):C.status==="VIP"?E.push('<span class="tag vip">VIP</span>'):C.status==="FCL"?E.push('<span class="tag fcl">FCL</span>'):C.status==="PAD"?E.push('<span class="tag pad">PAD</span>'):C.status==="FTL"&&E.push('<span class="tag ftl">FTL</span>'),C.sleep&&E.push(`<span class="tag sleep">${Et.sleep}</span>`);const _=document.createElement("div");if(_.className="flow-item"+(C.eatWith?" eat-with":""),C.eatWith){const H=[h.key,C.eatWith].sort().join("-");_.dataset.pair=H}_.dataset.key=h.key;const N=ht(C);N&&E.unshift(N);const D=ai(h.key);_.innerHTML=`
  <div class="flow-seat">${h.key}</div>
  <div class="flow-desc">${E.join(" ")}</div>
  <div class="tag">${e.flowServeTag||"Serve"}</div>
  ${D}
`,i.phase==="repas"?jt(_,h.key,"repas"):_.addEventListener("click",()=>wt(h.key)),t.appendChild(_)}if(a)if(!y||y.length===0){const h=document.createElement("div");h.style.color="var(--muted)",h.textContent=e.flowEmptyClear||"Rien  dbarrasser",a.appendChild(h)}else for(const h of y){const C=h.seat,E=[];C.status==="HON"?E.push('<span class="tag hon">HON</span>'):C.status==="SEN"?E.push('<span class="tag sen">SEN</span>'):C.status==="VIP"?E.push('<span class="tag vip">VIP</span>'):C.status==="FCL"?E.push('<span class="tag fcl">FCL</span>'):C.status==="PAD"?E.push('<span class="tag pad">PAD</span>'):C.status==="FTL"&&E.push('<span class="tag ftl">FTL</span>'),C.sleep&&E.push('<span class="tag sleep"></span>');const _=document.createElement("div");if(_.className="flow-item"+(C.eatWith?" eat-with":""),C.eatWith){const N=[h.key,C.eatWith].sort().join("-");_.dataset.pair=N}_.dataset.key=h.key,_.innerHTML=`
          <div class="flow-seat">${h.key}</div>
          <div class="flow-desc">${E.join(" ")}</div>
          <div class="tag"> ${e.flowClearTag||" dbarrasser"}</div>
        `,jt(_,h.key,"clear"),a.appendChild(_)}}function St(){const e=document.getElementById("langDropdown"),t=document.getElementById("langActive"),n=document.getElementById("langMenu");if(!e||!t||!n)return;const a={EN:String.fromCodePoint(127468,127463),DE:String.fromCodePoint(127465,127466),FR:String.fromCodePoint(127467,127479)},l=String.fromCodePoint(127987),o=()=>{const s=(i.config.lang||"EN").toUpperCase(),r=a[s]||l;t.textContent=r,t.setAttribute("aria-label",s),t.title=s},c=()=>{n.querySelectorAll("[data-lang]").forEach(s=>{const r=(s.dataset.lang||"").toUpperCase(),d=a[r]||l;s.textContent=d,s.setAttribute("aria-label",r),s.title=r})};c(),o(),t.addEventListener("click",s=>{s.stopPropagation();const r=e.classList.toggle("open");t.setAttribute("aria-expanded",String(r)),n.querySelectorAll("[data-lang]").forEach(d=>{d.classList.toggle("primary",d.dataset.lang===(i.config.lang||"EN"))})}),n.querySelectorAll("[data-lang]").forEach(s=>{s.addEventListener("click",()=>{var d;const r=s.dataset.lang;r&&(i.config.lang=r,w(),Ve(),ee(),x(),P(),((d=document.getElementById("modalBack"))==null?void 0:d.style.display)==="flex"&&typeof Ke=="function"&&Ke(),o(),c(),e.classList.remove("open"),t.setAttribute("aria-expanded","false"))})}),document.addEventListener("click",s=>{e.contains(s.target)||(e.classList.remove("open"),t.setAttribute("aria-expanded","false"))})}function $e(){const e=i.config.theme==="dark";document.body.classList.toggle("theme-dark",e),document.body.classList.toggle("theme-light",!e);const t=document.getElementById("themeToggle");if(t){const n=e?"Light mode":"Dark mode";t.textContent=e?"â˜€ï¸":"ðŸŒ™",t.setAttribute("aria-label",n),t.title=n}}const wn=document.getElementById("themeToggle");wn&&wn.addEventListener("click",()=>{i.config.theme=i.config.theme==="dark"?"light":"dark",w(),$e()});const Rt=document.getElementById("layoutSelect");Rt&&Rt.addEventListener("change",()=>{const e=Rt.value||"A220";i.config.layout=e,w(),xt(),x(),P()});document.querySelectorAll(".layout-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.layout||"";if(!t)return;const n=document.getElementById("layoutSelect");if(n){if(n.value===t){xt();return}n.value=t,n.dispatchEvent(new Event("change",{bubbles:!0}))}})});document.querySelectorAll("[data-inv]").forEach(e=>e.addEventListener("click",()=>{const t=e.dataset.key,n=e.dataset.inv==="+1"?1:-1;t&&(t.startsWith("hot_")||t==="plateaux")&&(i.inventory[t]=Math.max(0,(i.inventory[t]||0)+n)),w(),X()}));const qa=document.getElementById("rowsBizDisplay");document.getElementById("rowsBizMinus").addEventListener("click",()=>{i.config.rowsBiz=Math.max(0,(i.config.rowsBiz||0)-1),qa.textContent=i.config.rowsBiz,w(),x(),P()});document.getElementById("rowsBizPlus").addEventListener("click",()=>{i.config.rowsBiz=Math.min(15,(i.config.rowsBiz||0)+1),qa.textContent=i.config.rowsBiz,w(),x()});B("#spmlAddBtn").addEventListener("click",()=>{const e=k[i.config.lang||"EN"]||k.EN,t=(B("#spmlAddCode").value||"").trim().toUpperCase(),n=Math.max(1,parseInt(B("#spmlAddQty").value||"1",10));if(!t){alert(e.spmlCodeRequired);return}i.inventory.spml[t]=(i.inventory.spml[t]||0)+n,B("#spmlAddCode").value="",w()});var ra;(ra=document.getElementById("spmlAddCode"))==null||ra.addEventListener("change",e=>e.target.blur());B("#preAddBtn").addEventListener("click",()=>{const e=k[i.config.lang||"EN"]||k.EN,t=(B("#preAddLabel").value||"").trim(),n=Math.max(1,parseInt(B("#preAddQty").value||"1",10));if(!t){alert(e.preAddLabelRequired);return}i.inventory.pre[t]=(i.inventory.pre[t]||0)+n,B("#preAddLabel").value="",w()});document.querySelectorAll("#filterTabs .subtab[data-filter]").forEach(e=>e.addEventListener("click",()=>{if(e.classList.contains("active"))return;const t=e.dataset.filter||"all";Fa(t),He()&&nt(!1),x(),P()}));Fa(Ka());Z&&Q&&qt&&(nt(!1),Z.addEventListener("click",e=>{e.stopPropagation()}),Q.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=!He();nt(t)}),document.addEventListener("click",e=>{if(!He())return;const t=e.target;t&&(Z.contains(t)||Q.contains(t)||nt(!1))}),window.addEventListener("resize",()=>{He()&&Ra()}),document.addEventListener("keydown",e=>{e.key!=="Escape"||!He()||(nt(!1),Q.focus({preventScroll:!0}))}));document.querySelectorAll("#phaseChips .tab").forEach(e=>e.addEventListener("click",()=>{if(e.classList.contains("active"))return;const t=e.dataset.phase||"fiche";i.phase=t,Mt(t),x(),P(),lt()}));B("#exportPNG").addEventListener("click",()=>{const e=i.config.rowsBiz||0,t=72,n=48,a=40,l=["F","E","D"],o=Pa(),c=l.length+o.length,s=a+c*t+28+20,r=a+e*n+20,d=document.createElement("canvas");d.width=s,d.height=r;const p=d.getContext("2d");p.fillStyle="#ffffff",p.fillRect(0,0,s,r),p.fillStyle="#000000",p.font="12px system-ui";let v=a;const y=l.concat([""]).concat(o);for(const f of y){if(f===""){v+=28;continue}p.fillText(f,v+t/2-4,a-12),v+=t}for(let f=e;f>=1;f--){const b=a+(e-f)*n;p.fillText(String(f),10,b+28);for(let h=0;h<l.length;h++){const C=a+h*t;Nn(p,f,l[h],C,b,t,n)}const I=a+l.length*t+28;for(let h=0;h<o.length;h++){const C=I+h*t;Nn(p,f,o[h],C,b,t,n)}}const m=document.createElement("a");m.href=d.toDataURL("image/png");const g=(i.title.flightNo||"vol")+"_"+(i.title.date||"date")+"_seatmap.png";m.download=g,m.click()});function Nn(e,t,n,a,l,o,c){var d;e.strokeStyle="#888",e.strokeRect(a,l,o-6,c-6);const s=we(t,n);s.occupied&&(e.fillStyle="#dce6ff",e.fillRect(a+1,l+1,o-8,c-8)),e.fillStyle="#000",e.font="12px system-ui",e.textBaseline="alphabetic",e.fillText(t+n,a+8,l+18);let r="";if(!((d=s==null?void 0:s.served)!=null&&d.trayCleared)){const p=s.spml||s.preLabel?null:s.normalMeal==="viande"?"1":s.normalMeal==="vege"?"2":s.normalMeal==="plateau"?"":null;r=s.spml?s.spml:s.preLabel?"PRE":p||""}r&&(e.font="12px system-ui",e.fillStyle="#000",e.textBaseline="bottom",e.fillText(r,a+o-32,l+c-6),e.textBaseline="alphabetic"),s.status!=="none"&&(s.status==="FTL"?e.fillStyle="#9aa4b2":s.status==="SEN"?e.fillStyle="#ffd24d":s.status==="HON"?e.fillStyle="#000000":s.status==="VIP"?e.fillStyle="#9b5cff":s.status==="FCL"?e.fillStyle="#ff5757":s.status==="PAD"?e.fillStyle="#39d98a":e.fillStyle="#666",e.beginPath(),e.arc(a+o-20,l+16,6,0,2*Math.PI),e.fill(),e.fillStyle="#000")}B("#clientView").addEventListener("click",()=>{i.clientView=!i.clientView,w(),document.body.classList.toggle("client",i.clientView),$e(),Ve(),x(),P()});let Wt=!1,Re=null;const Zl=4e3;function Xl(){i.inventory.plateaux=0,i.inventory.hot_viande=0,i.inventory.hot_vege=0;for(const n of dt)i.inventory.spml[n]=0;i.inventory.hot_special=0,i.inventory.pre={},i.menu.viandeLabel="",i.menu.vegeLabel="",i.reminders=[],i.history=[];for(const n of Object.keys(i.seats))i.seats[n]=Ce({});i.phase="fiche",document.querySelectorAll("input[type='text'], textarea").forEach(n=>n.value="");const e=document.getElementById("labelViande"),t=document.getElementById("labelVege");e&&(e.value=""),t&&(t.value=""),Mt("fiche"),w(),x(),X(),ee(),Fe(),$({type:"reset"})}const oe=document.getElementById("resetFlight");if(oe){const e=()=>{var s;const n=(oe.dataset.defaultLabel??"").trim();if(n)return n;const a=i.config.lang||"EN",o=((k[a]||k.EN).reset??"").trim();if(o)return o;const c=(oe.textContent??"").trim();return c||(((s=k.EN)==null?void 0:s.reset)??"Reset").trim()},t=n=>{var o;Re!==null&&(clearTimeout(Re),Re=null),Wt=!1,oe.dataset.resetArmed="false";const l=(n??e()).trim()||(((o=k.EN)==null?void 0:o.reset)??"Reset");oe.dataset.defaultLabel=l,oe.textContent=l};oe.dataset.resetArmed=oe.dataset.resetArmed??"false",oe.addEventListener("click",()=>{const n=i.config.lang||"EN",a=k[n]||k.EN,l=(a.resetConfirm??a.reset??"Confirm").trim()||"Confirm",o=e();Wt?(t(o),Xl()):(Wt=!0,oe.dataset.resetArmed="true",oe.dataset.defaultLabel=o,oe.textContent=l,Re!==null&&clearTimeout(Re),Re=window.setTimeout(()=>{t()},Zl))})}function Yl(){if(!Array.isArray(i.history))return;const e=[];for(const t of i.history){if(t&&typeof t=="object"&&t.type){e.push(t);continue}if(typeof t!="string"){e.push(t);continue}const n=t.replace(/^\s*\[\d{2}:\d{2}\]\s*/,"");let a;if(a=n.match(/^(Apritif servi |Aperitif served at|Aperitif serviert bei)\s+([0-9]+[A-F])/)){e.push({ts:Date.now(),type:"apServed",seat:a[2]});continue}if(a=n.match(/^(Apritif annul pour|Aperitif canceled for|Aperitif storniert fr)\s+([0-9]+[A-F])/)){e.push({ts:Date.now(),type:"apCanceled",seat:a[2]});continue}if(a=n.match(/^(Plat servi |Main served at|Hauptgang serviert bei)\s+([0-9]+[A-F])(?:\s+\s+(.+))?/)){e.push({ts:Date.now(),type:"mealServed",seat:a[2],label:a[3]||""});continue}if(a=n.match(/^(Service annul pour|Service canceled for|Service storniert fr)\s+([0-9]+[A-F])/)){e.push({ts:Date.now(),type:"serviceCanceled",seat:a[2]});continue}if(/(Vol rinitialis\.|Flight reset\.|Flug zurckgesetzt\.)/.test(n)){e.push({ts:Date.now(),type:"reset"});continue}e.push({ts:Date.now(),type:"text",text:n})}i.history=e}(function(){var l;if(i.seats&&typeof i.seats=="object")for(const o of Object.keys(i.seats))i.seats[o]=Ce(i.seats[o]);for(const o of dt)typeof i.inventory.spml[o]!="number"&&(i.inventory.spml[o]=0);B("#flightNo").value=i.title.flightNo||"",document.getElementById("flightDateISO").value=i.title.date||"",B("#flightDate").value=ot(i.title.date||""),(l=document.getElementById("flightDate"))==null||l.addEventListener("input",ct),ct();const t=document.getElementById("rowsBizDisplay"),n=document.getElementById("layoutSelect");n&&(n.value=i.config.layout||"A220"),xt();const a=document.getElementById("langSelect");a&&(a.value=i.config.lang||"EN"),Ve(),ee(),Yl(),ee(),St(),i.config.theme="dark",$e(),Ne(),x(),t&&(t.textContent=i.config.rowsBiz||0),B("#labelViande").value=i.menu.viandeLabel||"",B("#labelVege").value=i.menu.vegeLabel||"",B("#labelViande").addEventListener("change",()=>{i.menu.viandeLabel=B("#labelViande").value,w()}),B("#labelVege").addEventListener("change",()=>{i.menu.vegeLabel=B("#labelVege").value,w()}),document.body.classList.toggle("client",i.clientView),Mt(i.phase),x(),X(),ee(),Fe()})();var da;(da=document.getElementById("tc_group"))==null||da.addEventListener("change",jl);var ua;(ua=document.getElementById("tc_alcool_type"))==null||ua.addEventListener("change",Rl);var fa;(fa=document.getElementById("tc_chaud_type"))==null||fa.addEventListener("change",Wl);["tc_soft_type","tc_soft_eau","tc_soft_jus","tc_soft_coca","tc_soft_sprite","tc_beer","tc_vin_rouge","tc_vin_blanc","tc_digestif_type","tc_the_type","tc_group","tc_alcool_type","tc_chaud_type"].forEach(e=>{var t;return(t=document.getElementById(e))==null?void 0:t.addEventListener("change",A)});var ma;(ma=document.getElementById("tc_group"))==null||ma.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value=""),A()});var pa;(pa=document.getElementById("tc_alcool_type"))==null||pa.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value=this.value||""),A()});var ga;(ga=document.getElementById("tc_chaud_type"))==null||ga.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value=this.value||""),A()});var ya;(ya=document.getElementById("tc_soft_type"))==null||ya.addEventListener("change",function(){const e=document.getElementById("tc_cat");e&&(e.value="soft"),A()});var ha;(ha=document.getElementById("tc_soft_eau"))==null||ha.addEventListener("change",A);var va;(va=document.getElementById("tc_soft_coca"))==null||va.addEventListener("change",A);var ba;(ba=document.getElementById("tc_soft_sprite"))==null||ba.addEventListener("change",A);var Ea;(Ea=document.getElementById("tc_beer"))==null||Ea.addEventListener("change",A);var ka;(ka=document.getElementById("tc_vin_rouge"))==null||ka.addEventListener("change",A);var Ca;(Ca=document.getElementById("tc_vin_blanc"))==null||Ca.addEventListener("change",A);var Sa;(Sa=document.getElementById("tc_cocktail_type"))==null||Sa.addEventListener("change",A);const Ql={FR:{campari:["<b>Campari Orange</b> : Glaons, Campari, Jus d'orange","<b>Campari Soda</b> : Glaons, Campari, Eau gazeuse"],bloody_mary:["Glaons, Vodka, Jus de tomate, sel, poivre, citron"],screwdriver:["Glaons, Vodka, Jus d'orange"],gin_tonic:["Glaons, Gin, Citron, Tonic"],cuba_libre:["Glaons, Rhum, Citron, Coca-Cola"]},EN:{campari:["<b>Campari Orange</b>: Ice, Campari, Orange juice","<b>Campari Soda</b>: Ice, Campari, Sparkling water"],bloody_mary:["Ice, Vodka, Tomato juice, salt, pepper, lemon"],screwdriver:["Ice, Vodka, Orange juice"],gin_tonic:["Ice, Gin, Lemon, Tonic"],cuba_libre:["Ice, Rum, Lemon, Coca-Cola"]},DE:{campari:["<b>Campari Orange</b>: Eis, Campari, Orangensaft","<b>Campari Soda</b>: Eis, Campari, Sodawasser"],bloody_mary:["Eis, Wodka, Tomatensaft, Salz, Pfeffer, Zitrone"],screwdriver:["Eis, Wodka, Orangensaft"],gin_tonic:["Eis, Gin, Zitrone, Tonic"],cuba_libre:["Eis, Rum, Zitrone, Coca-Cola"]}};function ei(){var e;return(((e=i==null?void 0:i.config)==null?void 0:e.lang)||"EN").toUpperCase()}function ti(e){var o;const t=document.getElementById("tc_tip"),n=ei(),a=((o=Ql[n])==null?void 0:o[e])||null,l=Array.isArray(a)&&a.length>1;t.innerHTML=a?a.map(c=>`<div>${l?" ":""}${c}</div>`).join(""):""}function ni(e){const t=document.getElementById("tc_tipBtn"),n=document.getElementById("tc_tip");!t||!n||(e?(t.style.display="inline-flex",n.style.display="none"):(t.style.display="none",n.style.display="none"))}(function(){var l;const t=document.getElementById("tc_cocktail_type");if(!t)return;const n=t.cloneNode(!0);t.parentNode.replaceChild(n,t);const a=document.getElementById("tc_cocktail_type");a.addEventListener("change",o=>{const c=o.target.value,s=c==="bloody_mary";document.querySelectorAll("#tc_cocktail .bm-only").forEach(r=>{r.style.display=s?"inline-flex":"none",s||(r.querySelector("input").checked=!1)}),ni(c),ti(c),A()}),(l=document.getElementById("tc_tipBtn"))==null||l.addEventListener("click",()=>{const o=document.getElementById("tc_tip");o&&(o.style.display=o.style.display==="none"||!o.style.display?"block":"none")}),document.addEventListener("click",o=>{const c=document.getElementById("tc_cocktail_tipwrap"),s=document.getElementById("tc_tip");c&&s&&!c.contains(o.target)&&(s.style.display="none")}),a.dispatchEvent(new Event("change"))})();var Ta;(Ta=document.getElementById("tc_soft_type"))==null||Ta.addEventListener("change",function(){xe(),A()});document.addEventListener("DOMContentLoaded",()=>{Wa()});var _a;(_a=document.getElementById("saveSnapshot"))==null||_a.addEventListener("click",()=>{var c,s;const e=(((c=i==null?void 0:i.title)==null?void 0:c.flightNo)||"no-flight").replace(/\W+/g,"_"),t=(((s=i==null?void 0:i.title)==null?void 0:s.date)||"no-date").replace(/\W+/g,"_"),n=`SWISS_ServiceFlow-${e}-${t}.json`,a=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),l=URL.createObjectURL(a),o=document.createElement("a");o.href=l,o.download=n,document.body.appendChild(o),o.click(),setTimeout(()=>{URL.revokeObjectURL(l),o.remove()},500)});function Ua(e){for(let t=0;t<i.history.length;t++){const n=i.history[t];if(n&&n.type==="tcServed"&&n.seat===e&&n.ctx==="repas")return n}return null}function Qt(e){return!e||e.cat==="cafe"||e.cat==="deca"||e.cat==="the"||e.cat==="chocolat"||e.cat==="soft"&&(e.softType==="eau"||e.softType==="coca"||e.softType==="jus"||e.softType==="sprite"||e.softType==="tonic")||e.cat==="champagne"||e.cat==="vin_rouge"||e.cat==="vin_blanc"||e.cat==="biere"||e.cat==="cocktail"||e.cat==="digestif",""}function ai(e){const t=Ua(e);if(!t)return"";const n=k[i.config.lang||"EN"];let a="";t.ap&&(a=ae(t.ap,n,i.config.lang||"EN")||"");const l=(t.notes||"").trim(),o=[a,l].filter(Boolean).join("  "),c=Qt(t.ap),s=(c?c+" ":"")+o;return o?`<div class="flow-sub">${s}</div>`:""}function ye(e){const t=document.getElementById("mhMealDrinkInline");if(!t)return;const n=k[i.config.lang||"EN"],a=Ua(e),l=(n.mealDrinkTitle||"Meal drinks")+": ";if(!a){t.textContent=l+"";return}const o=a.ts||a.t||null,c=o?new Date(o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";let s="";a.ap&&(s=ae(a.ap,n,i.config.lang||"EN")||""),t.textContent=l+(s?`${c}  ${s}`:`${c}`)}function li(e){for(let t=0;t<i.history.length;t++){const n=i.history[t];if(n&&n.type==="tcServed"&&n.seat===e&&n.ctx!=="repas")return n}return null}function he(e){const t=document.getElementById("mhTCInline");if(!t)return;const n=k[i.config.lang||"EN"],a=li(e),l=(n.chips_tc||"Tea & Coffee")+": ";if(!a){t.textContent=l+"";return}const o=a.ts||a.t||null,c=o?new Date(o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";let s="";a.ap&&(s=ae(a.ap,n,i.config.lang||"EN")||""),t.textContent=l+(s?`${c}  ${s}`:`${c}`)}function ii(){const e=document.getElementById("flightNo"),t=document.getElementById("flightDateISO"),n=document.getElementById("flightDate");i.title||(i.title={flightNo:"",date:""}),e&&(i.title.flightNo=(e.value||"").trim()),t&&t.value?i.title.date=t.value:n&&(i.title.date=n.value);const a=document.getElementById("labelViande"),l=document.getElementById("labelVege");i.menu||(i.menu={}),a&&(i.menu.viandeLabel=(a.value||"").trim()),l&&(i.menu.vegeLabel=(l.value||"").trim())}function oi(){typeof initFlightDatePicker=="function"&&initFlightDatePicker(),attachHeaderButtons==null||attachHeaderButtons(),St==null||St(),$e==null||$e()}function ci(){rt(),q(),U(),A();const e=document.getElementById("mealBlock");e&&!e.dataset.touchReady&&(e.addEventListener("touchstart",Pl,{passive:!0}),e.addEventListener("touchend",Kl,{passive:!0}),e.addEventListener("touchcancel",()=>{ge=null},{passive:!0}),e.dataset.touchReady="1")}function si(){setTooltips==null||setTooltips()}function ri(){init==null||init()}function di(){ii(),w()}function ui(){oi()}function fi(){si()}function mi(){ci()}async function pi(){try{navigator.storage&&navigator.storage.persist&&(await navigator.storage.persisted()||await navigator.storage.persist())}catch(e){console.warn("Persistent storage request failed:",e)}}const gi="swiss-serviceflow",yi=1,Ye="flights",Nt="meta",Za="lastKey",st="ssf::flight::",Xa="ssf::lastKey";let te=typeof window<"u"&&window.localStorage?window.localStorage:null;function hi(e){te=e}let Ht=null;function vi(){return typeof indexedDB<"u"}function ut(){return vi()?(Ht||(Ht=new Promise((e,t)=>{const n=indexedDB.open(gi,yi);n.onupgradeneeded=()=>{const a=n.result;a.objectStoreNames.contains(Ye)||a.createObjectStore(Ye,{keyPath:"id"}),a.objectStoreNames.contains(Nt)||a.createObjectStore(Nt,{keyPath:"key"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error??new Error("IndexedDB open failed"))})),Ht):Promise.reject(new Error("IndexedDB is not available"))}function pn(e,t,n,a){return new Promise((l,o)=>{const c=e.transaction(t,n),s=c.objectStore(t);try{a(s)}catch(r){o(r instanceof Error?r:new Error("IndexedDB transaction error"));return}c.oncomplete=()=>l(),c.onerror=()=>o(c.error??new Error("IndexedDB transaction failed")),c.onabort=()=>o(c.error??new Error("IndexedDB transaction aborted"))})}function Ya(e,t){return ut().then(n=>new Promise((a,l)=>{const s=n.transaction(e,"readonly").objectStore(e).get(t);s.onsuccess=()=>a(s.result),s.onerror=()=>l(s.error??new Error("IndexedDB get failed"))}))}function bi(e){return ut().then(t=>new Promise((n,a)=>{const c=t.transaction(e,"readonly").objectStore(e).getAllKeys();c.onsuccess=()=>{const s=c.result.map(r=>String(r));n(s)},c.onerror=()=>a(c.error??new Error("IndexedDB getAllKeys failed"))}))}function Ei(e,t){if(te)try{const n=JSON.stringify(t);te.setItem(`${st}${e}`,n)}catch(n){console.warn("Fallback save failed:",n)}}function Dn(e){if(!te)return null;try{const t=te.getItem(`${st}${e}`);return t?JSON.parse(t):null}catch(t){return console.warn("Fallback load failed:",t),null}}function ki(e){if(te)try{te.setItem(Xa,e)}catch(t){console.warn("Fallback setLastKey failed:",t)}}function An(){if(!te)return null;try{return te.getItem(Xa)??null}catch(e){return console.warn("Fallback getLastKey failed:",e),null}}function Mn(){if(!te)return[];try{const e=[];for(let t=0;t<te.length;t+=1){const n=te.key(t);n&&n.startsWith(st)&&e.push(n.replace(st,""))}return e}catch(e){return console.warn("Fallback listKeys failed:",e),[]}}function Ci(e){if(te)try{te.removeItem(`${st}${e}`)}catch(t){console.warn("Fallback deleteFlight failed:",t)}}async function xn(e,t){const n={id:e,payload:t,updatedAt:Date.now()};try{const a=await ut();await pn(a,Ye,"readwrite",l=>{l.put(n)})}catch(a){console.warn("[db] saveFlight falling back:",a),Ei(e,t)}}async function Si(e){try{const t=await ut();await pn(t,Ye,"readwrite",n=>{n.delete(e)})}catch(t){console.warn("[db] deleteFlight falling back:",t),Ci(e)}}async function Ti(e){try{const t=await Ya(Ye,e);return t?t.payload??null:Dn(e)}catch(t){return console.warn("[db] loadFlight falling back:",t),Dn(e)}}async function Jt(e){const t={key:Za,value:e,updatedAt:Date.now()};try{const n=await ut();await pn(n,Nt,"readwrite",a=>{a.put(t)})}catch(n){console.warn("[db] setLastFlightKey falling back:",n),ki(e)}}async function _i(){try{const e=await Ya(Nt,Za);return e?typeof e.value=="string"?e.value:null:An()}catch(e){return console.warn("[db] getLastFlightKey falling back:",e),An()}}async function Li(){try{const e=await bi(Ye);return e.length?e:Mn()}catch(e){return console.warn("[db] listFlightKeys falling back:",e),Mn()}}const Qa="serviceflow::",at=`${Qa}lastKey`;async function Bi(){if(typeof window>"u")return;const e=Storage.prototype.setItem,t=Storage.prototype.removeItem,n=Storage.prototype.getItem,a=window.localStorage;hi(a);try{for(let l=0;l<a.length;l+=1){const o=a.key(l);if(!o)continue;const c=n.call(a,o);if(c){if(o===at){Jt(c).catch(s=>console.warn("[persistence] setLastFlightKey failed during migration:",s));continue}if(vt(o))try{const s=JSON.parse(c);xn(o,s).catch(r=>console.warn("[persistence] saveFlight failed during migration:",r))}catch(s){console.warn("[persistence] migration parse error:",s)}}}}catch(l){console.warn("[persistence] migration failed:",l)}try{const l=await Li();for(const c of l)if(vt(c)&&!n.call(a,c)){const s=await Ti(c);s&&e.call(a,c,JSON.stringify(s))}const o=await _i();o&&e.call(a,at,o)}catch(l){console.warn("[persistence] preload failed:",l)}Storage.prototype.setItem=function(o,c){if(e.call(this,o,c),o===at){Jt(c).catch(s=>console.warn("[persistence] setLastFlightKey failed:",s));return}if(vt(o))try{const s=JSON.parse(c);xn(o,s).catch(r=>console.warn("[persistence] saveFlight failed:",r))}catch(s){console.warn("[persistence] saveFlight parse error:",s)}},Storage.prototype.removeItem=function(o){if(t.call(this,o),o===at){Jt("").catch(()=>{});return}vt(o)&&Si(o).catch(c=>console.warn("[persistence] deleteFlight failed:",c))}}function vt(e){return e.startsWith(Qa)&&e!==at}const Ii=1200;let Vt;function wi(){Vt!==void 0&&window.clearTimeout(Vt),Vt=window.setTimeout(()=>{try{di()}catch(e){console.warn("[autosave] persist failed:",e)}},Ii)}function Ni(e){const t=()=>wi();e.addEventListener("input",t,{capture:!0}),e.addEventListener("change",t,{capture:!0})}document.addEventListener("DOMContentLoaded",async()=>{await pi(),await Bi(),ui(),fi(),mi(),ri(),Ni(document)});
